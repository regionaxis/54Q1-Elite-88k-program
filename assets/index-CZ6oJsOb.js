(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function t(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(r){if(r.ep)return;r.ep=!0;const a=t(r);fetch(r.href,a)}})();function hS(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Ap={exports:{}},ql={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qv;function sw(){if(Qv)return ql;Qv=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,r,a){var u=null;if(a!==void 0&&(u=""+a),r.key!==void 0&&(u=""+r.key),"key"in r){a={};for(var d in r)d!=="key"&&(a[d]=r[d])}else a=r;return r=a.ref,{$$typeof:n,type:i,key:u,ref:r!==void 0?r:null,props:a}}return ql.Fragment=e,ql.jsx=t,ql.jsxs=t,ql}var Xv;function rw(){return Xv||(Xv=1,Ap.exports=sw()),Ap.exports}var se=rw(),Cp={exports:{}},Re={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wv;function aw(){if(Wv)return Re;Wv=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),T=Symbol.for("react.activity"),S=Symbol.iterator;function R(F){return F===null||typeof F!="object"?null:(F=S&&F[S]||F["@@iterator"],typeof F=="function"?F:null)}var V={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},G=Object.assign,L={};function Y(F,ie,ce){this.props=F,this.context=ie,this.refs=L,this.updater=ce||V}Y.prototype.isReactComponent={},Y.prototype.setState=function(F,ie){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,ie,"setState")},Y.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function ne(){}ne.prototype=Y.prototype;function j(F,ie,ce){this.props=F,this.context=ie,this.refs=L,this.updater=ce||V}var ae=j.prototype=new ne;ae.constructor=j,G(ae,Y.prototype),ae.isPureReactComponent=!0;var Q=Array.isArray;function ee(){}var M={H:null,A:null,T:null,S:null},N=Object.prototype.hasOwnProperty;function b(F,ie,ce){var he=ce.ref;return{$$typeof:n,type:F,key:ie,ref:he!==void 0?he:null,props:ce}}function x(F,ie){return b(F.type,ie,F.props)}function P(F){return typeof F=="object"&&F!==null&&F.$$typeof===n}function O(F){var ie={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(ce){return ie[ce]})}var D=/\/+/g;function Me(F,ie){return typeof F=="object"&&F!==null&&F.key!=null?O(""+F.key):ie.toString(36)}function st(F){switch(F.status){case"fulfilled":return F.value;case"rejected":throw F.reason;default:switch(typeof F.status=="string"?F.then(ee,ee):(F.status="pending",F.then(function(ie){F.status==="pending"&&(F.status="fulfilled",F.value=ie)},function(ie){F.status==="pending"&&(F.status="rejected",F.reason=ie)})),F.status){case"fulfilled":return F.value;case"rejected":throw F.reason}}throw F}function X(F,ie,ce,he,Ae){var De=typeof F;(De==="undefined"||De==="boolean")&&(F=null);var Be=!1;if(F===null)Be=!0;else switch(De){case"bigint":case"string":case"number":Be=!0;break;case"object":switch(F.$$typeof){case n:case e:Be=!0;break;case v:return Be=F._init,X(Be(F._payload),ie,ce,he,Ae)}}if(Be)return Ae=Ae(F),Be=he===""?"."+Me(F,0):he,Q(Ae)?(ce="",Be!=null&&(ce=Be.replace(D,"$&/")+"/"),X(Ae,ie,ce,"",function(Cs){return Cs})):Ae!=null&&(P(Ae)&&(Ae=x(Ae,ce+(Ae.key==null||F&&F.key===Ae.key?"":(""+Ae.key).replace(D,"$&/")+"/")+Be)),ie.push(Ae)),1;Be=0;var Pt=he===""?".":he+":";if(Q(F))for(var ct=0;ct<F.length;ct++)he=F[ct],De=Pt+Me(he,ct),Be+=X(he,ie,ce,De,Ae);else if(ct=R(F),typeof ct=="function")for(F=ct.call(F),ct=0;!(he=F.next()).done;)he=he.value,De=Pt+Me(he,ct++),Be+=X(he,ie,ce,De,Ae);else if(De==="object"){if(typeof F.then=="function")return X(st(F),ie,ce,he,Ae);throw ie=String(F),Error("Objects are not valid as a React child (found: "+(ie==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":ie)+"). If you meant to render a collection of children, use an array instead.")}return Be}function ue(F,ie,ce){if(F==null)return F;var he=[],Ae=0;return X(F,he,"","",function(De){return ie.call(ce,De,Ae++)}),he}function me(F){if(F._status===-1){var ie=F._result;ie=ie(),ie.then(function(ce){(F._status===0||F._status===-1)&&(F._status=1,F._result=ce)},function(ce){(F._status===0||F._status===-1)&&(F._status=2,F._result=ce)}),F._status===-1&&(F._status=0,F._result=ie)}if(F._status===1)return F._result.default;throw F._result}var Pe=typeof reportError=="function"?reportError:function(F){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ie=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof F=="object"&&F!==null&&typeof F.message=="string"?String(F.message):String(F),error:F});if(!window.dispatchEvent(ie))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",F);return}console.error(F)},Xe={map:ue,forEach:function(F,ie,ce){ue(F,function(){ie.apply(this,arguments)},ce)},count:function(F){var ie=0;return ue(F,function(){ie++}),ie},toArray:function(F){return ue(F,function(ie){return ie})||[]},only:function(F){if(!P(F))throw Error("React.Children.only expected to receive a single React element child.");return F}};return Re.Activity=T,Re.Children=Xe,Re.Component=Y,Re.Fragment=t,Re.Profiler=r,Re.PureComponent=j,Re.StrictMode=i,Re.Suspense=g,Re.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=M,Re.__COMPILER_RUNTIME={__proto__:null,c:function(F){return M.H.useMemoCache(F)}},Re.cache=function(F){return function(){return F.apply(null,arguments)}},Re.cacheSignal=function(){return null},Re.cloneElement=function(F,ie,ce){if(F==null)throw Error("The argument must be a React element, but you passed "+F+".");var he=G({},F.props),Ae=F.key;if(ie!=null)for(De in ie.key!==void 0&&(Ae=""+ie.key),ie)!N.call(ie,De)||De==="key"||De==="__self"||De==="__source"||De==="ref"&&ie.ref===void 0||(he[De]=ie[De]);var De=arguments.length-2;if(De===1)he.children=ce;else if(1<De){for(var Be=Array(De),Pt=0;Pt<De;Pt++)Be[Pt]=arguments[Pt+2];he.children=Be}return b(F.type,Ae,he)},Re.createContext=function(F){return F={$$typeof:u,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null},F.Provider=F,F.Consumer={$$typeof:a,_context:F},F},Re.createElement=function(F,ie,ce){var he,Ae={},De=null;if(ie!=null)for(he in ie.key!==void 0&&(De=""+ie.key),ie)N.call(ie,he)&&he!=="key"&&he!=="__self"&&he!=="__source"&&(Ae[he]=ie[he]);var Be=arguments.length-2;if(Be===1)Ae.children=ce;else if(1<Be){for(var Pt=Array(Be),ct=0;ct<Be;ct++)Pt[ct]=arguments[ct+2];Ae.children=Pt}if(F&&F.defaultProps)for(he in Be=F.defaultProps,Be)Ae[he]===void 0&&(Ae[he]=Be[he]);return b(F,De,Ae)},Re.createRef=function(){return{current:null}},Re.forwardRef=function(F){return{$$typeof:d,render:F}},Re.isValidElement=P,Re.lazy=function(F){return{$$typeof:v,_payload:{_status:-1,_result:F},_init:me}},Re.memo=function(F,ie){return{$$typeof:p,type:F,compare:ie===void 0?null:ie}},Re.startTransition=function(F){var ie=M.T,ce={};M.T=ce;try{var he=F(),Ae=M.S;Ae!==null&&Ae(ce,he),typeof he=="object"&&he!==null&&typeof he.then=="function"&&he.then(ee,Pe)}catch(De){Pe(De)}finally{ie!==null&&ce.types!==null&&(ie.types=ce.types),M.T=ie}},Re.unstable_useCacheRefresh=function(){return M.H.useCacheRefresh()},Re.use=function(F){return M.H.use(F)},Re.useActionState=function(F,ie,ce){return M.H.useActionState(F,ie,ce)},Re.useCallback=function(F,ie){return M.H.useCallback(F,ie)},Re.useContext=function(F){return M.H.useContext(F)},Re.useDebugValue=function(){},Re.useDeferredValue=function(F,ie){return M.H.useDeferredValue(F,ie)},Re.useEffect=function(F,ie){return M.H.useEffect(F,ie)},Re.useEffectEvent=function(F){return M.H.useEffectEvent(F)},Re.useId=function(){return M.H.useId()},Re.useImperativeHandle=function(F,ie,ce){return M.H.useImperativeHandle(F,ie,ce)},Re.useInsertionEffect=function(F,ie){return M.H.useInsertionEffect(F,ie)},Re.useLayoutEffect=function(F,ie){return M.H.useLayoutEffect(F,ie)},Re.useMemo=function(F,ie){return M.H.useMemo(F,ie)},Re.useOptimistic=function(F,ie){return M.H.useOptimistic(F,ie)},Re.useReducer=function(F,ie,ce){return M.H.useReducer(F,ie,ce)},Re.useRef=function(F){return M.H.useRef(F)},Re.useState=function(F){return M.H.useState(F)},Re.useSyncExternalStore=function(F,ie,ce){return M.H.useSyncExternalStore(F,ie,ce)},Re.useTransition=function(){return M.H.useTransition()},Re.version="19.2.4",Re}var Zv;function Dm(){return Zv||(Zv=1,Cp.exports=aw()),Cp.exports}var Lt=Dm();const lw=hS(Lt);var Ip={exports:{}},Bl={},Rp={exports:{}},wp={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jv;function uw(){return jv||(jv=1,(function(n){function e(X,ue){var me=X.length;X.push(ue);e:for(;0<me;){var Pe=me-1>>>1,Xe=X[Pe];if(0<r(Xe,ue))X[Pe]=ue,X[me]=Xe,me=Pe;else break e}}function t(X){return X.length===0?null:X[0]}function i(X){if(X.length===0)return null;var ue=X[0],me=X.pop();if(me!==ue){X[0]=me;e:for(var Pe=0,Xe=X.length,F=Xe>>>1;Pe<F;){var ie=2*(Pe+1)-1,ce=X[ie],he=ie+1,Ae=X[he];if(0>r(ce,me))he<Xe&&0>r(Ae,ce)?(X[Pe]=Ae,X[he]=me,Pe=he):(X[Pe]=ce,X[ie]=me,Pe=ie);else if(he<Xe&&0>r(Ae,me))X[Pe]=Ae,X[he]=me,Pe=he;else break e}}return ue}function r(X,ue){var me=X.sortIndex-ue.sortIndex;return me!==0?me:X.id-ue.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var u=Date,d=u.now();n.unstable_now=function(){return u.now()-d}}var g=[],p=[],v=1,T=null,S=3,R=!1,V=!1,G=!1,L=!1,Y=typeof setTimeout=="function"?setTimeout:null,ne=typeof clearTimeout=="function"?clearTimeout:null,j=typeof setImmediate<"u"?setImmediate:null;function ae(X){for(var ue=t(p);ue!==null;){if(ue.callback===null)i(p);else if(ue.startTime<=X)i(p),ue.sortIndex=ue.expirationTime,e(g,ue);else break;ue=t(p)}}function Q(X){if(G=!1,ae(X),!V)if(t(g)!==null)V=!0,ee||(ee=!0,O());else{var ue=t(p);ue!==null&&st(Q,ue.startTime-X)}}var ee=!1,M=-1,N=5,b=-1;function x(){return L?!0:!(n.unstable_now()-b<N)}function P(){if(L=!1,ee){var X=n.unstable_now();b=X;var ue=!0;try{e:{V=!1,G&&(G=!1,ne(M),M=-1),R=!0;var me=S;try{t:{for(ae(X),T=t(g);T!==null&&!(T.expirationTime>X&&x());){var Pe=T.callback;if(typeof Pe=="function"){T.callback=null,S=T.priorityLevel;var Xe=Pe(T.expirationTime<=X);if(X=n.unstable_now(),typeof Xe=="function"){T.callback=Xe,ae(X),ue=!0;break t}T===t(g)&&i(g),ae(X)}else i(g);T=t(g)}if(T!==null)ue=!0;else{var F=t(p);F!==null&&st(Q,F.startTime-X),ue=!1}}break e}finally{T=null,S=me,R=!1}ue=void 0}}finally{ue?O():ee=!1}}}var O;if(typeof j=="function")O=function(){j(P)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,Me=D.port2;D.port1.onmessage=P,O=function(){Me.postMessage(null)}}else O=function(){Y(P,0)};function st(X,ue){M=Y(function(){X(n.unstable_now())},ue)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(X){X.callback=null},n.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<X?Math.floor(1e3/X):5},n.unstable_getCurrentPriorityLevel=function(){return S},n.unstable_next=function(X){switch(S){case 1:case 2:case 3:var ue=3;break;default:ue=S}var me=S;S=ue;try{return X()}finally{S=me}},n.unstable_requestPaint=function(){L=!0},n.unstable_runWithPriority=function(X,ue){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var me=S;S=X;try{return ue()}finally{S=me}},n.unstable_scheduleCallback=function(X,ue,me){var Pe=n.unstable_now();switch(typeof me=="object"&&me!==null?(me=me.delay,me=typeof me=="number"&&0<me?Pe+me:Pe):me=Pe,X){case 1:var Xe=-1;break;case 2:Xe=250;break;case 5:Xe=1073741823;break;case 4:Xe=1e4;break;default:Xe=5e3}return Xe=me+Xe,X={id:v++,callback:ue,priorityLevel:X,startTime:me,expirationTime:Xe,sortIndex:-1},me>Pe?(X.sortIndex=me,e(p,X),t(g)===null&&X===t(p)&&(G?(ne(M),M=-1):G=!0,st(Q,me-Pe))):(X.sortIndex=Xe,e(g,X),V||R||(V=!0,ee||(ee=!0,O()))),X},n.unstable_shouldYield=x,n.unstable_wrapCallback=function(X){var ue=S;return function(){var me=S;S=ue;try{return X.apply(this,arguments)}finally{S=me}}}})(wp)),wp}var eT;function cw(){return eT||(eT=1,Rp.exports=uw()),Rp.exports}var Np={exports:{}},jt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tT;function fw(){if(tT)return jt;tT=1;var n=Dm();function e(g){var p="https://react.dev/errors/"+g;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)p+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+g+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},r=Symbol.for("react.portal");function a(g,p,v){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:T==null?null:""+T,children:g,containerInfo:p,implementation:v}}var u=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(g,p){if(g==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return jt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,jt.createPortal=function(g,p){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return a(g,p,null,v)},jt.flushSync=function(g){var p=u.T,v=i.p;try{if(u.T=null,i.p=2,g)return g()}finally{u.T=p,i.p=v,i.d.f()}},jt.preconnect=function(g,p){typeof g=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,i.d.C(g,p))},jt.prefetchDNS=function(g){typeof g=="string"&&i.d.D(g)},jt.preinit=function(g,p){if(typeof g=="string"&&p&&typeof p.as=="string"){var v=p.as,T=d(v,p.crossOrigin),S=typeof p.integrity=="string"?p.integrity:void 0,R=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;v==="style"?i.d.S(g,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:T,integrity:S,fetchPriority:R}):v==="script"&&i.d.X(g,{crossOrigin:T,integrity:S,fetchPriority:R,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},jt.preinitModule=function(g,p){if(typeof g=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var v=d(p.as,p.crossOrigin);i.d.M(g,{crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&i.d.M(g)},jt.preload=function(g,p){if(typeof g=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var v=p.as,T=d(v,p.crossOrigin);i.d.L(g,v,{crossOrigin:T,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},jt.preloadModule=function(g,p){if(typeof g=="string")if(p){var v=d(p.as,p.crossOrigin);i.d.m(g,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else i.d.m(g)},jt.requestFormReset=function(g){i.d.r(g)},jt.unstable_batchedUpdates=function(g,p){return g(p)},jt.useFormState=function(g,p,v){return u.H.useFormState(g,p,v)},jt.useFormStatus=function(){return u.H.useHostTransitionStatus()},jt.version="19.2.4",jt}var nT;function dw(){if(nT)return Np.exports;nT=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Np.exports=fw(),Np.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iT;function hw(){if(iT)return Bl;iT=1;var n=cw(),e=Dm(),t=dw();function i(o){var s="https://react.dev/errors/"+o;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)s+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+o+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function a(o){var s=o,l=o;if(o.alternate)for(;s.return;)s=s.return;else{o=s;do s=o,(s.flags&4098)!==0&&(l=s.return),o=s.return;while(o)}return s.tag===3?l:null}function u(o){if(o.tag===13){var s=o.memoizedState;if(s===null&&(o=o.alternate,o!==null&&(s=o.memoizedState)),s!==null)return s.dehydrated}return null}function d(o){if(o.tag===31){var s=o.memoizedState;if(s===null&&(o=o.alternate,o!==null&&(s=o.memoizedState)),s!==null)return s.dehydrated}return null}function g(o){if(a(o)!==o)throw Error(i(188))}function p(o){var s=o.alternate;if(!s){if(s=a(o),s===null)throw Error(i(188));return s!==o?null:o}for(var l=o,c=s;;){var y=l.return;if(y===null)break;var _=y.alternate;if(_===null){if(c=y.return,c!==null){l=c;continue}break}if(y.child===_.child){for(_=y.child;_;){if(_===l)return g(y),o;if(_===c)return g(y),s;_=_.sibling}throw Error(i(188))}if(l.return!==c.return)l=y,c=_;else{for(var A=!1,I=y.child;I;){if(I===l){A=!0,l=y,c=_;break}if(I===c){A=!0,c=y,l=_;break}I=I.sibling}if(!A){for(I=_.child;I;){if(I===l){A=!0,l=_,c=y;break}if(I===c){A=!0,c=_,l=y;break}I=I.sibling}if(!A)throw Error(i(189))}}if(l.alternate!==c)throw Error(i(190))}if(l.tag!==3)throw Error(i(188));return l.stateNode.current===l?o:s}function v(o){var s=o.tag;if(s===5||s===26||s===27||s===6)return o;for(o=o.child;o!==null;){if(s=v(o),s!==null)return s;o=o.sibling}return null}var T=Object.assign,S=Symbol.for("react.element"),R=Symbol.for("react.transitional.element"),V=Symbol.for("react.portal"),G=Symbol.for("react.fragment"),L=Symbol.for("react.strict_mode"),Y=Symbol.for("react.profiler"),ne=Symbol.for("react.consumer"),j=Symbol.for("react.context"),ae=Symbol.for("react.forward_ref"),Q=Symbol.for("react.suspense"),ee=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),b=Symbol.for("react.activity"),x=Symbol.for("react.memo_cache_sentinel"),P=Symbol.iterator;function O(o){return o===null||typeof o!="object"?null:(o=P&&o[P]||o["@@iterator"],typeof o=="function"?o:null)}var D=Symbol.for("react.client.reference");function Me(o){if(o==null)return null;if(typeof o=="function")return o.$$typeof===D?null:o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case G:return"Fragment";case Y:return"Profiler";case L:return"StrictMode";case Q:return"Suspense";case ee:return"SuspenseList";case b:return"Activity"}if(typeof o=="object")switch(o.$$typeof){case V:return"Portal";case j:return o.displayName||"Context";case ne:return(o._context.displayName||"Context")+".Consumer";case ae:var s=o.render;return o=o.displayName,o||(o=s.displayName||s.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case M:return s=o.displayName||null,s!==null?s:Me(o.type)||"Memo";case N:s=o._payload,o=o._init;try{return Me(o(s))}catch{}}return null}var st=Array.isArray,X=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ue=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,me={pending:!1,data:null,method:null,action:null},Pe=[],Xe=-1;function F(o){return{current:o}}function ie(o){0>Xe||(o.current=Pe[Xe],Pe[Xe]=null,Xe--)}function ce(o,s){Xe++,Pe[Xe]=o.current,o.current=s}var he=F(null),Ae=F(null),De=F(null),Be=F(null);function Pt(o,s){switch(ce(De,s),ce(Ae,o),ce(he,null),s.nodeType){case 9:case 11:o=(o=s.documentElement)&&(o=o.namespaceURI)?_v(o):0;break;default:if(o=s.tagName,s=s.namespaceURI)s=_v(s),o=vv(s,o);else switch(o){case"svg":o=1;break;case"math":o=2;break;default:o=0}}ie(he),ce(he,o)}function ct(){ie(he),ie(Ae),ie(De)}function Cs(o){o.memoizedState!==null&&ce(Be,o);var s=he.current,l=vv(s,o.type);s!==l&&(ce(Ae,o),ce(he,l))}function mr(o){Ae.current===o&&(ie(he),ie(Ae)),Be.current===o&&(ie(Be),kl._currentValue=me)}var gr,yr;function di(o){if(gr===void 0)try{throw Error()}catch(l){var s=l.stack.trim().match(/\n( *(at )?)/);gr=s&&s[1]||"",yr=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+gr+o+yr}var ka=!1;function Is(o,s){if(!o||ka)return"";ka=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(s){var te=function(){throw Error()};if(Object.defineProperty(te.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(te,[])}catch($){var J=$}Reflect.construct(o,[],te)}else{try{te.call()}catch($){J=$}o.call(te.prototype)}}else{try{throw Error()}catch($){J=$}(te=o())&&typeof te.catch=="function"&&te.catch(function(){})}}catch($){if($&&J&&typeof $.stack=="string")return[$.stack,J.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=c.DetermineComponentFrameRoot(),A=_[0],I=_[1];if(A&&I){var U=A.split(`
`),z=I.split(`
`);for(y=c=0;c<U.length&&!U[c].includes("DetermineComponentFrameRoot");)c++;for(;y<z.length&&!z[y].includes("DetermineComponentFrameRoot");)y++;if(c===U.length||y===z.length)for(c=U.length-1,y=z.length-1;1<=c&&0<=y&&U[c]!==z[y];)y--;for(;1<=c&&0<=y;c--,y--)if(U[c]!==z[y]){if(c!==1||y!==1)do if(c--,y--,0>y||U[c]!==z[y]){var W=`
`+U[c].replace(" at new "," at ");return o.displayName&&W.includes("<anonymous>")&&(W=W.replace("<anonymous>",o.displayName)),W}while(1<=c&&0<=y);break}}}finally{ka=!1,Error.prepareStackTrace=l}return(l=o?o.displayName||o.name:"")?di(l):""}function Oa(o,s){switch(o.tag){case 26:case 27:case 5:return di(o.type);case 16:return di("Lazy");case 13:return o.child!==s&&s!==null?di("Suspense Fallback"):di("Suspense");case 19:return di("SuspenseList");case 0:case 15:return Is(o.type,!1);case 11:return Is(o.type.render,!1);case 1:return Is(o.type,!0);case 31:return di("Activity");default:return""}}function Fa(o){try{var s="",l=null;do s+=Oa(o,l),l=o,o=o.return;while(o);return s}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var Et=Object.prototype.hasOwnProperty,Vt=n.unstable_scheduleCallback,To=n.unstable_cancelCallback,Id=n.unstable_shouldYield,Iu=n.unstable_requestPaint,an=n.unstable_now,Rs=n.unstable_getCurrentPriorityLevel,Ga=n.unstable_ImmediatePriority,qa=n.unstable_UserBlockingPriority,Eo=n.unstable_NormalPriority,Rd=n.unstable_LowPriority,Ru=n.unstable_IdlePriority,wu=n.log,Nu=n.unstable_setDisableYieldValue,$n=null,zt=null;function xn(o){if(typeof wu=="function"&&Nu(o),zt&&typeof zt.setStrictMode=="function")try{zt.setStrictMode($n,o)}catch{}}var gt=Math.clz32?Math.clz32:Mu,bu=Math.log,_r=Math.LN2;function Mu(o){return o>>>=0,o===0?32:31-(bu(o)/_r|0)|0}var hi=256,ws=262144,St=4194304;function pi(o){var s=o&42;if(s!==0)return s;switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return o&261888;case 262144:case 524288:case 1048576:case 2097152:return o&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return o&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return o}}function mi(o,s,l){var c=o.pendingLanes;if(c===0)return 0;var y=0,_=o.suspendedLanes,A=o.pingedLanes;o=o.warmLanes;var I=c&134217727;return I!==0?(c=I&~_,c!==0?y=pi(c):(A&=I,A!==0?y=pi(A):l||(l=I&~o,l!==0&&(y=pi(l))))):(I=c&~_,I!==0?y=pi(I):A!==0?y=pi(A):l||(l=c&~o,l!==0&&(y=pi(l)))),y===0?0:s!==0&&s!==y&&(s&_)===0&&(_=y&-y,l=s&-s,_>=l||_===32&&(l&4194048)!==0)?s:y}function Qn(o,s){return(o.pendingLanes&~(o.suspendedLanes&~o.pingedLanes)&s)===0}function wd(o,s){switch(o){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Du(){var o=St;return St<<=1,(St&62914560)===0&&(St=4194304),o}function gi(o){for(var s=[],l=0;31>l;l++)s.push(o);return s}function Ns(o,s){o.pendingLanes|=s,s!==268435456&&(o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0)}function Nd(o,s,l,c,y,_){var A=o.pendingLanes;o.pendingLanes=l,o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0,o.expiredLanes&=l,o.entangledLanes&=l,o.errorRecoveryDisabledLanes&=l,o.shellSuspendCounter=0;var I=o.entanglements,U=o.expirationTimes,z=o.hiddenUpdates;for(l=A&~l;0<l;){var W=31-gt(l),te=1<<W;I[W]=0,U[W]=-1;var J=z[W];if(J!==null)for(z[W]=null,W=0;W<J.length;W++){var $=J[W];$!==null&&($.lane&=-536870913)}l&=~te}c!==0&&bs(o,c,0),_!==0&&y===0&&o.tag!==0&&(o.suspendedLanes|=_&~(A&~s))}function bs(o,s,l){o.pendingLanes|=s,o.suspendedLanes&=~s;var c=31-gt(s);o.entangledLanes|=s,o.entanglements[c]=o.entanglements[c]|1073741824|l&261930}function Ba(o,s){var l=o.entangledLanes|=s;for(o=o.entanglements;l;){var c=31-gt(l),y=1<<c;y&s|o[c]&s&&(o[c]|=s),l&=~y}}function Ha(o,s){var l=s&-s;return l=(l&42)!==0?1:Ms(l),(l&(o.suspendedLanes|s))!==0?0:l}function Ms(o){switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=128;break;case 268435456:o=134217728;break;default:o=0}return o}function Hi(o){return o&=-o,2<o?8<o?(o&134217727)!==0?32:268435456:8:2}function xu(){var o=ue.p;return o!==0?o:(o=window.event,o===void 0?32:Bv(o.type))}function Xn(o,s){var l=ue.p;try{return ue.p=o,s()}finally{ue.p=l}}var Wn=Math.random().toString(36).slice(2),At="__reactFiber$"+Wn,Ft="__reactProps$"+Wn,yi="__reactContainer$"+Wn,vr="__reactEvents$"+Wn,bd="__reactListeners$"+Wn,Pu="__reactHandles$"+Wn,Vu="__reactResources$"+Wn,_i="__reactMarker$"+Wn;function Tr(o){delete o[At],delete o[Ft],delete o[vr],delete o[bd],delete o[Pu]}function vi(o){var s=o[At];if(s)return s;for(var l=o.parentNode;l;){if(s=l[yi]||l[At]){if(l=s.alternate,s.child!==null||l!==null&&l.child!==null)for(o=Rv(o);o!==null;){if(l=o[At])return l;o=Rv(o)}return s}o=l,l=o.parentNode}return null}function Pn(o){if(o=o[At]||o[yi]){var s=o.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return o}return null}function Sn(o){var s=o.tag;if(s===5||s===26||s===27||s===6)return o.stateNode;throw Error(i(33))}function Ti(o){var s=o[Vu];return s||(s=o[Vu]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Ct(o){o[_i]=!0}var za=new Set,Ja={};function Ei(o,s){Si(o,s),Si(o+"Capture",s)}function Si(o,s){for(Ja[o]=s,o=0;o<s.length;o++)za.add(s[o])}var Ka=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ya={},$a={};function Uu(o){return Et.call($a,o)?!0:Et.call(Ya,o)?!1:Ka.test(o)?$a[o]=!0:(Ya[o]=!0,!1)}function Er(o,s,l){if(Uu(s))if(l===null)o.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":o.removeAttribute(s);return;case"boolean":var c=s.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){o.removeAttribute(s);return}}o.setAttribute(s,""+l)}}function An(o,s,l){if(l===null)o.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(s);return}o.setAttribute(s,""+l)}}function It(o,s,l,c){if(c===null)o.removeAttribute(l);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(l);return}o.setAttributeNS(s,l,""+c)}}function Gt(o){switch(typeof o){case"bigint":case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function So(o){var s=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Qa(o,s,l){var c=Object.getOwnPropertyDescriptor(o.constructor.prototype,s);if(!o.hasOwnProperty(s)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var y=c.get,_=c.set;return Object.defineProperty(o,s,{configurable:!0,get:function(){return y.call(this)},set:function(A){l=""+A,_.call(this,A)}}),Object.defineProperty(o,s,{enumerable:c.enumerable}),{getValue:function(){return l},setValue:function(A){l=""+A},stopTracking:function(){o._valueTracker=null,delete o[s]}}}}function We(o){if(!o._valueTracker){var s=So(o)?"checked":"value";o._valueTracker=Qa(o,s,""+o[s])}}function Ds(o){if(!o)return!1;var s=o._valueTracker;if(!s)return!0;var l=s.getValue(),c="";return o&&(c=So(o)?o.checked?"true":"false":o.value),o=c,o!==l?(s.setValue(o),!0):!1}function Ai(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}var xs=/[\n"\\]/g;function dn(o){return o.replace(xs,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Sr(o,s,l,c,y,_,A,I){o.name="",A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?o.type=A:o.removeAttribute("type"),s!=null?A==="number"?(s===0&&o.value===""||o.value!=s)&&(o.value=""+Gt(s)):o.value!==""+Gt(s)&&(o.value=""+Gt(s)):A!=="submit"&&A!=="reset"||o.removeAttribute("value"),s!=null?Xa(o,A,Gt(s)):l!=null?Xa(o,A,Gt(l)):c!=null&&o.removeAttribute("value"),y==null&&_!=null&&(o.defaultChecked=!!_),y!=null&&(o.checked=y&&typeof y!="function"&&typeof y!="symbol"),I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"?o.name=""+Gt(I):o.removeAttribute("name")}function Lu(o,s,l,c,y,_,A,I){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(o.type=_),s!=null||l!=null){if(!(_!=="submit"&&_!=="reset"||s!=null)){We(o);return}l=l!=null?""+Gt(l):"",s=s!=null?""+Gt(s):l,I||s===o.value||(o.value=s),o.defaultValue=s}c=c??y,c=typeof c!="function"&&typeof c!="symbol"&&!!c,o.checked=I?o.checked:!!c,o.defaultChecked=!!c,A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(o.name=A),We(o)}function Xa(o,s,l){s==="number"&&Ai(o.ownerDocument)===o||o.defaultValue===""+l||(o.defaultValue=""+l)}function Ao(o,s,l,c){if(o=o.options,s){s={};for(var y=0;y<l.length;y++)s["$"+l[y]]=!0;for(l=0;l<o.length;l++)y=s.hasOwnProperty("$"+o[l].value),o[l].selected!==y&&(o[l].selected=y),y&&c&&(o[l].defaultSelected=!0)}else{for(l=""+Gt(l),s=null,y=0;y<o.length;y++){if(o[y].value===l){o[y].selected=!0,c&&(o[y].defaultSelected=!0);return}s!==null||o[y].disabled||(s=o[y])}s!==null&&(s.selected=!0)}}function ku(o,s,l){if(s!=null&&(s=""+Gt(s),s!==o.value&&(o.value=s),l==null)){o.defaultValue!==s&&(o.defaultValue=s);return}o.defaultValue=l!=null?""+Gt(l):""}function Co(o,s,l,c){if(s==null){if(c!=null){if(l!=null)throw Error(i(92));if(st(c)){if(1<c.length)throw Error(i(93));c=c[0]}l=c}l==null&&(l=""),s=l}l=Gt(s),o.defaultValue=l,c=o.textContent,c===l&&c!==""&&c!==null&&(o.value=c),We(o)}function hn(o,s){if(s){var l=o.firstChild;if(l&&l===o.lastChild&&l.nodeType===3){l.nodeValue=s;return}}o.textContent=s}var Ou=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Wa(o,s,l){var c=s.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?c?o.setProperty(s,""):s==="float"?o.cssFloat="":o[s]="":c?o.setProperty(s,l):typeof l!="number"||l===0||Ou.has(s)?s==="float"?o.cssFloat=l:o[s]=(""+l).trim():o[s]=l+"px"}function Za(o,s,l){if(s!=null&&typeof s!="object")throw Error(i(62));if(o=o.style,l!=null){for(var c in l)!l.hasOwnProperty(c)||s!=null&&s.hasOwnProperty(c)||(c.indexOf("--")===0?o.setProperty(c,""):c==="float"?o.cssFloat="":o[c]="");for(var y in s)c=s[y],s.hasOwnProperty(y)&&l[y]!==c&&Wa(o,y,c)}else for(var _ in s)s.hasOwnProperty(_)&&Wa(o,_,s[_])}function Ar(o){if(o.indexOf("-")===-1)return!1;switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Fu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Io=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Cr(o){return Io.test(""+o)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":o}function Zn(){}var ja=null;function Vn(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var Ro=null,Ci=null;function Ps(o){var s=Pn(o);if(s&&(o=s.stateNode)){var l=o[Ft]||null;e:switch(o=s.stateNode,s.type){case"input":if(Sr(o,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),s=l.name,l.type==="radio"&&s!=null){for(l=o;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+dn(""+s)+'"][type="radio"]'),s=0;s<l.length;s++){var c=l[s];if(c!==o&&c.form===o.form){var y=c[Ft]||null;if(!y)throw Error(i(90));Sr(c,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(s=0;s<l.length;s++)c=l[s],c.form===o.form&&Ds(c)}break e;case"textarea":ku(o,l.value,l.defaultValue);break e;case"select":s=l.value,s!=null&&Ao(o,!!l.multiple,s,!1)}}}var Ir=!1;function wo(o,s,l){if(Ir)return o(s,l);Ir=!0;try{var c=o(s);return c}finally{if(Ir=!1,(Ro!==null||Ci!==null)&&(xc(),Ro&&(s=Ro,o=Ci,Ci=Ro=null,Ps(s),o)))for(s=0;s<o.length;s++)Ps(o[s])}}function jn(o,s){var l=o.stateNode;if(l===null)return null;var c=l[Ft]||null;if(c===null)return null;l=c[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(o=o.type,c=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!c;break e;default:o=!1}if(o)return null;if(l&&typeof l!="function")throw Error(i(231,s,typeof l));return l}var Un=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Vs=!1;if(Un)try{var et={};Object.defineProperty(et,"passive",{get:function(){Vs=!0}}),window.addEventListener("test",et,et),window.removeEventListener("test",et,et)}catch{Vs=!1}var Ii=null,el=null,Us=null;function tl(){if(Us)return Us;var o,s=el,l=s.length,c,y="value"in Ii?Ii.value:Ii.textContent,_=y.length;for(o=0;o<l&&s[o]===y[o];o++);var A=l-o;for(c=1;c<=A&&s[l-c]===y[_-c];c++);return Us=y.slice(o,1<c?1-c:void 0)}function Ls(o){var s=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&s===13&&(o=13)):o=s,o===10&&(o=13),32<=o||o===13?o:0}function zi(){return!0}function ei(){return!1}function Jt(o){function s(l,c,y,_,A){this._reactName=l,this._targetInst=y,this.type=c,this.nativeEvent=_,this.target=A,this.currentTarget=null;for(var I in o)o.hasOwnProperty(I)&&(l=o[I],this[I]=l?l(_):_[I]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?zi:ei,this.isPropagationStopped=ei,this}return T(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=zi)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=zi)},persist:function(){},isPersistent:zi}),s}var Ji={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ri=Jt(Ji),No=T({},Ji,{view:0,detail:0}),nl=Jt(No),bo,Rr,wi,wr=T({},No,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Mo,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==wi&&(wi&&o.type==="mousemove"?(bo=o.screenX-wi.screenX,Rr=o.screenY-wi.screenY):Rr=bo=0,wi=o),bo)},movementY:function(o){return"movementY"in o?o.movementY:Rr}}),il=Jt(wr),ks=T({},wr,{dataTransfer:0}),Gu=Jt(ks),qu=T({},No,{relatedTarget:0}),Os=Jt(qu),ol=T({},Ji,{animationName:0,elapsedTime:0,pseudoElement:0}),Bu=Jt(ol),Nr=T({},Ji,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),Hu=Jt(Nr),zu=T({},Ji,{data:0}),Ni=Jt(zu),Ju={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ku={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Yu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function $u(o){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(o):(o=Yu[o])?!!s[o]:!1}function Mo(){return $u}var ln=T({},No,{key:function(o){if(o.key){var s=Ju[o.key]||o.key;if(s!=="Unidentified")return s}return o.type==="keypress"?(o=Ls(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?Ku[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Mo,charCode:function(o){return o.type==="keypress"?Ls(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?Ls(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),Qu=Jt(ln),Xu=T({},wr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ki=Jt(Xu),m=T({},No,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Mo}),E=Jt(m),C=T({},Ji,{propertyName:0,elapsedTime:0,pseudoElement:0}),w=Jt(C),B=T({},wr,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),K=Jt(B),le=T({},Ji,{newState:0,oldState:0}),Ne=Jt(le),yt=[9,13,27,32],Ye=Un&&"CompositionEvent"in window,ft=null;Un&&"documentMode"in document&&(ft=document.documentMode);var Ln=Un&&"TextEvent"in window&&!ft,bi=Un&&(!Ye||ft&&8<ft&&11>=ft),ti=" ",ni=!1;function Fs(o,s){switch(o){case"keyup":return yt.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function br(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var Mr=!1;function bI(o,s){switch(o){case"compositionend":return br(s);case"keypress":return s.which!==32?null:(ni=!0,ti);case"textInput":return o=s.data,o===ti&&ni?null:o;default:return null}}function MI(o,s){if(Mr)return o==="compositionend"||!Ye&&Fs(o,s)?(o=tl(),Us=el=Ii=null,Mr=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return bi&&s.locale!=="ko"?null:s.data;default:return null}}var DI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function bg(o){var s=o&&o.nodeName&&o.nodeName.toLowerCase();return s==="input"?!!DI[o.type]:s==="textarea"}function Mg(o,s,l,c){Ro?Ci?Ci.push(c):Ci=[c]:Ro=c,s=Fc(s,"onChange"),0<s.length&&(l=new Ri("onChange","change",null,l,c),o.push({event:l,listeners:s}))}var sl=null,rl=null;function xI(o){dv(o,0)}function Wu(o){var s=Sn(o);if(Ds(s))return o}function Dg(o,s){if(o==="change")return s}var xg=!1;if(Un){var Md;if(Un){var Dd="oninput"in document;if(!Dd){var Pg=document.createElement("div");Pg.setAttribute("oninput","return;"),Dd=typeof Pg.oninput=="function"}Md=Dd}else Md=!1;xg=Md&&(!document.documentMode||9<document.documentMode)}function Vg(){sl&&(sl.detachEvent("onpropertychange",Ug),rl=sl=null)}function Ug(o){if(o.propertyName==="value"&&Wu(rl)){var s=[];Mg(s,rl,o,Vn(o)),wo(xI,s)}}function PI(o,s,l){o==="focusin"?(Vg(),sl=s,rl=l,sl.attachEvent("onpropertychange",Ug)):o==="focusout"&&Vg()}function VI(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return Wu(rl)}function UI(o,s){if(o==="click")return Wu(s)}function LI(o,s){if(o==="input"||o==="change")return Wu(s)}function kI(o,s){return o===s&&(o!==0||1/o===1/s)||o!==o&&s!==s}var Cn=typeof Object.is=="function"?Object.is:kI;function al(o,s){if(Cn(o,s))return!0;if(typeof o!="object"||o===null||typeof s!="object"||s===null)return!1;var l=Object.keys(o),c=Object.keys(s);if(l.length!==c.length)return!1;for(c=0;c<l.length;c++){var y=l[c];if(!Et.call(s,y)||!Cn(o[y],s[y]))return!1}return!0}function Lg(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function kg(o,s){var l=Lg(o);o=0;for(var c;l;){if(l.nodeType===3){if(c=o+l.textContent.length,o<=s&&c>=s)return{node:l,offset:s-o};o=c}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Lg(l)}}function Og(o,s){return o&&s?o===s?!0:o&&o.nodeType===3?!1:s&&s.nodeType===3?Og(o,s.parentNode):"contains"in o?o.contains(s):o.compareDocumentPosition?!!(o.compareDocumentPosition(s)&16):!1:!1}function Fg(o){o=o!=null&&o.ownerDocument!=null&&o.ownerDocument.defaultView!=null?o.ownerDocument.defaultView:window;for(var s=Ai(o.document);s instanceof o.HTMLIFrameElement;){try{var l=typeof s.contentWindow.location.href=="string"}catch{l=!1}if(l)o=s.contentWindow;else break;s=Ai(o.document)}return s}function xd(o){var s=o&&o.nodeName&&o.nodeName.toLowerCase();return s&&(s==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||s==="textarea"||o.contentEditable==="true")}var OI=Un&&"documentMode"in document&&11>=document.documentMode,Dr=null,Pd=null,ll=null,Vd=!1;function Gg(o,s,l){var c=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Vd||Dr==null||Dr!==Ai(c)||(c=Dr,"selectionStart"in c&&xd(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),ll&&al(ll,c)||(ll=c,c=Fc(Pd,"onSelect"),0<c.length&&(s=new Ri("onSelect","select",null,s,l),o.push({event:s,listeners:c}),s.target=Dr)))}function Gs(o,s){var l={};return l[o.toLowerCase()]=s.toLowerCase(),l["Webkit"+o]="webkit"+s,l["Moz"+o]="moz"+s,l}var xr={animationend:Gs("Animation","AnimationEnd"),animationiteration:Gs("Animation","AnimationIteration"),animationstart:Gs("Animation","AnimationStart"),transitionrun:Gs("Transition","TransitionRun"),transitionstart:Gs("Transition","TransitionStart"),transitioncancel:Gs("Transition","TransitionCancel"),transitionend:Gs("Transition","TransitionEnd")},Ud={},qg={};Un&&(qg=document.createElement("div").style,"AnimationEvent"in window||(delete xr.animationend.animation,delete xr.animationiteration.animation,delete xr.animationstart.animation),"TransitionEvent"in window||delete xr.transitionend.transition);function qs(o){if(Ud[o])return Ud[o];if(!xr[o])return o;var s=xr[o],l;for(l in s)if(s.hasOwnProperty(l)&&l in qg)return Ud[o]=s[l];return o}var Bg=qs("animationend"),Hg=qs("animationiteration"),zg=qs("animationstart"),FI=qs("transitionrun"),GI=qs("transitionstart"),qI=qs("transitioncancel"),Jg=qs("transitionend"),Kg=new Map,Ld="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ld.push("scrollEnd");function ii(o,s){Kg.set(o,s),Ei(s,[o])}var Zu=typeof reportError=="function"?reportError:function(o){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof o=="object"&&o!==null&&typeof o.message=="string"?String(o.message):String(o),error:o});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",o);return}console.error(o)},kn=[],Pr=0,kd=0;function ju(){for(var o=Pr,s=kd=Pr=0;s<o;){var l=kn[s];kn[s++]=null;var c=kn[s];kn[s++]=null;var y=kn[s];kn[s++]=null;var _=kn[s];if(kn[s++]=null,c!==null&&y!==null){var A=c.pending;A===null?y.next=y:(y.next=A.next,A.next=y),c.pending=y}_!==0&&Yg(l,y,_)}}function ec(o,s,l,c){kn[Pr++]=o,kn[Pr++]=s,kn[Pr++]=l,kn[Pr++]=c,kd|=c,o.lanes|=c,o=o.alternate,o!==null&&(o.lanes|=c)}function Od(o,s,l,c){return ec(o,s,l,c),tc(o)}function Bs(o,s){return ec(o,null,null,s),tc(o)}function Yg(o,s,l){o.lanes|=l;var c=o.alternate;c!==null&&(c.lanes|=l);for(var y=!1,_=o.return;_!==null;)_.childLanes|=l,c=_.alternate,c!==null&&(c.childLanes|=l),_.tag===22&&(o=_.stateNode,o===null||o._visibility&1||(y=!0)),o=_,_=_.return;return o.tag===3?(_=o.stateNode,y&&s!==null&&(y=31-gt(l),o=_.hiddenUpdates,c=o[y],c===null?o[y]=[s]:c.push(s),s.lane=l|536870912),_):null}function tc(o){if(50<Ml)throw Ml=0,Yh=null,Error(i(185));for(var s=o.return;s!==null;)o=s,s=o.return;return o.tag===3?o.stateNode:null}var Vr={};function BI(o,s,l,c){this.tag=o,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function In(o,s,l,c){return new BI(o,s,l,c)}function Fd(o){return o=o.prototype,!(!o||!o.isReactComponent)}function Yi(o,s){var l=o.alternate;return l===null?(l=In(o.tag,s,o.key,o.mode),l.elementType=o.elementType,l.type=o.type,l.stateNode=o.stateNode,l.alternate=o,o.alternate=l):(l.pendingProps=s,l.type=o.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=o.flags&65011712,l.childLanes=o.childLanes,l.lanes=o.lanes,l.child=o.child,l.memoizedProps=o.memoizedProps,l.memoizedState=o.memoizedState,l.updateQueue=o.updateQueue,s=o.dependencies,l.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},l.sibling=o.sibling,l.index=o.index,l.ref=o.ref,l.refCleanup=o.refCleanup,l}function $g(o,s){o.flags&=65011714;var l=o.alternate;return l===null?(o.childLanes=0,o.lanes=s,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,s=l.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),o}function nc(o,s,l,c,y,_){var A=0;if(c=o,typeof o=="function")Fd(o)&&(A=1);else if(typeof o=="string")A=YR(o,l,he.current)?26:o==="html"||o==="head"||o==="body"?27:5;else e:switch(o){case b:return o=In(31,l,s,y),o.elementType=b,o.lanes=_,o;case G:return Hs(l.children,y,_,s);case L:A=8,y|=24;break;case Y:return o=In(12,l,s,y|2),o.elementType=Y,o.lanes=_,o;case Q:return o=In(13,l,s,y),o.elementType=Q,o.lanes=_,o;case ee:return o=In(19,l,s,y),o.elementType=ee,o.lanes=_,o;default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case j:A=10;break e;case ne:A=9;break e;case ae:A=11;break e;case M:A=14;break e;case N:A=16,c=null;break e}A=29,l=Error(i(130,o===null?"null":typeof o,"")),c=null}return s=In(A,l,s,y),s.elementType=o,s.type=c,s.lanes=_,s}function Hs(o,s,l,c){return o=In(7,o,c,s),o.lanes=l,o}function Gd(o,s,l){return o=In(6,o,null,s),o.lanes=l,o}function Qg(o){var s=In(18,null,null,0);return s.stateNode=o,s}function qd(o,s,l){return s=In(4,o.children!==null?o.children:[],o.key,s),s.lanes=l,s.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},s}var Xg=new WeakMap;function On(o,s){if(typeof o=="object"&&o!==null){var l=Xg.get(o);return l!==void 0?l:(s={value:o,source:s,stack:Fa(s)},Xg.set(o,s),s)}return{value:o,source:s,stack:Fa(s)}}var Ur=[],Lr=0,ic=null,ul=0,Fn=[],Gn=0,Do=null,Mi=1,Di="";function $i(o,s){Ur[Lr++]=ul,Ur[Lr++]=ic,ic=o,ul=s}function Wg(o,s,l){Fn[Gn++]=Mi,Fn[Gn++]=Di,Fn[Gn++]=Do,Do=o;var c=Mi;o=Di;var y=32-gt(c)-1;c&=~(1<<y),l+=1;var _=32-gt(s)+y;if(30<_){var A=y-y%5;_=(c&(1<<A)-1).toString(32),c>>=A,y-=A,Mi=1<<32-gt(s)+y|l<<y|c,Di=_+o}else Mi=1<<_|l<<y|c,Di=o}function Bd(o){o.return!==null&&($i(o,1),Wg(o,1,0))}function Hd(o){for(;o===ic;)ic=Ur[--Lr],Ur[Lr]=null,ul=Ur[--Lr],Ur[Lr]=null;for(;o===Do;)Do=Fn[--Gn],Fn[Gn]=null,Di=Fn[--Gn],Fn[Gn]=null,Mi=Fn[--Gn],Fn[Gn]=null}function Zg(o,s){Fn[Gn++]=Mi,Fn[Gn++]=Di,Fn[Gn++]=Do,Mi=s.id,Di=s.overflow,Do=o}var Kt=null,rt=null,qe=!1,xo=null,qn=!1,zd=Error(i(519));function Po(o){var s=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw cl(On(s,o)),zd}function jg(o){var s=o.stateNode,l=o.type,c=o.memoizedProps;switch(s[At]=o,s[Ft]=c,l){case"dialog":Ue("cancel",s),Ue("close",s);break;case"iframe":case"object":case"embed":Ue("load",s);break;case"video":case"audio":for(l=0;l<xl.length;l++)Ue(xl[l],s);break;case"source":Ue("error",s);break;case"img":case"image":case"link":Ue("error",s),Ue("load",s);break;case"details":Ue("toggle",s);break;case"input":Ue("invalid",s),Lu(s,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":Ue("invalid",s);break;case"textarea":Ue("invalid",s),Co(s,c.value,c.defaultValue,c.children)}l=c.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||s.textContent===""+l||c.suppressHydrationWarning===!0||gv(s.textContent,l)?(c.popover!=null&&(Ue("beforetoggle",s),Ue("toggle",s)),c.onScroll!=null&&Ue("scroll",s),c.onScrollEnd!=null&&Ue("scrollend",s),c.onClick!=null&&(s.onclick=Zn),s=!0):s=!1,s||Po(o,!0)}function ey(o){for(Kt=o.return;Kt;)switch(Kt.tag){case 5:case 31:case 13:qn=!1;return;case 27:case 3:qn=!0;return;default:Kt=Kt.return}}function kr(o){if(o!==Kt)return!1;if(!qe)return ey(o),qe=!0,!1;var s=o.tag,l;if((l=s!==3&&s!==27)&&((l=s===5)&&(l=o.type,l=!(l!=="form"&&l!=="button")||lp(o.type,o.memoizedProps)),l=!l),l&&rt&&Po(o),ey(o),s===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(i(317));rt=Iv(o)}else if(s===31){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(i(317));rt=Iv(o)}else s===27?(s=rt,Yo(o.type)?(o=hp,hp=null,rt=o):rt=s):rt=Kt?Hn(o.stateNode.nextSibling):null;return!0}function zs(){rt=Kt=null,qe=!1}function Jd(){var o=xo;return o!==null&&(yn===null?yn=o:yn.push.apply(yn,o),xo=null),o}function cl(o){xo===null?xo=[o]:xo.push(o)}var Kd=F(null),Js=null,Qi=null;function Vo(o,s,l){ce(Kd,s._currentValue),s._currentValue=l}function Xi(o){o._currentValue=Kd.current,ie(Kd)}function Yd(o,s,l){for(;o!==null;){var c=o.alternate;if((o.childLanes&s)!==s?(o.childLanes|=s,c!==null&&(c.childLanes|=s)):c!==null&&(c.childLanes&s)!==s&&(c.childLanes|=s),o===l)break;o=o.return}}function $d(o,s,l,c){var y=o.child;for(y!==null&&(y.return=o);y!==null;){var _=y.dependencies;if(_!==null){var A=y.child;_=_.firstContext;e:for(;_!==null;){var I=_;_=y;for(var U=0;U<s.length;U++)if(I.context===s[U]){_.lanes|=l,I=_.alternate,I!==null&&(I.lanes|=l),Yd(_.return,l,o),c||(A=null);break e}_=I.next}}else if(y.tag===18){if(A=y.return,A===null)throw Error(i(341));A.lanes|=l,_=A.alternate,_!==null&&(_.lanes|=l),Yd(A,l,o),A=null}else A=y.child;if(A!==null)A.return=y;else for(A=y;A!==null;){if(A===o){A=null;break}if(y=A.sibling,y!==null){y.return=A.return,A=y;break}A=A.return}y=A}}function Or(o,s,l,c){o=null;for(var y=s,_=!1;y!==null;){if(!_){if((y.flags&524288)!==0)_=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var A=y.alternate;if(A===null)throw Error(i(387));if(A=A.memoizedProps,A!==null){var I=y.type;Cn(y.pendingProps.value,A.value)||(o!==null?o.push(I):o=[I])}}else if(y===Be.current){if(A=y.alternate,A===null)throw Error(i(387));A.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(o!==null?o.push(kl):o=[kl])}y=y.return}o!==null&&$d(s,o,l,c),s.flags|=262144}function oc(o){for(o=o.firstContext;o!==null;){if(!Cn(o.context._currentValue,o.memoizedValue))return!0;o=o.next}return!1}function Ks(o){Js=o,Qi=null,o=o.dependencies,o!==null&&(o.firstContext=null)}function Yt(o){return ty(Js,o)}function sc(o,s){return Js===null&&Ks(o),ty(o,s)}function ty(o,s){var l=s._currentValue;if(s={context:s,memoizedValue:l,next:null},Qi===null){if(o===null)throw Error(i(308));Qi=s,o.dependencies={lanes:0,firstContext:s},o.flags|=524288}else Qi=Qi.next=s;return l}var HI=typeof AbortController<"u"?AbortController:function(){var o=[],s=this.signal={aborted:!1,addEventListener:function(l,c){o.push(c)}};this.abort=function(){s.aborted=!0,o.forEach(function(l){return l()})}},zI=n.unstable_scheduleCallback,JI=n.unstable_NormalPriority,Rt={$$typeof:j,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Qd(){return{controller:new HI,data:new Map,refCount:0}}function fl(o){o.refCount--,o.refCount===0&&zI(JI,function(){o.controller.abort()})}var dl=null,Xd=0,Fr=0,Gr=null;function KI(o,s){if(dl===null){var l=dl=[];Xd=0,Fr=jh(),Gr={status:"pending",value:void 0,then:function(c){l.push(c)}}}return Xd++,s.then(ny,ny),s}function ny(){if(--Xd===0&&dl!==null){Gr!==null&&(Gr.status="fulfilled");var o=dl;dl=null,Fr=0,Gr=null;for(var s=0;s<o.length;s++)(0,o[s])()}}function YI(o,s){var l=[],c={status:"pending",value:null,reason:null,then:function(y){l.push(y)}};return o.then(function(){c.status="fulfilled",c.value=s;for(var y=0;y<l.length;y++)(0,l[y])(s)},function(y){for(c.status="rejected",c.reason=y,y=0;y<l.length;y++)(0,l[y])(void 0)}),c}var iy=X.S;X.S=function(o,s){G_=an(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&KI(o,s),iy!==null&&iy(o,s)};var Ys=F(null);function Wd(){var o=Ys.current;return o!==null?o:ot.pooledCache}function rc(o,s){s===null?ce(Ys,Ys.current):ce(Ys,s.pool)}function oy(){var o=Wd();return o===null?null:{parent:Rt._currentValue,pool:o}}var qr=Error(i(460)),Zd=Error(i(474)),ac=Error(i(542)),lc={then:function(){}};function sy(o){return o=o.status,o==="fulfilled"||o==="rejected"}function ry(o,s,l){switch(l=o[l],l===void 0?o.push(s):l!==s&&(s.then(Zn,Zn),s=l),s.status){case"fulfilled":return s.value;case"rejected":throw o=s.reason,ly(o),o;default:if(typeof s.status=="string")s.then(Zn,Zn);else{if(o=ot,o!==null&&100<o.shellSuspendCounter)throw Error(i(482));o=s,o.status="pending",o.then(function(c){if(s.status==="pending"){var y=s;y.status="fulfilled",y.value=c}},function(c){if(s.status==="pending"){var y=s;y.status="rejected",y.reason=c}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw o=s.reason,ly(o),o}throw Qs=s,qr}}function $s(o){try{var s=o._init;return s(o._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(Qs=l,qr):l}}var Qs=null;function ay(){if(Qs===null)throw Error(i(459));var o=Qs;return Qs=null,o}function ly(o){if(o===qr||o===ac)throw Error(i(483))}var Br=null,hl=0;function uc(o){var s=hl;return hl+=1,Br===null&&(Br=[]),ry(Br,o,s)}function pl(o,s){s=s.props.ref,o.ref=s!==void 0?s:null}function cc(o,s){throw s.$$typeof===S?Error(i(525)):(o=Object.prototype.toString.call(s),Error(i(31,o==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":o)))}function uy(o){function s(q,k){if(o){var H=q.deletions;H===null?(q.deletions=[k],q.flags|=16):H.push(k)}}function l(q,k){if(!o)return null;for(;k!==null;)s(q,k),k=k.sibling;return null}function c(q){for(var k=new Map;q!==null;)q.key!==null?k.set(q.key,q):k.set(q.index,q),q=q.sibling;return k}function y(q,k){return q=Yi(q,k),q.index=0,q.sibling=null,q}function _(q,k,H){return q.index=H,o?(H=q.alternate,H!==null?(H=H.index,H<k?(q.flags|=67108866,k):H):(q.flags|=67108866,k)):(q.flags|=1048576,k)}function A(q){return o&&q.alternate===null&&(q.flags|=67108866),q}function I(q,k,H,Z){return k===null||k.tag!==6?(k=Gd(H,q.mode,Z),k.return=q,k):(k=y(k,H),k.return=q,k)}function U(q,k,H,Z){var _e=H.type;return _e===G?W(q,k,H.props.children,Z,H.key):k!==null&&(k.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===N&&$s(_e)===k.type)?(k=y(k,H.props),pl(k,H),k.return=q,k):(k=nc(H.type,H.key,H.props,null,q.mode,Z),pl(k,H),k.return=q,k)}function z(q,k,H,Z){return k===null||k.tag!==4||k.stateNode.containerInfo!==H.containerInfo||k.stateNode.implementation!==H.implementation?(k=qd(H,q.mode,Z),k.return=q,k):(k=y(k,H.children||[]),k.return=q,k)}function W(q,k,H,Z,_e){return k===null||k.tag!==7?(k=Hs(H,q.mode,Z,_e),k.return=q,k):(k=y(k,H),k.return=q,k)}function te(q,k,H){if(typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint")return k=Gd(""+k,q.mode,H),k.return=q,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case R:return H=nc(k.type,k.key,k.props,null,q.mode,H),pl(H,k),H.return=q,H;case V:return k=qd(k,q.mode,H),k.return=q,k;case N:return k=$s(k),te(q,k,H)}if(st(k)||O(k))return k=Hs(k,q.mode,H,null),k.return=q,k;if(typeof k.then=="function")return te(q,uc(k),H);if(k.$$typeof===j)return te(q,sc(q,k),H);cc(q,k)}return null}function J(q,k,H,Z){var _e=k!==null?k.key:null;if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return _e!==null?null:I(q,k,""+H,Z);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case R:return H.key===_e?U(q,k,H,Z):null;case V:return H.key===_e?z(q,k,H,Z):null;case N:return H=$s(H),J(q,k,H,Z)}if(st(H)||O(H))return _e!==null?null:W(q,k,H,Z,null);if(typeof H.then=="function")return J(q,k,uc(H),Z);if(H.$$typeof===j)return J(q,k,sc(q,H),Z);cc(q,H)}return null}function $(q,k,H,Z,_e){if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return q=q.get(H)||null,I(k,q,""+Z,_e);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case R:return q=q.get(Z.key===null?H:Z.key)||null,U(k,q,Z,_e);case V:return q=q.get(Z.key===null?H:Z.key)||null,z(k,q,Z,_e);case N:return Z=$s(Z),$(q,k,H,Z,_e)}if(st(Z)||O(Z))return q=q.get(H)||null,W(k,q,Z,_e,null);if(typeof Z.then=="function")return $(q,k,H,uc(Z),_e);if(Z.$$typeof===j)return $(q,k,H,sc(k,Z),_e);cc(k,Z)}return null}function pe(q,k,H,Z){for(var _e=null,ze=null,ge=k,xe=k=0,ke=null;ge!==null&&xe<H.length;xe++){ge.index>xe?(ke=ge,ge=null):ke=ge.sibling;var Je=J(q,ge,H[xe],Z);if(Je===null){ge===null&&(ge=ke);break}o&&ge&&Je.alternate===null&&s(q,ge),k=_(Je,k,xe),ze===null?_e=Je:ze.sibling=Je,ze=Je,ge=ke}if(xe===H.length)return l(q,ge),qe&&$i(q,xe),_e;if(ge===null){for(;xe<H.length;xe++)ge=te(q,H[xe],Z),ge!==null&&(k=_(ge,k,xe),ze===null?_e=ge:ze.sibling=ge,ze=ge);return qe&&$i(q,xe),_e}for(ge=c(ge);xe<H.length;xe++)ke=$(ge,q,xe,H[xe],Z),ke!==null&&(o&&ke.alternate!==null&&ge.delete(ke.key===null?xe:ke.key),k=_(ke,k,xe),ze===null?_e=ke:ze.sibling=ke,ze=ke);return o&&ge.forEach(function(Zo){return s(q,Zo)}),qe&&$i(q,xe),_e}function Te(q,k,H,Z){if(H==null)throw Error(i(151));for(var _e=null,ze=null,ge=k,xe=k=0,ke=null,Je=H.next();ge!==null&&!Je.done;xe++,Je=H.next()){ge.index>xe?(ke=ge,ge=null):ke=ge.sibling;var Zo=J(q,ge,Je.value,Z);if(Zo===null){ge===null&&(ge=ke);break}o&&ge&&Zo.alternate===null&&s(q,ge),k=_(Zo,k,xe),ze===null?_e=Zo:ze.sibling=Zo,ze=Zo,ge=ke}if(Je.done)return l(q,ge),qe&&$i(q,xe),_e;if(ge===null){for(;!Je.done;xe++,Je=H.next())Je=te(q,Je.value,Z),Je!==null&&(k=_(Je,k,xe),ze===null?_e=Je:ze.sibling=Je,ze=Je);return qe&&$i(q,xe),_e}for(ge=c(ge);!Je.done;xe++,Je=H.next())Je=$(ge,q,xe,Je.value,Z),Je!==null&&(o&&Je.alternate!==null&&ge.delete(Je.key===null?xe:Je.key),k=_(Je,k,xe),ze===null?_e=Je:ze.sibling=Je,ze=Je);return o&&ge.forEach(function(ow){return s(q,ow)}),qe&&$i(q,xe),_e}function it(q,k,H,Z){if(typeof H=="object"&&H!==null&&H.type===G&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case R:e:{for(var _e=H.key;k!==null;){if(k.key===_e){if(_e=H.type,_e===G){if(k.tag===7){l(q,k.sibling),Z=y(k,H.props.children),Z.return=q,q=Z;break e}}else if(k.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===N&&$s(_e)===k.type){l(q,k.sibling),Z=y(k,H.props),pl(Z,H),Z.return=q,q=Z;break e}l(q,k);break}else s(q,k);k=k.sibling}H.type===G?(Z=Hs(H.props.children,q.mode,Z,H.key),Z.return=q,q=Z):(Z=nc(H.type,H.key,H.props,null,q.mode,Z),pl(Z,H),Z.return=q,q=Z)}return A(q);case V:e:{for(_e=H.key;k!==null;){if(k.key===_e)if(k.tag===4&&k.stateNode.containerInfo===H.containerInfo&&k.stateNode.implementation===H.implementation){l(q,k.sibling),Z=y(k,H.children||[]),Z.return=q,q=Z;break e}else{l(q,k);break}else s(q,k);k=k.sibling}Z=qd(H,q.mode,Z),Z.return=q,q=Z}return A(q);case N:return H=$s(H),it(q,k,H,Z)}if(st(H))return pe(q,k,H,Z);if(O(H)){if(_e=O(H),typeof _e!="function")throw Error(i(150));return H=_e.call(H),Te(q,k,H,Z)}if(typeof H.then=="function")return it(q,k,uc(H),Z);if(H.$$typeof===j)return it(q,k,sc(q,H),Z);cc(q,H)}return typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint"?(H=""+H,k!==null&&k.tag===6?(l(q,k.sibling),Z=y(k,H),Z.return=q,q=Z):(l(q,k),Z=Gd(H,q.mode,Z),Z.return=q,q=Z),A(q)):l(q,k)}return function(q,k,H,Z){try{hl=0;var _e=it(q,k,H,Z);return Br=null,_e}catch(ge){if(ge===qr||ge===ac)throw ge;var ze=In(29,ge,null,q.mode);return ze.lanes=Z,ze.return=q,ze}finally{}}}var Xs=uy(!0),cy=uy(!1),Uo=!1;function jd(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function eh(o,s){o=o.updateQueue,s.updateQueue===o&&(s.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,callbacks:null})}function Lo(o){return{lane:o,tag:0,payload:null,callback:null,next:null}}function ko(o,s,l){var c=o.updateQueue;if(c===null)return null;if(c=c.shared,($e&2)!==0){var y=c.pending;return y===null?s.next=s:(s.next=y.next,y.next=s),c.pending=s,s=tc(o),Yg(o,null,l),s}return ec(o,c,s,l),tc(o)}function ml(o,s,l){if(s=s.updateQueue,s!==null&&(s=s.shared,(l&4194048)!==0)){var c=s.lanes;c&=o.pendingLanes,l|=c,s.lanes=l,Ba(o,l)}}function th(o,s){var l=o.updateQueue,c=o.alternate;if(c!==null&&(c=c.updateQueue,l===c)){var y=null,_=null;if(l=l.firstBaseUpdate,l!==null){do{var A={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};_===null?y=_=A:_=_.next=A,l=l.next}while(l!==null);_===null?y=_=s:_=_.next=s}else y=_=s;l={baseState:c.baseState,firstBaseUpdate:y,lastBaseUpdate:_,shared:c.shared,callbacks:c.callbacks},o.updateQueue=l;return}o=l.lastBaseUpdate,o===null?l.firstBaseUpdate=s:o.next=s,l.lastBaseUpdate=s}var nh=!1;function gl(){if(nh){var o=Gr;if(o!==null)throw o}}function yl(o,s,l,c){nh=!1;var y=o.updateQueue;Uo=!1;var _=y.firstBaseUpdate,A=y.lastBaseUpdate,I=y.shared.pending;if(I!==null){y.shared.pending=null;var U=I,z=U.next;U.next=null,A===null?_=z:A.next=z,A=U;var W=o.alternate;W!==null&&(W=W.updateQueue,I=W.lastBaseUpdate,I!==A&&(I===null?W.firstBaseUpdate=z:I.next=z,W.lastBaseUpdate=U))}if(_!==null){var te=y.baseState;A=0,W=z=U=null,I=_;do{var J=I.lane&-536870913,$=J!==I.lane;if($?(Le&J)===J:(c&J)===J){J!==0&&J===Fr&&(nh=!0),W!==null&&(W=W.next={lane:0,tag:I.tag,payload:I.payload,callback:null,next:null});e:{var pe=o,Te=I;J=s;var it=l;switch(Te.tag){case 1:if(pe=Te.payload,typeof pe=="function"){te=pe.call(it,te,J);break e}te=pe;break e;case 3:pe.flags=pe.flags&-65537|128;case 0:if(pe=Te.payload,J=typeof pe=="function"?pe.call(it,te,J):pe,J==null)break e;te=T({},te,J);break e;case 2:Uo=!0}}J=I.callback,J!==null&&(o.flags|=64,$&&(o.flags|=8192),$=y.callbacks,$===null?y.callbacks=[J]:$.push(J))}else $={lane:J,tag:I.tag,payload:I.payload,callback:I.callback,next:null},W===null?(z=W=$,U=te):W=W.next=$,A|=J;if(I=I.next,I===null){if(I=y.shared.pending,I===null)break;$=I,I=$.next,$.next=null,y.lastBaseUpdate=$,y.shared.pending=null}}while(!0);W===null&&(U=te),y.baseState=U,y.firstBaseUpdate=z,y.lastBaseUpdate=W,_===null&&(y.shared.lanes=0),Bo|=A,o.lanes=A,o.memoizedState=te}}function fy(o,s){if(typeof o!="function")throw Error(i(191,o));o.call(s)}function dy(o,s){var l=o.callbacks;if(l!==null)for(o.callbacks=null,o=0;o<l.length;o++)fy(l[o],s)}var Hr=F(null),fc=F(0);function hy(o,s){o=so,ce(fc,o),ce(Hr,s),so=o|s.baseLanes}function ih(){ce(fc,so),ce(Hr,Hr.current)}function oh(){so=fc.current,ie(Hr),ie(fc)}var Rn=F(null),Bn=null;function Oo(o){var s=o.alternate;ce(_t,_t.current&1),ce(Rn,o),Bn===null&&(s===null||Hr.current!==null||s.memoizedState!==null)&&(Bn=o)}function sh(o){ce(_t,_t.current),ce(Rn,o),Bn===null&&(Bn=o)}function py(o){o.tag===22?(ce(_t,_t.current),ce(Rn,o),Bn===null&&(Bn=o)):Fo()}function Fo(){ce(_t,_t.current),ce(Rn,Rn.current)}function wn(o){ie(Rn),Bn===o&&(Bn=null),ie(_t)}var _t=F(0);function dc(o){for(var s=o;s!==null;){if(s.tag===13){var l=s.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||fp(l)||dp(l)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===o)break;for(;s.sibling===null;){if(s.return===null||s.return===o)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Wi=0,be=null,tt=null,wt=null,hc=!1,zr=!1,Ws=!1,pc=0,_l=0,Jr=null,$I=0;function pt(){throw Error(i(321))}function rh(o,s){if(s===null)return!1;for(var l=0;l<s.length&&l<o.length;l++)if(!Cn(o[l],s[l]))return!1;return!0}function ah(o,s,l,c,y,_){return Wi=_,be=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,X.H=o===null||o.memoizedState===null?Wy:Sh,Ws=!1,_=l(c,y),Ws=!1,zr&&(_=gy(s,l,c,y)),my(o),_}function my(o){X.H=El;var s=tt!==null&&tt.next!==null;if(Wi=0,wt=tt=be=null,hc=!1,_l=0,Jr=null,s)throw Error(i(300));o===null||Nt||(o=o.dependencies,o!==null&&oc(o)&&(Nt=!0))}function gy(o,s,l,c){be=o;var y=0;do{if(zr&&(Jr=null),_l=0,zr=!1,25<=y)throw Error(i(301));if(y+=1,wt=tt=null,o.updateQueue!=null){var _=o.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}X.H=Zy,_=s(l,c)}while(zr);return _}function QI(){var o=X.H,s=o.useState()[0];return s=typeof s.then=="function"?vl(s):s,o=o.useState()[0],(tt!==null?tt.memoizedState:null)!==o&&(be.flags|=1024),s}function lh(){var o=pc!==0;return pc=0,o}function uh(o,s,l){s.updateQueue=o.updateQueue,s.flags&=-2053,o.lanes&=~l}function ch(o){if(hc){for(o=o.memoizedState;o!==null;){var s=o.queue;s!==null&&(s.pending=null),o=o.next}hc=!1}Wi=0,wt=tt=be=null,zr=!1,_l=pc=0,Jr=null}function un(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return wt===null?be.memoizedState=wt=o:wt=wt.next=o,wt}function vt(){if(tt===null){var o=be.alternate;o=o!==null?o.memoizedState:null}else o=tt.next;var s=wt===null?be.memoizedState:wt.next;if(s!==null)wt=s,tt=o;else{if(o===null)throw be.alternate===null?Error(i(467)):Error(i(310));tt=o,o={memoizedState:tt.memoizedState,baseState:tt.baseState,baseQueue:tt.baseQueue,queue:tt.queue,next:null},wt===null?be.memoizedState=wt=o:wt=wt.next=o}return wt}function mc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function vl(o){var s=_l;return _l+=1,Jr===null&&(Jr=[]),o=ry(Jr,o,s),s=be,(wt===null?s.memoizedState:wt.next)===null&&(s=s.alternate,X.H=s===null||s.memoizedState===null?Wy:Sh),o}function gc(o){if(o!==null&&typeof o=="object"){if(typeof o.then=="function")return vl(o);if(o.$$typeof===j)return Yt(o)}throw Error(i(438,String(o)))}function fh(o){var s=null,l=be.updateQueue;if(l!==null&&(s=l.memoCache),s==null){var c=be.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(s={data:c.data.map(function(y){return y.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),l===null&&(l=mc(),be.updateQueue=l),l.memoCache=s,l=s.data[s.index],l===void 0)for(l=s.data[s.index]=Array(o),c=0;c<o;c++)l[c]=x;return s.index++,l}function Zi(o,s){return typeof s=="function"?s(o):s}function yc(o){var s=vt();return dh(s,tt,o)}function dh(o,s,l){var c=o.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=l;var y=o.baseQueue,_=c.pending;if(_!==null){if(y!==null){var A=y.next;y.next=_.next,_.next=A}s.baseQueue=y=_,c.pending=null}if(_=o.baseState,y===null)o.memoizedState=_;else{s=y.next;var I=A=null,U=null,z=s,W=!1;do{var te=z.lane&-536870913;if(te!==z.lane?(Le&te)===te:(Wi&te)===te){var J=z.revertLane;if(J===0)U!==null&&(U=U.next={lane:0,revertLane:0,gesture:null,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null}),te===Fr&&(W=!0);else if((Wi&J)===J){z=z.next,J===Fr&&(W=!0);continue}else te={lane:0,revertLane:z.revertLane,gesture:null,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null},U===null?(I=U=te,A=_):U=U.next=te,be.lanes|=J,Bo|=J;te=z.action,Ws&&l(_,te),_=z.hasEagerState?z.eagerState:l(_,te)}else J={lane:te,revertLane:z.revertLane,gesture:z.gesture,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null},U===null?(I=U=J,A=_):U=U.next=J,be.lanes|=te,Bo|=te;z=z.next}while(z!==null&&z!==s);if(U===null?A=_:U.next=I,!Cn(_,o.memoizedState)&&(Nt=!0,W&&(l=Gr,l!==null)))throw l;o.memoizedState=_,o.baseState=A,o.baseQueue=U,c.lastRenderedState=_}return y===null&&(c.lanes=0),[o.memoizedState,c.dispatch]}function hh(o){var s=vt(),l=s.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=o;var c=l.dispatch,y=l.pending,_=s.memoizedState;if(y!==null){l.pending=null;var A=y=y.next;do _=o(_,A.action),A=A.next;while(A!==y);Cn(_,s.memoizedState)||(Nt=!0),s.memoizedState=_,s.baseQueue===null&&(s.baseState=_),l.lastRenderedState=_}return[_,c]}function yy(o,s,l){var c=be,y=vt(),_=qe;if(_){if(l===void 0)throw Error(i(407));l=l()}else l=s();var A=!Cn((tt||y).memoizedState,l);if(A&&(y.memoizedState=l,Nt=!0),y=y.queue,gh(Ty.bind(null,c,y,o),[o]),y.getSnapshot!==s||A||wt!==null&&wt.memoizedState.tag&1){if(c.flags|=2048,Kr(9,{destroy:void 0},vy.bind(null,c,y,l,s),null),ot===null)throw Error(i(349));_||(Wi&127)!==0||_y(c,s,l)}return l}function _y(o,s,l){o.flags|=16384,o={getSnapshot:s,value:l},s=be.updateQueue,s===null?(s=mc(),be.updateQueue=s,s.stores=[o]):(l=s.stores,l===null?s.stores=[o]:l.push(o))}function vy(o,s,l,c){s.value=l,s.getSnapshot=c,Ey(s)&&Sy(o)}function Ty(o,s,l){return l(function(){Ey(s)&&Sy(o)})}function Ey(o){var s=o.getSnapshot;o=o.value;try{var l=s();return!Cn(o,l)}catch{return!0}}function Sy(o){var s=Bs(o,2);s!==null&&_n(s,o,2)}function ph(o){var s=un();if(typeof o=="function"){var l=o;if(o=l(),Ws){xn(!0);try{l()}finally{xn(!1)}}}return s.memoizedState=s.baseState=o,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zi,lastRenderedState:o},s}function Ay(o,s,l,c){return o.baseState=l,dh(o,tt,typeof c=="function"?c:Zi)}function XI(o,s,l,c,y){if(Tc(o))throw Error(i(485));if(o=s.action,o!==null){var _={payload:y,action:o,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(A){_.listeners.push(A)}};X.T!==null?l(!0):_.isTransition=!1,c(_),l=s.pending,l===null?(_.next=s.pending=_,Cy(s,_)):(_.next=l.next,s.pending=l.next=_)}}function Cy(o,s){var l=s.action,c=s.payload,y=o.state;if(s.isTransition){var _=X.T,A={};X.T=A;try{var I=l(y,c),U=X.S;U!==null&&U(A,I),Iy(o,s,I)}catch(z){mh(o,s,z)}finally{_!==null&&A.types!==null&&(_.types=A.types),X.T=_}}else try{_=l(y,c),Iy(o,s,_)}catch(z){mh(o,s,z)}}function Iy(o,s,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(c){Ry(o,s,c)},function(c){return mh(o,s,c)}):Ry(o,s,l)}function Ry(o,s,l){s.status="fulfilled",s.value=l,wy(s),o.state=l,s=o.pending,s!==null&&(l=s.next,l===s?o.pending=null:(l=l.next,s.next=l,Cy(o,l)))}function mh(o,s,l){var c=o.pending;if(o.pending=null,c!==null){c=c.next;do s.status="rejected",s.reason=l,wy(s),s=s.next;while(s!==c)}o.action=null}function wy(o){o=o.listeners;for(var s=0;s<o.length;s++)(0,o[s])()}function Ny(o,s){return s}function by(o,s){if(qe){var l=ot.formState;if(l!==null){e:{var c=be;if(qe){if(rt){t:{for(var y=rt,_=qn;y.nodeType!==8;){if(!_){y=null;break t}if(y=Hn(y.nextSibling),y===null){y=null;break t}}_=y.data,y=_==="F!"||_==="F"?y:null}if(y){rt=Hn(y.nextSibling),c=y.data==="F!";break e}}Po(c)}c=!1}c&&(s=l[0])}}return l=un(),l.memoizedState=l.baseState=s,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ny,lastRenderedState:s},l.queue=c,l=$y.bind(null,be,c),c.dispatch=l,c=ph(!1),_=Eh.bind(null,be,!1,c.queue),c=un(),y={state:s,dispatch:null,action:o,pending:null},c.queue=y,l=XI.bind(null,be,y,_,l),y.dispatch=l,c.memoizedState=o,[s,l,!1]}function My(o){var s=vt();return Dy(s,tt,o)}function Dy(o,s,l){if(s=dh(o,s,Ny)[0],o=yc(Zi)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var c=vl(s)}catch(A){throw A===qr?ac:A}else c=s;s=vt();var y=s.queue,_=y.dispatch;return l!==s.memoizedState&&(be.flags|=2048,Kr(9,{destroy:void 0},WI.bind(null,y,l),null)),[c,_,o]}function WI(o,s){o.action=s}function xy(o){var s=vt(),l=tt;if(l!==null)return Dy(s,l,o);vt(),s=s.memoizedState,l=vt();var c=l.queue.dispatch;return l.memoizedState=o,[s,c,!1]}function Kr(o,s,l,c){return o={tag:o,create:l,deps:c,inst:s,next:null},s=be.updateQueue,s===null&&(s=mc(),be.updateQueue=s),l=s.lastEffect,l===null?s.lastEffect=o.next=o:(c=l.next,l.next=o,o.next=c,s.lastEffect=o),o}function Py(){return vt().memoizedState}function _c(o,s,l,c){var y=un();be.flags|=o,y.memoizedState=Kr(1|s,{destroy:void 0},l,c===void 0?null:c)}function vc(o,s,l,c){var y=vt();c=c===void 0?null:c;var _=y.memoizedState.inst;tt!==null&&c!==null&&rh(c,tt.memoizedState.deps)?y.memoizedState=Kr(s,_,l,c):(be.flags|=o,y.memoizedState=Kr(1|s,_,l,c))}function Vy(o,s){_c(8390656,8,o,s)}function gh(o,s){vc(2048,8,o,s)}function ZI(o){be.flags|=4;var s=be.updateQueue;if(s===null)s=mc(),be.updateQueue=s,s.events=[o];else{var l=s.events;l===null?s.events=[o]:l.push(o)}}function Uy(o){var s=vt().memoizedState;return ZI({ref:s,nextImpl:o}),function(){if(($e&2)!==0)throw Error(i(440));return s.impl.apply(void 0,arguments)}}function Ly(o,s){return vc(4,2,o,s)}function ky(o,s){return vc(4,4,o,s)}function Oy(o,s){if(typeof s=="function"){o=o();var l=s(o);return function(){typeof l=="function"?l():s(null)}}if(s!=null)return o=o(),s.current=o,function(){s.current=null}}function Fy(o,s,l){l=l!=null?l.concat([o]):null,vc(4,4,Oy.bind(null,s,o),l)}function yh(){}function Gy(o,s){var l=vt();s=s===void 0?null:s;var c=l.memoizedState;return s!==null&&rh(s,c[1])?c[0]:(l.memoizedState=[o,s],o)}function qy(o,s){var l=vt();s=s===void 0?null:s;var c=l.memoizedState;if(s!==null&&rh(s,c[1]))return c[0];if(c=o(),Ws){xn(!0);try{o()}finally{xn(!1)}}return l.memoizedState=[c,s],c}function _h(o,s,l){return l===void 0||(Wi&1073741824)!==0&&(Le&261930)===0?o.memoizedState=s:(o.memoizedState=l,o=B_(),be.lanes|=o,Bo|=o,l)}function By(o,s,l,c){return Cn(l,s)?l:Hr.current!==null?(o=_h(o,l,c),Cn(o,s)||(Nt=!0),o):(Wi&42)===0||(Wi&1073741824)!==0&&(Le&261930)===0?(Nt=!0,o.memoizedState=l):(o=B_(),be.lanes|=o,Bo|=o,s)}function Hy(o,s,l,c,y){var _=ue.p;ue.p=_!==0&&8>_?_:8;var A=X.T,I={};X.T=I,Eh(o,!1,s,l);try{var U=y(),z=X.S;if(z!==null&&z(I,U),U!==null&&typeof U=="object"&&typeof U.then=="function"){var W=YI(U,c);Tl(o,s,W,Mn(o))}else Tl(o,s,c,Mn(o))}catch(te){Tl(o,s,{then:function(){},status:"rejected",reason:te},Mn())}finally{ue.p=_,A!==null&&I.types!==null&&(A.types=I.types),X.T=A}}function jI(){}function vh(o,s,l,c){if(o.tag!==5)throw Error(i(476));var y=zy(o).queue;Hy(o,y,s,me,l===null?jI:function(){return Jy(o),l(c)})}function zy(o){var s=o.memoizedState;if(s!==null)return s;s={memoizedState:me,baseState:me,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zi,lastRenderedState:me},next:null};var l={};return s.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zi,lastRenderedState:l},next:null},o.memoizedState=s,o=o.alternate,o!==null&&(o.memoizedState=s),s}function Jy(o){var s=zy(o);s.next===null&&(s=o.alternate.memoizedState),Tl(o,s.next.queue,{},Mn())}function Th(){return Yt(kl)}function Ky(){return vt().memoizedState}function Yy(){return vt().memoizedState}function eR(o){for(var s=o.return;s!==null;){switch(s.tag){case 24:case 3:var l=Mn();o=Lo(l);var c=ko(s,o,l);c!==null&&(_n(c,s,l),ml(c,s,l)),s={cache:Qd()},o.payload=s;return}s=s.return}}function tR(o,s,l){var c=Mn();l={lane:c,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Tc(o)?Qy(s,l):(l=Od(o,s,l,c),l!==null&&(_n(l,o,c),Xy(l,s,c)))}function $y(o,s,l){var c=Mn();Tl(o,s,l,c)}function Tl(o,s,l,c){var y={lane:c,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(Tc(o))Qy(s,y);else{var _=o.alternate;if(o.lanes===0&&(_===null||_.lanes===0)&&(_=s.lastRenderedReducer,_!==null))try{var A=s.lastRenderedState,I=_(A,l);if(y.hasEagerState=!0,y.eagerState=I,Cn(I,A))return ec(o,s,y,0),ot===null&&ju(),!1}catch{}finally{}if(l=Od(o,s,y,c),l!==null)return _n(l,o,c),Xy(l,s,c),!0}return!1}function Eh(o,s,l,c){if(c={lane:2,revertLane:jh(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Tc(o)){if(s)throw Error(i(479))}else s=Od(o,l,c,2),s!==null&&_n(s,o,2)}function Tc(o){var s=o.alternate;return o===be||s!==null&&s===be}function Qy(o,s){zr=hc=!0;var l=o.pending;l===null?s.next=s:(s.next=l.next,l.next=s),o.pending=s}function Xy(o,s,l){if((l&4194048)!==0){var c=s.lanes;c&=o.pendingLanes,l|=c,s.lanes=l,Ba(o,l)}}var El={readContext:Yt,use:gc,useCallback:pt,useContext:pt,useEffect:pt,useImperativeHandle:pt,useLayoutEffect:pt,useInsertionEffect:pt,useMemo:pt,useReducer:pt,useRef:pt,useState:pt,useDebugValue:pt,useDeferredValue:pt,useTransition:pt,useSyncExternalStore:pt,useId:pt,useHostTransitionStatus:pt,useFormState:pt,useActionState:pt,useOptimistic:pt,useMemoCache:pt,useCacheRefresh:pt};El.useEffectEvent=pt;var Wy={readContext:Yt,use:gc,useCallback:function(o,s){return un().memoizedState=[o,s===void 0?null:s],o},useContext:Yt,useEffect:Vy,useImperativeHandle:function(o,s,l){l=l!=null?l.concat([o]):null,_c(4194308,4,Oy.bind(null,s,o),l)},useLayoutEffect:function(o,s){return _c(4194308,4,o,s)},useInsertionEffect:function(o,s){_c(4,2,o,s)},useMemo:function(o,s){var l=un();s=s===void 0?null:s;var c=o();if(Ws){xn(!0);try{o()}finally{xn(!1)}}return l.memoizedState=[c,s],c},useReducer:function(o,s,l){var c=un();if(l!==void 0){var y=l(s);if(Ws){xn(!0);try{l(s)}finally{xn(!1)}}}else y=s;return c.memoizedState=c.baseState=y,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:y},c.queue=o,o=o.dispatch=tR.bind(null,be,o),[c.memoizedState,o]},useRef:function(o){var s=un();return o={current:o},s.memoizedState=o},useState:function(o){o=ph(o);var s=o.queue,l=$y.bind(null,be,s);return s.dispatch=l,[o.memoizedState,l]},useDebugValue:yh,useDeferredValue:function(o,s){var l=un();return _h(l,o,s)},useTransition:function(){var o=ph(!1);return o=Hy.bind(null,be,o.queue,!0,!1),un().memoizedState=o,[!1,o]},useSyncExternalStore:function(o,s,l){var c=be,y=un();if(qe){if(l===void 0)throw Error(i(407));l=l()}else{if(l=s(),ot===null)throw Error(i(349));(Le&127)!==0||_y(c,s,l)}y.memoizedState=l;var _={value:l,getSnapshot:s};return y.queue=_,Vy(Ty.bind(null,c,_,o),[o]),c.flags|=2048,Kr(9,{destroy:void 0},vy.bind(null,c,_,l,s),null),l},useId:function(){var o=un(),s=ot.identifierPrefix;if(qe){var l=Di,c=Mi;l=(c&~(1<<32-gt(c)-1)).toString(32)+l,s="_"+s+"R_"+l,l=pc++,0<l&&(s+="H"+l.toString(32)),s+="_"}else l=$I++,s="_"+s+"r_"+l.toString(32)+"_";return o.memoizedState=s},useHostTransitionStatus:Th,useFormState:by,useActionState:by,useOptimistic:function(o){var s=un();s.memoizedState=s.baseState=o;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=l,s=Eh.bind(null,be,!0,l),l.dispatch=s,[o,s]},useMemoCache:fh,useCacheRefresh:function(){return un().memoizedState=eR.bind(null,be)},useEffectEvent:function(o){var s=un(),l={impl:o};return s.memoizedState=l,function(){if(($e&2)!==0)throw Error(i(440));return l.impl.apply(void 0,arguments)}}},Sh={readContext:Yt,use:gc,useCallback:Gy,useContext:Yt,useEffect:gh,useImperativeHandle:Fy,useInsertionEffect:Ly,useLayoutEffect:ky,useMemo:qy,useReducer:yc,useRef:Py,useState:function(){return yc(Zi)},useDebugValue:yh,useDeferredValue:function(o,s){var l=vt();return By(l,tt.memoizedState,o,s)},useTransition:function(){var o=yc(Zi)[0],s=vt().memoizedState;return[typeof o=="boolean"?o:vl(o),s]},useSyncExternalStore:yy,useId:Ky,useHostTransitionStatus:Th,useFormState:My,useActionState:My,useOptimistic:function(o,s){var l=vt();return Ay(l,tt,o,s)},useMemoCache:fh,useCacheRefresh:Yy};Sh.useEffectEvent=Uy;var Zy={readContext:Yt,use:gc,useCallback:Gy,useContext:Yt,useEffect:gh,useImperativeHandle:Fy,useInsertionEffect:Ly,useLayoutEffect:ky,useMemo:qy,useReducer:hh,useRef:Py,useState:function(){return hh(Zi)},useDebugValue:yh,useDeferredValue:function(o,s){var l=vt();return tt===null?_h(l,o,s):By(l,tt.memoizedState,o,s)},useTransition:function(){var o=hh(Zi)[0],s=vt().memoizedState;return[typeof o=="boolean"?o:vl(o),s]},useSyncExternalStore:yy,useId:Ky,useHostTransitionStatus:Th,useFormState:xy,useActionState:xy,useOptimistic:function(o,s){var l=vt();return tt!==null?Ay(l,tt,o,s):(l.baseState=o,[o,l.queue.dispatch])},useMemoCache:fh,useCacheRefresh:Yy};Zy.useEffectEvent=Uy;function Ah(o,s,l,c){s=o.memoizedState,l=l(c,s),l=l==null?s:T({},s,l),o.memoizedState=l,o.lanes===0&&(o.updateQueue.baseState=l)}var Ch={enqueueSetState:function(o,s,l){o=o._reactInternals;var c=Mn(),y=Lo(c);y.payload=s,l!=null&&(y.callback=l),s=ko(o,y,c),s!==null&&(_n(s,o,c),ml(s,o,c))},enqueueReplaceState:function(o,s,l){o=o._reactInternals;var c=Mn(),y=Lo(c);y.tag=1,y.payload=s,l!=null&&(y.callback=l),s=ko(o,y,c),s!==null&&(_n(s,o,c),ml(s,o,c))},enqueueForceUpdate:function(o,s){o=o._reactInternals;var l=Mn(),c=Lo(l);c.tag=2,s!=null&&(c.callback=s),s=ko(o,c,l),s!==null&&(_n(s,o,l),ml(s,o,l))}};function jy(o,s,l,c,y,_,A){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(c,_,A):s.prototype&&s.prototype.isPureReactComponent?!al(l,c)||!al(y,_):!0}function e_(o,s,l,c){o=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(l,c),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(l,c),s.state!==o&&Ch.enqueueReplaceState(s,s.state,null)}function Zs(o,s){var l=s;if("ref"in s){l={};for(var c in s)c!=="ref"&&(l[c]=s[c])}if(o=o.defaultProps){l===s&&(l=T({},l));for(var y in o)l[y]===void 0&&(l[y]=o[y])}return l}function t_(o){Zu(o)}function n_(o){console.error(o)}function i_(o){Zu(o)}function Ec(o,s){try{var l=o.onUncaughtError;l(s.value,{componentStack:s.stack})}catch(c){setTimeout(function(){throw c})}}function o_(o,s,l){try{var c=o.onCaughtError;c(l.value,{componentStack:l.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function Ih(o,s,l){return l=Lo(l),l.tag=3,l.payload={element:null},l.callback=function(){Ec(o,s)},l}function s_(o){return o=Lo(o),o.tag=3,o}function r_(o,s,l,c){var y=l.type.getDerivedStateFromError;if(typeof y=="function"){var _=c.value;o.payload=function(){return y(_)},o.callback=function(){o_(s,l,c)}}var A=l.stateNode;A!==null&&typeof A.componentDidCatch=="function"&&(o.callback=function(){o_(s,l,c),typeof y!="function"&&(Ho===null?Ho=new Set([this]):Ho.add(this));var I=c.stack;this.componentDidCatch(c.value,{componentStack:I!==null?I:""})})}function nR(o,s,l,c,y){if(l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(s=l.alternate,s!==null&&Or(s,l,y,!0),l=Rn.current,l!==null){switch(l.tag){case 31:case 13:return Bn===null?Pc():l.alternate===null&&mt===0&&(mt=3),l.flags&=-257,l.flags|=65536,l.lanes=y,c===lc?l.flags|=16384:(s=l.updateQueue,s===null?l.updateQueue=new Set([c]):s.add(c),Xh(o,c,y)),!1;case 22:return l.flags|=65536,c===lc?l.flags|=16384:(s=l.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([c])},l.updateQueue=s):(l=s.retryQueue,l===null?s.retryQueue=new Set([c]):l.add(c)),Xh(o,c,y)),!1}throw Error(i(435,l.tag))}return Xh(o,c,y),Pc(),!1}if(qe)return s=Rn.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=y,c!==zd&&(o=Error(i(422),{cause:c}),cl(On(o,l)))):(c!==zd&&(s=Error(i(423),{cause:c}),cl(On(s,l))),o=o.current.alternate,o.flags|=65536,y&=-y,o.lanes|=y,c=On(c,l),y=Ih(o.stateNode,c,y),th(o,y),mt!==4&&(mt=2)),!1;var _=Error(i(520),{cause:c});if(_=On(_,l),bl===null?bl=[_]:bl.push(_),mt!==4&&(mt=2),s===null)return!0;c=On(c,l),l=s;do{switch(l.tag){case 3:return l.flags|=65536,o=y&-y,l.lanes|=o,o=Ih(l.stateNode,c,o),th(l,o),!1;case 1:if(s=l.type,_=l.stateNode,(l.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Ho===null||!Ho.has(_))))return l.flags|=65536,y&=-y,l.lanes|=y,y=s_(y),r_(y,o,l,c),th(l,y),!1}l=l.return}while(l!==null);return!1}var Rh=Error(i(461)),Nt=!1;function $t(o,s,l,c){s.child=o===null?cy(s,null,l,c):Xs(s,o.child,l,c)}function a_(o,s,l,c,y){l=l.render;var _=s.ref;if("ref"in c){var A={};for(var I in c)I!=="ref"&&(A[I]=c[I])}else A=c;return Ks(s),c=ah(o,s,l,A,_,y),I=lh(),o!==null&&!Nt?(uh(o,s,y),ji(o,s,y)):(qe&&I&&Bd(s),s.flags|=1,$t(o,s,c,y),s.child)}function l_(o,s,l,c,y){if(o===null){var _=l.type;return typeof _=="function"&&!Fd(_)&&_.defaultProps===void 0&&l.compare===null?(s.tag=15,s.type=_,u_(o,s,_,c,y)):(o=nc(l.type,null,c,s,s.mode,y),o.ref=s.ref,o.return=s,s.child=o)}if(_=o.child,!Vh(o,y)){var A=_.memoizedProps;if(l=l.compare,l=l!==null?l:al,l(A,c)&&o.ref===s.ref)return ji(o,s,y)}return s.flags|=1,o=Yi(_,c),o.ref=s.ref,o.return=s,s.child=o}function u_(o,s,l,c,y){if(o!==null){var _=o.memoizedProps;if(al(_,c)&&o.ref===s.ref)if(Nt=!1,s.pendingProps=c=_,Vh(o,y))(o.flags&131072)!==0&&(Nt=!0);else return s.lanes=o.lanes,ji(o,s,y)}return wh(o,s,l,c,y)}function c_(o,s,l,c){var y=c.children,_=o!==null?o.memoizedState:null;if(o===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((s.flags&128)!==0){if(_=_!==null?_.baseLanes|l:l,o!==null){for(c=s.child=o.child,y=0;c!==null;)y=y|c.lanes|c.childLanes,c=c.sibling;c=y&~_}else c=0,s.child=null;return f_(o,s,_,l,c)}if((l&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},o!==null&&rc(s,_!==null?_.cachePool:null),_!==null?hy(s,_):ih(),py(s);else return c=s.lanes=536870912,f_(o,s,_!==null?_.baseLanes|l:l,l,c)}else _!==null?(rc(s,_.cachePool),hy(s,_),Fo(),s.memoizedState=null):(o!==null&&rc(s,null),ih(),Fo());return $t(o,s,y,l),s.child}function Sl(o,s){return o!==null&&o.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function f_(o,s,l,c,y){var _=Wd();return _=_===null?null:{parent:Rt._currentValue,pool:_},s.memoizedState={baseLanes:l,cachePool:_},o!==null&&rc(s,null),ih(),py(s),o!==null&&Or(o,s,c,!0),s.childLanes=y,null}function Sc(o,s){return s=Cc({mode:s.mode,children:s.children},o.mode),s.ref=o.ref,o.child=s,s.return=o,s}function d_(o,s,l){return Xs(s,o.child,null,l),o=Sc(s,s.pendingProps),o.flags|=2,wn(s),s.memoizedState=null,o}function iR(o,s,l){var c=s.pendingProps,y=(s.flags&128)!==0;if(s.flags&=-129,o===null){if(qe){if(c.mode==="hidden")return o=Sc(s,c),s.lanes=536870912,Sl(null,o);if(sh(s),(o=rt)?(o=Cv(o,qn),o=o!==null&&o.data==="&"?o:null,o!==null&&(s.memoizedState={dehydrated:o,treeContext:Do!==null?{id:Mi,overflow:Di}:null,retryLane:536870912,hydrationErrors:null},l=Qg(o),l.return=s,s.child=l,Kt=s,rt=null)):o=null,o===null)throw Po(s);return s.lanes=536870912,null}return Sc(s,c)}var _=o.memoizedState;if(_!==null){var A=_.dehydrated;if(sh(s),y)if(s.flags&256)s.flags&=-257,s=d_(o,s,l);else if(s.memoizedState!==null)s.child=o.child,s.flags|=128,s=null;else throw Error(i(558));else if(Nt||Or(o,s,l,!1),y=(l&o.childLanes)!==0,Nt||y){if(c=ot,c!==null&&(A=Ha(c,l),A!==0&&A!==_.retryLane))throw _.retryLane=A,Bs(o,A),_n(c,o,A),Rh;Pc(),s=d_(o,s,l)}else o=_.treeContext,rt=Hn(A.nextSibling),Kt=s,qe=!0,xo=null,qn=!1,o!==null&&Zg(s,o),s=Sc(s,c),s.flags|=4096;return s}return o=Yi(o.child,{mode:c.mode,children:c.children}),o.ref=s.ref,s.child=o,o.return=s,o}function Ac(o,s){var l=s.ref;if(l===null)o!==null&&o.ref!==null&&(s.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(i(284));(o===null||o.ref!==l)&&(s.flags|=4194816)}}function wh(o,s,l,c,y){return Ks(s),l=ah(o,s,l,c,void 0,y),c=lh(),o!==null&&!Nt?(uh(o,s,y),ji(o,s,y)):(qe&&c&&Bd(s),s.flags|=1,$t(o,s,l,y),s.child)}function h_(o,s,l,c,y,_){return Ks(s),s.updateQueue=null,l=gy(s,c,l,y),my(o),c=lh(),o!==null&&!Nt?(uh(o,s,_),ji(o,s,_)):(qe&&c&&Bd(s),s.flags|=1,$t(o,s,l,_),s.child)}function p_(o,s,l,c,y){if(Ks(s),s.stateNode===null){var _=Vr,A=l.contextType;typeof A=="object"&&A!==null&&(_=Yt(A)),_=new l(c,_),s.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=Ch,s.stateNode=_,_._reactInternals=s,_=s.stateNode,_.props=c,_.state=s.memoizedState,_.refs={},jd(s),A=l.contextType,_.context=typeof A=="object"&&A!==null?Yt(A):Vr,_.state=s.memoizedState,A=l.getDerivedStateFromProps,typeof A=="function"&&(Ah(s,l,A,c),_.state=s.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(A=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),A!==_.state&&Ch.enqueueReplaceState(_,_.state,null),yl(s,c,_,y),gl(),_.state=s.memoizedState),typeof _.componentDidMount=="function"&&(s.flags|=4194308),c=!0}else if(o===null){_=s.stateNode;var I=s.memoizedProps,U=Zs(l,I);_.props=U;var z=_.context,W=l.contextType;A=Vr,typeof W=="object"&&W!==null&&(A=Yt(W));var te=l.getDerivedStateFromProps;W=typeof te=="function"||typeof _.getSnapshotBeforeUpdate=="function",I=s.pendingProps!==I,W||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(I||z!==A)&&e_(s,_,c,A),Uo=!1;var J=s.memoizedState;_.state=J,yl(s,c,_,y),gl(),z=s.memoizedState,I||J!==z||Uo?(typeof te=="function"&&(Ah(s,l,te,c),z=s.memoizedState),(U=Uo||jy(s,l,U,c,J,z,A))?(W||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(s.flags|=4194308)):(typeof _.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=c,s.memoizedState=z),_.props=c,_.state=z,_.context=A,c=U):(typeof _.componentDidMount=="function"&&(s.flags|=4194308),c=!1)}else{_=s.stateNode,eh(o,s),A=s.memoizedProps,W=Zs(l,A),_.props=W,te=s.pendingProps,J=_.context,z=l.contextType,U=Vr,typeof z=="object"&&z!==null&&(U=Yt(z)),I=l.getDerivedStateFromProps,(z=typeof I=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(A!==te||J!==U)&&e_(s,_,c,U),Uo=!1,J=s.memoizedState,_.state=J,yl(s,c,_,y),gl();var $=s.memoizedState;A!==te||J!==$||Uo||o!==null&&o.dependencies!==null&&oc(o.dependencies)?(typeof I=="function"&&(Ah(s,l,I,c),$=s.memoizedState),(W=Uo||jy(s,l,W,c,J,$,U)||o!==null&&o.dependencies!==null&&oc(o.dependencies))?(z||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(c,$,U),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(c,$,U)),typeof _.componentDidUpdate=="function"&&(s.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof _.componentDidUpdate!="function"||A===o.memoizedProps&&J===o.memoizedState||(s.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||A===o.memoizedProps&&J===o.memoizedState||(s.flags|=1024),s.memoizedProps=c,s.memoizedState=$),_.props=c,_.state=$,_.context=U,c=W):(typeof _.componentDidUpdate!="function"||A===o.memoizedProps&&J===o.memoizedState||(s.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||A===o.memoizedProps&&J===o.memoizedState||(s.flags|=1024),c=!1)}return _=c,Ac(o,s),c=(s.flags&128)!==0,_||c?(_=s.stateNode,l=c&&typeof l.getDerivedStateFromError!="function"?null:_.render(),s.flags|=1,o!==null&&c?(s.child=Xs(s,o.child,null,y),s.child=Xs(s,null,l,y)):$t(o,s,l,y),s.memoizedState=_.state,o=s.child):o=ji(o,s,y),o}function m_(o,s,l,c){return zs(),s.flags|=256,$t(o,s,l,c),s.child}var Nh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function bh(o){return{baseLanes:o,cachePool:oy()}}function Mh(o,s,l){return o=o!==null?o.childLanes&~l:0,s&&(o|=bn),o}function g_(o,s,l){var c=s.pendingProps,y=!1,_=(s.flags&128)!==0,A;if((A=_)||(A=o!==null&&o.memoizedState===null?!1:(_t.current&2)!==0),A&&(y=!0,s.flags&=-129),A=(s.flags&32)!==0,s.flags&=-33,o===null){if(qe){if(y?Oo(s):Fo(),(o=rt)?(o=Cv(o,qn),o=o!==null&&o.data!=="&"?o:null,o!==null&&(s.memoizedState={dehydrated:o,treeContext:Do!==null?{id:Mi,overflow:Di}:null,retryLane:536870912,hydrationErrors:null},l=Qg(o),l.return=s,s.child=l,Kt=s,rt=null)):o=null,o===null)throw Po(s);return dp(o)?s.lanes=32:s.lanes=536870912,null}var I=c.children;return c=c.fallback,y?(Fo(),y=s.mode,I=Cc({mode:"hidden",children:I},y),c=Hs(c,y,l,null),I.return=s,c.return=s,I.sibling=c,s.child=I,c=s.child,c.memoizedState=bh(l),c.childLanes=Mh(o,A,l),s.memoizedState=Nh,Sl(null,c)):(Oo(s),Dh(s,I))}var U=o.memoizedState;if(U!==null&&(I=U.dehydrated,I!==null)){if(_)s.flags&256?(Oo(s),s.flags&=-257,s=xh(o,s,l)):s.memoizedState!==null?(Fo(),s.child=o.child,s.flags|=128,s=null):(Fo(),I=c.fallback,y=s.mode,c=Cc({mode:"visible",children:c.children},y),I=Hs(I,y,l,null),I.flags|=2,c.return=s,I.return=s,c.sibling=I,s.child=c,Xs(s,o.child,null,l),c=s.child,c.memoizedState=bh(l),c.childLanes=Mh(o,A,l),s.memoizedState=Nh,s=Sl(null,c));else if(Oo(s),dp(I)){if(A=I.nextSibling&&I.nextSibling.dataset,A)var z=A.dgst;A=z,c=Error(i(419)),c.stack="",c.digest=A,cl({value:c,source:null,stack:null}),s=xh(o,s,l)}else if(Nt||Or(o,s,l,!1),A=(l&o.childLanes)!==0,Nt||A){if(A=ot,A!==null&&(c=Ha(A,l),c!==0&&c!==U.retryLane))throw U.retryLane=c,Bs(o,c),_n(A,o,c),Rh;fp(I)||Pc(),s=xh(o,s,l)}else fp(I)?(s.flags|=192,s.child=o.child,s=null):(o=U.treeContext,rt=Hn(I.nextSibling),Kt=s,qe=!0,xo=null,qn=!1,o!==null&&Zg(s,o),s=Dh(s,c.children),s.flags|=4096);return s}return y?(Fo(),I=c.fallback,y=s.mode,U=o.child,z=U.sibling,c=Yi(U,{mode:"hidden",children:c.children}),c.subtreeFlags=U.subtreeFlags&65011712,z!==null?I=Yi(z,I):(I=Hs(I,y,l,null),I.flags|=2),I.return=s,c.return=s,c.sibling=I,s.child=c,Sl(null,c),c=s.child,I=o.child.memoizedState,I===null?I=bh(l):(y=I.cachePool,y!==null?(U=Rt._currentValue,y=y.parent!==U?{parent:U,pool:U}:y):y=oy(),I={baseLanes:I.baseLanes|l,cachePool:y}),c.memoizedState=I,c.childLanes=Mh(o,A,l),s.memoizedState=Nh,Sl(o.child,c)):(Oo(s),l=o.child,o=l.sibling,l=Yi(l,{mode:"visible",children:c.children}),l.return=s,l.sibling=null,o!==null&&(A=s.deletions,A===null?(s.deletions=[o],s.flags|=16):A.push(o)),s.child=l,s.memoizedState=null,l)}function Dh(o,s){return s=Cc({mode:"visible",children:s},o.mode),s.return=o,o.child=s}function Cc(o,s){return o=In(22,o,null,s),o.lanes=0,o}function xh(o,s,l){return Xs(s,o.child,null,l),o=Dh(s,s.pendingProps.children),o.flags|=2,s.memoizedState=null,o}function y_(o,s,l){o.lanes|=s;var c=o.alternate;c!==null&&(c.lanes|=s),Yd(o.return,s,l)}function Ph(o,s,l,c,y,_){var A=o.memoizedState;A===null?o.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:c,tail:l,tailMode:y,treeForkCount:_}:(A.isBackwards=s,A.rendering=null,A.renderingStartTime=0,A.last=c,A.tail=l,A.tailMode=y,A.treeForkCount=_)}function __(o,s,l){var c=s.pendingProps,y=c.revealOrder,_=c.tail;c=c.children;var A=_t.current,I=(A&2)!==0;if(I?(A=A&1|2,s.flags|=128):A&=1,ce(_t,A),$t(o,s,c,l),c=qe?ul:0,!I&&o!==null&&(o.flags&128)!==0)e:for(o=s.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&y_(o,l,s);else if(o.tag===19)y_(o,l,s);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break e;for(;o.sibling===null;){if(o.return===null||o.return===s)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}switch(y){case"forwards":for(l=s.child,y=null;l!==null;)o=l.alternate,o!==null&&dc(o)===null&&(y=l),l=l.sibling;l=y,l===null?(y=s.child,s.child=null):(y=l.sibling,l.sibling=null),Ph(s,!1,y,l,_,c);break;case"backwards":case"unstable_legacy-backwards":for(l=null,y=s.child,s.child=null;y!==null;){if(o=y.alternate,o!==null&&dc(o)===null){s.child=y;break}o=y.sibling,y.sibling=l,l=y,y=o}Ph(s,!0,l,null,_,c);break;case"together":Ph(s,!1,null,null,void 0,c);break;default:s.memoizedState=null}return s.child}function ji(o,s,l){if(o!==null&&(s.dependencies=o.dependencies),Bo|=s.lanes,(l&s.childLanes)===0)if(o!==null){if(Or(o,s,l,!1),(l&s.childLanes)===0)return null}else return null;if(o!==null&&s.child!==o.child)throw Error(i(153));if(s.child!==null){for(o=s.child,l=Yi(o,o.pendingProps),s.child=l,l.return=s;o.sibling!==null;)o=o.sibling,l=l.sibling=Yi(o,o.pendingProps),l.return=s;l.sibling=null}return s.child}function Vh(o,s){return(o.lanes&s)!==0?!0:(o=o.dependencies,!!(o!==null&&oc(o)))}function oR(o,s,l){switch(s.tag){case 3:Pt(s,s.stateNode.containerInfo),Vo(s,Rt,o.memoizedState.cache),zs();break;case 27:case 5:Cs(s);break;case 4:Pt(s,s.stateNode.containerInfo);break;case 10:Vo(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,sh(s),null;break;case 13:var c=s.memoizedState;if(c!==null)return c.dehydrated!==null?(Oo(s),s.flags|=128,null):(l&s.child.childLanes)!==0?g_(o,s,l):(Oo(s),o=ji(o,s,l),o!==null?o.sibling:null);Oo(s);break;case 19:var y=(o.flags&128)!==0;if(c=(l&s.childLanes)!==0,c||(Or(o,s,l,!1),c=(l&s.childLanes)!==0),y){if(c)return __(o,s,l);s.flags|=128}if(y=s.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),ce(_t,_t.current),c)break;return null;case 22:return s.lanes=0,c_(o,s,l,s.pendingProps);case 24:Vo(s,Rt,o.memoizedState.cache)}return ji(o,s,l)}function v_(o,s,l){if(o!==null)if(o.memoizedProps!==s.pendingProps)Nt=!0;else{if(!Vh(o,l)&&(s.flags&128)===0)return Nt=!1,oR(o,s,l);Nt=(o.flags&131072)!==0}else Nt=!1,qe&&(s.flags&1048576)!==0&&Wg(s,ul,s.index);switch(s.lanes=0,s.tag){case 16:e:{var c=s.pendingProps;if(o=$s(s.elementType),s.type=o,typeof o=="function")Fd(o)?(c=Zs(o,c),s.tag=1,s=p_(null,s,o,c,l)):(s.tag=0,s=wh(null,s,o,c,l));else{if(o!=null){var y=o.$$typeof;if(y===ae){s.tag=11,s=a_(null,s,o,c,l);break e}else if(y===M){s.tag=14,s=l_(null,s,o,c,l);break e}}throw s=Me(o)||o,Error(i(306,s,""))}}return s;case 0:return wh(o,s,s.type,s.pendingProps,l);case 1:return c=s.type,y=Zs(c,s.pendingProps),p_(o,s,c,y,l);case 3:e:{if(Pt(s,s.stateNode.containerInfo),o===null)throw Error(i(387));c=s.pendingProps;var _=s.memoizedState;y=_.element,eh(o,s),yl(s,c,null,l);var A=s.memoizedState;if(c=A.cache,Vo(s,Rt,c),c!==_.cache&&$d(s,[Rt],l,!0),gl(),c=A.element,_.isDehydrated)if(_={element:c,isDehydrated:!1,cache:A.cache},s.updateQueue.baseState=_,s.memoizedState=_,s.flags&256){s=m_(o,s,c,l);break e}else if(c!==y){y=On(Error(i(424)),s),cl(y),s=m_(o,s,c,l);break e}else{switch(o=s.stateNode.containerInfo,o.nodeType){case 9:o=o.body;break;default:o=o.nodeName==="HTML"?o.ownerDocument.body:o}for(rt=Hn(o.firstChild),Kt=s,qe=!0,xo=null,qn=!0,l=cy(s,null,c,l),s.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(zs(),c===y){s=ji(o,s,l);break e}$t(o,s,c,l)}s=s.child}return s;case 26:return Ac(o,s),o===null?(l=Mv(s.type,null,s.pendingProps,null))?s.memoizedState=l:qe||(l=s.type,o=s.pendingProps,c=Gc(De.current).createElement(l),c[At]=s,c[Ft]=o,Qt(c,l,o),Ct(c),s.stateNode=c):s.memoizedState=Mv(s.type,o.memoizedProps,s.pendingProps,o.memoizedState),null;case 27:return Cs(s),o===null&&qe&&(c=s.stateNode=wv(s.type,s.pendingProps,De.current),Kt=s,qn=!0,y=rt,Yo(s.type)?(hp=y,rt=Hn(c.firstChild)):rt=y),$t(o,s,s.pendingProps.children,l),Ac(o,s),o===null&&(s.flags|=4194304),s.child;case 5:return o===null&&qe&&((y=c=rt)&&(c=VR(c,s.type,s.pendingProps,qn),c!==null?(s.stateNode=c,Kt=s,rt=Hn(c.firstChild),qn=!1,y=!0):y=!1),y||Po(s)),Cs(s),y=s.type,_=s.pendingProps,A=o!==null?o.memoizedProps:null,c=_.children,lp(y,_)?c=null:A!==null&&lp(y,A)&&(s.flags|=32),s.memoizedState!==null&&(y=ah(o,s,QI,null,null,l),kl._currentValue=y),Ac(o,s),$t(o,s,c,l),s.child;case 6:return o===null&&qe&&((o=l=rt)&&(l=UR(l,s.pendingProps,qn),l!==null?(s.stateNode=l,Kt=s,rt=null,o=!0):o=!1),o||Po(s)),null;case 13:return g_(o,s,l);case 4:return Pt(s,s.stateNode.containerInfo),c=s.pendingProps,o===null?s.child=Xs(s,null,c,l):$t(o,s,c,l),s.child;case 11:return a_(o,s,s.type,s.pendingProps,l);case 7:return $t(o,s,s.pendingProps,l),s.child;case 8:return $t(o,s,s.pendingProps.children,l),s.child;case 12:return $t(o,s,s.pendingProps.children,l),s.child;case 10:return c=s.pendingProps,Vo(s,s.type,c.value),$t(o,s,c.children,l),s.child;case 9:return y=s.type._context,c=s.pendingProps.children,Ks(s),y=Yt(y),c=c(y),s.flags|=1,$t(o,s,c,l),s.child;case 14:return l_(o,s,s.type,s.pendingProps,l);case 15:return u_(o,s,s.type,s.pendingProps,l);case 19:return __(o,s,l);case 31:return iR(o,s,l);case 22:return c_(o,s,l,s.pendingProps);case 24:return Ks(s),c=Yt(Rt),o===null?(y=Wd(),y===null&&(y=ot,_=Qd(),y.pooledCache=_,_.refCount++,_!==null&&(y.pooledCacheLanes|=l),y=_),s.memoizedState={parent:c,cache:y},jd(s),Vo(s,Rt,y)):((o.lanes&l)!==0&&(eh(o,s),yl(s,null,null,l),gl()),y=o.memoizedState,_=s.memoizedState,y.parent!==c?(y={parent:c,cache:c},s.memoizedState=y,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=y),Vo(s,Rt,c)):(c=_.cache,Vo(s,Rt,c),c!==y.cache&&$d(s,[Rt],l,!0))),$t(o,s,s.pendingProps.children,l),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}function eo(o){o.flags|=4}function Uh(o,s,l,c,y){if((s=(o.mode&32)!==0)&&(s=!1),s){if(o.flags|=16777216,(y&335544128)===y)if(o.stateNode.complete)o.flags|=8192;else if(K_())o.flags|=8192;else throw Qs=lc,Zd}else o.flags&=-16777217}function T_(o,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)o.flags&=-16777217;else if(o.flags|=16777216,!Uv(s))if(K_())o.flags|=8192;else throw Qs=lc,Zd}function Ic(o,s){s!==null&&(o.flags|=4),o.flags&16384&&(s=o.tag!==22?Du():536870912,o.lanes|=s,Xr|=s)}function Al(o,s){if(!qe)switch(o.tailMode){case"hidden":s=o.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?o.tail=null:l.sibling=null;break;case"collapsed":l=o.tail;for(var c=null;l!==null;)l.alternate!==null&&(c=l),l=l.sibling;c===null?s||o.tail===null?o.tail=null:o.tail.sibling=null:c.sibling=null}}function at(o){var s=o.alternate!==null&&o.alternate.child===o.child,l=0,c=0;if(s)for(var y=o.child;y!==null;)l|=y.lanes|y.childLanes,c|=y.subtreeFlags&65011712,c|=y.flags&65011712,y.return=o,y=y.sibling;else for(y=o.child;y!==null;)l|=y.lanes|y.childLanes,c|=y.subtreeFlags,c|=y.flags,y.return=o,y=y.sibling;return o.subtreeFlags|=c,o.childLanes=l,s}function sR(o,s,l){var c=s.pendingProps;switch(Hd(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return at(s),null;case 1:return at(s),null;case 3:return l=s.stateNode,c=null,o!==null&&(c=o.memoizedState.cache),s.memoizedState.cache!==c&&(s.flags|=2048),Xi(Rt),ct(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(o===null||o.child===null)&&(kr(s)?eo(s):o===null||o.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Jd())),at(s),null;case 26:var y=s.type,_=s.memoizedState;return o===null?(eo(s),_!==null?(at(s),T_(s,_)):(at(s),Uh(s,y,null,c,l))):_?_!==o.memoizedState?(eo(s),at(s),T_(s,_)):(at(s),s.flags&=-16777217):(o=o.memoizedProps,o!==c&&eo(s),at(s),Uh(s,y,o,c,l)),null;case 27:if(mr(s),l=De.current,y=s.type,o!==null&&s.stateNode!=null)o.memoizedProps!==c&&eo(s);else{if(!c){if(s.stateNode===null)throw Error(i(166));return at(s),null}o=he.current,kr(s)?jg(s):(o=wv(y,c,l),s.stateNode=o,eo(s))}return at(s),null;case 5:if(mr(s),y=s.type,o!==null&&s.stateNode!=null)o.memoizedProps!==c&&eo(s);else{if(!c){if(s.stateNode===null)throw Error(i(166));return at(s),null}if(_=he.current,kr(s))jg(s);else{var A=Gc(De.current);switch(_){case 1:_=A.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:_=A.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":_=A.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":_=A.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":_=A.createElement("div"),_.innerHTML="<script><\/script>",_=_.removeChild(_.firstChild);break;case"select":_=typeof c.is=="string"?A.createElement("select",{is:c.is}):A.createElement("select"),c.multiple?_.multiple=!0:c.size&&(_.size=c.size);break;default:_=typeof c.is=="string"?A.createElement(y,{is:c.is}):A.createElement(y)}}_[At]=s,_[Ft]=c;e:for(A=s.child;A!==null;){if(A.tag===5||A.tag===6)_.appendChild(A.stateNode);else if(A.tag!==4&&A.tag!==27&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===s)break e;for(;A.sibling===null;){if(A.return===null||A.return===s)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}s.stateNode=_;e:switch(Qt(_,y,c),y){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&eo(s)}}return at(s),Uh(s,s.type,o===null?null:o.memoizedProps,s.pendingProps,l),null;case 6:if(o&&s.stateNode!=null)o.memoizedProps!==c&&eo(s);else{if(typeof c!="string"&&s.stateNode===null)throw Error(i(166));if(o=De.current,kr(s)){if(o=s.stateNode,l=s.memoizedProps,c=null,y=Kt,y!==null)switch(y.tag){case 27:case 5:c=y.memoizedProps}o[At]=s,o=!!(o.nodeValue===l||c!==null&&c.suppressHydrationWarning===!0||gv(o.nodeValue,l)),o||Po(s,!0)}else o=Gc(o).createTextNode(c),o[At]=s,s.stateNode=o}return at(s),null;case 31:if(l=s.memoizedState,o===null||o.memoizedState!==null){if(c=kr(s),l!==null){if(o===null){if(!c)throw Error(i(318));if(o=s.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(i(557));o[At]=s}else zs(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;at(s),o=!1}else l=Jd(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=l),o=!0;if(!o)return s.flags&256?(wn(s),s):(wn(s),null);if((s.flags&128)!==0)throw Error(i(558))}return at(s),null;case 13:if(c=s.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(y=kr(s),c!==null&&c.dehydrated!==null){if(o===null){if(!y)throw Error(i(318));if(y=s.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(i(317));y[At]=s}else zs(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;at(s),y=!1}else y=Jd(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=y),y=!0;if(!y)return s.flags&256?(wn(s),s):(wn(s),null)}return wn(s),(s.flags&128)!==0?(s.lanes=l,s):(l=c!==null,o=o!==null&&o.memoizedState!==null,l&&(c=s.child,y=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(y=c.alternate.memoizedState.cachePool.pool),_=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(_=c.memoizedState.cachePool.pool),_!==y&&(c.flags|=2048)),l!==o&&l&&(s.child.flags|=8192),Ic(s,s.updateQueue),at(s),null);case 4:return ct(),o===null&&ip(s.stateNode.containerInfo),at(s),null;case 10:return Xi(s.type),at(s),null;case 19:if(ie(_t),c=s.memoizedState,c===null)return at(s),null;if(y=(s.flags&128)!==0,_=c.rendering,_===null)if(y)Al(c,!1);else{if(mt!==0||o!==null&&(o.flags&128)!==0)for(o=s.child;o!==null;){if(_=dc(o),_!==null){for(s.flags|=128,Al(c,!1),o=_.updateQueue,s.updateQueue=o,Ic(s,o),s.subtreeFlags=0,o=l,l=s.child;l!==null;)$g(l,o),l=l.sibling;return ce(_t,_t.current&1|2),qe&&$i(s,c.treeForkCount),s.child}o=o.sibling}c.tail!==null&&an()>Mc&&(s.flags|=128,y=!0,Al(c,!1),s.lanes=4194304)}else{if(!y)if(o=dc(_),o!==null){if(s.flags|=128,y=!0,o=o.updateQueue,s.updateQueue=o,Ic(s,o),Al(c,!0),c.tail===null&&c.tailMode==="hidden"&&!_.alternate&&!qe)return at(s),null}else 2*an()-c.renderingStartTime>Mc&&l!==536870912&&(s.flags|=128,y=!0,Al(c,!1),s.lanes=4194304);c.isBackwards?(_.sibling=s.child,s.child=_):(o=c.last,o!==null?o.sibling=_:s.child=_,c.last=_)}return c.tail!==null?(o=c.tail,c.rendering=o,c.tail=o.sibling,c.renderingStartTime=an(),o.sibling=null,l=_t.current,ce(_t,y?l&1|2:l&1),qe&&$i(s,c.treeForkCount),o):(at(s),null);case 22:case 23:return wn(s),oh(),c=s.memoizedState!==null,o!==null?o.memoizedState!==null!==c&&(s.flags|=8192):c&&(s.flags|=8192),c?(l&536870912)!==0&&(s.flags&128)===0&&(at(s),s.subtreeFlags&6&&(s.flags|=8192)):at(s),l=s.updateQueue,l!==null&&Ic(s,l.retryQueue),l=null,o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(l=o.memoizedState.cachePool.pool),c=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),c!==l&&(s.flags|=2048),o!==null&&ie(Ys),null;case 24:return l=null,o!==null&&(l=o.memoizedState.cache),s.memoizedState.cache!==l&&(s.flags|=2048),Xi(Rt),at(s),null;case 25:return null;case 30:return null}throw Error(i(156,s.tag))}function rR(o,s){switch(Hd(s),s.tag){case 1:return o=s.flags,o&65536?(s.flags=o&-65537|128,s):null;case 3:return Xi(Rt),ct(),o=s.flags,(o&65536)!==0&&(o&128)===0?(s.flags=o&-65537|128,s):null;case 26:case 27:case 5:return mr(s),null;case 31:if(s.memoizedState!==null){if(wn(s),s.alternate===null)throw Error(i(340));zs()}return o=s.flags,o&65536?(s.flags=o&-65537|128,s):null;case 13:if(wn(s),o=s.memoizedState,o!==null&&o.dehydrated!==null){if(s.alternate===null)throw Error(i(340));zs()}return o=s.flags,o&65536?(s.flags=o&-65537|128,s):null;case 19:return ie(_t),null;case 4:return ct(),null;case 10:return Xi(s.type),null;case 22:case 23:return wn(s),oh(),o!==null&&ie(Ys),o=s.flags,o&65536?(s.flags=o&-65537|128,s):null;case 24:return Xi(Rt),null;case 25:return null;default:return null}}function E_(o,s){switch(Hd(s),s.tag){case 3:Xi(Rt),ct();break;case 26:case 27:case 5:mr(s);break;case 4:ct();break;case 31:s.memoizedState!==null&&wn(s);break;case 13:wn(s);break;case 19:ie(_t);break;case 10:Xi(s.type);break;case 22:case 23:wn(s),oh(),o!==null&&ie(Ys);break;case 24:Xi(Rt)}}function Cl(o,s){try{var l=s.updateQueue,c=l!==null?l.lastEffect:null;if(c!==null){var y=c.next;l=y;do{if((l.tag&o)===o){c=void 0;var _=l.create,A=l.inst;c=_(),A.destroy=c}l=l.next}while(l!==y)}}catch(I){je(s,s.return,I)}}function Go(o,s,l){try{var c=s.updateQueue,y=c!==null?c.lastEffect:null;if(y!==null){var _=y.next;c=_;do{if((c.tag&o)===o){var A=c.inst,I=A.destroy;if(I!==void 0){A.destroy=void 0,y=s;var U=l,z=I;try{z()}catch(W){je(y,U,W)}}}c=c.next}while(c!==_)}}catch(W){je(s,s.return,W)}}function S_(o){var s=o.updateQueue;if(s!==null){var l=o.stateNode;try{dy(s,l)}catch(c){je(o,o.return,c)}}}function A_(o,s,l){l.props=Zs(o.type,o.memoizedProps),l.state=o.memoizedState;try{l.componentWillUnmount()}catch(c){je(o,s,c)}}function Il(o,s){try{var l=o.ref;if(l!==null){switch(o.tag){case 26:case 27:case 5:var c=o.stateNode;break;case 30:c=o.stateNode;break;default:c=o.stateNode}typeof l=="function"?o.refCleanup=l(c):l.current=c}}catch(y){je(o,s,y)}}function xi(o,s){var l=o.ref,c=o.refCleanup;if(l!==null)if(typeof c=="function")try{c()}catch(y){je(o,s,y)}finally{o.refCleanup=null,o=o.alternate,o!=null&&(o.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(y){je(o,s,y)}else l.current=null}function C_(o){var s=o.type,l=o.memoizedProps,c=o.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":l.autoFocus&&c.focus();break e;case"img":l.src?c.src=l.src:l.srcSet&&(c.srcset=l.srcSet)}}catch(y){je(o,o.return,y)}}function Lh(o,s,l){try{var c=o.stateNode;NR(c,o.type,l,s),c[Ft]=s}catch(y){je(o,o.return,y)}}function I_(o){return o.tag===5||o.tag===3||o.tag===26||o.tag===27&&Yo(o.type)||o.tag===4}function kh(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||I_(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.tag===27&&Yo(o.type)||o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function Oh(o,s,l){var c=o.tag;if(c===5||c===6)o=o.stateNode,s?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(o,s):(s=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,s.appendChild(o),l=l._reactRootContainer,l!=null||s.onclick!==null||(s.onclick=Zn));else if(c!==4&&(c===27&&Yo(o.type)&&(l=o.stateNode,s=null),o=o.child,o!==null))for(Oh(o,s,l),o=o.sibling;o!==null;)Oh(o,s,l),o=o.sibling}function Rc(o,s,l){var c=o.tag;if(c===5||c===6)o=o.stateNode,s?l.insertBefore(o,s):l.appendChild(o);else if(c!==4&&(c===27&&Yo(o.type)&&(l=o.stateNode),o=o.child,o!==null))for(Rc(o,s,l),o=o.sibling;o!==null;)Rc(o,s,l),o=o.sibling}function R_(o){var s=o.stateNode,l=o.memoizedProps;try{for(var c=o.type,y=s.attributes;y.length;)s.removeAttributeNode(y[0]);Qt(s,c,l),s[At]=o,s[Ft]=l}catch(_){je(o,o.return,_)}}var to=!1,bt=!1,Fh=!1,w_=typeof WeakSet=="function"?WeakSet:Set,qt=null;function aR(o,s){if(o=o.containerInfo,rp=Yc,o=Fg(o),xd(o)){if("selectionStart"in o)var l={start:o.selectionStart,end:o.selectionEnd};else e:{l=(l=o.ownerDocument)&&l.defaultView||window;var c=l.getSelection&&l.getSelection();if(c&&c.rangeCount!==0){l=c.anchorNode;var y=c.anchorOffset,_=c.focusNode;c=c.focusOffset;try{l.nodeType,_.nodeType}catch{l=null;break e}var A=0,I=-1,U=-1,z=0,W=0,te=o,J=null;t:for(;;){for(var $;te!==l||y!==0&&te.nodeType!==3||(I=A+y),te!==_||c!==0&&te.nodeType!==3||(U=A+c),te.nodeType===3&&(A+=te.nodeValue.length),($=te.firstChild)!==null;)J=te,te=$;for(;;){if(te===o)break t;if(J===l&&++z===y&&(I=A),J===_&&++W===c&&(U=A),($=te.nextSibling)!==null)break;te=J,J=te.parentNode}te=$}l=I===-1||U===-1?null:{start:I,end:U}}else l=null}l=l||{start:0,end:0}}else l=null;for(ap={focusedElem:o,selectionRange:l},Yc=!1,qt=s;qt!==null;)if(s=qt,o=s.child,(s.subtreeFlags&1028)!==0&&o!==null)o.return=s,qt=o;else for(;qt!==null;){switch(s=qt,_=s.alternate,o=s.flags,s.tag){case 0:if((o&4)!==0&&(o=s.updateQueue,o=o!==null?o.events:null,o!==null))for(l=0;l<o.length;l++)y=o[l],y.ref.impl=y.nextImpl;break;case 11:case 15:break;case 1:if((o&1024)!==0&&_!==null){o=void 0,l=s,y=_.memoizedProps,_=_.memoizedState,c=l.stateNode;try{var pe=Zs(l.type,y);o=c.getSnapshotBeforeUpdate(pe,_),c.__reactInternalSnapshotBeforeUpdate=o}catch(Te){je(l,l.return,Te)}}break;case 3:if((o&1024)!==0){if(o=s.stateNode.containerInfo,l=o.nodeType,l===9)cp(o);else if(l===1)switch(o.nodeName){case"HEAD":case"HTML":case"BODY":cp(o);break;default:o.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((o&1024)!==0)throw Error(i(163))}if(o=s.sibling,o!==null){o.return=s.return,qt=o;break}qt=s.return}}function N_(o,s,l){var c=l.flags;switch(l.tag){case 0:case 11:case 15:io(o,l),c&4&&Cl(5,l);break;case 1:if(io(o,l),c&4)if(o=l.stateNode,s===null)try{o.componentDidMount()}catch(A){je(l,l.return,A)}else{var y=Zs(l.type,s.memoizedProps);s=s.memoizedState;try{o.componentDidUpdate(y,s,o.__reactInternalSnapshotBeforeUpdate)}catch(A){je(l,l.return,A)}}c&64&&S_(l),c&512&&Il(l,l.return);break;case 3:if(io(o,l),c&64&&(o=l.updateQueue,o!==null)){if(s=null,l.child!==null)switch(l.child.tag){case 27:case 5:s=l.child.stateNode;break;case 1:s=l.child.stateNode}try{dy(o,s)}catch(A){je(l,l.return,A)}}break;case 27:s===null&&c&4&&R_(l);case 26:case 5:io(o,l),s===null&&c&4&&C_(l),c&512&&Il(l,l.return);break;case 12:io(o,l);break;case 31:io(o,l),c&4&&D_(o,l);break;case 13:io(o,l),c&4&&x_(o,l),c&64&&(o=l.memoizedState,o!==null&&(o=o.dehydrated,o!==null&&(l=gR.bind(null,l),LR(o,l))));break;case 22:if(c=l.memoizedState!==null||to,!c){s=s!==null&&s.memoizedState!==null||bt,y=to;var _=bt;to=c,(bt=s)&&!_?oo(o,l,(l.subtreeFlags&8772)!==0):io(o,l),to=y,bt=_}break;case 30:break;default:io(o,l)}}function b_(o){var s=o.alternate;s!==null&&(o.alternate=null,b_(s)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(s=o.stateNode,s!==null&&Tr(s)),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}var dt=null,pn=!1;function no(o,s,l){for(l=l.child;l!==null;)M_(o,s,l),l=l.sibling}function M_(o,s,l){if(zt&&typeof zt.onCommitFiberUnmount=="function")try{zt.onCommitFiberUnmount($n,l)}catch{}switch(l.tag){case 26:bt||xi(l,s),no(o,s,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:bt||xi(l,s);var c=dt,y=pn;Yo(l.type)&&(dt=l.stateNode,pn=!1),no(o,s,l),Vl(l.stateNode),dt=c,pn=y;break;case 5:bt||xi(l,s);case 6:if(c=dt,y=pn,dt=null,no(o,s,l),dt=c,pn=y,dt!==null)if(pn)try{(dt.nodeType===9?dt.body:dt.nodeName==="HTML"?dt.ownerDocument.body:dt).removeChild(l.stateNode)}catch(_){je(l,s,_)}else try{dt.removeChild(l.stateNode)}catch(_){je(l,s,_)}break;case 18:dt!==null&&(pn?(o=dt,Sv(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,l.stateNode),oa(o)):Sv(dt,l.stateNode));break;case 4:c=dt,y=pn,dt=l.stateNode.containerInfo,pn=!0,no(o,s,l),dt=c,pn=y;break;case 0:case 11:case 14:case 15:Go(2,l,s),bt||Go(4,l,s),no(o,s,l);break;case 1:bt||(xi(l,s),c=l.stateNode,typeof c.componentWillUnmount=="function"&&A_(l,s,c)),no(o,s,l);break;case 21:no(o,s,l);break;case 22:bt=(c=bt)||l.memoizedState!==null,no(o,s,l),bt=c;break;default:no(o,s,l)}}function D_(o,s){if(s.memoizedState===null&&(o=s.alternate,o!==null&&(o=o.memoizedState,o!==null))){o=o.dehydrated;try{oa(o)}catch(l){je(s,s.return,l)}}}function x_(o,s){if(s.memoizedState===null&&(o=s.alternate,o!==null&&(o=o.memoizedState,o!==null&&(o=o.dehydrated,o!==null))))try{oa(o)}catch(l){je(s,s.return,l)}}function lR(o){switch(o.tag){case 31:case 13:case 19:var s=o.stateNode;return s===null&&(s=o.stateNode=new w_),s;case 22:return o=o.stateNode,s=o._retryCache,s===null&&(s=o._retryCache=new w_),s;default:throw Error(i(435,o.tag))}}function wc(o,s){var l=lR(o);s.forEach(function(c){if(!l.has(c)){l.add(c);var y=yR.bind(null,o,c);c.then(y,y)}})}function mn(o,s){var l=s.deletions;if(l!==null)for(var c=0;c<l.length;c++){var y=l[c],_=o,A=s,I=A;e:for(;I!==null;){switch(I.tag){case 27:if(Yo(I.type)){dt=I.stateNode,pn=!1;break e}break;case 5:dt=I.stateNode,pn=!1;break e;case 3:case 4:dt=I.stateNode.containerInfo,pn=!0;break e}I=I.return}if(dt===null)throw Error(i(160));M_(_,A,y),dt=null,pn=!1,_=y.alternate,_!==null&&(_.return=null),y.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)P_(s,o),s=s.sibling}var oi=null;function P_(o,s){var l=o.alternate,c=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:mn(s,o),gn(o),c&4&&(Go(3,o,o.return),Cl(3,o),Go(5,o,o.return));break;case 1:mn(s,o),gn(o),c&512&&(bt||l===null||xi(l,l.return)),c&64&&to&&(o=o.updateQueue,o!==null&&(c=o.callbacks,c!==null&&(l=o.shared.hiddenCallbacks,o.shared.hiddenCallbacks=l===null?c:l.concat(c))));break;case 26:var y=oi;if(mn(s,o),gn(o),c&512&&(bt||l===null||xi(l,l.return)),c&4){var _=l!==null?l.memoizedState:null;if(c=o.memoizedState,l===null)if(c===null)if(o.stateNode===null){e:{c=o.type,l=o.memoizedProps,y=y.ownerDocument||y;t:switch(c){case"title":_=y.getElementsByTagName("title")[0],(!_||_[_i]||_[At]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=y.createElement(c),y.head.insertBefore(_,y.querySelector("head > title"))),Qt(_,c,l),_[At]=o,Ct(_),c=_;break e;case"link":var A=Pv("link","href",y).get(c+(l.href||""));if(A){for(var I=0;I<A.length;I++)if(_=A[I],_.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&_.getAttribute("rel")===(l.rel==null?null:l.rel)&&_.getAttribute("title")===(l.title==null?null:l.title)&&_.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){A.splice(I,1);break t}}_=y.createElement(c),Qt(_,c,l),y.head.appendChild(_);break;case"meta":if(A=Pv("meta","content",y).get(c+(l.content||""))){for(I=0;I<A.length;I++)if(_=A[I],_.getAttribute("content")===(l.content==null?null:""+l.content)&&_.getAttribute("name")===(l.name==null?null:l.name)&&_.getAttribute("property")===(l.property==null?null:l.property)&&_.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&_.getAttribute("charset")===(l.charSet==null?null:l.charSet)){A.splice(I,1);break t}}_=y.createElement(c),Qt(_,c,l),y.head.appendChild(_);break;default:throw Error(i(468,c))}_[At]=o,Ct(_),c=_}o.stateNode=c}else Vv(y,o.type,o.stateNode);else o.stateNode=xv(y,c,o.memoizedProps);else _!==c?(_===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):_.count--,c===null?Vv(y,o.type,o.stateNode):xv(y,c,o.memoizedProps)):c===null&&o.stateNode!==null&&Lh(o,o.memoizedProps,l.memoizedProps)}break;case 27:mn(s,o),gn(o),c&512&&(bt||l===null||xi(l,l.return)),l!==null&&c&4&&Lh(o,o.memoizedProps,l.memoizedProps);break;case 5:if(mn(s,o),gn(o),c&512&&(bt||l===null||xi(l,l.return)),o.flags&32){y=o.stateNode;try{hn(y,"")}catch(pe){je(o,o.return,pe)}}c&4&&o.stateNode!=null&&(y=o.memoizedProps,Lh(o,y,l!==null?l.memoizedProps:y)),c&1024&&(Fh=!0);break;case 6:if(mn(s,o),gn(o),c&4){if(o.stateNode===null)throw Error(i(162));c=o.memoizedProps,l=o.stateNode;try{l.nodeValue=c}catch(pe){je(o,o.return,pe)}}break;case 3:if(Hc=null,y=oi,oi=qc(s.containerInfo),mn(s,o),oi=y,gn(o),c&4&&l!==null&&l.memoizedState.isDehydrated)try{oa(s.containerInfo)}catch(pe){je(o,o.return,pe)}Fh&&(Fh=!1,V_(o));break;case 4:c=oi,oi=qc(o.stateNode.containerInfo),mn(s,o),gn(o),oi=c;break;case 12:mn(s,o),gn(o);break;case 31:mn(s,o),gn(o),c&4&&(c=o.updateQueue,c!==null&&(o.updateQueue=null,wc(o,c)));break;case 13:mn(s,o),gn(o),o.child.flags&8192&&o.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(bc=an()),c&4&&(c=o.updateQueue,c!==null&&(o.updateQueue=null,wc(o,c)));break;case 22:y=o.memoizedState!==null;var U=l!==null&&l.memoizedState!==null,z=to,W=bt;if(to=z||y,bt=W||U,mn(s,o),bt=W,to=z,gn(o),c&8192)e:for(s=o.stateNode,s._visibility=y?s._visibility&-2:s._visibility|1,y&&(l===null||U||to||bt||js(o)),l=null,s=o;;){if(s.tag===5||s.tag===26){if(l===null){U=l=s;try{if(_=U.stateNode,y)A=_.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none";else{I=U.stateNode;var te=U.memoizedProps.style,J=te!=null&&te.hasOwnProperty("display")?te.display:null;I.style.display=J==null||typeof J=="boolean"?"":(""+J).trim()}}catch(pe){je(U,U.return,pe)}}}else if(s.tag===6){if(l===null){U=s;try{U.stateNode.nodeValue=y?"":U.memoizedProps}catch(pe){je(U,U.return,pe)}}}else if(s.tag===18){if(l===null){U=s;try{var $=U.stateNode;y?Av($,!0):Av(U.stateNode,!1)}catch(pe){je(U,U.return,pe)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===o)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===o)break e;for(;s.sibling===null;){if(s.return===null||s.return===o)break e;l===s&&(l=null),s=s.return}l===s&&(l=null),s.sibling.return=s.return,s=s.sibling}c&4&&(c=o.updateQueue,c!==null&&(l=c.retryQueue,l!==null&&(c.retryQueue=null,wc(o,l))));break;case 19:mn(s,o),gn(o),c&4&&(c=o.updateQueue,c!==null&&(o.updateQueue=null,wc(o,c)));break;case 30:break;case 21:break;default:mn(s,o),gn(o)}}function gn(o){var s=o.flags;if(s&2){try{for(var l,c=o.return;c!==null;){if(I_(c)){l=c;break}c=c.return}if(l==null)throw Error(i(160));switch(l.tag){case 27:var y=l.stateNode,_=kh(o);Rc(o,_,y);break;case 5:var A=l.stateNode;l.flags&32&&(hn(A,""),l.flags&=-33);var I=kh(o);Rc(o,I,A);break;case 3:case 4:var U=l.stateNode.containerInfo,z=kh(o);Oh(o,z,U);break;default:throw Error(i(161))}}catch(W){je(o,o.return,W)}o.flags&=-3}s&4096&&(o.flags&=-4097)}function V_(o){if(o.subtreeFlags&1024)for(o=o.child;o!==null;){var s=o;V_(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),o=o.sibling}}function io(o,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)N_(o,s.alternate,s),s=s.sibling}function js(o){for(o=o.child;o!==null;){var s=o;switch(s.tag){case 0:case 11:case 14:case 15:Go(4,s,s.return),js(s);break;case 1:xi(s,s.return);var l=s.stateNode;typeof l.componentWillUnmount=="function"&&A_(s,s.return,l),js(s);break;case 27:Vl(s.stateNode);case 26:case 5:xi(s,s.return),js(s);break;case 22:s.memoizedState===null&&js(s);break;case 30:js(s);break;default:js(s)}o=o.sibling}}function oo(o,s,l){for(l=l&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var c=s.alternate,y=o,_=s,A=_.flags;switch(_.tag){case 0:case 11:case 15:oo(y,_,l),Cl(4,_);break;case 1:if(oo(y,_,l),c=_,y=c.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(z){je(c,c.return,z)}if(c=_,y=c.updateQueue,y!==null){var I=c.stateNode;try{var U=y.shared.hiddenCallbacks;if(U!==null)for(y.shared.hiddenCallbacks=null,y=0;y<U.length;y++)fy(U[y],I)}catch(z){je(c,c.return,z)}}l&&A&64&&S_(_),Il(_,_.return);break;case 27:R_(_);case 26:case 5:oo(y,_,l),l&&c===null&&A&4&&C_(_),Il(_,_.return);break;case 12:oo(y,_,l);break;case 31:oo(y,_,l),l&&A&4&&D_(y,_);break;case 13:oo(y,_,l),l&&A&4&&x_(y,_);break;case 22:_.memoizedState===null&&oo(y,_,l),Il(_,_.return);break;case 30:break;default:oo(y,_,l)}s=s.sibling}}function Gh(o,s){var l=null;o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(l=o.memoizedState.cachePool.pool),o=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(o=s.memoizedState.cachePool.pool),o!==l&&(o!=null&&o.refCount++,l!=null&&fl(l))}function qh(o,s){o=null,s.alternate!==null&&(o=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==o&&(s.refCount++,o!=null&&fl(o))}function si(o,s,l,c){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)U_(o,s,l,c),s=s.sibling}function U_(o,s,l,c){var y=s.flags;switch(s.tag){case 0:case 11:case 15:si(o,s,l,c),y&2048&&Cl(9,s);break;case 1:si(o,s,l,c);break;case 3:si(o,s,l,c),y&2048&&(o=null,s.alternate!==null&&(o=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==o&&(s.refCount++,o!=null&&fl(o)));break;case 12:if(y&2048){si(o,s,l,c),o=s.stateNode;try{var _=s.memoizedProps,A=_.id,I=_.onPostCommit;typeof I=="function"&&I(A,s.alternate===null?"mount":"update",o.passiveEffectDuration,-0)}catch(U){je(s,s.return,U)}}else si(o,s,l,c);break;case 31:si(o,s,l,c);break;case 13:si(o,s,l,c);break;case 23:break;case 22:_=s.stateNode,A=s.alternate,s.memoizedState!==null?_._visibility&2?si(o,s,l,c):Rl(o,s):_._visibility&2?si(o,s,l,c):(_._visibility|=2,Yr(o,s,l,c,(s.subtreeFlags&10256)!==0||!1)),y&2048&&Gh(A,s);break;case 24:si(o,s,l,c),y&2048&&qh(s.alternate,s);break;default:si(o,s,l,c)}}function Yr(o,s,l,c,y){for(y=y&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var _=o,A=s,I=l,U=c,z=A.flags;switch(A.tag){case 0:case 11:case 15:Yr(_,A,I,U,y),Cl(8,A);break;case 23:break;case 22:var W=A.stateNode;A.memoizedState!==null?W._visibility&2?Yr(_,A,I,U,y):Rl(_,A):(W._visibility|=2,Yr(_,A,I,U,y)),y&&z&2048&&Gh(A.alternate,A);break;case 24:Yr(_,A,I,U,y),y&&z&2048&&qh(A.alternate,A);break;default:Yr(_,A,I,U,y)}s=s.sibling}}function Rl(o,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var l=o,c=s,y=c.flags;switch(c.tag){case 22:Rl(l,c),y&2048&&Gh(c.alternate,c);break;case 24:Rl(l,c),y&2048&&qh(c.alternate,c);break;default:Rl(l,c)}s=s.sibling}}var wl=8192;function $r(o,s,l){if(o.subtreeFlags&wl)for(o=o.child;o!==null;)L_(o,s,l),o=o.sibling}function L_(o,s,l){switch(o.tag){case 26:$r(o,s,l),o.flags&wl&&o.memoizedState!==null&&$R(l,oi,o.memoizedState,o.memoizedProps);break;case 5:$r(o,s,l);break;case 3:case 4:var c=oi;oi=qc(o.stateNode.containerInfo),$r(o,s,l),oi=c;break;case 22:o.memoizedState===null&&(c=o.alternate,c!==null&&c.memoizedState!==null?(c=wl,wl=16777216,$r(o,s,l),wl=c):$r(o,s,l));break;default:$r(o,s,l)}}function k_(o){var s=o.alternate;if(s!==null&&(o=s.child,o!==null)){s.child=null;do s=o.sibling,o.sibling=null,o=s;while(o!==null)}}function Nl(o){var s=o.deletions;if((o.flags&16)!==0){if(s!==null)for(var l=0;l<s.length;l++){var c=s[l];qt=c,F_(c,o)}k_(o)}if(o.subtreeFlags&10256)for(o=o.child;o!==null;)O_(o),o=o.sibling}function O_(o){switch(o.tag){case 0:case 11:case 15:Nl(o),o.flags&2048&&Go(9,o,o.return);break;case 3:Nl(o);break;case 12:Nl(o);break;case 22:var s=o.stateNode;o.memoizedState!==null&&s._visibility&2&&(o.return===null||o.return.tag!==13)?(s._visibility&=-3,Nc(o)):Nl(o);break;default:Nl(o)}}function Nc(o){var s=o.deletions;if((o.flags&16)!==0){if(s!==null)for(var l=0;l<s.length;l++){var c=s[l];qt=c,F_(c,o)}k_(o)}for(o=o.child;o!==null;){switch(s=o,s.tag){case 0:case 11:case 15:Go(8,s,s.return),Nc(s);break;case 22:l=s.stateNode,l._visibility&2&&(l._visibility&=-3,Nc(s));break;default:Nc(s)}o=o.sibling}}function F_(o,s){for(;qt!==null;){var l=qt;switch(l.tag){case 0:case 11:case 15:Go(8,l,s);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var c=l.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:fl(l.memoizedState.cache)}if(c=l.child,c!==null)c.return=l,qt=c;else e:for(l=o;qt!==null;){c=qt;var y=c.sibling,_=c.return;if(b_(c),c===l){qt=null;break e}if(y!==null){y.return=_,qt=y;break e}qt=_}}}var uR={getCacheForType:function(o){var s=Yt(Rt),l=s.data.get(o);return l===void 0&&(l=o(),s.data.set(o,l)),l},cacheSignal:function(){return Yt(Rt).controller.signal}},cR=typeof WeakMap=="function"?WeakMap:Map,$e=0,ot=null,Ve=null,Le=0,Ze=0,Nn=null,qo=!1,Qr=!1,Bh=!1,so=0,mt=0,Bo=0,er=0,Hh=0,bn=0,Xr=0,bl=null,yn=null,zh=!1,bc=0,G_=0,Mc=1/0,Dc=null,Ho=null,Ut=0,zo=null,Wr=null,ro=0,Jh=0,Kh=null,q_=null,Ml=0,Yh=null;function Mn(){return($e&2)!==0&&Le!==0?Le&-Le:X.T!==null?jh():xu()}function B_(){if(bn===0)if((Le&536870912)===0||qe){var o=ws;ws<<=1,(ws&3932160)===0&&(ws=262144),bn=o}else bn=536870912;return o=Rn.current,o!==null&&(o.flags|=32),bn}function _n(o,s,l){(o===ot&&(Ze===2||Ze===9)||o.cancelPendingCommit!==null)&&(Zr(o,0),Jo(o,Le,bn,!1)),Ns(o,l),(($e&2)===0||o!==ot)&&(o===ot&&(($e&2)===0&&(er|=l),mt===4&&Jo(o,Le,bn,!1)),Pi(o))}function H_(o,s,l){if(($e&6)!==0)throw Error(i(327));var c=!l&&(s&127)===0&&(s&o.expiredLanes)===0||Qn(o,s),y=c?hR(o,s):Qh(o,s,!0),_=c;do{if(y===0){Qr&&!c&&Jo(o,s,0,!1);break}else{if(l=o.current.alternate,_&&!fR(l)){y=Qh(o,s,!1),_=!1;continue}if(y===2){if(_=s,o.errorRecoveryDisabledLanes&_)var A=0;else A=o.pendingLanes&-536870913,A=A!==0?A:A&536870912?536870912:0;if(A!==0){s=A;e:{var I=o;y=bl;var U=I.current.memoizedState.isDehydrated;if(U&&(Zr(I,A).flags|=256),A=Qh(I,A,!1),A!==2){if(Bh&&!U){I.errorRecoveryDisabledLanes|=_,er|=_,y=4;break e}_=yn,yn=y,_!==null&&(yn===null?yn=_:yn.push.apply(yn,_))}y=A}if(_=!1,y!==2)continue}}if(y===1){Zr(o,0),Jo(o,s,0,!0);break}e:{switch(c=o,_=y,_){case 0:case 1:throw Error(i(345));case 4:if((s&4194048)!==s)break;case 6:Jo(c,s,bn,!qo);break e;case 2:yn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((s&62914560)===s&&(y=bc+300-an(),10<y)){if(Jo(c,s,bn,!qo),mi(c,0,!0)!==0)break e;ro=s,c.timeoutHandle=Tv(z_.bind(null,c,l,yn,Dc,zh,s,bn,er,Xr,qo,_,"Throttled",-0,0),y);break e}z_(c,l,yn,Dc,zh,s,bn,er,Xr,qo,_,null,-0,0)}}break}while(!0);Pi(o)}function z_(o,s,l,c,y,_,A,I,U,z,W,te,J,$){if(o.timeoutHandle=-1,te=s.subtreeFlags,te&8192||(te&16785408)===16785408){te={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Zn},L_(s,_,te);var pe=(_&62914560)===_?bc-an():(_&4194048)===_?G_-an():0;if(pe=QR(te,pe),pe!==null){ro=_,o.cancelPendingCommit=pe(Z_.bind(null,o,s,_,l,c,y,A,I,U,W,te,null,J,$)),Jo(o,_,A,!z);return}}Z_(o,s,_,l,c,y,A,I,U)}function fR(o){for(var s=o;;){var l=s.tag;if((l===0||l===11||l===15)&&s.flags&16384&&(l=s.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var c=0;c<l.length;c++){var y=l[c],_=y.getSnapshot;y=y.value;try{if(!Cn(_(),y))return!1}catch{return!1}}if(l=s.child,s.subtreeFlags&16384&&l!==null)l.return=s,s=l;else{if(s===o)break;for(;s.sibling===null;){if(s.return===null||s.return===o)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Jo(o,s,l,c){s&=~Hh,s&=~er,o.suspendedLanes|=s,o.pingedLanes&=~s,c&&(o.warmLanes|=s),c=o.expirationTimes;for(var y=s;0<y;){var _=31-gt(y),A=1<<_;c[_]=-1,y&=~A}l!==0&&bs(o,l,s)}function xc(){return($e&6)===0?(Dl(0),!1):!0}function $h(){if(Ve!==null){if(Ze===0)var o=Ve.return;else o=Ve,Qi=Js=null,ch(o),Br=null,hl=0,o=Ve;for(;o!==null;)E_(o.alternate,o),o=o.return;Ve=null}}function Zr(o,s){var l=o.timeoutHandle;l!==-1&&(o.timeoutHandle=-1,DR(l)),l=o.cancelPendingCommit,l!==null&&(o.cancelPendingCommit=null,l()),ro=0,$h(),ot=o,Ve=l=Yi(o.current,null),Le=s,Ze=0,Nn=null,qo=!1,Qr=Qn(o,s),Bh=!1,Xr=bn=Hh=er=Bo=mt=0,yn=bl=null,zh=!1,(s&8)!==0&&(s|=s&32);var c=o.entangledLanes;if(c!==0)for(o=o.entanglements,c&=s;0<c;){var y=31-gt(c),_=1<<y;s|=o[y],c&=~_}return so=s,ju(),l}function J_(o,s){be=null,X.H=El,s===qr||s===ac?(s=ay(),Ze=3):s===Zd?(s=ay(),Ze=4):Ze=s===Rh?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Nn=s,Ve===null&&(mt=1,Ec(o,On(s,o.current)))}function K_(){var o=Rn.current;return o===null?!0:(Le&4194048)===Le?Bn===null:(Le&62914560)===Le||(Le&536870912)!==0?o===Bn:!1}function Y_(){var o=X.H;return X.H=El,o===null?El:o}function $_(){var o=X.A;return X.A=uR,o}function Pc(){mt=4,qo||(Le&4194048)!==Le&&Rn.current!==null||(Qr=!0),(Bo&134217727)===0&&(er&134217727)===0||ot===null||Jo(ot,Le,bn,!1)}function Qh(o,s,l){var c=$e;$e|=2;var y=Y_(),_=$_();(ot!==o||Le!==s)&&(Dc=null,Zr(o,s)),s=!1;var A=mt;e:do try{if(Ze!==0&&Ve!==null){var I=Ve,U=Nn;switch(Ze){case 8:$h(),A=6;break e;case 3:case 2:case 9:case 6:Rn.current===null&&(s=!0);var z=Ze;if(Ze=0,Nn=null,jr(o,I,U,z),l&&Qr){A=0;break e}break;default:z=Ze,Ze=0,Nn=null,jr(o,I,U,z)}}dR(),A=mt;break}catch(W){J_(o,W)}while(!0);return s&&o.shellSuspendCounter++,Qi=Js=null,$e=c,X.H=y,X.A=_,Ve===null&&(ot=null,Le=0,ju()),A}function dR(){for(;Ve!==null;)Q_(Ve)}function hR(o,s){var l=$e;$e|=2;var c=Y_(),y=$_();ot!==o||Le!==s?(Dc=null,Mc=an()+500,Zr(o,s)):Qr=Qn(o,s);e:do try{if(Ze!==0&&Ve!==null){s=Ve;var _=Nn;t:switch(Ze){case 1:Ze=0,Nn=null,jr(o,s,_,1);break;case 2:case 9:if(sy(_)){Ze=0,Nn=null,X_(s);break}s=function(){Ze!==2&&Ze!==9||ot!==o||(Ze=7),Pi(o)},_.then(s,s);break e;case 3:Ze=7;break e;case 4:Ze=5;break e;case 7:sy(_)?(Ze=0,Nn=null,X_(s)):(Ze=0,Nn=null,jr(o,s,_,7));break;case 5:var A=null;switch(Ve.tag){case 26:A=Ve.memoizedState;case 5:case 27:var I=Ve;if(A?Uv(A):I.stateNode.complete){Ze=0,Nn=null;var U=I.sibling;if(U!==null)Ve=U;else{var z=I.return;z!==null?(Ve=z,Vc(z)):Ve=null}break t}}Ze=0,Nn=null,jr(o,s,_,5);break;case 6:Ze=0,Nn=null,jr(o,s,_,6);break;case 8:$h(),mt=6;break e;default:throw Error(i(462))}}pR();break}catch(W){J_(o,W)}while(!0);return Qi=Js=null,X.H=c,X.A=y,$e=l,Ve!==null?0:(ot=null,Le=0,ju(),mt)}function pR(){for(;Ve!==null&&!Id();)Q_(Ve)}function Q_(o){var s=v_(o.alternate,o,so);o.memoizedProps=o.pendingProps,s===null?Vc(o):Ve=s}function X_(o){var s=o,l=s.alternate;switch(s.tag){case 15:case 0:s=h_(l,s,s.pendingProps,s.type,void 0,Le);break;case 11:s=h_(l,s,s.pendingProps,s.type.render,s.ref,Le);break;case 5:ch(s);default:E_(l,s),s=Ve=$g(s,so),s=v_(l,s,so)}o.memoizedProps=o.pendingProps,s===null?Vc(o):Ve=s}function jr(o,s,l,c){Qi=Js=null,ch(s),Br=null,hl=0;var y=s.return;try{if(nR(o,y,s,l,Le)){mt=1,Ec(o,On(l,o.current)),Ve=null;return}}catch(_){if(y!==null)throw Ve=y,_;mt=1,Ec(o,On(l,o.current)),Ve=null;return}s.flags&32768?(qe||c===1?o=!0:Qr||(Le&536870912)!==0?o=!1:(qo=o=!0,(c===2||c===9||c===3||c===6)&&(c=Rn.current,c!==null&&c.tag===13&&(c.flags|=16384))),W_(s,o)):Vc(s)}function Vc(o){var s=o;do{if((s.flags&32768)!==0){W_(s,qo);return}o=s.return;var l=sR(s.alternate,s,so);if(l!==null){Ve=l;return}if(s=s.sibling,s!==null){Ve=s;return}Ve=s=o}while(s!==null);mt===0&&(mt=5)}function W_(o,s){do{var l=rR(o.alternate,o);if(l!==null){l.flags&=32767,Ve=l;return}if(l=o.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!s&&(o=o.sibling,o!==null)){Ve=o;return}Ve=o=l}while(o!==null);mt=6,Ve=null}function Z_(o,s,l,c,y,_,A,I,U){o.cancelPendingCommit=null;do Uc();while(Ut!==0);if(($e&6)!==0)throw Error(i(327));if(s!==null){if(s===o.current)throw Error(i(177));if(_=s.lanes|s.childLanes,_|=kd,Nd(o,l,_,A,I,U),o===ot&&(Ve=ot=null,Le=0),Wr=s,zo=o,ro=l,Jh=_,Kh=y,q_=c,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(o.callbackNode=null,o.callbackPriority=0,_R(Eo,function(){return iv(),null})):(o.callbackNode=null,o.callbackPriority=0),c=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||c){c=X.T,X.T=null,y=ue.p,ue.p=2,A=$e,$e|=4;try{aR(o,s,l)}finally{$e=A,ue.p=y,X.T=c}}Ut=1,j_(),ev(),tv()}}function j_(){if(Ut===1){Ut=0;var o=zo,s=Wr,l=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||l){l=X.T,X.T=null;var c=ue.p;ue.p=2;var y=$e;$e|=4;try{P_(s,o);var _=ap,A=Fg(o.containerInfo),I=_.focusedElem,U=_.selectionRange;if(A!==I&&I&&I.ownerDocument&&Og(I.ownerDocument.documentElement,I)){if(U!==null&&xd(I)){var z=U.start,W=U.end;if(W===void 0&&(W=z),"selectionStart"in I)I.selectionStart=z,I.selectionEnd=Math.min(W,I.value.length);else{var te=I.ownerDocument||document,J=te&&te.defaultView||window;if(J.getSelection){var $=J.getSelection(),pe=I.textContent.length,Te=Math.min(U.start,pe),it=U.end===void 0?Te:Math.min(U.end,pe);!$.extend&&Te>it&&(A=it,it=Te,Te=A);var q=kg(I,Te),k=kg(I,it);if(q&&k&&($.rangeCount!==1||$.anchorNode!==q.node||$.anchorOffset!==q.offset||$.focusNode!==k.node||$.focusOffset!==k.offset)){var H=te.createRange();H.setStart(q.node,q.offset),$.removeAllRanges(),Te>it?($.addRange(H),$.extend(k.node,k.offset)):(H.setEnd(k.node,k.offset),$.addRange(H))}}}}for(te=[],$=I;$=$.parentNode;)$.nodeType===1&&te.push({element:$,left:$.scrollLeft,top:$.scrollTop});for(typeof I.focus=="function"&&I.focus(),I=0;I<te.length;I++){var Z=te[I];Z.element.scrollLeft=Z.left,Z.element.scrollTop=Z.top}}Yc=!!rp,ap=rp=null}finally{$e=y,ue.p=c,X.T=l}}o.current=s,Ut=2}}function ev(){if(Ut===2){Ut=0;var o=zo,s=Wr,l=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||l){l=X.T,X.T=null;var c=ue.p;ue.p=2;var y=$e;$e|=4;try{N_(o,s.alternate,s)}finally{$e=y,ue.p=c,X.T=l}}Ut=3}}function tv(){if(Ut===4||Ut===3){Ut=0,Iu();var o=zo,s=Wr,l=ro,c=q_;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Ut=5:(Ut=0,Wr=zo=null,nv(o,o.pendingLanes));var y=o.pendingLanes;if(y===0&&(Ho=null),Hi(l),s=s.stateNode,zt&&typeof zt.onCommitFiberRoot=="function")try{zt.onCommitFiberRoot($n,s,void 0,(s.current.flags&128)===128)}catch{}if(c!==null){s=X.T,y=ue.p,ue.p=2,X.T=null;try{for(var _=o.onRecoverableError,A=0;A<c.length;A++){var I=c[A];_(I.value,{componentStack:I.stack})}}finally{X.T=s,ue.p=y}}(ro&3)!==0&&Uc(),Pi(o),y=o.pendingLanes,(l&261930)!==0&&(y&42)!==0?o===Yh?Ml++:(Ml=0,Yh=o):Ml=0,Dl(0)}}function nv(o,s){(o.pooledCacheLanes&=s)===0&&(s=o.pooledCache,s!=null&&(o.pooledCache=null,fl(s)))}function Uc(){return j_(),ev(),tv(),iv()}function iv(){if(Ut!==5)return!1;var o=zo,s=Jh;Jh=0;var l=Hi(ro),c=X.T,y=ue.p;try{ue.p=32>l?32:l,X.T=null,l=Kh,Kh=null;var _=zo,A=ro;if(Ut=0,Wr=zo=null,ro=0,($e&6)!==0)throw Error(i(331));var I=$e;if($e|=4,O_(_.current),U_(_,_.current,A,l),$e=I,Dl(0,!1),zt&&typeof zt.onPostCommitFiberRoot=="function")try{zt.onPostCommitFiberRoot($n,_)}catch{}return!0}finally{ue.p=y,X.T=c,nv(o,s)}}function ov(o,s,l){s=On(l,s),s=Ih(o.stateNode,s,2),o=ko(o,s,2),o!==null&&(Ns(o,2),Pi(o))}function je(o,s,l){if(o.tag===3)ov(o,o,l);else for(;s!==null;){if(s.tag===3){ov(s,o,l);break}else if(s.tag===1){var c=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Ho===null||!Ho.has(c))){o=On(l,o),l=s_(2),c=ko(s,l,2),c!==null&&(r_(l,c,s,o),Ns(c,2),Pi(c));break}}s=s.return}}function Xh(o,s,l){var c=o.pingCache;if(c===null){c=o.pingCache=new cR;var y=new Set;c.set(s,y)}else y=c.get(s),y===void 0&&(y=new Set,c.set(s,y));y.has(l)||(Bh=!0,y.add(l),o=mR.bind(null,o,s,l),s.then(o,o))}function mR(o,s,l){var c=o.pingCache;c!==null&&c.delete(s),o.pingedLanes|=o.suspendedLanes&l,o.warmLanes&=~l,ot===o&&(Le&l)===l&&(mt===4||mt===3&&(Le&62914560)===Le&&300>an()-bc?($e&2)===0&&Zr(o,0):Hh|=l,Xr===Le&&(Xr=0)),Pi(o)}function sv(o,s){s===0&&(s=Du()),o=Bs(o,s),o!==null&&(Ns(o,s),Pi(o))}function gR(o){var s=o.memoizedState,l=0;s!==null&&(l=s.retryLane),sv(o,l)}function yR(o,s){var l=0;switch(o.tag){case 31:case 13:var c=o.stateNode,y=o.memoizedState;y!==null&&(l=y.retryLane);break;case 19:c=o.stateNode;break;case 22:c=o.stateNode._retryCache;break;default:throw Error(i(314))}c!==null&&c.delete(s),sv(o,l)}function _R(o,s){return Vt(o,s)}var Lc=null,ea=null,Wh=!1,kc=!1,Zh=!1,Ko=0;function Pi(o){o!==ea&&o.next===null&&(ea===null?Lc=ea=o:ea=ea.next=o),kc=!0,Wh||(Wh=!0,TR())}function Dl(o,s){if(!Zh&&kc){Zh=!0;do for(var l=!1,c=Lc;c!==null;){if(o!==0){var y=c.pendingLanes;if(y===0)var _=0;else{var A=c.suspendedLanes,I=c.pingedLanes;_=(1<<31-gt(42|o)+1)-1,_&=y&~(A&~I),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(l=!0,uv(c,_))}else _=Le,_=mi(c,c===ot?_:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(_&3)===0||Qn(c,_)||(l=!0,uv(c,_));c=c.next}while(l);Zh=!1}}function vR(){rv()}function rv(){kc=Wh=!1;var o=0;Ko!==0&&MR()&&(o=Ko);for(var s=an(),l=null,c=Lc;c!==null;){var y=c.next,_=av(c,s);_===0?(c.next=null,l===null?Lc=y:l.next=y,y===null&&(ea=l)):(l=c,(o!==0||(_&3)!==0)&&(kc=!0)),c=y}Ut!==0&&Ut!==5||Dl(o),Ko!==0&&(Ko=0)}function av(o,s){for(var l=o.suspendedLanes,c=o.pingedLanes,y=o.expirationTimes,_=o.pendingLanes&-62914561;0<_;){var A=31-gt(_),I=1<<A,U=y[A];U===-1?((I&l)===0||(I&c)!==0)&&(y[A]=wd(I,s)):U<=s&&(o.expiredLanes|=I),_&=~I}if(s=ot,l=Le,l=mi(o,o===s?l:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),c=o.callbackNode,l===0||o===s&&(Ze===2||Ze===9)||o.cancelPendingCommit!==null)return c!==null&&c!==null&&To(c),o.callbackNode=null,o.callbackPriority=0;if((l&3)===0||Qn(o,l)){if(s=l&-l,s===o.callbackPriority)return s;switch(c!==null&&To(c),Hi(l)){case 2:case 8:l=qa;break;case 32:l=Eo;break;case 268435456:l=Ru;break;default:l=Eo}return c=lv.bind(null,o),l=Vt(l,c),o.callbackPriority=s,o.callbackNode=l,s}return c!==null&&c!==null&&To(c),o.callbackPriority=2,o.callbackNode=null,2}function lv(o,s){if(Ut!==0&&Ut!==5)return o.callbackNode=null,o.callbackPriority=0,null;var l=o.callbackNode;if(Uc()&&o.callbackNode!==l)return null;var c=Le;return c=mi(o,o===ot?c:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),c===0?null:(H_(o,c,s),av(o,an()),o.callbackNode!=null&&o.callbackNode===l?lv.bind(null,o):null)}function uv(o,s){if(Uc())return null;H_(o,s,!0)}function TR(){xR(function(){($e&6)!==0?Vt(Ga,vR):rv()})}function jh(){if(Ko===0){var o=Fr;o===0&&(o=hi,hi<<=1,(hi&261888)===0&&(hi=256)),Ko=o}return Ko}function cv(o){return o==null||typeof o=="symbol"||typeof o=="boolean"?null:typeof o=="function"?o:Cr(""+o)}function fv(o,s){var l=s.ownerDocument.createElement("input");return l.name=s.name,l.value=s.value,o.id&&l.setAttribute("form",o.id),s.parentNode.insertBefore(l,s),o=new FormData(o),l.parentNode.removeChild(l),o}function ER(o,s,l,c,y){if(s==="submit"&&l&&l.stateNode===y){var _=cv((y[Ft]||null).action),A=c.submitter;A&&(s=(s=A[Ft]||null)?cv(s.formAction):A.getAttribute("formAction"),s!==null&&(_=s,A=null));var I=new Ri("action","action",null,c,y);o.push({event:I,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(Ko!==0){var U=A?fv(y,A):new FormData(y);vh(l,{pending:!0,data:U,method:y.method,action:_},null,U)}}else typeof _=="function"&&(I.preventDefault(),U=A?fv(y,A):new FormData(y),vh(l,{pending:!0,data:U,method:y.method,action:_},_,U))},currentTarget:y}]})}}for(var ep=0;ep<Ld.length;ep++){var tp=Ld[ep],SR=tp.toLowerCase(),AR=tp[0].toUpperCase()+tp.slice(1);ii(SR,"on"+AR)}ii(Bg,"onAnimationEnd"),ii(Hg,"onAnimationIteration"),ii(zg,"onAnimationStart"),ii("dblclick","onDoubleClick"),ii("focusin","onFocus"),ii("focusout","onBlur"),ii(FI,"onTransitionRun"),ii(GI,"onTransitionStart"),ii(qI,"onTransitionCancel"),ii(Jg,"onTransitionEnd"),Si("onMouseEnter",["mouseout","mouseover"]),Si("onMouseLeave",["mouseout","mouseover"]),Si("onPointerEnter",["pointerout","pointerover"]),Si("onPointerLeave",["pointerout","pointerover"]),Ei("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ei("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ei("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ei("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ei("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ei("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var xl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),CR=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(xl));function dv(o,s){s=(s&4)!==0;for(var l=0;l<o.length;l++){var c=o[l],y=c.event;c=c.listeners;e:{var _=void 0;if(s)for(var A=c.length-1;0<=A;A--){var I=c[A],U=I.instance,z=I.currentTarget;if(I=I.listener,U!==_&&y.isPropagationStopped())break e;_=I,y.currentTarget=z;try{_(y)}catch(W){Zu(W)}y.currentTarget=null,_=U}else for(A=0;A<c.length;A++){if(I=c[A],U=I.instance,z=I.currentTarget,I=I.listener,U!==_&&y.isPropagationStopped())break e;_=I,y.currentTarget=z;try{_(y)}catch(W){Zu(W)}y.currentTarget=null,_=U}}}}function Ue(o,s){var l=s[vr];l===void 0&&(l=s[vr]=new Set);var c=o+"__bubble";l.has(c)||(hv(s,o,2,!1),l.add(c))}function np(o,s,l){var c=0;s&&(c|=4),hv(l,o,c,s)}var Oc="_reactListening"+Math.random().toString(36).slice(2);function ip(o){if(!o[Oc]){o[Oc]=!0,za.forEach(function(l){l!=="selectionchange"&&(CR.has(l)||np(l,!1,o),np(l,!0,o))});var s=o.nodeType===9?o:o.ownerDocument;s===null||s[Oc]||(s[Oc]=!0,np("selectionchange",!1,s))}}function hv(o,s,l,c){switch(Bv(s)){case 2:var y=ZR;break;case 8:y=jR;break;default:y=_p}l=y.bind(null,s,l,o),y=void 0,!Vs||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(y=!0),c?y!==void 0?o.addEventListener(s,l,{capture:!0,passive:y}):o.addEventListener(s,l,!0):y!==void 0?o.addEventListener(s,l,{passive:y}):o.addEventListener(s,l,!1)}function op(o,s,l,c,y){var _=c;if((s&1)===0&&(s&2)===0&&c!==null)e:for(;;){if(c===null)return;var A=c.tag;if(A===3||A===4){var I=c.stateNode.containerInfo;if(I===y)break;if(A===4)for(A=c.return;A!==null;){var U=A.tag;if((U===3||U===4)&&A.stateNode.containerInfo===y)return;A=A.return}for(;I!==null;){if(A=vi(I),A===null)return;if(U=A.tag,U===5||U===6||U===26||U===27){c=_=A;continue e}I=I.parentNode}}c=c.return}wo(function(){var z=_,W=Vn(l),te=[];e:{var J=Kg.get(o);if(J!==void 0){var $=Ri,pe=o;switch(o){case"keypress":if(Ls(l)===0)break e;case"keydown":case"keyup":$=Qu;break;case"focusin":pe="focus",$=Os;break;case"focusout":pe="blur",$=Os;break;case"beforeblur":case"afterblur":$=Os;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":$=il;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":$=Gu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":$=E;break;case Bg:case Hg:case zg:$=Bu;break;case Jg:$=w;break;case"scroll":case"scrollend":$=nl;break;case"wheel":$=K;break;case"copy":case"cut":case"paste":$=Hu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":$=Ki;break;case"toggle":case"beforetoggle":$=Ne}var Te=(s&4)!==0,it=!Te&&(o==="scroll"||o==="scrollend"),q=Te?J!==null?J+"Capture":null:J;Te=[];for(var k=z,H;k!==null;){var Z=k;if(H=Z.stateNode,Z=Z.tag,Z!==5&&Z!==26&&Z!==27||H===null||q===null||(Z=jn(k,q),Z!=null&&Te.push(Pl(k,Z,H))),it)break;k=k.return}0<Te.length&&(J=new $(J,pe,null,l,W),te.push({event:J,listeners:Te}))}}if((s&7)===0){e:{if(J=o==="mouseover"||o==="pointerover",$=o==="mouseout"||o==="pointerout",J&&l!==ja&&(pe=l.relatedTarget||l.fromElement)&&(vi(pe)||pe[yi]))break e;if(($||J)&&(J=W.window===W?W:(J=W.ownerDocument)?J.defaultView||J.parentWindow:window,$?(pe=l.relatedTarget||l.toElement,$=z,pe=pe?vi(pe):null,pe!==null&&(it=a(pe),Te=pe.tag,pe!==it||Te!==5&&Te!==27&&Te!==6)&&(pe=null)):($=null,pe=z),$!==pe)){if(Te=il,Z="onMouseLeave",q="onMouseEnter",k="mouse",(o==="pointerout"||o==="pointerover")&&(Te=Ki,Z="onPointerLeave",q="onPointerEnter",k="pointer"),it=$==null?J:Sn($),H=pe==null?J:Sn(pe),J=new Te(Z,k+"leave",$,l,W),J.target=it,J.relatedTarget=H,Z=null,vi(W)===z&&(Te=new Te(q,k+"enter",pe,l,W),Te.target=H,Te.relatedTarget=it,Z=Te),it=Z,$&&pe)t:{for(Te=IR,q=$,k=pe,H=0,Z=q;Z;Z=Te(Z))H++;Z=0;for(var _e=k;_e;_e=Te(_e))Z++;for(;0<H-Z;)q=Te(q),H--;for(;0<Z-H;)k=Te(k),Z--;for(;H--;){if(q===k||k!==null&&q===k.alternate){Te=q;break t}q=Te(q),k=Te(k)}Te=null}else Te=null;$!==null&&pv(te,J,$,Te,!1),pe!==null&&it!==null&&pv(te,it,pe,Te,!0)}}e:{if(J=z?Sn(z):window,$=J.nodeName&&J.nodeName.toLowerCase(),$==="select"||$==="input"&&J.type==="file")var ze=Dg;else if(bg(J))if(xg)ze=LI;else{ze=VI;var ge=PI}else $=J.nodeName,!$||$.toLowerCase()!=="input"||J.type!=="checkbox"&&J.type!=="radio"?z&&Ar(z.elementType)&&(ze=Dg):ze=UI;if(ze&&(ze=ze(o,z))){Mg(te,ze,l,W);break e}ge&&ge(o,J,z),o==="focusout"&&z&&J.type==="number"&&z.memoizedProps.value!=null&&Xa(J,"number",J.value)}switch(ge=z?Sn(z):window,o){case"focusin":(bg(ge)||ge.contentEditable==="true")&&(Dr=ge,Pd=z,ll=null);break;case"focusout":ll=Pd=Dr=null;break;case"mousedown":Vd=!0;break;case"contextmenu":case"mouseup":case"dragend":Vd=!1,Gg(te,l,W);break;case"selectionchange":if(OI)break;case"keydown":case"keyup":Gg(te,l,W)}var xe;if(Ye)e:{switch(o){case"compositionstart":var ke="onCompositionStart";break e;case"compositionend":ke="onCompositionEnd";break e;case"compositionupdate":ke="onCompositionUpdate";break e}ke=void 0}else Mr?Fs(o,l)&&(ke="onCompositionEnd"):o==="keydown"&&l.keyCode===229&&(ke="onCompositionStart");ke&&(bi&&l.locale!=="ko"&&(Mr||ke!=="onCompositionStart"?ke==="onCompositionEnd"&&Mr&&(xe=tl()):(Ii=W,el="value"in Ii?Ii.value:Ii.textContent,Mr=!0)),ge=Fc(z,ke),0<ge.length&&(ke=new Ni(ke,o,null,l,W),te.push({event:ke,listeners:ge}),xe?ke.data=xe:(xe=br(l),xe!==null&&(ke.data=xe)))),(xe=Ln?bI(o,l):MI(o,l))&&(ke=Fc(z,"onBeforeInput"),0<ke.length&&(ge=new Ni("onBeforeInput","beforeinput",null,l,W),te.push({event:ge,listeners:ke}),ge.data=xe)),ER(te,o,z,l,W)}dv(te,s)})}function Pl(o,s,l){return{instance:o,listener:s,currentTarget:l}}function Fc(o,s){for(var l=s+"Capture",c=[];o!==null;){var y=o,_=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||_===null||(y=jn(o,l),y!=null&&c.unshift(Pl(o,y,_)),y=jn(o,s),y!=null&&c.push(Pl(o,y,_))),o.tag===3)return c;o=o.return}return[]}function IR(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5&&o.tag!==27);return o||null}function pv(o,s,l,c,y){for(var _=s._reactName,A=[];l!==null&&l!==c;){var I=l,U=I.alternate,z=I.stateNode;if(I=I.tag,U!==null&&U===c)break;I!==5&&I!==26&&I!==27||z===null||(U=z,y?(z=jn(l,_),z!=null&&A.unshift(Pl(l,z,U))):y||(z=jn(l,_),z!=null&&A.push(Pl(l,z,U)))),l=l.return}A.length!==0&&o.push({event:s,listeners:A})}var RR=/\r\n?/g,wR=/\u0000|\uFFFD/g;function mv(o){return(typeof o=="string"?o:""+o).replace(RR,`
`).replace(wR,"")}function gv(o,s){return s=mv(s),mv(o)===s}function nt(o,s,l,c,y,_){switch(l){case"children":typeof c=="string"?s==="body"||s==="textarea"&&c===""||hn(o,c):(typeof c=="number"||typeof c=="bigint")&&s!=="body"&&hn(o,""+c);break;case"className":An(o,"class",c);break;case"tabIndex":An(o,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":An(o,l,c);break;case"style":Za(o,c,_);break;case"data":if(s!=="object"){An(o,"data",c);break}case"src":case"href":if(c===""&&(s!=="a"||l!=="href")){o.removeAttribute(l);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){o.removeAttribute(l);break}c=Cr(""+c),o.setAttribute(l,c);break;case"action":case"formAction":if(typeof c=="function"){o.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(l==="formAction"?(s!=="input"&&nt(o,s,"name",y.name,y,null),nt(o,s,"formEncType",y.formEncType,y,null),nt(o,s,"formMethod",y.formMethod,y,null),nt(o,s,"formTarget",y.formTarget,y,null)):(nt(o,s,"encType",y.encType,y,null),nt(o,s,"method",y.method,y,null),nt(o,s,"target",y.target,y,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){o.removeAttribute(l);break}c=Cr(""+c),o.setAttribute(l,c);break;case"onClick":c!=null&&(o.onclick=Zn);break;case"onScroll":c!=null&&Ue("scroll",o);break;case"onScrollEnd":c!=null&&Ue("scrollend",o);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(l=c.__html,l!=null){if(y.children!=null)throw Error(i(60));o.innerHTML=l}}break;case"multiple":o.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":o.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){o.removeAttribute("xlink:href");break}l=Cr(""+c),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?o.setAttribute(l,""+c):o.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?o.setAttribute(l,""):o.removeAttribute(l);break;case"capture":case"download":c===!0?o.setAttribute(l,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?o.setAttribute(l,c):o.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?o.setAttribute(l,c):o.removeAttribute(l);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?o.removeAttribute(l):o.setAttribute(l,c);break;case"popover":Ue("beforetoggle",o),Ue("toggle",o),Er(o,"popover",c);break;case"xlinkActuate":It(o,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":It(o,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":It(o,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":It(o,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":It(o,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":It(o,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":It(o,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":It(o,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":It(o,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Er(o,"is",c);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=Fu.get(l)||l,Er(o,l,c))}}function sp(o,s,l,c,y,_){switch(l){case"style":Za(o,c,_);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(l=c.__html,l!=null){if(y.children!=null)throw Error(i(60));o.innerHTML=l}}break;case"children":typeof c=="string"?hn(o,c):(typeof c=="number"||typeof c=="bigint")&&hn(o,""+c);break;case"onScroll":c!=null&&Ue("scroll",o);break;case"onScrollEnd":c!=null&&Ue("scrollend",o);break;case"onClick":c!=null&&(o.onclick=Zn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ja.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(y=l.endsWith("Capture"),s=l.slice(2,y?l.length-7:void 0),_=o[Ft]||null,_=_!=null?_[l]:null,typeof _=="function"&&o.removeEventListener(s,_,y),typeof c=="function")){typeof _!="function"&&_!==null&&(l in o?o[l]=null:o.hasAttribute(l)&&o.removeAttribute(l)),o.addEventListener(s,c,y);break e}l in o?o[l]=c:c===!0?o.setAttribute(l,""):Er(o,l,c)}}}function Qt(o,s,l){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ue("error",o),Ue("load",o);var c=!1,y=!1,_;for(_ in l)if(l.hasOwnProperty(_)){var A=l[_];if(A!=null)switch(_){case"src":c=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:nt(o,s,_,A,l,null)}}y&&nt(o,s,"srcSet",l.srcSet,l,null),c&&nt(o,s,"src",l.src,l,null);return;case"input":Ue("invalid",o);var I=_=A=y=null,U=null,z=null;for(c in l)if(l.hasOwnProperty(c)){var W=l[c];if(W!=null)switch(c){case"name":y=W;break;case"type":A=W;break;case"checked":U=W;break;case"defaultChecked":z=W;break;case"value":_=W;break;case"defaultValue":I=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(i(137,s));break;default:nt(o,s,c,W,l,null)}}Lu(o,_,I,U,z,A,y,!1);return;case"select":Ue("invalid",o),c=A=_=null;for(y in l)if(l.hasOwnProperty(y)&&(I=l[y],I!=null))switch(y){case"value":_=I;break;case"defaultValue":A=I;break;case"multiple":c=I;default:nt(o,s,y,I,l,null)}s=_,l=A,o.multiple=!!c,s!=null?Ao(o,!!c,s,!1):l!=null&&Ao(o,!!c,l,!0);return;case"textarea":Ue("invalid",o),_=y=c=null;for(A in l)if(l.hasOwnProperty(A)&&(I=l[A],I!=null))switch(A){case"value":c=I;break;case"defaultValue":y=I;break;case"children":_=I;break;case"dangerouslySetInnerHTML":if(I!=null)throw Error(i(91));break;default:nt(o,s,A,I,l,null)}Co(o,c,y,_);return;case"option":for(U in l)if(l.hasOwnProperty(U)&&(c=l[U],c!=null))switch(U){case"selected":o.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:nt(o,s,U,c,l,null)}return;case"dialog":Ue("beforetoggle",o),Ue("toggle",o),Ue("cancel",o),Ue("close",o);break;case"iframe":case"object":Ue("load",o);break;case"video":case"audio":for(c=0;c<xl.length;c++)Ue(xl[c],o);break;case"image":Ue("error",o),Ue("load",o);break;case"details":Ue("toggle",o);break;case"embed":case"source":case"link":Ue("error",o),Ue("load",o);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(z in l)if(l.hasOwnProperty(z)&&(c=l[z],c!=null))switch(z){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:nt(o,s,z,c,l,null)}return;default:if(Ar(s)){for(W in l)l.hasOwnProperty(W)&&(c=l[W],c!==void 0&&sp(o,s,W,c,l,void 0));return}}for(I in l)l.hasOwnProperty(I)&&(c=l[I],c!=null&&nt(o,s,I,c,l,null))}function NR(o,s,l,c){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,_=null,A=null,I=null,U=null,z=null,W=null;for($ in l){var te=l[$];if(l.hasOwnProperty($)&&te!=null)switch($){case"checked":break;case"value":break;case"defaultValue":U=te;default:c.hasOwnProperty($)||nt(o,s,$,null,c,te)}}for(var J in c){var $=c[J];if(te=l[J],c.hasOwnProperty(J)&&($!=null||te!=null))switch(J){case"type":_=$;break;case"name":y=$;break;case"checked":z=$;break;case"defaultChecked":W=$;break;case"value":A=$;break;case"defaultValue":I=$;break;case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(i(137,s));break;default:$!==te&&nt(o,s,J,$,c,te)}}Sr(o,A,I,U,z,W,_,y);return;case"select":$=A=I=J=null;for(_ in l)if(U=l[_],l.hasOwnProperty(_)&&U!=null)switch(_){case"value":break;case"multiple":$=U;default:c.hasOwnProperty(_)||nt(o,s,_,null,c,U)}for(y in c)if(_=c[y],U=l[y],c.hasOwnProperty(y)&&(_!=null||U!=null))switch(y){case"value":J=_;break;case"defaultValue":I=_;break;case"multiple":A=_;default:_!==U&&nt(o,s,y,_,c,U)}s=I,l=A,c=$,J!=null?Ao(o,!!l,J,!1):!!c!=!!l&&(s!=null?Ao(o,!!l,s,!0):Ao(o,!!l,l?[]:"",!1));return;case"textarea":$=J=null;for(I in l)if(y=l[I],l.hasOwnProperty(I)&&y!=null&&!c.hasOwnProperty(I))switch(I){case"value":break;case"children":break;default:nt(o,s,I,null,c,y)}for(A in c)if(y=c[A],_=l[A],c.hasOwnProperty(A)&&(y!=null||_!=null))switch(A){case"value":J=y;break;case"defaultValue":$=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(i(91));break;default:y!==_&&nt(o,s,A,y,c,_)}ku(o,J,$);return;case"option":for(var pe in l)if(J=l[pe],l.hasOwnProperty(pe)&&J!=null&&!c.hasOwnProperty(pe))switch(pe){case"selected":o.selected=!1;break;default:nt(o,s,pe,null,c,J)}for(U in c)if(J=c[U],$=l[U],c.hasOwnProperty(U)&&J!==$&&(J!=null||$!=null))switch(U){case"selected":o.selected=J&&typeof J!="function"&&typeof J!="symbol";break;default:nt(o,s,U,J,c,$)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Te in l)J=l[Te],l.hasOwnProperty(Te)&&J!=null&&!c.hasOwnProperty(Te)&&nt(o,s,Te,null,c,J);for(z in c)if(J=c[z],$=l[z],c.hasOwnProperty(z)&&J!==$&&(J!=null||$!=null))switch(z){case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(i(137,s));break;default:nt(o,s,z,J,c,$)}return;default:if(Ar(s)){for(var it in l)J=l[it],l.hasOwnProperty(it)&&J!==void 0&&!c.hasOwnProperty(it)&&sp(o,s,it,void 0,c,J);for(W in c)J=c[W],$=l[W],!c.hasOwnProperty(W)||J===$||J===void 0&&$===void 0||sp(o,s,W,J,c,$);return}}for(var q in l)J=l[q],l.hasOwnProperty(q)&&J!=null&&!c.hasOwnProperty(q)&&nt(o,s,q,null,c,J);for(te in c)J=c[te],$=l[te],!c.hasOwnProperty(te)||J===$||J==null&&$==null||nt(o,s,te,J,c,$)}function yv(o){switch(o){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function bR(){if(typeof performance.getEntriesByType=="function"){for(var o=0,s=0,l=performance.getEntriesByType("resource"),c=0;c<l.length;c++){var y=l[c],_=y.transferSize,A=y.initiatorType,I=y.duration;if(_&&I&&yv(A)){for(A=0,I=y.responseEnd,c+=1;c<l.length;c++){var U=l[c],z=U.startTime;if(z>I)break;var W=U.transferSize,te=U.initiatorType;W&&yv(te)&&(U=U.responseEnd,A+=W*(U<I?1:(I-z)/(U-z)))}if(--c,s+=8*(_+A)/(y.duration/1e3),o++,10<o)break}}if(0<o)return s/o/1e6}return navigator.connection&&(o=navigator.connection.downlink,typeof o=="number")?o:5}var rp=null,ap=null;function Gc(o){return o.nodeType===9?o:o.ownerDocument}function _v(o){switch(o){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function vv(o,s){if(o===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return o===1&&s==="foreignObject"?0:o}function lp(o,s){return o==="textarea"||o==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var up=null;function MR(){var o=window.event;return o&&o.type==="popstate"?o===up?!1:(up=o,!0):(up=null,!1)}var Tv=typeof setTimeout=="function"?setTimeout:void 0,DR=typeof clearTimeout=="function"?clearTimeout:void 0,Ev=typeof Promise=="function"?Promise:void 0,xR=typeof queueMicrotask=="function"?queueMicrotask:typeof Ev<"u"?function(o){return Ev.resolve(null).then(o).catch(PR)}:Tv;function PR(o){setTimeout(function(){throw o})}function Yo(o){return o==="head"}function Sv(o,s){var l=s,c=0;do{var y=l.nextSibling;if(o.removeChild(l),y&&y.nodeType===8)if(l=y.data,l==="/$"||l==="/&"){if(c===0){o.removeChild(y),oa(s);return}c--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")c++;else if(l==="html")Vl(o.ownerDocument.documentElement);else if(l==="head"){l=o.ownerDocument.head,Vl(l);for(var _=l.firstChild;_;){var A=_.nextSibling,I=_.nodeName;_[_i]||I==="SCRIPT"||I==="STYLE"||I==="LINK"&&_.rel.toLowerCase()==="stylesheet"||l.removeChild(_),_=A}}else l==="body"&&Vl(o.ownerDocument.body);l=y}while(l);oa(s)}function Av(o,s){var l=o;o=0;do{var c=l.nextSibling;if(l.nodeType===1?s?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(s?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),c&&c.nodeType===8)if(l=c.data,l==="/$"){if(o===0)break;o--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||o++;l=c}while(l)}function cp(o){var s=o.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var l=s;switch(s=s.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":cp(l),Tr(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}o.removeChild(l)}}function VR(o,s,l,c){for(;o.nodeType===1;){var y=l;if(o.nodeName.toLowerCase()!==s.toLowerCase()){if(!c&&(o.nodeName!=="INPUT"||o.type!=="hidden"))break}else if(c){if(!o[_i])switch(s){case"meta":if(!o.hasAttribute("itemprop"))break;return o;case"link":if(_=o.getAttribute("rel"),_==="stylesheet"&&o.hasAttribute("data-precedence"))break;if(_!==y.rel||o.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||o.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||o.getAttribute("title")!==(y.title==null?null:y.title))break;return o;case"style":if(o.hasAttribute("data-precedence"))break;return o;case"script":if(_=o.getAttribute("src"),(_!==(y.src==null?null:y.src)||o.getAttribute("type")!==(y.type==null?null:y.type)||o.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&_&&o.hasAttribute("async")&&!o.hasAttribute("itemprop"))break;return o;default:return o}}else if(s==="input"&&o.type==="hidden"){var _=y.name==null?null:""+y.name;if(y.type==="hidden"&&o.getAttribute("name")===_)return o}else return o;if(o=Hn(o.nextSibling),o===null)break}return null}function UR(o,s,l){if(s==="")return null;for(;o.nodeType!==3;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!l||(o=Hn(o.nextSibling),o===null))return null;return o}function Cv(o,s){for(;o.nodeType!==8;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!s||(o=Hn(o.nextSibling),o===null))return null;return o}function fp(o){return o.data==="$?"||o.data==="$~"}function dp(o){return o.data==="$!"||o.data==="$?"&&o.ownerDocument.readyState!=="loading"}function LR(o,s){var l=o.ownerDocument;if(o.data==="$~")o._reactRetry=s;else if(o.data!=="$?"||l.readyState!=="loading")s();else{var c=function(){s(),l.removeEventListener("DOMContentLoaded",c)};l.addEventListener("DOMContentLoaded",c),o._reactRetry=c}}function Hn(o){for(;o!=null;o=o.nextSibling){var s=o.nodeType;if(s===1||s===3)break;if(s===8){if(s=o.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return o}var hp=null;function Iv(o){o=o.nextSibling;for(var s=0;o;){if(o.nodeType===8){var l=o.data;if(l==="/$"||l==="/&"){if(s===0)return Hn(o.nextSibling);s--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||s++}o=o.nextSibling}return null}function Rv(o){o=o.previousSibling;for(var s=0;o;){if(o.nodeType===8){var l=o.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(s===0)return o;s--}else l!=="/$"&&l!=="/&"||s++}o=o.previousSibling}return null}function wv(o,s,l){switch(s=Gc(l),o){case"html":if(o=s.documentElement,!o)throw Error(i(452));return o;case"head":if(o=s.head,!o)throw Error(i(453));return o;case"body":if(o=s.body,!o)throw Error(i(454));return o;default:throw Error(i(451))}}function Vl(o){for(var s=o.attributes;s.length;)o.removeAttributeNode(s[0]);Tr(o)}var zn=new Map,Nv=new Set;function qc(o){return typeof o.getRootNode=="function"?o.getRootNode():o.nodeType===9?o:o.ownerDocument}var ao=ue.d;ue.d={f:kR,r:OR,D:FR,C:GR,L:qR,m:BR,X:zR,S:HR,M:JR};function kR(){var o=ao.f(),s=xc();return o||s}function OR(o){var s=Pn(o);s!==null&&s.tag===5&&s.type==="form"?Jy(s):ao.r(o)}var ta=typeof document>"u"?null:document;function bv(o,s,l){var c=ta;if(c&&typeof s=="string"&&s){var y=dn(s);y='link[rel="'+o+'"][href="'+y+'"]',typeof l=="string"&&(y+='[crossorigin="'+l+'"]'),Nv.has(y)||(Nv.add(y),o={rel:o,crossOrigin:l,href:s},c.querySelector(y)===null&&(s=c.createElement("link"),Qt(s,"link",o),Ct(s),c.head.appendChild(s)))}}function FR(o){ao.D(o),bv("dns-prefetch",o,null)}function GR(o,s){ao.C(o,s),bv("preconnect",o,s)}function qR(o,s,l){ao.L(o,s,l);var c=ta;if(c&&o&&s){var y='link[rel="preload"][as="'+dn(s)+'"]';s==="image"&&l&&l.imageSrcSet?(y+='[imagesrcset="'+dn(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(y+='[imagesizes="'+dn(l.imageSizes)+'"]')):y+='[href="'+dn(o)+'"]';var _=y;switch(s){case"style":_=na(o);break;case"script":_=ia(o)}zn.has(_)||(o=T({rel:"preload",href:s==="image"&&l&&l.imageSrcSet?void 0:o,as:s},l),zn.set(_,o),c.querySelector(y)!==null||s==="style"&&c.querySelector(Ul(_))||s==="script"&&c.querySelector(Ll(_))||(s=c.createElement("link"),Qt(s,"link",o),Ct(s),c.head.appendChild(s)))}}function BR(o,s){ao.m(o,s);var l=ta;if(l&&o){var c=s&&typeof s.as=="string"?s.as:"script",y='link[rel="modulepreload"][as="'+dn(c)+'"][href="'+dn(o)+'"]',_=y;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=ia(o)}if(!zn.has(_)&&(o=T({rel:"modulepreload",href:o},s),zn.set(_,o),l.querySelector(y)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(Ll(_)))return}c=l.createElement("link"),Qt(c,"link",o),Ct(c),l.head.appendChild(c)}}}function HR(o,s,l){ao.S(o,s,l);var c=ta;if(c&&o){var y=Ti(c).hoistableStyles,_=na(o);s=s||"default";var A=y.get(_);if(!A){var I={loading:0,preload:null};if(A=c.querySelector(Ul(_)))I.loading=5;else{o=T({rel:"stylesheet",href:o,"data-precedence":s},l),(l=zn.get(_))&&pp(o,l);var U=A=c.createElement("link");Ct(U),Qt(U,"link",o),U._p=new Promise(function(z,W){U.onload=z,U.onerror=W}),U.addEventListener("load",function(){I.loading|=1}),U.addEventListener("error",function(){I.loading|=2}),I.loading|=4,Bc(A,s,c)}A={type:"stylesheet",instance:A,count:1,state:I},y.set(_,A)}}}function zR(o,s){ao.X(o,s);var l=ta;if(l&&o){var c=Ti(l).hoistableScripts,y=ia(o),_=c.get(y);_||(_=l.querySelector(Ll(y)),_||(o=T({src:o,async:!0},s),(s=zn.get(y))&&mp(o,s),_=l.createElement("script"),Ct(_),Qt(_,"link",o),l.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},c.set(y,_))}}function JR(o,s){ao.M(o,s);var l=ta;if(l&&o){var c=Ti(l).hoistableScripts,y=ia(o),_=c.get(y);_||(_=l.querySelector(Ll(y)),_||(o=T({src:o,async:!0,type:"module"},s),(s=zn.get(y))&&mp(o,s),_=l.createElement("script"),Ct(_),Qt(_,"link",o),l.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},c.set(y,_))}}function Mv(o,s,l,c){var y=(y=De.current)?qc(y):null;if(!y)throw Error(i(446));switch(o){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(s=na(l.href),l=Ti(y).hoistableStyles,c=l.get(s),c||(c={type:"style",instance:null,count:0,state:null},l.set(s,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){o=na(l.href);var _=Ti(y).hoistableStyles,A=_.get(o);if(A||(y=y.ownerDocument||y,A={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(o,A),(_=y.querySelector(Ul(o)))&&!_._p&&(A.instance=_,A.state.loading=5),zn.has(o)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},zn.set(o,l),_||KR(y,o,l,A.state))),s&&c===null)throw Error(i(528,""));return A}if(s&&c!==null)throw Error(i(529,""));return null;case"script":return s=l.async,l=l.src,typeof l=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=ia(l),l=Ti(y).hoistableScripts,c=l.get(s),c||(c={type:"script",instance:null,count:0,state:null},l.set(s,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,o))}}function na(o){return'href="'+dn(o)+'"'}function Ul(o){return'link[rel="stylesheet"]['+o+"]"}function Dv(o){return T({},o,{"data-precedence":o.precedence,precedence:null})}function KR(o,s,l,c){o.querySelector('link[rel="preload"][as="style"]['+s+"]")?c.loading=1:(s=o.createElement("link"),c.preload=s,s.addEventListener("load",function(){return c.loading|=1}),s.addEventListener("error",function(){return c.loading|=2}),Qt(s,"link",l),Ct(s),o.head.appendChild(s))}function ia(o){return'[src="'+dn(o)+'"]'}function Ll(o){return"script[async]"+o}function xv(o,s,l){if(s.count++,s.instance===null)switch(s.type){case"style":var c=o.querySelector('style[data-href~="'+dn(l.href)+'"]');if(c)return s.instance=c,Ct(c),c;var y=T({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return c=(o.ownerDocument||o).createElement("style"),Ct(c),Qt(c,"style",y),Bc(c,l.precedence,o),s.instance=c;case"stylesheet":y=na(l.href);var _=o.querySelector(Ul(y));if(_)return s.state.loading|=4,s.instance=_,Ct(_),_;c=Dv(l),(y=zn.get(y))&&pp(c,y),_=(o.ownerDocument||o).createElement("link"),Ct(_);var A=_;return A._p=new Promise(function(I,U){A.onload=I,A.onerror=U}),Qt(_,"link",c),s.state.loading|=4,Bc(_,l.precedence,o),s.instance=_;case"script":return _=ia(l.src),(y=o.querySelector(Ll(_)))?(s.instance=y,Ct(y),y):(c=l,(y=zn.get(_))&&(c=T({},l),mp(c,y)),o=o.ownerDocument||o,y=o.createElement("script"),Ct(y),Qt(y,"link",c),o.head.appendChild(y),s.instance=y);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(c=s.instance,s.state.loading|=4,Bc(c,l.precedence,o));return s.instance}function Bc(o,s,l){for(var c=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=c.length?c[c.length-1]:null,_=y,A=0;A<c.length;A++){var I=c[A];if(I.dataset.precedence===s)_=I;else if(_!==y)break}_?_.parentNode.insertBefore(o,_.nextSibling):(s=l.nodeType===9?l.head:l,s.insertBefore(o,s.firstChild))}function pp(o,s){o.crossOrigin==null&&(o.crossOrigin=s.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=s.referrerPolicy),o.title==null&&(o.title=s.title)}function mp(o,s){o.crossOrigin==null&&(o.crossOrigin=s.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=s.referrerPolicy),o.integrity==null&&(o.integrity=s.integrity)}var Hc=null;function Pv(o,s,l){if(Hc===null){var c=new Map,y=Hc=new Map;y.set(l,c)}else y=Hc,c=y.get(l),c||(c=new Map,y.set(l,c));if(c.has(o))return c;for(c.set(o,null),l=l.getElementsByTagName(o),y=0;y<l.length;y++){var _=l[y];if(!(_[_i]||_[At]||o==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var A=_.getAttribute(s)||"";A=o+A;var I=c.get(A);I?I.push(_):c.set(A,[_])}}return c}function Vv(o,s,l){o=o.ownerDocument||o,o.head.insertBefore(l,s==="title"?o.querySelector("head > title"):null)}function YR(o,s,l){if(l===1||s.itemProp!=null)return!1;switch(o){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return o=s.disabled,typeof s.precedence=="string"&&o==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function Uv(o){return!(o.type==="stylesheet"&&(o.state.loading&3)===0)}function $R(o,s,l,c){if(l.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var y=na(c.href),_=s.querySelector(Ul(y));if(_){s=_._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(o.count++,o=zc.bind(o),s.then(o,o)),l.state.loading|=4,l.instance=_,Ct(_);return}_=s.ownerDocument||s,c=Dv(c),(y=zn.get(y))&&pp(c,y),_=_.createElement("link"),Ct(_);var A=_;A._p=new Promise(function(I,U){A.onload=I,A.onerror=U}),Qt(_,"link",c),l.instance=_}o.stylesheets===null&&(o.stylesheets=new Map),o.stylesheets.set(l,s),(s=l.state.preload)&&(l.state.loading&3)===0&&(o.count++,l=zc.bind(o),s.addEventListener("load",l),s.addEventListener("error",l))}}var gp=0;function QR(o,s){return o.stylesheets&&o.count===0&&Kc(o,o.stylesheets),0<o.count||0<o.imgCount?function(l){var c=setTimeout(function(){if(o.stylesheets&&Kc(o,o.stylesheets),o.unsuspend){var _=o.unsuspend;o.unsuspend=null,_()}},6e4+s);0<o.imgBytes&&gp===0&&(gp=62500*bR());var y=setTimeout(function(){if(o.waitingForImages=!1,o.count===0&&(o.stylesheets&&Kc(o,o.stylesheets),o.unsuspend)){var _=o.unsuspend;o.unsuspend=null,_()}},(o.imgBytes>gp?50:800)+s);return o.unsuspend=l,function(){o.unsuspend=null,clearTimeout(c),clearTimeout(y)}}:null}function zc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Kc(this,this.stylesheets);else if(this.unsuspend){var o=this.unsuspend;this.unsuspend=null,o()}}}var Jc=null;function Kc(o,s){o.stylesheets=null,o.unsuspend!==null&&(o.count++,Jc=new Map,s.forEach(XR,o),Jc=null,zc.call(o))}function XR(o,s){if(!(s.state.loading&4)){var l=Jc.get(o);if(l)var c=l.get(null);else{l=new Map,Jc.set(o,l);for(var y=o.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<y.length;_++){var A=y[_];(A.nodeName==="LINK"||A.getAttribute("media")!=="not all")&&(l.set(A.dataset.precedence,A),c=A)}c&&l.set(null,c)}y=s.instance,A=y.getAttribute("data-precedence"),_=l.get(A)||c,_===c&&l.set(null,y),l.set(A,y),this.count++,c=zc.bind(this),y.addEventListener("load",c),y.addEventListener("error",c),_?_.parentNode.insertBefore(y,_.nextSibling):(o=o.nodeType===9?o.head:o,o.insertBefore(y,o.firstChild)),s.state.loading|=4}}var kl={$$typeof:j,Provider:null,Consumer:null,_currentValue:me,_currentValue2:me,_threadCount:0};function WR(o,s,l,c,y,_,A,I,U){this.tag=1,this.containerInfo=o,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=gi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gi(0),this.hiddenUpdates=gi(null),this.identifierPrefix=c,this.onUncaughtError=y,this.onCaughtError=_,this.onRecoverableError=A,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=U,this.incompleteTransitions=new Map}function Lv(o,s,l,c,y,_,A,I,U,z,W,te){return o=new WR(o,s,l,A,U,z,W,te,I),s=1,_===!0&&(s|=24),_=In(3,null,null,s),o.current=_,_.stateNode=o,s=Qd(),s.refCount++,o.pooledCache=s,s.refCount++,_.memoizedState={element:c,isDehydrated:l,cache:s},jd(_),o}function kv(o){return o?(o=Vr,o):Vr}function Ov(o,s,l,c,y,_){y=kv(y),c.context===null?c.context=y:c.pendingContext=y,c=Lo(s),c.payload={element:l},_=_===void 0?null:_,_!==null&&(c.callback=_),l=ko(o,c,s),l!==null&&(_n(l,o,s),ml(l,o,s))}function Fv(o,s){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var l=o.retryLane;o.retryLane=l!==0&&l<s?l:s}}function yp(o,s){Fv(o,s),(o=o.alternate)&&Fv(o,s)}function Gv(o){if(o.tag===13||o.tag===31){var s=Bs(o,67108864);s!==null&&_n(s,o,67108864),yp(o,67108864)}}function qv(o){if(o.tag===13||o.tag===31){var s=Mn();s=Ms(s);var l=Bs(o,s);l!==null&&_n(l,o,s),yp(o,s)}}var Yc=!0;function ZR(o,s,l,c){var y=X.T;X.T=null;var _=ue.p;try{ue.p=2,_p(o,s,l,c)}finally{ue.p=_,X.T=y}}function jR(o,s,l,c){var y=X.T;X.T=null;var _=ue.p;try{ue.p=8,_p(o,s,l,c)}finally{ue.p=_,X.T=y}}function _p(o,s,l,c){if(Yc){var y=vp(c);if(y===null)op(o,s,c,$c,l),Hv(o,c);else if(tw(y,o,s,l,c))c.stopPropagation();else if(Hv(o,c),s&4&&-1<ew.indexOf(o)){for(;y!==null;){var _=Pn(y);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var A=pi(_.pendingLanes);if(A!==0){var I=_;for(I.pendingLanes|=2,I.entangledLanes|=2;A;){var U=1<<31-gt(A);I.entanglements[1]|=U,A&=~U}Pi(_),($e&6)===0&&(Mc=an()+500,Dl(0))}}break;case 31:case 13:I=Bs(_,2),I!==null&&_n(I,_,2),xc(),yp(_,2)}if(_=vp(c),_===null&&op(o,s,c,$c,l),_===y)break;y=_}y!==null&&c.stopPropagation()}else op(o,s,c,null,l)}}function vp(o){return o=Vn(o),Tp(o)}var $c=null;function Tp(o){if($c=null,o=vi(o),o!==null){var s=a(o);if(s===null)o=null;else{var l=s.tag;if(l===13){if(o=u(s),o!==null)return o;o=null}else if(l===31){if(o=d(s),o!==null)return o;o=null}else if(l===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;o=null}else s!==o&&(o=null)}}return $c=o,null}function Bv(o){switch(o){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Rs()){case Ga:return 2;case qa:return 8;case Eo:case Rd:return 32;case Ru:return 268435456;default:return 32}default:return 32}}var Ep=!1,$o=null,Qo=null,Xo=null,Ol=new Map,Fl=new Map,Wo=[],ew="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Hv(o,s){switch(o){case"focusin":case"focusout":$o=null;break;case"dragenter":case"dragleave":Qo=null;break;case"mouseover":case"mouseout":Xo=null;break;case"pointerover":case"pointerout":Ol.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fl.delete(s.pointerId)}}function Gl(o,s,l,c,y,_){return o===null||o.nativeEvent!==_?(o={blockedOn:s,domEventName:l,eventSystemFlags:c,nativeEvent:_,targetContainers:[y]},s!==null&&(s=Pn(s),s!==null&&Gv(s)),o):(o.eventSystemFlags|=c,s=o.targetContainers,y!==null&&s.indexOf(y)===-1&&s.push(y),o)}function tw(o,s,l,c,y){switch(s){case"focusin":return $o=Gl($o,o,s,l,c,y),!0;case"dragenter":return Qo=Gl(Qo,o,s,l,c,y),!0;case"mouseover":return Xo=Gl(Xo,o,s,l,c,y),!0;case"pointerover":var _=y.pointerId;return Ol.set(_,Gl(Ol.get(_)||null,o,s,l,c,y)),!0;case"gotpointercapture":return _=y.pointerId,Fl.set(_,Gl(Fl.get(_)||null,o,s,l,c,y)),!0}return!1}function zv(o){var s=vi(o.target);if(s!==null){var l=a(s);if(l!==null){if(s=l.tag,s===13){if(s=u(l),s!==null){o.blockedOn=s,Xn(o.priority,function(){qv(l)});return}}else if(s===31){if(s=d(l),s!==null){o.blockedOn=s,Xn(o.priority,function(){qv(l)});return}}else if(s===3&&l.stateNode.current.memoizedState.isDehydrated){o.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}o.blockedOn=null}function Qc(o){if(o.blockedOn!==null)return!1;for(var s=o.targetContainers;0<s.length;){var l=vp(o.nativeEvent);if(l===null){l=o.nativeEvent;var c=new l.constructor(l.type,l);ja=c,l.target.dispatchEvent(c),ja=null}else return s=Pn(l),s!==null&&Gv(s),o.blockedOn=l,!1;s.shift()}return!0}function Jv(o,s,l){Qc(o)&&l.delete(s)}function nw(){Ep=!1,$o!==null&&Qc($o)&&($o=null),Qo!==null&&Qc(Qo)&&(Qo=null),Xo!==null&&Qc(Xo)&&(Xo=null),Ol.forEach(Jv),Fl.forEach(Jv)}function Xc(o,s){o.blockedOn===s&&(o.blockedOn=null,Ep||(Ep=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,nw)))}var Wc=null;function Kv(o){Wc!==o&&(Wc=o,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Wc===o&&(Wc=null);for(var s=0;s<o.length;s+=3){var l=o[s],c=o[s+1],y=o[s+2];if(typeof c!="function"){if(Tp(c||l)===null)continue;break}var _=Pn(l);_!==null&&(o.splice(s,3),s-=3,vh(_,{pending:!0,data:y,method:l.method,action:c},c,y))}}))}function oa(o){function s(U){return Xc(U,o)}$o!==null&&Xc($o,o),Qo!==null&&Xc(Qo,o),Xo!==null&&Xc(Xo,o),Ol.forEach(s),Fl.forEach(s);for(var l=0;l<Wo.length;l++){var c=Wo[l];c.blockedOn===o&&(c.blockedOn=null)}for(;0<Wo.length&&(l=Wo[0],l.blockedOn===null);)zv(l),l.blockedOn===null&&Wo.shift();if(l=(o.ownerDocument||o).$$reactFormReplay,l!=null)for(c=0;c<l.length;c+=3){var y=l[c],_=l[c+1],A=y[Ft]||null;if(typeof _=="function")A||Kv(l);else if(A){var I=null;if(_&&_.hasAttribute("formAction")){if(y=_,A=_[Ft]||null)I=A.formAction;else if(Tp(y)!==null)continue}else I=A.action;typeof I=="function"?l[c+1]=I:(l.splice(c,3),c-=3),Kv(l)}}}function Yv(){function o(_){_.canIntercept&&_.info==="react-transition"&&_.intercept({handler:function(){return new Promise(function(A){return y=A})},focusReset:"manual",scroll:"manual"})}function s(){y!==null&&(y(),y=null),c||setTimeout(l,20)}function l(){if(!c&&!navigation.transition){var _=navigation.currentEntry;_&&_.url!=null&&navigation.navigate(_.url,{state:_.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,y=null;return navigation.addEventListener("navigate",o),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(l,100),function(){c=!0,navigation.removeEventListener("navigate",o),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),y!==null&&(y(),y=null)}}}function Sp(o){this._internalRoot=o}Zc.prototype.render=Sp.prototype.render=function(o){var s=this._internalRoot;if(s===null)throw Error(i(409));var l=s.current,c=Mn();Ov(l,c,o,s,null,null)},Zc.prototype.unmount=Sp.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var s=o.containerInfo;Ov(o.current,2,null,o,null,null),xc(),s[yi]=null}};function Zc(o){this._internalRoot=o}Zc.prototype.unstable_scheduleHydration=function(o){if(o){var s=xu();o={blockedOn:null,target:o,priority:s};for(var l=0;l<Wo.length&&s!==0&&s<Wo[l].priority;l++);Wo.splice(l,0,o),l===0&&zv(o)}};var $v=e.version;if($v!=="19.2.4")throw Error(i(527,$v,"19.2.4"));ue.findDOMNode=function(o){var s=o._reactInternals;if(s===void 0)throw typeof o.render=="function"?Error(i(188)):(o=Object.keys(o).join(","),Error(i(268,o)));return o=p(s),o=o!==null?v(o):null,o=o===null?null:o.stateNode,o};var iw={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:X,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var jc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!jc.isDisabled&&jc.supportsFiber)try{$n=jc.inject(iw),zt=jc}catch{}}return Bl.createRoot=function(o,s){if(!r(o))throw Error(i(299));var l=!1,c="",y=t_,_=n_,A=i_;return s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onUncaughtError!==void 0&&(y=s.onUncaughtError),s.onCaughtError!==void 0&&(_=s.onCaughtError),s.onRecoverableError!==void 0&&(A=s.onRecoverableError)),s=Lv(o,1,!1,null,null,l,c,null,y,_,A,Yv),o[yi]=s.current,ip(o),new Sp(s)},Bl.hydrateRoot=function(o,s,l){if(!r(o))throw Error(i(299));var c=!1,y="",_=t_,A=n_,I=i_,U=null;return l!=null&&(l.unstable_strictMode===!0&&(c=!0),l.identifierPrefix!==void 0&&(y=l.identifierPrefix),l.onUncaughtError!==void 0&&(_=l.onUncaughtError),l.onCaughtError!==void 0&&(A=l.onCaughtError),l.onRecoverableError!==void 0&&(I=l.onRecoverableError),l.formState!==void 0&&(U=l.formState)),s=Lv(o,1,!0,s,l??null,c,y,U,_,A,I,Yv),s.context=kv(null),l=s.current,c=Mn(),c=Ms(c),y=Lo(c),y.callback=null,ko(l,y,c),l=c,s.current.lanes=l,Ns(s,l),Pi(s),o[yi]=s.current,ip(o),new Zc(s)},Bl.version="19.2.4",Bl}var oT;function pw(){if(oT)return Ip.exports;oT=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Ip.exports=hw(),Ip.exports}var mw=pw();const gw=hS(mw),yw=()=>{};var sT={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pS=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let r=n.charCodeAt(i);r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):(r&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},_w=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const r=n[t++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const a=n[t++];e[i++]=String.fromCharCode((r&31)<<6|a&63)}else if(r>239&&r<365){const a=n[t++],u=n[t++],d=n[t++],g=((r&7)<<18|(a&63)<<12|(u&63)<<6|d&63)-65536;e[i++]=String.fromCharCode(55296+(g>>10)),e[i++]=String.fromCharCode(56320+(g&1023))}else{const a=n[t++],u=n[t++];e[i++]=String.fromCharCode((r&15)<<12|(a&63)<<6|u&63)}}return e.join("")},mS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<n.length;r+=3){const a=n[r],u=r+1<n.length,d=u?n[r+1]:0,g=r+2<n.length,p=g?n[r+2]:0,v=a>>2,T=(a&3)<<4|d>>4;let S=(d&15)<<2|p>>6,R=p&63;g||(R=64,u||(S=64)),i.push(t[v],t[T],t[S],t[R])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(pS(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):_w(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<n.length;){const a=t[n.charAt(r++)],d=r<n.length?t[n.charAt(r)]:0;++r;const p=r<n.length?t[n.charAt(r)]:64;++r;const T=r<n.length?t[n.charAt(r)]:64;if(++r,a==null||d==null||p==null||T==null)throw new vw;const S=a<<2|d>>4;if(i.push(S),p!==64){const R=d<<4&240|p>>2;if(i.push(R),T!==64){const V=p<<6&192|T;i.push(V)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class vw extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Tw=function(n){const e=pS(n);return mS.encodeByteArray(e,!0)},wf=function(n){return Tw(n).replace(/\./g,"")},gS=function(n){try{return mS.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ew(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sw=()=>Ew().__FIREBASE_DEFAULTS__,Aw=()=>{if(typeof process>"u"||typeof sT>"u")return;const n=sT.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},Cw=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&gS(n[1]);return e&&JSON.parse(e)},Zf=()=>{try{return yw()||Sw()||Aw()||Cw()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},yS=n=>{var e,t;return(t=(e=Zf())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},Iw=n=>{const e=yS(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},_S=()=>{var n;return(n=Zf())==null?void 0:n.config},vS=n=>{var e;return(e=Zf())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rw{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wa(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function TS(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ww(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",r=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u={iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...n};return[wf(JSON.stringify(t)),wf(JSON.stringify(u)),""].join(".")}const Wl={};function Nw(){const n={prod:[],emulator:[]};for(const e of Object.keys(Wl))Wl[e]?n.emulator.push(e):n.prod.push(e);return n}function bw(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let rT=!1;function ES(n,e){if(typeof window>"u"||typeof document>"u"||!wa(window.location.host)||Wl[n]===e||Wl[n]||rT)return;Wl[n]=e;function t(S){return`__firebase__banner__${S}`}const i="__firebase__banner",a=Nw().prod.length>0;function u(){const S=document.getElementById(i);S&&S.remove()}function d(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function g(S,R){S.setAttribute("width","24"),S.setAttribute("id",R),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function p(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{rT=!0,u()},S}function v(S,R){S.setAttribute("id",R),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function T(){const S=bw(i),R=t("text"),V=document.getElementById(R)||document.createElement("span"),G=t("learnmore"),L=document.getElementById(G)||document.createElement("a"),Y=t("preprendIcon"),ne=document.getElementById(Y)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const j=S.element;d(j),v(L,G);const ae=p();g(ne,Y),j.append(ne,V,L,ae),document.body.appendChild(j)}a?(V.innerText="Preview backend disconnected.",ne.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ne.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,V.innerText="Preview backend running in this workspace."),V.setAttribute("id",R)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Mw(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(sn())}function Dw(){var e;const n=(e=Zf())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function xw(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Pw(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function Vw(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Uw(){const n=sn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function Lw(){return!Dw()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function kw(){try{return typeof indexedDB=="object"}catch{return!1}}function Ow(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},r.onupgradeneeded=()=>{t=!1},r.onerror=()=>{var a;e(((a=r.error)==null?void 0:a.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fw="FirebaseError";class yo extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=Fw,Object.setPrototypeOf(this,yo.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,mu.prototype.create)}}class mu{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},r=`${this.service}/${e}`,a=this.errors[e],u=a?Gw(a,i):"Error",d=`${this.serviceName}: ${u} (${r}).`;return new yo(r,d,i)}}function Gw(n,e){return n.replace(qw,(t,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const qw=/\{\$([^}]+)}/g;function Bw(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function rr(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const r of t){if(!i.includes(r))return!1;const a=n[r],u=e[r];if(aT(a)&&aT(u)){if(!rr(a,u))return!1}else if(a!==u)return!1}for(const r of i)if(!t.includes(r))return!1;return!0}function aT(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gu(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Hw(n,e){const t=new zw(n,e);return t.subscribe.bind(t)}class zw{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let r;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");Jw(e,["next","error","complete"])?r=e:r={next:e,error:t,complete:i},r.next===void 0&&(r.next=bp),r.error===void 0&&(r.error=bp),r.complete===void 0&&(r.complete=bp);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Jw(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function bp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rn(n){return n&&n._delegate?n._delegate:n}class ar{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kw{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new Rw;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:t});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(r){if(i)return null;throw r}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if($w(e))try{this.getOrInitializeService({instanceIdentifier:tr})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:r});i.resolve(a)}catch{}}}}clearInstance(e=tr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=tr){return this.instances.has(e)}getOptions(e=tr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[a,u]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(a);i===d&&u.resolve(r)}return r}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),r=this.onInitCallbacks.get(i)??new Set;r.add(e),this.onInitCallbacks.set(i,r);const a=this.instances.get(i);return a&&e(a,i),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const r of i)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:Yw(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=tr){return this.component?this.component.multipleInstances?e:tr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Yw(n){return n===tr?void 0:n}function $w(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qw{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Kw(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Oe;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Oe||(Oe={}));const Xw={debug:Oe.DEBUG,verbose:Oe.VERBOSE,info:Oe.INFO,warn:Oe.WARN,error:Oe.ERROR,silent:Oe.SILENT},Ww=Oe.INFO,Zw={[Oe.DEBUG]:"log",[Oe.VERBOSE]:"log",[Oe.INFO]:"info",[Oe.WARN]:"warn",[Oe.ERROR]:"error"},jw=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),r=Zw[e];if(r)console[r](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class xm{constructor(e){this.name=e,this._logLevel=Ww,this._logHandler=jw,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Oe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Xw[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Oe.DEBUG,...e),this._logHandler(this,Oe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Oe.VERBOSE,...e),this._logHandler(this,Oe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Oe.INFO,...e),this._logHandler(this,Oe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Oe.WARN,...e),this._logHandler(this,Oe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Oe.ERROR,...e),this._logHandler(this,Oe.ERROR,...e)}}const eN=(n,e)=>e.some(t=>n instanceof t);let lT,uT;function tN(){return lT||(lT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function nN(){return uT||(uT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const SS=new WeakMap,Kp=new WeakMap,AS=new WeakMap,Mp=new WeakMap,Pm=new WeakMap;function iN(n){const e=new Promise((t,i)=>{const r=()=>{n.removeEventListener("success",a),n.removeEventListener("error",u)},a=()=>{t(as(n.result)),r()},u=()=>{i(n.error),r()};n.addEventListener("success",a),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&SS.set(t,n)}).catch(()=>{}),Pm.set(e,n),e}function oN(n){if(Kp.has(n))return;const e=new Promise((t,i)=>{const r=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",u),n.removeEventListener("abort",u)},a=()=>{t(),r()},u=()=>{i(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",a),n.addEventListener("error",u),n.addEventListener("abort",u)});Kp.set(n,e)}let Yp={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Kp.get(n);if(e==="objectStoreNames")return n.objectStoreNames||AS.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return as(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function sN(n){Yp=n(Yp)}function rN(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(Dp(this),e,...t);return AS.set(i,e.sort?e.sort():[e]),as(i)}:nN().includes(n)?function(...e){return n.apply(Dp(this),e),as(SS.get(this))}:function(...e){return as(n.apply(Dp(this),e))}}function aN(n){return typeof n=="function"?rN(n):(n instanceof IDBTransaction&&oN(n),eN(n,tN())?new Proxy(n,Yp):n)}function as(n){if(n instanceof IDBRequest)return iN(n);if(Mp.has(n))return Mp.get(n);const e=aN(n);return e!==n&&(Mp.set(n,e),Pm.set(e,n)),e}const Dp=n=>Pm.get(n);function lN(n,e,{blocked:t,upgrade:i,blocking:r,terminated:a}={}){const u=indexedDB.open(n,e),d=as(u);return i&&u.addEventListener("upgradeneeded",g=>{i(as(u.result),g.oldVersion,g.newVersion,as(u.transaction),g)}),t&&u.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),d.then(g=>{a&&g.addEventListener("close",()=>a()),r&&g.addEventListener("versionchange",p=>r(p.oldVersion,p.newVersion,p))}).catch(()=>{}),d}const uN=["get","getKey","getAll","getAllKeys","count"],cN=["put","add","delete","clear"],xp=new Map;function cT(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(xp.get(e))return xp.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,r=cN.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(r||uN.includes(t)))return;const a=async function(u,...d){const g=this.transaction(u,r?"readwrite":"readonly");let p=g.store;return i&&(p=p.index(d.shift())),(await Promise.all([p[t](...d),r&&g.done]))[0]};return xp.set(e,a),a}sN(n=>({...n,get:(e,t,i)=>cT(e,t)||n.get(e,t,i),has:(e,t)=>!!cT(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fN{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(dN(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function dN(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const $p="@firebase/app",fT="0.14.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const co=new xm("@firebase/app"),hN="@firebase/app-compat",pN="@firebase/analytics-compat",mN="@firebase/analytics",gN="@firebase/app-check-compat",yN="@firebase/app-check",_N="@firebase/auth",vN="@firebase/auth-compat",TN="@firebase/database",EN="@firebase/data-connect",SN="@firebase/database-compat",AN="@firebase/functions",CN="@firebase/functions-compat",IN="@firebase/installations",RN="@firebase/installations-compat",wN="@firebase/messaging",NN="@firebase/messaging-compat",bN="@firebase/performance",MN="@firebase/performance-compat",DN="@firebase/remote-config",xN="@firebase/remote-config-compat",PN="@firebase/storage",VN="@firebase/storage-compat",UN="@firebase/firestore",LN="@firebase/ai",kN="@firebase/firestore-compat",ON="firebase",FN="12.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qp="[DEFAULT]",GN={[$p]:"fire-core",[hN]:"fire-core-compat",[mN]:"fire-analytics",[pN]:"fire-analytics-compat",[yN]:"fire-app-check",[gN]:"fire-app-check-compat",[_N]:"fire-auth",[vN]:"fire-auth-compat",[TN]:"fire-rtdb",[EN]:"fire-data-connect",[SN]:"fire-rtdb-compat",[AN]:"fire-fn",[CN]:"fire-fn-compat",[IN]:"fire-iid",[RN]:"fire-iid-compat",[wN]:"fire-fcm",[NN]:"fire-fcm-compat",[bN]:"fire-perf",[MN]:"fire-perf-compat",[DN]:"fire-rc",[xN]:"fire-rc-compat",[PN]:"fire-gcs",[VN]:"fire-gcs-compat",[UN]:"fire-fst",[kN]:"fire-fst-compat",[LN]:"fire-vertex","fire-js":"fire-js",[ON]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iu=new Map,qN=new Map,Xp=new Map;function dT(n,e){try{n.container.addComponent(e)}catch(t){co.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Ea(n){const e=n.name;if(Xp.has(e))return co.debug(`There were multiple attempts to register component ${e}.`),!1;Xp.set(e,n);for(const t of iu.values())dT(t,n);for(const t of qN.values())dT(t,n);return!0}function Vm(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function ri(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ls=new mu("app","Firebase",BN);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HN{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new ar("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ls.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Na=FN;function CS(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i={name:Qp,automaticDataCollectionEnabled:!0,...e},r=i.name;if(typeof r!="string"||!r)throw ls.create("bad-app-name",{appName:String(r)});if(t||(t=_S()),!t)throw ls.create("no-options");const a=iu.get(r);if(a){if(rr(t,a.options)&&rr(i,a.config))return a;throw ls.create("duplicate-app",{appName:r})}const u=new Qw(r);for(const g of Xp.values())u.addComponent(g);const d=new HN(t,i,u);return iu.set(r,d),d}function Um(n=Qp){const e=iu.get(n);if(!e&&n===Qp&&_S())return CS();if(!e)throw ls.create("no-app",{appName:n});return e}function zN(){return Array.from(iu.values())}function us(n,e,t){let i=GN[n]??n;t&&(i+=`-${t}`);const r=i.match(/\s|\//),a=e.match(/\s|\//);if(r||a){const u=[`Unable to register library "${i}" with version "${e}":`];r&&u.push(`library name "${i}" contains illegal characters (whitespace or "/")`),r&&a&&u.push("and"),a&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),co.warn(u.join(" "));return}Ea(new ar(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JN="firebase-heartbeat-database",KN=1,ou="firebase-heartbeat-store";let Pp=null;function IS(){return Pp||(Pp=lN(JN,KN,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(ou)}catch(t){console.warn(t)}}}}).catch(n=>{throw ls.create("idb-open",{originalErrorMessage:n.message})})),Pp}async function YN(n){try{const t=(await IS()).transaction(ou),i=await t.objectStore(ou).get(RS(n));return await t.done,i}catch(e){if(e instanceof yo)co.warn(e.message);else{const t=ls.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});co.warn(t.message)}}}async function hT(n,e){try{const i=(await IS()).transaction(ou,"readwrite");await i.objectStore(ou).put(e,RS(n)),await i.done}catch(t){if(t instanceof yo)co.warn(t.message);else{const i=ls.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});co.warn(i.message)}}}function RS(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $N=1024,QN=30;class XN{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new ZN(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=pT();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(u=>u.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:r}),this._heartbeatsCache.heartbeats.length>QN){const u=jN(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){co.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=pT(),{heartbeatsToSend:i,unsentEntries:r}=WN(this._heartbeatsCache.heartbeats),a=wf(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return co.warn(t),""}}}function pT(){return new Date().toISOString().substring(0,10)}function WN(n,e=$N){const t=[];let i=n.slice();for(const r of n){const a=t.find(u=>u.agent===r.agent);if(a){if(a.dates.push(r.date),mT(t)>e){a.dates.pop();break}}else if(t.push({agent:r.agent,dates:[r.date]}),mT(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class ZN{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return kw()?Ow().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await YN(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return hT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return hT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function mT(n){return wf(JSON.stringify({version:2,heartbeats:n})).length}function jN(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eb(n){Ea(new ar("platform-logger",e=>new fN(e),"PRIVATE")),Ea(new ar("heartbeat",e=>new XN(e),"PRIVATE")),us($p,fT,n),us($p,fT,"esm2020"),us("fire-js","")}eb("");var tb="firebase",nb="12.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */us(tb,nb,"app");var gT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var cs,wS;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(M,N){function b(){}b.prototype=N.prototype,M.F=N.prototype,M.prototype=new b,M.prototype.constructor=M,M.D=function(x,P,O){for(var D=Array(arguments.length-2),Me=2;Me<arguments.length;Me++)D[Me-2]=arguments[Me];return N.prototype[P].apply(x,D)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,t),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(M,N,b){b||(b=0);const x=Array(16);if(typeof N=="string")for(var P=0;P<16;++P)x[P]=N.charCodeAt(b++)|N.charCodeAt(b++)<<8|N.charCodeAt(b++)<<16|N.charCodeAt(b++)<<24;else for(P=0;P<16;++P)x[P]=N[b++]|N[b++]<<8|N[b++]<<16|N[b++]<<24;N=M.g[0],b=M.g[1],P=M.g[2];let O=M.g[3],D;D=N+(O^b&(P^O))+x[0]+3614090360&4294967295,N=b+(D<<7&4294967295|D>>>25),D=O+(P^N&(b^P))+x[1]+3905402710&4294967295,O=N+(D<<12&4294967295|D>>>20),D=P+(b^O&(N^b))+x[2]+606105819&4294967295,P=O+(D<<17&4294967295|D>>>15),D=b+(N^P&(O^N))+x[3]+3250441966&4294967295,b=P+(D<<22&4294967295|D>>>10),D=N+(O^b&(P^O))+x[4]+4118548399&4294967295,N=b+(D<<7&4294967295|D>>>25),D=O+(P^N&(b^P))+x[5]+1200080426&4294967295,O=N+(D<<12&4294967295|D>>>20),D=P+(b^O&(N^b))+x[6]+2821735955&4294967295,P=O+(D<<17&4294967295|D>>>15),D=b+(N^P&(O^N))+x[7]+4249261313&4294967295,b=P+(D<<22&4294967295|D>>>10),D=N+(O^b&(P^O))+x[8]+1770035416&4294967295,N=b+(D<<7&4294967295|D>>>25),D=O+(P^N&(b^P))+x[9]+2336552879&4294967295,O=N+(D<<12&4294967295|D>>>20),D=P+(b^O&(N^b))+x[10]+4294925233&4294967295,P=O+(D<<17&4294967295|D>>>15),D=b+(N^P&(O^N))+x[11]+2304563134&4294967295,b=P+(D<<22&4294967295|D>>>10),D=N+(O^b&(P^O))+x[12]+1804603682&4294967295,N=b+(D<<7&4294967295|D>>>25),D=O+(P^N&(b^P))+x[13]+4254626195&4294967295,O=N+(D<<12&4294967295|D>>>20),D=P+(b^O&(N^b))+x[14]+2792965006&4294967295,P=O+(D<<17&4294967295|D>>>15),D=b+(N^P&(O^N))+x[15]+1236535329&4294967295,b=P+(D<<22&4294967295|D>>>10),D=N+(P^O&(b^P))+x[1]+4129170786&4294967295,N=b+(D<<5&4294967295|D>>>27),D=O+(b^P&(N^b))+x[6]+3225465664&4294967295,O=N+(D<<9&4294967295|D>>>23),D=P+(N^b&(O^N))+x[11]+643717713&4294967295,P=O+(D<<14&4294967295|D>>>18),D=b+(O^N&(P^O))+x[0]+3921069994&4294967295,b=P+(D<<20&4294967295|D>>>12),D=N+(P^O&(b^P))+x[5]+3593408605&4294967295,N=b+(D<<5&4294967295|D>>>27),D=O+(b^P&(N^b))+x[10]+38016083&4294967295,O=N+(D<<9&4294967295|D>>>23),D=P+(N^b&(O^N))+x[15]+3634488961&4294967295,P=O+(D<<14&4294967295|D>>>18),D=b+(O^N&(P^O))+x[4]+3889429448&4294967295,b=P+(D<<20&4294967295|D>>>12),D=N+(P^O&(b^P))+x[9]+568446438&4294967295,N=b+(D<<5&4294967295|D>>>27),D=O+(b^P&(N^b))+x[14]+3275163606&4294967295,O=N+(D<<9&4294967295|D>>>23),D=P+(N^b&(O^N))+x[3]+4107603335&4294967295,P=O+(D<<14&4294967295|D>>>18),D=b+(O^N&(P^O))+x[8]+1163531501&4294967295,b=P+(D<<20&4294967295|D>>>12),D=N+(P^O&(b^P))+x[13]+2850285829&4294967295,N=b+(D<<5&4294967295|D>>>27),D=O+(b^P&(N^b))+x[2]+4243563512&4294967295,O=N+(D<<9&4294967295|D>>>23),D=P+(N^b&(O^N))+x[7]+1735328473&4294967295,P=O+(D<<14&4294967295|D>>>18),D=b+(O^N&(P^O))+x[12]+2368359562&4294967295,b=P+(D<<20&4294967295|D>>>12),D=N+(b^P^O)+x[5]+4294588738&4294967295,N=b+(D<<4&4294967295|D>>>28),D=O+(N^b^P)+x[8]+2272392833&4294967295,O=N+(D<<11&4294967295|D>>>21),D=P+(O^N^b)+x[11]+1839030562&4294967295,P=O+(D<<16&4294967295|D>>>16),D=b+(P^O^N)+x[14]+4259657740&4294967295,b=P+(D<<23&4294967295|D>>>9),D=N+(b^P^O)+x[1]+2763975236&4294967295,N=b+(D<<4&4294967295|D>>>28),D=O+(N^b^P)+x[4]+1272893353&4294967295,O=N+(D<<11&4294967295|D>>>21),D=P+(O^N^b)+x[7]+4139469664&4294967295,P=O+(D<<16&4294967295|D>>>16),D=b+(P^O^N)+x[10]+3200236656&4294967295,b=P+(D<<23&4294967295|D>>>9),D=N+(b^P^O)+x[13]+681279174&4294967295,N=b+(D<<4&4294967295|D>>>28),D=O+(N^b^P)+x[0]+3936430074&4294967295,O=N+(D<<11&4294967295|D>>>21),D=P+(O^N^b)+x[3]+3572445317&4294967295,P=O+(D<<16&4294967295|D>>>16),D=b+(P^O^N)+x[6]+76029189&4294967295,b=P+(D<<23&4294967295|D>>>9),D=N+(b^P^O)+x[9]+3654602809&4294967295,N=b+(D<<4&4294967295|D>>>28),D=O+(N^b^P)+x[12]+3873151461&4294967295,O=N+(D<<11&4294967295|D>>>21),D=P+(O^N^b)+x[15]+530742520&4294967295,P=O+(D<<16&4294967295|D>>>16),D=b+(P^O^N)+x[2]+3299628645&4294967295,b=P+(D<<23&4294967295|D>>>9),D=N+(P^(b|~O))+x[0]+4096336452&4294967295,N=b+(D<<6&4294967295|D>>>26),D=O+(b^(N|~P))+x[7]+1126891415&4294967295,O=N+(D<<10&4294967295|D>>>22),D=P+(N^(O|~b))+x[14]+2878612391&4294967295,P=O+(D<<15&4294967295|D>>>17),D=b+(O^(P|~N))+x[5]+4237533241&4294967295,b=P+(D<<21&4294967295|D>>>11),D=N+(P^(b|~O))+x[12]+1700485571&4294967295,N=b+(D<<6&4294967295|D>>>26),D=O+(b^(N|~P))+x[3]+2399980690&4294967295,O=N+(D<<10&4294967295|D>>>22),D=P+(N^(O|~b))+x[10]+4293915773&4294967295,P=O+(D<<15&4294967295|D>>>17),D=b+(O^(P|~N))+x[1]+2240044497&4294967295,b=P+(D<<21&4294967295|D>>>11),D=N+(P^(b|~O))+x[8]+1873313359&4294967295,N=b+(D<<6&4294967295|D>>>26),D=O+(b^(N|~P))+x[15]+4264355552&4294967295,O=N+(D<<10&4294967295|D>>>22),D=P+(N^(O|~b))+x[6]+2734768916&4294967295,P=O+(D<<15&4294967295|D>>>17),D=b+(O^(P|~N))+x[13]+1309151649&4294967295,b=P+(D<<21&4294967295|D>>>11),D=N+(P^(b|~O))+x[4]+4149444226&4294967295,N=b+(D<<6&4294967295|D>>>26),D=O+(b^(N|~P))+x[11]+3174756917&4294967295,O=N+(D<<10&4294967295|D>>>22),D=P+(N^(O|~b))+x[2]+718787259&4294967295,P=O+(D<<15&4294967295|D>>>17),D=b+(O^(P|~N))+x[9]+3951481745&4294967295,M.g[0]=M.g[0]+N&4294967295,M.g[1]=M.g[1]+(P+(D<<21&4294967295|D>>>11))&4294967295,M.g[2]=M.g[2]+P&4294967295,M.g[3]=M.g[3]+O&4294967295}i.prototype.v=function(M,N){N===void 0&&(N=M.length);const b=N-this.blockSize,x=this.C;let P=this.h,O=0;for(;O<N;){if(P==0)for(;O<=b;)r(this,M,O),O+=this.blockSize;if(typeof M=="string"){for(;O<N;)if(x[P++]=M.charCodeAt(O++),P==this.blockSize){r(this,x),P=0;break}}else for(;O<N;)if(x[P++]=M[O++],P==this.blockSize){r(this,x),P=0;break}}this.h=P,this.o+=N},i.prototype.A=function(){var M=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);M[0]=128;for(var N=1;N<M.length-8;++N)M[N]=0;N=this.o*8;for(var b=M.length-8;b<M.length;++b)M[b]=N&255,N/=256;for(this.v(M),M=Array(16),N=0,b=0;b<4;++b)for(let x=0;x<32;x+=8)M[N++]=this.g[b]>>>x&255;return M};function a(M,N){var b=d;return Object.prototype.hasOwnProperty.call(b,M)?b[M]:b[M]=N(M)}function u(M,N){this.h=N;const b=[];let x=!0;for(let P=M.length-1;P>=0;P--){const O=M[P]|0;x&&O==N||(b[P]=O,x=!1)}this.g=b}var d={};function g(M){return-128<=M&&M<128?a(M,function(N){return new u([N|0],N<0?-1:0)}):new u([M|0],M<0?-1:0)}function p(M){if(isNaN(M)||!isFinite(M))return T;if(M<0)return L(p(-M));const N=[];let b=1;for(let x=0;M>=b;x++)N[x]=M/b|0,b*=4294967296;return new u(N,0)}function v(M,N){if(M.length==0)throw Error("number format error: empty string");if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(M.charAt(0)=="-")return L(v(M.substring(1),N));if(M.indexOf("-")>=0)throw Error('number format error: interior "-" character');const b=p(Math.pow(N,8));let x=T;for(let O=0;O<M.length;O+=8){var P=Math.min(8,M.length-O);const D=parseInt(M.substring(O,O+P),N);P<8?(P=p(Math.pow(N,P)),x=x.j(P).add(p(D))):(x=x.j(b),x=x.add(p(D)))}return x}var T=g(0),S=g(1),R=g(16777216);n=u.prototype,n.m=function(){if(G(this))return-L(this).m();let M=0,N=1;for(let b=0;b<this.g.length;b++){const x=this.i(b);M+=(x>=0?x:4294967296+x)*N,N*=4294967296}return M},n.toString=function(M){if(M=M||10,M<2||36<M)throw Error("radix out of range: "+M);if(V(this))return"0";if(G(this))return"-"+L(this).toString(M);const N=p(Math.pow(M,6));var b=this;let x="";for(;;){const P=ae(b,N).g;b=Y(b,P.j(N));let O=((b.g.length>0?b.g[0]:b.h)>>>0).toString(M);if(b=P,V(b))return O+x;for(;O.length<6;)O="0"+O;x=O+x}},n.i=function(M){return M<0?0:M<this.g.length?this.g[M]:this.h};function V(M){if(M.h!=0)return!1;for(let N=0;N<M.g.length;N++)if(M.g[N]!=0)return!1;return!0}function G(M){return M.h==-1}n.l=function(M){return M=Y(this,M),G(M)?-1:V(M)?0:1};function L(M){const N=M.g.length,b=[];for(let x=0;x<N;x++)b[x]=~M.g[x];return new u(b,~M.h).add(S)}n.abs=function(){return G(this)?L(this):this},n.add=function(M){const N=Math.max(this.g.length,M.g.length),b=[];let x=0;for(let P=0;P<=N;P++){let O=x+(this.i(P)&65535)+(M.i(P)&65535),D=(O>>>16)+(this.i(P)>>>16)+(M.i(P)>>>16);x=D>>>16,O&=65535,D&=65535,b[P]=D<<16|O}return new u(b,b[b.length-1]&-2147483648?-1:0)};function Y(M,N){return M.add(L(N))}n.j=function(M){if(V(this)||V(M))return T;if(G(this))return G(M)?L(this).j(L(M)):L(L(this).j(M));if(G(M))return L(this.j(L(M)));if(this.l(R)<0&&M.l(R)<0)return p(this.m()*M.m());const N=this.g.length+M.g.length,b=[];for(var x=0;x<2*N;x++)b[x]=0;for(x=0;x<this.g.length;x++)for(let P=0;P<M.g.length;P++){const O=this.i(x)>>>16,D=this.i(x)&65535,Me=M.i(P)>>>16,st=M.i(P)&65535;b[2*x+2*P]+=D*st,ne(b,2*x+2*P),b[2*x+2*P+1]+=O*st,ne(b,2*x+2*P+1),b[2*x+2*P+1]+=D*Me,ne(b,2*x+2*P+1),b[2*x+2*P+2]+=O*Me,ne(b,2*x+2*P+2)}for(M=0;M<N;M++)b[M]=b[2*M+1]<<16|b[2*M];for(M=N;M<2*N;M++)b[M]=0;return new u(b,0)};function ne(M,N){for(;(M[N]&65535)!=M[N];)M[N+1]+=M[N]>>>16,M[N]&=65535,N++}function j(M,N){this.g=M,this.h=N}function ae(M,N){if(V(N))throw Error("division by zero");if(V(M))return new j(T,T);if(G(M))return N=ae(L(M),N),new j(L(N.g),L(N.h));if(G(N))return N=ae(M,L(N)),new j(L(N.g),N.h);if(M.g.length>30){if(G(M)||G(N))throw Error("slowDivide_ only works with positive integers.");for(var b=S,x=N;x.l(M)<=0;)b=Q(b),x=Q(x);var P=ee(b,1),O=ee(x,1);for(x=ee(x,2),b=ee(b,2);!V(x);){var D=O.add(x);D.l(M)<=0&&(P=P.add(b),O=D),x=ee(x,1),b=ee(b,1)}return N=Y(M,P.j(N)),new j(P,N)}for(P=T;M.l(N)>=0;){for(b=Math.max(1,Math.floor(M.m()/N.m())),x=Math.ceil(Math.log(b)/Math.LN2),x=x<=48?1:Math.pow(2,x-48),O=p(b),D=O.j(N);G(D)||D.l(M)>0;)b-=x,O=p(b),D=O.j(N);V(O)&&(O=S),P=P.add(O),M=Y(M,D)}return new j(P,M)}n.B=function(M){return ae(this,M).h},n.and=function(M){const N=Math.max(this.g.length,M.g.length),b=[];for(let x=0;x<N;x++)b[x]=this.i(x)&M.i(x);return new u(b,this.h&M.h)},n.or=function(M){const N=Math.max(this.g.length,M.g.length),b=[];for(let x=0;x<N;x++)b[x]=this.i(x)|M.i(x);return new u(b,this.h|M.h)},n.xor=function(M){const N=Math.max(this.g.length,M.g.length),b=[];for(let x=0;x<N;x++)b[x]=this.i(x)^M.i(x);return new u(b,this.h^M.h)};function Q(M){const N=M.g.length+1,b=[];for(let x=0;x<N;x++)b[x]=M.i(x)<<1|M.i(x-1)>>>31;return new u(b,M.h)}function ee(M,N){const b=N>>5;N%=32;const x=M.g.length-b,P=[];for(let O=0;O<x;O++)P[O]=N>0?M.i(O+b)>>>N|M.i(O+b+1)<<32-N:M.i(O+b);return new u(P,M.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,wS=i,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.B,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=p,u.fromString=v,cs=u}).apply(typeof gT<"u"?gT:typeof self<"u"?self:typeof window<"u"?window:{});var ef=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var NS,Kl,bS,hf,Wp,MS,DS,xS;(function(){var n,e=Object.defineProperty;function t(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof ef=="object"&&ef];for(var E=0;E<m.length;++E){var C=m[E];if(C&&C.Math==Math)return C}throw Error("Cannot find global object")}var i=t(this);function r(m,E){if(E)e:{var C=i;m=m.split(".");for(var w=0;w<m.length-1;w++){var B=m[w];if(!(B in C))break e;C=C[B]}m=m[m.length-1],w=C[m],E=E(w),E!=w&&E!=null&&e(C,m,{configurable:!0,writable:!0,value:E})}}r("Symbol.dispose",function(m){return m||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(m){return m||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(m){return m||function(E){var C=[],w;for(w in E)Object.prototype.hasOwnProperty.call(E,w)&&C.push([w,E[w]]);return C}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},u=this||self;function d(m){var E=typeof m;return E=="object"&&m!=null||E=="function"}function g(m,E,C){return m.call.apply(m.bind,arguments)}function p(m,E,C){return p=g,p.apply(null,arguments)}function v(m,E){var C=Array.prototype.slice.call(arguments,1);return function(){var w=C.slice();return w.push.apply(w,arguments),m.apply(this,w)}}function T(m,E){function C(){}C.prototype=E.prototype,m.Z=E.prototype,m.prototype=new C,m.prototype.constructor=m,m.Ob=function(w,B,K){for(var le=Array(arguments.length-2),Ne=2;Ne<arguments.length;Ne++)le[Ne-2]=arguments[Ne];return E.prototype[B].apply(w,le)}}var S=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?m=>m&&AsyncContext.Snapshot.wrap(m):m=>m;function R(m){const E=m.length;if(E>0){const C=Array(E);for(let w=0;w<E;w++)C[w]=m[w];return C}return[]}function V(m,E){for(let w=1;w<arguments.length;w++){const B=arguments[w];var C=typeof B;if(C=C!="object"?C:B?Array.isArray(B)?"array":C:"null",C=="array"||C=="object"&&typeof B.length=="number"){C=m.length||0;const K=B.length||0;m.length=C+K;for(let le=0;le<K;le++)m[C+le]=B[le]}else m.push(B)}}class G{constructor(E,C){this.i=E,this.j=C,this.h=0,this.g=null}get(){let E;return this.h>0?(this.h--,E=this.g,this.g=E.next,E.next=null):E=this.i(),E}}function L(m){u.setTimeout(()=>{throw m},0)}function Y(){var m=M;let E=null;return m.g&&(E=m.g,m.g=m.g.next,m.g||(m.h=null),E.next=null),E}class ne{constructor(){this.h=this.g=null}add(E,C){const w=j.get();w.set(E,C),this.h?this.h.next=w:this.g=w,this.h=w}}var j=new G(()=>new ae,m=>m.reset());class ae{constructor(){this.next=this.g=this.h=null}set(E,C){this.h=E,this.g=C,this.next=null}reset(){this.next=this.g=this.h=null}}let Q,ee=!1,M=new ne,N=()=>{const m=Promise.resolve(void 0);Q=()=>{m.then(b)}};function b(){for(var m;m=Y();){try{m.h.call(m.g)}catch(C){L(C)}var E=j;E.j(m),E.h<100&&(E.h++,m.next=E.g,E.g=m)}ee=!1}function x(){this.u=this.u,this.C=this.C}x.prototype.u=!1,x.prototype.dispose=function(){this.u||(this.u=!0,this.N())},x.prototype[Symbol.dispose]=function(){this.dispose()},x.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function P(m,E){this.type=m,this.g=this.target=E,this.defaultPrevented=!1}P.prototype.h=function(){this.defaultPrevented=!0};var O=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var m=!1,E=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const C=()=>{};u.addEventListener("test",C,E),u.removeEventListener("test",C,E)}catch{}return m})();function D(m){return/^[\s\xa0]*$/.test(m)}function Me(m,E){P.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m&&this.init(m,E)}T(Me,P),Me.prototype.init=function(m,E){const C=this.type=m.type,w=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;this.target=m.target||m.srcElement,this.g=E,E=m.relatedTarget,E||(C=="mouseover"?E=m.fromElement:C=="mouseout"&&(E=m.toElement)),this.relatedTarget=E,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=m.pointerType,this.state=m.state,this.i=m,m.defaultPrevented&&Me.Z.h.call(this)},Me.prototype.h=function(){Me.Z.h.call(this);const m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var st="closure_listenable_"+(Math.random()*1e6|0),X=0;function ue(m,E,C,w,B){this.listener=m,this.proxy=null,this.src=E,this.type=C,this.capture=!!w,this.ha=B,this.key=++X,this.da=this.fa=!1}function me(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function Pe(m,E,C){for(const w in m)E.call(C,m[w],w,m)}function Xe(m,E){for(const C in m)E.call(void 0,m[C],C,m)}function F(m){const E={};for(const C in m)E[C]=m[C];return E}const ie="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ce(m,E){let C,w;for(let B=1;B<arguments.length;B++){w=arguments[B];for(C in w)m[C]=w[C];for(let K=0;K<ie.length;K++)C=ie[K],Object.prototype.hasOwnProperty.call(w,C)&&(m[C]=w[C])}}function he(m){this.src=m,this.g={},this.h=0}he.prototype.add=function(m,E,C,w,B){const K=m.toString();m=this.g[K],m||(m=this.g[K]=[],this.h++);const le=De(m,E,w,B);return le>-1?(E=m[le],C||(E.fa=!1)):(E=new ue(E,this.src,K,!!w,B),E.fa=C,m.push(E)),E};function Ae(m,E){const C=E.type;if(C in m.g){var w=m.g[C],B=Array.prototype.indexOf.call(w,E,void 0),K;(K=B>=0)&&Array.prototype.splice.call(w,B,1),K&&(me(E),m.g[C].length==0&&(delete m.g[C],m.h--))}}function De(m,E,C,w){for(let B=0;B<m.length;++B){const K=m[B];if(!K.da&&K.listener==E&&K.capture==!!C&&K.ha==w)return B}return-1}var Be="closure_lm_"+(Math.random()*1e6|0),Pt={};function ct(m,E,C,w,B){if(Array.isArray(E)){for(let K=0;K<E.length;K++)ct(m,E[K],C,w,B);return null}return C=Fa(C),m&&m[st]?m.J(E,C,d(w)?!!w.capture:!1,B):Cs(m,E,C,!1,w,B)}function Cs(m,E,C,w,B,K){if(!E)throw Error("Invalid event type");const le=d(B)?!!B.capture:!!B;let Ne=Is(m);if(Ne||(m[Be]=Ne=new he(m)),C=Ne.add(E,C,w,le,K),C.proxy)return C;if(w=mr(),C.proxy=w,w.src=m,w.listener=C,m.addEventListener)O||(B=le),B===void 0&&(B=!1),m.addEventListener(E.toString(),w,B);else if(m.attachEvent)m.attachEvent(di(E.toString()),w);else if(m.addListener&&m.removeListener)m.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return C}function mr(){function m(C){return E.call(m.src,m.listener,C)}const E=ka;return m}function gr(m,E,C,w,B){if(Array.isArray(E))for(var K=0;K<E.length;K++)gr(m,E[K],C,w,B);else w=d(w)?!!w.capture:!!w,C=Fa(C),m&&m[st]?(m=m.i,K=String(E).toString(),K in m.g&&(E=m.g[K],C=De(E,C,w,B),C>-1&&(me(E[C]),Array.prototype.splice.call(E,C,1),E.length==0&&(delete m.g[K],m.h--)))):m&&(m=Is(m))&&(E=m.g[E.toString()],m=-1,E&&(m=De(E,C,w,B)),(C=m>-1?E[m]:null)&&yr(C))}function yr(m){if(typeof m!="number"&&m&&!m.da){var E=m.src;if(E&&E[st])Ae(E.i,m);else{var C=m.type,w=m.proxy;E.removeEventListener?E.removeEventListener(C,w,m.capture):E.detachEvent?E.detachEvent(di(C),w):E.addListener&&E.removeListener&&E.removeListener(w),(C=Is(E))?(Ae(C,m),C.h==0&&(C.src=null,E[Be]=null)):me(m)}}}function di(m){return m in Pt?Pt[m]:Pt[m]="on"+m}function ka(m,E){if(m.da)m=!0;else{E=new Me(E,this);const C=m.listener,w=m.ha||m.src;m.fa&&yr(m),m=C.call(w,E)}return m}function Is(m){return m=m[Be],m instanceof he?m:null}var Oa="__closure_events_fn_"+(Math.random()*1e9>>>0);function Fa(m){return typeof m=="function"?m:(m[Oa]||(m[Oa]=function(E){return m.handleEvent(E)}),m[Oa])}function Et(){x.call(this),this.i=new he(this),this.M=this,this.G=null}T(Et,x),Et.prototype[st]=!0,Et.prototype.removeEventListener=function(m,E,C,w){gr(this,m,E,C,w)};function Vt(m,E){var C,w=m.G;if(w)for(C=[];w;w=w.G)C.push(w);if(m=m.M,w=E.type||E,typeof E=="string")E=new P(E,m);else if(E instanceof P)E.target=E.target||m;else{var B=E;E=new P(w,m),ce(E,B)}B=!0;let K,le;if(C)for(le=C.length-1;le>=0;le--)K=E.g=C[le],B=To(K,w,!0,E)&&B;if(K=E.g=m,B=To(K,w,!0,E)&&B,B=To(K,w,!1,E)&&B,C)for(le=0;le<C.length;le++)K=E.g=C[le],B=To(K,w,!1,E)&&B}Et.prototype.N=function(){if(Et.Z.N.call(this),this.i){var m=this.i;for(const E in m.g){const C=m.g[E];for(let w=0;w<C.length;w++)me(C[w]);delete m.g[E],m.h--}}this.G=null},Et.prototype.J=function(m,E,C,w){return this.i.add(String(m),E,!1,C,w)},Et.prototype.K=function(m,E,C,w){return this.i.add(String(m),E,!0,C,w)};function To(m,E,C,w){if(E=m.i.g[String(E)],!E)return!0;E=E.concat();let B=!0;for(let K=0;K<E.length;++K){const le=E[K];if(le&&!le.da&&le.capture==C){const Ne=le.listener,yt=le.ha||le.src;le.fa&&Ae(m.i,le),B=Ne.call(yt,w)!==!1&&B}}return B&&!w.defaultPrevented}function Id(m,E){if(typeof m!="function")if(m&&typeof m.handleEvent=="function")m=p(m.handleEvent,m);else throw Error("Invalid listener argument");return Number(E)>2147483647?-1:u.setTimeout(m,E||0)}function Iu(m){m.g=Id(()=>{m.g=null,m.i&&(m.i=!1,Iu(m))},m.l);const E=m.h;m.h=null,m.m.apply(null,E)}class an extends x{constructor(E,C){super(),this.m=E,this.l=C,this.h=null,this.i=!1,this.g=null}j(E){this.h=arguments,this.g?this.i=!0:Iu(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Rs(m){x.call(this),this.h=m,this.g={}}T(Rs,x);var Ga=[];function qa(m){Pe(m.g,function(E,C){this.g.hasOwnProperty(C)&&yr(E)},m),m.g={}}Rs.prototype.N=function(){Rs.Z.N.call(this),qa(this)},Rs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Eo=u.JSON.stringify,Rd=u.JSON.parse,Ru=class{stringify(m){return u.JSON.stringify(m,void 0)}parse(m){return u.JSON.parse(m,void 0)}};function wu(){}function Nu(){}var $n={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function zt(){P.call(this,"d")}T(zt,P);function xn(){P.call(this,"c")}T(xn,P);var gt={},bu=null;function _r(){return bu=bu||new Et}gt.Ia="serverreachability";function Mu(m){P.call(this,gt.Ia,m)}T(Mu,P);function hi(m){const E=_r();Vt(E,new Mu(E))}gt.STAT_EVENT="statevent";function ws(m,E){P.call(this,gt.STAT_EVENT,m),this.stat=E}T(ws,P);function St(m){const E=_r();Vt(E,new ws(E,m))}gt.Ja="timingevent";function pi(m,E){P.call(this,gt.Ja,m),this.size=E}T(pi,P);function mi(m,E){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){m()},E)}function Qn(){this.g=!0}Qn.prototype.ua=function(){this.g=!1};function wd(m,E,C,w,B,K){m.info(function(){if(m.g)if(K){var le="",Ne=K.split("&");for(let Ye=0;Ye<Ne.length;Ye++){var yt=Ne[Ye].split("=");if(yt.length>1){const ft=yt[0];yt=yt[1];const Ln=ft.split("_");le=Ln.length>=2&&Ln[1]=="type"?le+(ft+"="+yt+"&"):le+(ft+"=redacted&")}}}else le=null;else le=K;return"XMLHTTP REQ ("+w+") [attempt "+B+"]: "+E+`
`+C+`
`+le})}function Du(m,E,C,w,B,K,le){m.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+B+"]: "+E+`
`+C+`
`+K+" "+le})}function gi(m,E,C,w){m.info(function(){return"XMLHTTP TEXT ("+E+"): "+Nd(m,C)+(w?" "+w:"")})}function Ns(m,E){m.info(function(){return"TIMEOUT: "+E})}Qn.prototype.info=function(){};function Nd(m,E){if(!m.g)return E;if(!E)return null;try{const K=JSON.parse(E);if(K){for(m=0;m<K.length;m++)if(Array.isArray(K[m])){var C=K[m];if(!(C.length<2)){var w=C[1];if(Array.isArray(w)&&!(w.length<1)){var B=w[0];if(B!="noop"&&B!="stop"&&B!="close")for(let le=1;le<w.length;le++)w[le]=""}}}}return Eo(K)}catch{return E}}var bs={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ba={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Ha;function Ms(){}T(Ms,wu),Ms.prototype.g=function(){return new XMLHttpRequest},Ha=new Ms;function Hi(m){return encodeURIComponent(String(m))}function xu(m){var E=1;m=m.split(":");const C=[];for(;E>0&&m.length;)C.push(m.shift()),E--;return m.length&&C.push(m.join(":")),C}function Xn(m,E,C,w){this.j=m,this.i=E,this.l=C,this.S=w||1,this.V=new Rs(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Wn}function Wn(){this.i=null,this.g="",this.h=!1}var At={},Ft={};function yi(m,E,C){m.M=1,m.A=Ds(It(E)),m.u=C,m.R=!0,vr(m,null)}function vr(m,E){m.F=Date.now(),_i(m),m.B=It(m.A);var C=m.B,w=m.S;Array.isArray(w)||(w=[String(w)]),Ar(C.i,"t",w),m.C=0,C=m.j.L,m.h=new Wn,m.g=Yu(m.j,C?E:null,!m.u),m.P>0&&(m.O=new an(p(m.Y,m,m.g),m.P)),E=m.V,C=m.g,w=m.ba;var B="readystatechange";Array.isArray(B)||(B&&(Ga[0]=B.toString()),B=Ga);for(let K=0;K<B.length;K++){const le=ct(C,B[K],w||E.handleEvent,!1,E.h||E);if(!le)break;E.g[le.key]=le}E=m.J?F(m.J):{},m.u?(m.v||(m.v="POST"),E["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.B,m.v,m.u,E)):(m.v="GET",m.g.ea(m.B,m.v,null,E)),hi(),wd(m.i,m.v,m.B,m.l,m.S,m.u)}Xn.prototype.ba=function(m){m=m.target;const E=this.O;E&&ei(m)==3?E.j():this.Y(m)},Xn.prototype.Y=function(m){try{if(m==this.g)e:{const Ne=ei(this.g),yt=this.g.ya(),Ye=this.g.ca();if(!(Ne<3)&&(Ne!=3||this.g&&(this.h.h||this.g.la()||Jt(this.g)))){this.K||Ne!=4||yt==7||(yt==8||Ye<=0?hi(3):hi(2)),vi(this);var E=this.g.ca();this.X=E;var C=bd(this);if(this.o=E==200,Du(this.i,this.v,this.B,this.l,this.S,Ne,E),this.o){if(this.U&&!this.L){t:{if(this.g){var w,B=this.g;if((w=B.g?B.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!D(w)){var K=w;break t}}K=null}if(m=K)gi(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ti(this,m);else{this.o=!1,this.m=3,St(12),Sn(this),Pn(this);break e}}if(this.R){m=!0;let ft;for(;!this.K&&this.C<C.length;)if(ft=Vu(this,C),ft==Ft){Ne==4&&(this.m=4,St(14),m=!1),gi(this.i,this.l,null,"[Incomplete Response]");break}else if(ft==At){this.m=4,St(15),gi(this.i,this.l,C,"[Invalid Chunk]"),m=!1;break}else gi(this.i,this.l,ft,null),Ti(this,ft);if(Pu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ne!=4||C.length!=0||this.h.h||(this.m=1,St(16),m=!1),this.o=this.o&&m,!m)gi(this.i,this.l,C,"[Invalid Chunked Response]"),Sn(this),Pn(this);else if(C.length>0&&!this.W){this.W=!0;var le=this.j;le.g==this&&le.aa&&!le.P&&(le.j.info("Great, no buffering proxy detected. Bytes received: "+C.length),ol(le),le.P=!0,St(11))}}else gi(this.i,this.l,C,null),Ti(this,C);Ne==4&&Sn(this),this.o&&!this.K&&(Ne==4?Hu(this.j,this):(this.o=!1,_i(this)))}else Ji(this.g),E==400&&C.indexOf("Unknown SID")>0?(this.m=3,St(12)):(this.m=0,St(13)),Sn(this),Pn(this)}}}catch{}finally{}};function bd(m){if(!Pu(m))return m.g.la();const E=Jt(m.g);if(E==="")return"";let C="";const w=E.length,B=ei(m.g)==4;if(!m.h.i){if(typeof TextDecoder>"u")return Sn(m),Pn(m),"";m.h.i=new u.TextDecoder}for(let K=0;K<w;K++)m.h.h=!0,C+=m.h.i.decode(E[K],{stream:!(B&&K==w-1)});return E.length=0,m.h.g+=C,m.C=0,m.h.g}function Pu(m){return m.g?m.v=="GET"&&m.M!=2&&m.j.Aa:!1}function Vu(m,E){var C=m.C,w=E.indexOf(`
`,C);return w==-1?Ft:(C=Number(E.substring(C,w)),isNaN(C)?At:(w+=1,w+C>E.length?Ft:(E=E.slice(w,w+C),m.C=w+C,E)))}Xn.prototype.cancel=function(){this.K=!0,Sn(this)};function _i(m){m.T=Date.now()+m.H,Tr(m,m.H)}function Tr(m,E){if(m.D!=null)throw Error("WatchDog timer not null");m.D=mi(p(m.aa,m),E)}function vi(m){m.D&&(u.clearTimeout(m.D),m.D=null)}Xn.prototype.aa=function(){this.D=null;const m=Date.now();m-this.T>=0?(Ns(this.i,this.B),this.M!=2&&(hi(),St(17)),Sn(this),this.m=2,Pn(this)):Tr(this,this.T-m)};function Pn(m){m.j.I==0||m.K||Hu(m.j,m)}function Sn(m){vi(m);var E=m.O;E&&typeof E.dispose=="function"&&E.dispose(),m.O=null,qa(m.V),m.g&&(E=m.g,m.g=null,E.abort(),E.dispose())}function Ti(m,E){try{var C=m.j;if(C.I!=0&&(C.g==m||Si(C.h,m))){if(!m.L&&Si(C.h,m)&&C.I==3){try{var w=C.Ba.g.parse(E)}catch{w=null}if(Array.isArray(w)&&w.length==3){var B=w;if(B[0]==0){e:if(!C.v){if(C.g)if(C.g.F+3e3<m.F)Nr(C),bo(C);else break e;Os(C),St(18)}}else C.xa=B[1],0<C.xa-C.K&&B[2]<37500&&C.F&&C.A==0&&!C.C&&(C.C=mi(p(C.Va,C),6e3));Ei(C.h)<=1&&C.ta&&(C.ta=void 0)}else Ni(C,11)}else if((m.L||C.g==m)&&Nr(C),!D(E))for(B=C.Ba.g.parse(E),E=0;E<B.length;E++){let Ye=B[E];const ft=Ye[0];if(!(ft<=C.K))if(C.K=ft,Ye=Ye[1],C.I==2)if(Ye[0]=="c"){C.M=Ye[1],C.ba=Ye[2];const Ln=Ye[3];Ln!=null&&(C.ka=Ln,C.j.info("VER="+C.ka));const bi=Ye[4];bi!=null&&(C.za=bi,C.j.info("SVER="+C.za));const ti=Ye[5];ti!=null&&typeof ti=="number"&&ti>0&&(w=1.5*ti,C.O=w,C.j.info("backChannelRequestTimeoutMs_="+w)),w=C;const ni=m.g;if(ni){const Fs=ni.g?ni.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Fs){var K=w.h;K.g||Fs.indexOf("spdy")==-1&&Fs.indexOf("quic")==-1&&Fs.indexOf("h2")==-1||(K.j=K.l,K.g=new Set,K.h&&(Ka(K,K.h),K.h=null))}if(w.G){const br=ni.g?ni.g.getResponseHeader("X-HTTP-Session-Id"):null;br&&(w.wa=br,We(w.J,w.G,br))}}C.I=3,C.l&&C.l.ra(),C.aa&&(C.T=Date.now()-m.F,C.j.info("Handshake RTT: "+C.T+"ms")),w=C;var le=m;if(w.na=Ku(w,w.L?w.ba:null,w.W),le.L){Ya(w.h,le);var Ne=le,yt=w.O;yt&&(Ne.H=yt),Ne.D&&(vi(Ne),_i(Ne)),w.g=le}else qu(w);C.i.length>0&&wi(C)}else Ye[0]!="stop"&&Ye[0]!="close"||Ni(C,7);else C.I==3&&(Ye[0]=="stop"||Ye[0]=="close"?Ye[0]=="stop"?Ni(C,7):nl(C):Ye[0]!="noop"&&C.l&&C.l.qa(Ye),C.A=0)}}hi(4)}catch{}}var Ct=class{constructor(m,E){this.g=m,this.map=E}};function za(m){this.l=m||10,u.PerformanceNavigationTiming?(m=u.performance.getEntriesByType("navigation"),m=m.length>0&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ja(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function Ei(m){return m.h?1:m.g?m.g.size:0}function Si(m,E){return m.h?m.h==E:m.g?m.g.has(E):!1}function Ka(m,E){m.g?m.g.add(E):m.h=E}function Ya(m,E){m.h&&m.h==E?m.h=null:m.g&&m.g.has(E)&&m.g.delete(E)}za.prototype.cancel=function(){if(this.i=$a(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function $a(m){if(m.h!=null)return m.i.concat(m.h.G);if(m.g!=null&&m.g.size!==0){let E=m.i;for(const C of m.g.values())E=E.concat(C.G);return E}return R(m.i)}var Uu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Er(m,E){if(m){m=m.split("&");for(let C=0;C<m.length;C++){const w=m[C].indexOf("=");let B,K=null;w>=0?(B=m[C].substring(0,w),K=m[C].substring(w+1)):B=m[C],E(B,K?decodeURIComponent(K.replace(/\+/g," ")):"")}}}function An(m){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let E;m instanceof An?(this.l=m.l,Gt(this,m.j),this.o=m.o,this.g=m.g,So(this,m.u),this.h=m.h,Qa(this,Fu(m.i)),this.m=m.m):m&&(E=String(m).match(Uu))?(this.l=!1,Gt(this,E[1]||"",!0),this.o=Ai(E[2]||""),this.g=Ai(E[3]||"",!0),So(this,E[4]),this.h=Ai(E[5]||"",!0),Qa(this,E[6]||"",!0),this.m=Ai(E[7]||"")):(this.l=!1,this.i=new Co(null,this.l))}An.prototype.toString=function(){const m=[];var E=this.j;E&&m.push(xs(E,Sr,!0),":");var C=this.g;return(C||E=="file")&&(m.push("//"),(E=this.o)&&m.push(xs(E,Sr,!0),"@"),m.push(Hi(C).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),C=this.u,C!=null&&m.push(":",String(C))),(C=this.h)&&(this.g&&C.charAt(0)!="/"&&m.push("/"),m.push(xs(C,C.charAt(0)=="/"?Xa:Lu,!0))),(C=this.i.toString())&&m.push("?",C),(C=this.m)&&m.push("#",xs(C,ku)),m.join("")},An.prototype.resolve=function(m){const E=It(this);let C=!!m.j;C?Gt(E,m.j):C=!!m.o,C?E.o=m.o:C=!!m.g,C?E.g=m.g:C=m.u!=null;var w=m.h;if(C)So(E,m.u);else if(C=!!m.h){if(w.charAt(0)!="/")if(this.g&&!this.h)w="/"+w;else{var B=E.h.lastIndexOf("/");B!=-1&&(w=E.h.slice(0,B+1)+w)}if(B=w,B==".."||B==".")w="";else if(B.indexOf("./")!=-1||B.indexOf("/.")!=-1){w=B.lastIndexOf("/",0)==0,B=B.split("/");const K=[];for(let le=0;le<B.length;){const Ne=B[le++];Ne=="."?w&&le==B.length&&K.push(""):Ne==".."?((K.length>1||K.length==1&&K[0]!="")&&K.pop(),w&&le==B.length&&K.push("")):(K.push(Ne),w=!0)}w=K.join("/")}else w=B}return C?E.h=w:C=m.i.toString()!=="",C?Qa(E,Fu(m.i)):C=!!m.m,C&&(E.m=m.m),E};function It(m){return new An(m)}function Gt(m,E,C){m.j=C?Ai(E,!0):E,m.j&&(m.j=m.j.replace(/:$/,""))}function So(m,E){if(E){if(E=Number(E),isNaN(E)||E<0)throw Error("Bad port number "+E);m.u=E}else m.u=null}function Qa(m,E,C){E instanceof Co?(m.i=E,Cr(m.i,m.l)):(C||(E=xs(E,Ao)),m.i=new Co(E,m.l))}function We(m,E,C){m.i.set(E,C)}function Ds(m){return We(m,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),m}function Ai(m,E){return m?E?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function xs(m,E,C){return typeof m=="string"?(m=encodeURI(m).replace(E,dn),C&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function dn(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var Sr=/[#\/\?@]/g,Lu=/[#\?:]/g,Xa=/[#\?]/g,Ao=/[#\?@]/g,ku=/#/g;function Co(m,E){this.h=this.g=null,this.i=m||null,this.j=!!E}function hn(m){m.g||(m.g=new Map,m.h=0,m.i&&Er(m.i,function(E,C){m.add(decodeURIComponent(E.replace(/\+/g," ")),C)}))}n=Co.prototype,n.add=function(m,E){hn(this),this.i=null,m=Io(this,m);let C=this.g.get(m);return C||this.g.set(m,C=[]),C.push(E),this.h+=1,this};function Ou(m,E){hn(m),E=Io(m,E),m.g.has(E)&&(m.i=null,m.h-=m.g.get(E).length,m.g.delete(E))}function Wa(m,E){return hn(m),E=Io(m,E),m.g.has(E)}n.forEach=function(m,E){hn(this),this.g.forEach(function(C,w){C.forEach(function(B){m.call(E,B,w,this)},this)},this)};function Za(m,E){hn(m);let C=[];if(typeof E=="string")Wa(m,E)&&(C=C.concat(m.g.get(Io(m,E))));else for(m=Array.from(m.g.values()),E=0;E<m.length;E++)C=C.concat(m[E]);return C}n.set=function(m,E){return hn(this),this.i=null,m=Io(this,m),Wa(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[E]),this.h+=1,this},n.get=function(m,E){return m?(m=Za(this,m),m.length>0?String(m[0]):E):E};function Ar(m,E,C){Ou(m,E),C.length>0&&(m.i=null,m.g.set(Io(m,E),R(C)),m.h+=C.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],E=Array.from(this.g.keys());for(let w=0;w<E.length;w++){var C=E[w];const B=Hi(C);C=Za(this,C);for(let K=0;K<C.length;K++){let le=B;C[K]!==""&&(le+="="+Hi(C[K])),m.push(le)}}return this.i=m.join("&")};function Fu(m){const E=new Co;return E.i=m.i,m.g&&(E.g=new Map(m.g),E.h=m.h),E}function Io(m,E){return E=String(E),m.j&&(E=E.toLowerCase()),E}function Cr(m,E){E&&!m.j&&(hn(m),m.i=null,m.g.forEach(function(C,w){const B=w.toLowerCase();w!=B&&(Ou(this,w),Ar(this,B,C))},m)),m.j=E}function Zn(m,E){const C=new Qn;if(u.Image){const w=new Image;w.onload=v(Vn,C,"TestLoadImage: loaded",!0,E,w),w.onerror=v(Vn,C,"TestLoadImage: error",!1,E,w),w.onabort=v(Vn,C,"TestLoadImage: abort",!1,E,w),w.ontimeout=v(Vn,C,"TestLoadImage: timeout",!1,E,w),u.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=m}else E(!1)}function ja(m,E){const C=new Qn,w=new AbortController,B=setTimeout(()=>{w.abort(),Vn(C,"TestPingServer: timeout",!1,E)},1e4);fetch(m,{signal:w.signal}).then(K=>{clearTimeout(B),K.ok?Vn(C,"TestPingServer: ok",!0,E):Vn(C,"TestPingServer: server error",!1,E)}).catch(()=>{clearTimeout(B),Vn(C,"TestPingServer: error",!1,E)})}function Vn(m,E,C,w,B){try{B&&(B.onload=null,B.onerror=null,B.onabort=null,B.ontimeout=null),w(C)}catch{}}function Ro(){this.g=new Ru}function Ci(m){this.i=m.Sb||null,this.h=m.ab||!1}T(Ci,wu),Ci.prototype.g=function(){return new Ps(this.i,this.h)};function Ps(m,E){Et.call(this),this.H=m,this.o=E,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}T(Ps,Et),n=Ps.prototype,n.open=function(m,E){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=m,this.D=E,this.readyState=1,jn(this)},n.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const E={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};m&&(E.body=m),(this.H||u).fetch(new Request(this.D,E)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,wo(this)),this.readyState=0},n.Pa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,jn(this)),this.g&&(this.readyState=3,jn(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ir(this)}else m.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ir(m){m.j.read().then(m.Ma.bind(m)).catch(m.ga.bind(m))}n.Ma=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var E=m.value?m.value:new Uint8Array(0);(E=this.B.decode(E,{stream:!m.done}))&&(this.response=this.responseText+=E)}m.done?wo(this):jn(this),this.readyState==3&&Ir(this)}},n.Oa=function(m){this.g&&(this.response=this.responseText=m,wo(this))},n.Na=function(m){this.g&&(this.response=m,wo(this))},n.ga=function(){this.g&&wo(this)};function wo(m){m.readyState=4,m.l=null,m.j=null,m.B=null,jn(m)}n.setRequestHeader=function(m,E){this.A.append(m,E)},n.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],E=this.h.entries();for(var C=E.next();!C.done;)C=C.value,m.push(C[0]+": "+C[1]),C=E.next();return m.join(`\r
`)};function jn(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(Ps.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function Un(m){let E="";return Pe(m,function(C,w){E+=w,E+=":",E+=C,E+=`\r
`}),E}function Vs(m,E,C){e:{for(w in C){var w=!1;break e}w=!0}w||(C=Un(C),typeof m=="string"?C!=null&&Hi(C):We(m,E,C))}function et(m){Et.call(this),this.headers=new Map,this.L=m||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}T(et,Et);var Ii=/^https?$/i,el=["POST","PUT"];n=et.prototype,n.Fa=function(m){this.H=m},n.ea=function(m,E,C,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);E=E?E.toUpperCase():"GET",this.D=m,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ha.g(),this.g.onreadystatechange=S(p(this.Ca,this));try{this.B=!0,this.g.open(E,String(m),!0),this.B=!1}catch(K){Us(this,K);return}if(m=C||"",C=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var B in w)C.set(B,w[B]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const K of w.keys())C.set(K,w.get(K));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(C.keys()).find(K=>K.toLowerCase()=="content-type"),B=u.FormData&&m instanceof u.FormData,!(Array.prototype.indexOf.call(el,E,void 0)>=0)||w||B||C.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[K,le]of C)this.g.setRequestHeader(K,le);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(m),this.v=!1}catch(K){Us(this,K)}};function Us(m,E){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=E,m.o=5,tl(m),zi(m)}function tl(m){m.A||(m.A=!0,Vt(m,"complete"),Vt(m,"error"))}n.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=m||7,Vt(this,"complete"),Vt(this,"abort"),zi(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),zi(this,!0)),et.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Ls(this):this.Xa())},n.Xa=function(){Ls(this)};function Ls(m){if(m.h&&typeof a<"u"){if(m.v&&ei(m)==4)setTimeout(m.Ca.bind(m),0);else if(Vt(m,"readystatechange"),ei(m)==4){m.h=!1;try{const K=m.ca();e:switch(K){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var E=!0;break e;default:E=!1}var C;if(!(C=E)){var w;if(w=K===0){let le=String(m.D).match(Uu)[1]||null;!le&&u.self&&u.self.location&&(le=u.self.location.protocol.slice(0,-1)),w=!Ii.test(le?le.toLowerCase():"")}C=w}if(C)Vt(m,"complete"),Vt(m,"success");else{m.o=6;try{var B=ei(m)>2?m.g.statusText:""}catch{B=""}m.l=B+" ["+m.ca()+"]",tl(m)}}finally{zi(m)}}}}function zi(m,E){if(m.g){m.m&&(clearTimeout(m.m),m.m=null);const C=m.g;m.g=null,E||Vt(m,"ready");try{C.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function ei(m){return m.g?m.g.readyState:0}n.ca=function(){try{return ei(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(m){if(this.g){var E=this.g.responseText;return m&&E.indexOf(m)==0&&(E=E.substring(m.length)),Rd(E)}};function Jt(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.F){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function Ji(m){const E={};m=(m.g&&ei(m)>=2&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<m.length;w++){if(D(m[w]))continue;var C=xu(m[w]);const B=C[0];if(C=C[1],typeof C!="string")continue;C=C.trim();const K=E[B]||[];E[B]=K,K.push(C)}Xe(E,function(w){return w.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ri(m,E,C){return C&&C.internalChannelParams&&C.internalChannelParams[m]||E}function No(m){this.za=0,this.i=[],this.j=new Qn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ri("failFast",!1,m),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ri("baseRetryDelayMs",5e3,m),this.Za=Ri("retryDelaySeedMs",1e4,m),this.Ta=Ri("forwardChannelMaxRetries",2,m),this.va=Ri("forwardChannelRequestTimeoutMs",2e4,m),this.ma=m&&m.xmlHttpFactory||void 0,this.Ua=m&&m.Rb||void 0,this.Aa=m&&m.useFetchStreams||!1,this.O=void 0,this.L=m&&m.supportsCrossDomainXhr||!1,this.M="",this.h=new za(m&&m.concurrentRequestLimit),this.Ba=new Ro,this.S=m&&m.fastHandshake||!1,this.R=m&&m.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=m&&m.Pb||!1,m&&m.ua&&this.j.ua(),m&&m.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&m&&m.detectBufferingProxy||!1,this.ia=void 0,m&&m.longPollingTimeout&&m.longPollingTimeout>0&&(this.ia=m.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=No.prototype,n.ka=8,n.I=1,n.connect=function(m,E,C,w){St(0),this.W=m,this.H=E||{},C&&w!==void 0&&(this.H.OSID=C,this.H.OAID=w),this.F=this.X,this.J=Ku(this,null,this.W),wi(this)};function nl(m){if(Rr(m),m.I==3){var E=m.V++,C=It(m.J);if(We(C,"SID",m.M),We(C,"RID",E),We(C,"TYPE","terminate"),ks(m,C),E=new Xn(m,m.j,E),E.M=2,E.A=Ds(It(C)),C=!1,u.navigator&&u.navigator.sendBeacon)try{C=u.navigator.sendBeacon(E.A.toString(),"")}catch{}!C&&u.Image&&(new Image().src=E.A,C=!0),C||(E.g=Yu(E.j,null),E.g.ea(E.A)),E.F=Date.now(),_i(E)}Ju(m)}function bo(m){m.g&&(ol(m),m.g.cancel(),m.g=null)}function Rr(m){bo(m),m.v&&(u.clearTimeout(m.v),m.v=null),Nr(m),m.h.cancel(),m.m&&(typeof m.m=="number"&&u.clearTimeout(m.m),m.m=null)}function wi(m){if(!Ja(m.h)&&!m.m){m.m=!0;var E=m.Ea;Q||N(),ee||(Q(),ee=!0),M.add(E,m),m.D=0}}function wr(m,E){return Ei(m.h)>=m.h.j-(m.m?1:0)?!1:m.m?(m.i=E.G.concat(m.i),!0):m.I==1||m.I==2||m.D>=(m.Sa?0:m.Ta)?!1:(m.m=mi(p(m.Ea,m,E),zu(m,m.D)),m.D++,!0)}n.Ea=function(m){if(this.m)if(this.m=null,this.I==1){if(!m){this.V=Math.floor(Math.random()*1e5),m=this.V++;const B=new Xn(this,this.j,m);let K=this.o;if(this.U&&(K?(K=F(K),ce(K,this.U)):K=this.U),this.u!==null||this.R||(B.J=K,K=null),this.S)e:{for(var E=0,C=0;C<this.i.length;C++){t:{var w=this.i[C];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(E+=w,E>4096){E=C;break e}if(E===4096||C===this.i.length-1){E=C+1;break e}}E=1e3}else E=1e3;E=Gu(this,B,E),C=It(this.J),We(C,"RID",m),We(C,"CVER",22),this.G&&We(C,"X-HTTP-Session-Id",this.G),ks(this,C),K&&(this.R?E="headers="+Hi(Un(K))+"&"+E:this.u&&Vs(C,this.u,K)),Ka(this.h,B),this.Ra&&We(C,"TYPE","init"),this.S?(We(C,"$req",E),We(C,"SID","null"),B.U=!0,yi(B,C,null)):yi(B,C,E),this.I=2}}else this.I==3&&(m?il(this,m):this.i.length==0||Ja(this.h)||il(this))};function il(m,E){var C;E?C=E.l:C=m.V++;const w=It(m.J);We(w,"SID",m.M),We(w,"RID",C),We(w,"AID",m.K),ks(m,w),m.u&&m.o&&Vs(w,m.u,m.o),C=new Xn(m,m.j,C,m.D+1),m.u===null&&(C.J=m.o),E&&(m.i=E.G.concat(m.i)),E=Gu(m,C,1e3),C.H=Math.round(m.va*.5)+Math.round(m.va*.5*Math.random()),Ka(m.h,C),yi(C,w,E)}function ks(m,E){m.H&&Pe(m.H,function(C,w){We(E,w,C)}),m.l&&Pe({},function(C,w){We(E,w,C)})}function Gu(m,E,C){C=Math.min(m.i.length,C);const w=m.l?p(m.l.Ka,m.l,m):null;e:{var B=m.i;let Ne=-1;for(;;){const yt=["count="+C];Ne==-1?C>0?(Ne=B[0].g,yt.push("ofs="+Ne)):Ne=0:yt.push("ofs="+Ne);let Ye=!0;for(let ft=0;ft<C;ft++){var K=B[ft].g;const Ln=B[ft].map;if(K-=Ne,K<0)Ne=Math.max(0,B[ft].g-100),Ye=!1;else try{K="req"+K+"_"||"";try{var le=Ln instanceof Map?Ln:Object.entries(Ln);for(const[bi,ti]of le){let ni=ti;d(ti)&&(ni=Eo(ti)),yt.push(K+bi+"="+encodeURIComponent(ni))}}catch(bi){throw yt.push(K+"type="+encodeURIComponent("_badmap")),bi}}catch{w&&w(Ln)}}if(Ye){le=yt.join("&");break e}}le=void 0}return m=m.i.splice(0,C),E.G=m,le}function qu(m){if(!m.g&&!m.v){m.Y=1;var E=m.Da;Q||N(),ee||(Q(),ee=!0),M.add(E,m),m.A=0}}function Os(m){return m.g||m.v||m.A>=3?!1:(m.Y++,m.v=mi(p(m.Da,m),zu(m,m.A)),m.A++,!0)}n.Da=function(){if(this.v=null,Bu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var m=4*this.T;this.j.info("BP detection timer enabled: "+m),this.B=mi(p(this.Wa,this),m)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,St(10),bo(this),Bu(this))};function ol(m){m.B!=null&&(u.clearTimeout(m.B),m.B=null)}function Bu(m){m.g=new Xn(m,m.j,"rpc",m.Y),m.u===null&&(m.g.J=m.o),m.g.P=0;var E=It(m.na);We(E,"RID","rpc"),We(E,"SID",m.M),We(E,"AID",m.K),We(E,"CI",m.F?"0":"1"),!m.F&&m.ia&&We(E,"TO",m.ia),We(E,"TYPE","xmlhttp"),ks(m,E),m.u&&m.o&&Vs(E,m.u,m.o),m.O&&(m.g.H=m.O);var C=m.g;m=m.ba,C.M=1,C.A=Ds(It(E)),C.u=null,C.R=!0,vr(C,m)}n.Va=function(){this.C!=null&&(this.C=null,bo(this),Os(this),St(19))};function Nr(m){m.C!=null&&(u.clearTimeout(m.C),m.C=null)}function Hu(m,E){var C=null;if(m.g==E){Nr(m),ol(m),m.g=null;var w=2}else if(Si(m.h,E))C=E.G,Ya(m.h,E),w=1;else return;if(m.I!=0){if(E.o)if(w==1){C=E.u?E.u.length:0,E=Date.now()-E.F;var B=m.D;w=_r(),Vt(w,new pi(w,C)),wi(m)}else qu(m);else if(B=E.m,B==3||B==0&&E.X>0||!(w==1&&wr(m,E)||w==2&&Os(m)))switch(C&&C.length>0&&(E=m.h,E.i=E.i.concat(C)),B){case 1:Ni(m,5);break;case 4:Ni(m,10);break;case 3:Ni(m,6);break;default:Ni(m,2)}}}function zu(m,E){let C=m.Qa+Math.floor(Math.random()*m.Za);return m.isActive()||(C*=2),C*E}function Ni(m,E){if(m.j.info("Error code "+E),E==2){var C=p(m.bb,m),w=m.Ua;const B=!w;w=new An(w||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||Gt(w,"https"),Ds(w),B?Zn(w.toString(),C):ja(w.toString(),C)}else St(2);m.I=0,m.l&&m.l.pa(E),Ju(m),Rr(m)}n.bb=function(m){m?(this.j.info("Successfully pinged google.com"),St(2)):(this.j.info("Failed to ping google.com"),St(1))};function Ju(m){if(m.I=0,m.ja=[],m.l){const E=$a(m.h);(E.length!=0||m.i.length!=0)&&(V(m.ja,E),V(m.ja,m.i),m.h.i.length=0,R(m.i),m.i.length=0),m.l.oa()}}function Ku(m,E,C){var w=C instanceof An?It(C):new An(C);if(w.g!="")E&&(w.g=E+"."+w.g),So(w,w.u);else{var B=u.location;w=B.protocol,E=E?E+"."+B.hostname:B.hostname,B=+B.port;const K=new An(null);w&&Gt(K,w),E&&(K.g=E),B&&So(K,B),C&&(K.h=C),w=K}return C=m.G,E=m.wa,C&&E&&We(w,C,E),We(w,"VER",m.ka),ks(m,w),w}function Yu(m,E,C){if(E&&!m.L)throw Error("Can't create secondary domain capable XhrIo object.");return E=m.Aa&&!m.ma?new et(new Ci({ab:C})):new et(m.ma),E.Fa(m.L),E}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function $u(){}n=$u.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Mo(){}Mo.prototype.g=function(m,E){return new ln(m,E)};function ln(m,E){Et.call(this),this.g=new No(E),this.l=m,this.h=E&&E.messageUrlParams||null,m=E&&E.messageHeaders||null,E&&E.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=E&&E.initMessageHeaders||null,E&&E.messageContentType&&(m?m["X-WebChannel-Content-Type"]=E.messageContentType:m={"X-WebChannel-Content-Type":E.messageContentType}),E&&E.sa&&(m?m["X-WebChannel-Client-Profile"]=E.sa:m={"X-WebChannel-Client-Profile":E.sa}),this.g.U=m,(m=E&&E.Qb)&&!D(m)&&(this.g.u=m),this.A=E&&E.supportsCrossDomainXhr||!1,this.v=E&&E.sendRawJson||!1,(E=E&&E.httpSessionIdParam)&&!D(E)&&(this.g.G=E,m=this.h,m!==null&&E in m&&(m=this.h,E in m&&delete m[E])),this.j=new Ki(this)}T(ln,Et),ln.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},ln.prototype.close=function(){nl(this.g)},ln.prototype.o=function(m){var E=this.g;if(typeof m=="string"){var C={};C.__data__=m,m=C}else this.v&&(C={},C.__data__=Eo(m),m=C);E.i.push(new Ct(E.Ya++,m)),E.I==3&&wi(E)},ln.prototype.N=function(){this.g.l=null,delete this.j,nl(this.g),delete this.g,ln.Z.N.call(this)};function Qu(m){zt.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var E=m.__sm__;if(E){e:{for(const C in E){m=C;break e}m=void 0}(this.i=m)&&(m=this.i,E=E!==null&&m in E?E[m]:void 0),this.data=E}else this.data=m}T(Qu,zt);function Xu(){xn.call(this),this.status=1}T(Xu,xn);function Ki(m){this.g=m}T(Ki,$u),Ki.prototype.ra=function(){Vt(this.g,"a")},Ki.prototype.qa=function(m){Vt(this.g,new Qu(m))},Ki.prototype.pa=function(m){Vt(this.g,new Xu)},Ki.prototype.oa=function(){Vt(this.g,"b")},Mo.prototype.createWebChannel=Mo.prototype.g,ln.prototype.send=ln.prototype.o,ln.prototype.open=ln.prototype.m,ln.prototype.close=ln.prototype.close,xS=function(){return new Mo},DS=function(){return _r()},MS=gt,Wp={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},bs.NO_ERROR=0,bs.TIMEOUT=8,bs.HTTP_ERROR=6,hf=bs,Ba.COMPLETE="complete",bS=Ba,Nu.EventType=$n,$n.OPEN="a",$n.CLOSE="b",$n.ERROR="c",$n.MESSAGE="d",Et.prototype.listen=Et.prototype.J,Kl=Nu,et.prototype.listenOnce=et.prototype.K,et.prototype.getLastError=et.prototype.Ha,et.prototype.getLastErrorCode=et.prototype.ya,et.prototype.getStatus=et.prototype.ca,et.prototype.getResponseJson=et.prototype.La,et.prototype.getResponseText=et.prototype.la,et.prototype.send=et.prototype.ea,et.prototype.setWithCredentials=et.prototype.Fa,NS=et}).apply(typeof ef<"u"?ef:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}tn.UNAUTHENTICATED=new tn(null),tn.GOOGLE_CREDENTIALS=new tn("google-credentials-uid"),tn.FIRST_PARTY=new tn("first-party-uid"),tn.MOCK_USER=new tn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ba="12.9.0";function ib(n){ba=n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lr=new xm("@firebase/firestore");function sa(){return lr.logLevel}function de(n,...e){if(lr.logLevel<=Oe.DEBUG){const t=e.map(Lm);lr.debug(`Firestore (${ba}): ${n}`,...t)}}function fo(n,...e){if(lr.logLevel<=Oe.ERROR){const t=e.map(Lm);lr.error(`Firestore (${ba}): ${n}`,...t)}}function ur(n,...e){if(lr.logLevel<=Oe.WARN){const t=e.map(Lm);lr.warn(`Firestore (${ba}): ${n}`,...t)}}function Lm(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ee(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,PS(n,i,t)}function PS(n,e,t){let i=`FIRESTORE (${ba}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw fo(i),new Error(i)}function Qe(n,e,t,i){let r="Unexpected state";typeof t=="string"?r=t:i=t,n||PS(e,r,i)}function we(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const re={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ye extends yo{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VS{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class ob{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(tn.UNAUTHENTICATED)))}shutdown(){}}class sb{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class rb{constructor(e){this.t=e,this.currentUser=tn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Qe(this.o===void 0,42304);let i=this.i;const r=g=>this.i!==i?(i=this.i,t(g)):Promise.resolve();let a=new or;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new or,e.enqueueRetryable((()=>r(this.currentUser)))};const u=()=>{const g=a;e.enqueueRetryable((async()=>{await g.promise,await r(this.currentUser)}))},d=g=>{de("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((g=>d(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?d(g):(de("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new or)}}),0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(de("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Qe(typeof i.accessToken=="string",31837,{l:i}),new VS(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Qe(e===null||typeof e=="string",2055,{h:e}),new tn(e)}}class ab{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=tn.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class lb{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new ab(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(tn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class yT{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ub{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ri(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Qe(this.o===void 0,3512);const i=a=>{a.error!=null&&de("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const u=a.token!==this.m;return this.m=a.token,de("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>i(a)))};const r=a=>{de("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>r(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?r(a):de("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new yT(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Qe(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new yT(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cb(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class km{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const r=cb(40);for(let a=0;a<r.length;++a)i.length<20&&r[a]<t&&(i+=e.charAt(r[a]%62))}return i}}function Fe(n,e){return n<e?-1:n>e?1:0}function Zp(n,e){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++){const r=n.charAt(i),a=e.charAt(i);if(r!==a)return Vp(r)===Vp(a)?Fe(r,a):Vp(r)?1:-1}return Fe(n.length,e.length)}const fb=55296,db=57343;function Vp(n){const e=n.charCodeAt(0);return e>=fb&&e<=db}function Sa(n,e,t){return n.length===e.length&&n.every(((i,r)=>t(i,e[r])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _T="__name__";class Vi{constructor(e,t,i){t===void 0?t=0:t>e.length&&Ee(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&Ee(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return Vi.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Vi?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let r=0;r<i;r++){const a=Vi.compareSegments(e.get(r),t.get(r));if(a!==0)return a}return Fe(e.length,t.length)}static compareSegments(e,t){const i=Vi.isNumericId(e),r=Vi.isNumericId(t);return i&&!r?-1:!i&&r?1:i&&r?Vi.extractNumericId(e).compare(Vi.extractNumericId(t)):Zp(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return cs.fromString(e.substring(4,e.length-2))}}class lt extends Vi{construct(e,t,i){return new lt(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new ye(re.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((r=>r.length>0)))}return new lt(t)}static emptyPath(){return new lt([])}}const hb=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Wt extends Vi{construct(e,t,i){return new Wt(e,t,i)}static isValidIdentifier(e){return hb.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Wt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===_T}static keyField(){return new Wt([_T])}static fromServerFormat(e){const t=[];let i="",r=0;const a=()=>{if(i.length===0)throw new ye(re.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let u=!1;for(;r<e.length;){const d=e[r];if(d==="\\"){if(r+1===e.length)throw new ye(re.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[r+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new ye(re.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=g,r+=2}else d==="`"?(u=!u,r++):d!=="."||u?(i+=d,r++):(a(),r++)}if(a(),u)throw new ye(re.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Wt(t)}static emptyPath(){return new Wt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{constructor(e){this.path=e}static fromPath(e){return new ve(lt.fromString(e))}static fromName(e){return new ve(lt.fromString(e).popFirst(5))}static empty(){return new ve(lt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&lt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return lt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ve(new lt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function US(n,e,t){if(!t)throw new ye(re.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function pb(n,e,t,i){if(e===!0&&i===!0)throw new ye(re.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function vT(n){if(!ve.isDocumentKey(n))throw new ye(re.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function TT(n){if(ve.isDocumentKey(n))throw new ye(re.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function LS(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Om(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ee(12329,{type:typeof n})}function fs(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ye(re.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Om(n);throw new ye(re.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dt(n,e){const t={typeString:n};return e&&(t.value=e),t}function yu(n,e){if(!LS(n))throw new ye(re.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const r=e[i].typeString,a="value"in e[i]?{value:e[i].value}:void 0;if(!(i in n)){t=`JSON missing required field: '${i}'`;break}const u=n[i];if(r&&typeof u!==r){t=`JSON field '${i}' must be a ${r}.`;break}if(a!==void 0&&u!==a.value){t=`Expected '${i}' field to equal '${a.value}'`;break}}if(t)throw new ye(re.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ET=-62135596800,ST=1e6;class ut{static now(){return ut.fromMillis(Date.now())}static fromDate(e){return ut.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*ST);return new ut(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ye(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ye(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<ET)throw new ye(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ye(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/ST}_compareTo(e){return this.seconds===e.seconds?Fe(this.nanoseconds,e.nanoseconds):Fe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ut._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(yu(e,ut._jsonSchema))return new ut(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-ET;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ut._jsonSchemaVersion="firestore/timestamp/1.0",ut._jsonSchema={type:Dt("string",ut._jsonSchemaVersion),seconds:Dt("number"),nanoseconds:Dt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{static fromTimestamp(e){return new Ie(e)}static min(){return new Ie(new ut(0,0))}static max(){return new Ie(new ut(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const su=-1;function mb(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=Ie.fromTimestamp(i===1e9?new ut(t+1,0):new ut(t,i));return new ps(r,ve.empty(),e)}function gb(n){return new ps(n.readTime,n.key,su)}class ps{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new ps(Ie.min(),ve.empty(),su)}static max(){return new ps(Ie.max(),ve.empty(),su)}}function yb(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ve.comparator(n.documentKey,e.documentKey),t!==0?t:Fe(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _b="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class vb{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ma(n){if(n.code!==re.FAILED_PRECONDITION||n.message!==_b)throw n;de("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ee(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new oe(((i,r)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(i,r)},this.catchCallback=a=>{this.wrapFailure(t,a).next(i,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof oe?t:oe.resolve(t)}catch(t){return oe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):oe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):oe.reject(t)}static resolve(e){return new oe(((t,i)=>{t(e)}))}static reject(e){return new oe(((t,i)=>{i(e)}))}static waitFor(e){return new oe(((t,i)=>{let r=0,a=0,u=!1;e.forEach((d=>{++r,d.next((()=>{++a,u&&a===r&&t()}),(g=>i(g)))})),u=!0,a===r&&t()}))}static or(e){let t=oe.resolve(!1);for(const i of e)t=t.next((r=>r?oe.resolve(r):i()));return t}static forEach(e,t){const i=[];return e.forEach(((r,a)=>{i.push(t.call(this,r,a))})),this.waitFor(i)}static mapArray(e,t){return new oe(((i,r)=>{const a=e.length,u=new Array(a);let d=0;for(let g=0;g<a;g++){const p=g;t(e[p]).next((v=>{u[p]=v,++d,d===a&&i(u)}),(v=>r(v)))}}))}static doWhile(e,t){return new oe(((i,r)=>{const a=()=>{e()===!0?t().next((()=>{a()}),r):i()};a()}))}}function Tb(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Da(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jf{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}jf.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fm=-1;function ed(n){return n==null}function Nf(n){return n===0&&1/n==-1/0}function Eb(n){return typeof n=="number"&&Number.isInteger(n)&&!Nf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kS="";function Sb(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=AT(e)),e=Ab(n.get(t),e);return AT(e)}function Ab(n,e){let t=e;const i=n.length;for(let r=0;r<i;r++){const a=n.charAt(r);switch(a){case"\0":t+="";break;case kS:t+="";break;default:t+=a}}return t}function AT(n){return n+kS+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CT(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Es(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function OS(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(e,t){this.comparator=e,this.root=t||Xt.EMPTY}insert(e,t){return new ht(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Xt.BLACK,null,null))}remove(e){return new ht(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Xt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return t+i.left.size;r<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new tf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new tf(this.root,e,this.comparator,!1)}getReverseIterator(){return new tf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new tf(this.root,e,this.comparator,!0)}}class tf{constructor(e,t,i,r){this.isReverse=r,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?i(e.key,t):1,t&&r&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Xt{constructor(e,t,i,r,a){this.key=e,this.value=t,this.color=i??Xt.RED,this.left=r??Xt.EMPTY,this.right=a??Xt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,r,a){return new Xt(e??this.key,t??this.value,i??this.color,r??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let r=this;const a=i(e,r.key);return r=a<0?r.copy(null,null,null,r.left.insert(e,t,i),null):a===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Xt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),t(e,r.key)===0){if(r.right.isEmpty())return Xt.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Xt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Xt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ee(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ee(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ee(27949);return e+(this.isRed()?0:1)}}Xt.EMPTY=null,Xt.RED=!0,Xt.BLACK=!1;Xt.EMPTY=new class{constructor(){this.size=0}get key(){throw Ee(57766)}get value(){throw Ee(16141)}get color(){throw Ee(16727)}get left(){throw Ee(29726)}get right(){throw Ee(36894)}copy(e,t,i,r,a){return this}insert(e,t,i){return new Xt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e){this.comparator=e,this.data=new ht(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new IT(this.data.getIterator())}getIteratorFrom(e){return new IT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof Ot)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const r=t.getNext().key,a=i.getNext().key;if(this.comparator(r,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Ot(this.comparator);return t.data=e,t}}class IT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(e){this.fields=e,e.sort(Wt.comparator)}static empty(){return new Dn([])}unionWith(e){let t=new Ot(Wt.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new Dn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Sa(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(r){try{return atob(r)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new FS("Invalid base64 string: "+a):a}})(e);return new Zt(t)}static fromUint8Array(e){const t=(function(r){let a="";for(let u=0;u<r.length;++u)a+=String.fromCharCode(r[u]);return a})(e);return new Zt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Fe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Zt.EMPTY_BYTE_STRING=new Zt("");const Cb=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ms(n){if(Qe(!!n,39018),typeof n=="string"){let e=0;const t=Cb.exec(n);if(Qe(!!t,46558,{timestamp:n}),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Tt(n.seconds),nanos:Tt(n.nanos)}}function Tt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function gs(n){return typeof n=="string"?Zt.fromBase64String(n):Zt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GS="server_timestamp",qS="__type__",BS="__previous_value__",HS="__local_write_time__";function Gm(n){var t,i;return((i=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[qS])==null?void 0:i.stringValue)===GS}function td(n){const e=n.mapValue.fields[BS];return Gm(e)?td(e):e}function ru(n){const e=ms(n.mapValue.fields[HS].timestampValue);return new ut(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ib{constructor(e,t,i,r,a,u,d,g,p,v,T){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=r,this.ssl=a,this.forceLongPolling=u,this.autoDetectLongPolling=d,this.longPollingOptions=g,this.useFetchStreams=p,this.isUsingEmulator=v,this.apiKey=T}}const bf="(default)";class au{constructor(e,t){this.projectId=e,this.database=t||bf}static empty(){return new au("","")}get isDefaultDatabase(){return this.database===bf}isEqual(e){return e instanceof au&&e.projectId===this.projectId&&e.database===this.database}}function Rb(n,e){if(!Object.prototype.hasOwnProperty.apply(n.options,["projectId"]))throw new ye(re.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new au(n.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zS="__type__",wb="__max__",nf={mapValue:{}},JS="__vector__",Mf="value";function ys(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Gm(n)?4:bb(n)?9007199254740991:Nb(n)?10:11:Ee(28295,{value:n})}function qi(n,e){if(n===e)return!0;const t=ys(n);if(t!==ys(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return ru(n).isEqual(ru(e));case 3:return(function(r,a){if(typeof r.timestampValue=="string"&&typeof a.timestampValue=="string"&&r.timestampValue.length===a.timestampValue.length)return r.timestampValue===a.timestampValue;const u=ms(r.timestampValue),d=ms(a.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(r,a){return gs(r.bytesValue).isEqual(gs(a.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(r,a){return Tt(r.geoPointValue.latitude)===Tt(a.geoPointValue.latitude)&&Tt(r.geoPointValue.longitude)===Tt(a.geoPointValue.longitude)})(n,e);case 2:return(function(r,a){if("integerValue"in r&&"integerValue"in a)return Tt(r.integerValue)===Tt(a.integerValue);if("doubleValue"in r&&"doubleValue"in a){const u=Tt(r.doubleValue),d=Tt(a.doubleValue);return u===d?Nf(u)===Nf(d):isNaN(u)&&isNaN(d)}return!1})(n,e);case 9:return Sa(n.arrayValue.values||[],e.arrayValue.values||[],qi);case 10:case 11:return(function(r,a){const u=r.mapValue.fields||{},d=a.mapValue.fields||{};if(CT(u)!==CT(d))return!1;for(const g in u)if(u.hasOwnProperty(g)&&(d[g]===void 0||!qi(u[g],d[g])))return!1;return!0})(n,e);default:return Ee(52216,{left:n})}}function lu(n,e){return(n.values||[]).find((t=>qi(t,e)))!==void 0}function Aa(n,e){if(n===e)return 0;const t=ys(n),i=ys(e);if(t!==i)return Fe(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Fe(n.booleanValue,e.booleanValue);case 2:return(function(a,u){const d=Tt(a.integerValue||a.doubleValue),g=Tt(u.integerValue||u.doubleValue);return d<g?-1:d>g?1:d===g?0:isNaN(d)?isNaN(g)?0:-1:1})(n,e);case 3:return RT(n.timestampValue,e.timestampValue);case 4:return RT(ru(n),ru(e));case 5:return Zp(n.stringValue,e.stringValue);case 6:return(function(a,u){const d=gs(a),g=gs(u);return d.compareTo(g)})(n.bytesValue,e.bytesValue);case 7:return(function(a,u){const d=a.split("/"),g=u.split("/");for(let p=0;p<d.length&&p<g.length;p++){const v=Fe(d[p],g[p]);if(v!==0)return v}return Fe(d.length,g.length)})(n.referenceValue,e.referenceValue);case 8:return(function(a,u){const d=Fe(Tt(a.latitude),Tt(u.latitude));return d!==0?d:Fe(Tt(a.longitude),Tt(u.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return wT(n.arrayValue,e.arrayValue);case 10:return(function(a,u){var S,R,V,G;const d=a.fields||{},g=u.fields||{},p=(S=d[Mf])==null?void 0:S.arrayValue,v=(R=g[Mf])==null?void 0:R.arrayValue,T=Fe(((V=p==null?void 0:p.values)==null?void 0:V.length)||0,((G=v==null?void 0:v.values)==null?void 0:G.length)||0);return T!==0?T:wT(p,v)})(n.mapValue,e.mapValue);case 11:return(function(a,u){if(a===nf.mapValue&&u===nf.mapValue)return 0;if(a===nf.mapValue)return 1;if(u===nf.mapValue)return-1;const d=a.fields||{},g=Object.keys(d),p=u.fields||{},v=Object.keys(p);g.sort(),v.sort();for(let T=0;T<g.length&&T<v.length;++T){const S=Zp(g[T],v[T]);if(S!==0)return S;const R=Aa(d[g[T]],p[v[T]]);if(R!==0)return R}return Fe(g.length,v.length)})(n.mapValue,e.mapValue);default:throw Ee(23264,{he:t})}}function RT(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Fe(n,e);const t=ms(n),i=ms(e),r=Fe(t.seconds,i.seconds);return r!==0?r:Fe(t.nanos,i.nanos)}function wT(n,e){const t=n.values||[],i=e.values||[];for(let r=0;r<t.length&&r<i.length;++r){const a=Aa(t[r],i[r]);if(a)return a}return Fe(t.length,i.length)}function Ca(n){return jp(n)}function jp(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const i=ms(t);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return gs(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return ve.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let i="[",r=!0;for(const a of t.values||[])r?r=!1:i+=",",i+=jp(a);return i+"]"})(n.arrayValue):"mapValue"in n?(function(t){const i=Object.keys(t.fields||{}).sort();let r="{",a=!0;for(const u of i)a?a=!1:r+=",",r+=`${u}:${jp(t.fields[u])}`;return r+"}"})(n.mapValue):Ee(61005,{value:n})}function pf(n){switch(ys(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=td(n);return e?16+pf(e):16;case 5:return 2*n.stringValue.length;case 6:return gs(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((r,a)=>r+pf(a)),0)})(n.arrayValue);case 10:case 11:return(function(i){let r=0;return Es(i.fields,((a,u)=>{r+=a.length+pf(u)})),r})(n.mapValue);default:throw Ee(13486,{value:n})}}function em(n){return!!n&&"integerValue"in n}function qm(n){return!!n&&"arrayValue"in n}function NT(n){return!!n&&"nullValue"in n}function bT(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function mf(n){return!!n&&"mapValue"in n}function Nb(n){var t,i;return((i=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[zS])==null?void 0:i.stringValue)===JS}function Zl(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Es(n.mapValue.fields,((t,i)=>e.mapValue.fields[t]=Zl(i))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Zl(n.arrayValue.values[t]);return e}return{...n}}function bb(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===wb}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e){this.value=e}static empty(){return new Tn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!mf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Zl(t)}setAll(e){let t=Wt.emptyPath(),i={},r=[];e.forEach(((u,d)=>{if(!t.isImmediateParentOf(d)){const g=this.getFieldsMap(t);this.applyChanges(g,i,r),i={},r=[],t=d.popLast()}u?i[d.lastSegment()]=Zl(u):r.push(d.lastSegment())}));const a=this.getFieldsMap(t);this.applyChanges(a,i,r)}delete(e){const t=this.field(e.popLast());mf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return qi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=t.mapValue.fields[e.get(i)];mf(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,i){Es(t,((r,a)=>e[r]=a));for(const r of i)delete e[r]}clone(){return new Tn(Zl(this.value))}}function KS(n){const e=[];return Es(n.fields,((t,i)=>{const r=new Wt([t]);if(mf(i)){const a=KS(i.mapValue).fields;if(a.length===0)e.push(r);else for(const u of a)e.push(r.child(u))}else e.push(r)})),new Dn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e,t,i,r,a,u,d){this.key=e,this.documentType=t,this.version=i,this.readTime=r,this.createTime=a,this.data=u,this.documentState=d}static newInvalidDocument(e){return new nn(e,0,Ie.min(),Ie.min(),Ie.min(),Tn.empty(),0)}static newFoundDocument(e,t,i,r){return new nn(e,1,t,Ie.min(),i,r,0)}static newNoDocument(e,t){return new nn(e,2,t,Ie.min(),Ie.min(),Tn.empty(),0)}static newUnknownDocument(e,t){return new nn(e,3,t,Ie.min(),Ie.min(),Tn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ie.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Tn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Tn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ie.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof nn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new nn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Df{constructor(e,t){this.position=e,this.inclusive=t}}function MT(n,e,t){let i=0;for(let r=0;r<n.position.length;r++){const a=e[r],u=n.position[r];if(a.field.isKeyField()?i=ve.comparator(ve.fromName(u.referenceValue),t.key):i=Aa(u,t.data.field(a.field)),a.dir==="desc"&&(i*=-1),i!==0)break}return i}function DT(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!qi(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xf{constructor(e,t="asc"){this.field=e,this.dir=t}}function Mb(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YS{}class kt extends YS{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new xb(e,t,i):t==="array-contains"?new Ub(e,i):t==="in"?new Lb(e,i):t==="not-in"?new kb(e,i):t==="array-contains-any"?new Ob(e,i):new kt(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new Pb(e,i):new Vb(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Aa(t,this.value)):t!==null&&ys(this.value)===ys(t)&&this.matchesComparison(Aa(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ee(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Bi extends YS{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Bi(e,t)}matches(e){return $S(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function $S(n){return n.op==="and"}function QS(n){return Db(n)&&$S(n)}function Db(n){for(const e of n.filters)if(e instanceof Bi)return!1;return!0}function tm(n){if(n instanceof kt)return n.field.canonicalString()+n.op.toString()+Ca(n.value);if(QS(n))return n.filters.map((e=>tm(e))).join(",");{const e=n.filters.map((t=>tm(t))).join(",");return`${n.op}(${e})`}}function XS(n,e){return n instanceof kt?(function(i,r){return r instanceof kt&&i.op===r.op&&i.field.isEqual(r.field)&&qi(i.value,r.value)})(n,e):n instanceof Bi?(function(i,r){return r instanceof Bi&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce(((a,u,d)=>a&&XS(u,r.filters[d])),!0):!1})(n,e):void Ee(19439)}function WS(n){return n instanceof kt?(function(t){return`${t.field.canonicalString()} ${t.op} ${Ca(t.value)}`})(n):n instanceof Bi?(function(t){return t.op.toString()+" {"+t.getFilters().map(WS).join(" ,")+"}"})(n):"Filter"}class xb extends kt{constructor(e,t,i){super(e,t,i),this.key=ve.fromName(i.referenceValue)}matches(e){const t=ve.comparator(e.key,this.key);return this.matchesComparison(t)}}class Pb extends kt{constructor(e,t){super(e,"in",t),this.keys=ZS("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class Vb extends kt{constructor(e,t){super(e,"not-in",t),this.keys=ZS("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function ZS(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((i=>ve.fromName(i.referenceValue)))}class Ub extends kt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return qm(t)&&lu(t.arrayValue,this.value)}}class Lb extends kt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&lu(this.value.arrayValue,t)}}class kb extends kt{constructor(e,t){super(e,"not-in",t)}matches(e){if(lu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!lu(this.value.arrayValue,t)}}class Ob extends kt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!qm(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>lu(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fb{constructor(e,t=null,i=[],r=[],a=null,u=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=r,this.limit=a,this.startAt=u,this.endAt=d,this.Te=null}}function xT(n,e=null,t=[],i=[],r=null,a=null,u=null){return new Fb(n,e,t,i,r,a,u)}function Bm(n){const e=we(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>tm(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(a){return a.field.canonicalString()+a.dir})(i))).join(","),ed(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>Ca(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>Ca(i))).join(",")),e.Te=t}return e.Te}function Hm(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Mb(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!XS(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!DT(n.startAt,e.startAt)&&DT(n.endAt,e.endAt)}function nm(n){return ve.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nd{constructor(e,t=null,i=[],r=[],a=null,u="F",d=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=r,this.limit=a,this.limitType=u,this.startAt=d,this.endAt=g,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function Gb(n,e,t,i,r,a,u,d){return new nd(n,e,t,i,r,a,u,d)}function zm(n){return new nd(n)}function PT(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function qb(n){return ve.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function Bb(n){return n.collectionGroup!==null}function jl(n){const e=we(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),t.add(a.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let d=new Ot(Wt.comparator);return u.filters.forEach((g=>{g.getFlattenedFilters().forEach((p=>{p.isInequality()&&(d=d.add(p.field))}))})),d})(e).forEach((a=>{t.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new xf(a,i))})),t.has(Wt.keyField().canonicalString())||e.Ie.push(new xf(Wt.keyField(),i))}return e.Ie}function Ui(n){const e=we(n);return e.Ee||(e.Ee=Hb(e,jl(n))),e.Ee}function Hb(n,e){if(n.limitType==="F")return xT(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((r=>{const a=r.dir==="desc"?"asc":"desc";return new xf(r.field,a)}));const t=n.endAt?new Df(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new Df(n.startAt.position,n.startAt.inclusive):null;return xT(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function im(n,e,t){return new nd(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function id(n,e){return Hm(Ui(n),Ui(e))&&n.limitType===e.limitType}function jS(n){return`${Bm(Ui(n))}|lt:${n.limitType}`}function ra(n){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((r=>WS(r))).join(", ")}]`),ed(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((r=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(r))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((r=>Ca(r))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((r=>Ca(r))).join(",")),`Target(${i})`})(Ui(n))}; limitType=${n.limitType})`}function od(n,e){return e.isFoundDocument()&&(function(i,r){const a=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(a):ve.isDocumentKey(i.path)?i.path.isEqual(a):i.path.isImmediateParentOf(a)})(n,e)&&(function(i,r){for(const a of jl(i))if(!a.field.isKeyField()&&r.data.field(a.field)===null)return!1;return!0})(n,e)&&(function(i,r){for(const a of i.filters)if(!a.matches(r))return!1;return!0})(n,e)&&(function(i,r){return!(i.startAt&&!(function(u,d,g){const p=MT(u,d,g);return u.inclusive?p<=0:p<0})(i.startAt,jl(i),r)||i.endAt&&!(function(u,d,g){const p=MT(u,d,g);return u.inclusive?p>=0:p>0})(i.endAt,jl(i),r))})(n,e)}function zb(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function eA(n){return(e,t)=>{let i=!1;for(const r of jl(n)){const a=Jb(r,e,t);if(a!==0)return a;i=i||r.field.isKeyField()}return 0}}function Jb(n,e,t){const i=n.field.isKeyField()?ve.comparator(e.key,t.key):(function(a,u,d){const g=u.data.field(a),p=d.data.field(a);return g!==null&&p!==null?Aa(g,p):Ee(42886)})(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Ee(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[r,a]of i)if(this.equalsFn(r,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],e))return void(r[a]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[t]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Es(this.inner,((t,i)=>{for(const[r,a]of i)e(r,a)}))}isEmpty(){return OS(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kb=new ht(ve.comparator);function ho(){return Kb}const tA=new ht(ve.comparator);function Yl(...n){let e=tA;for(const t of n)e=e.insert(t.key,t);return e}function nA(n){let e=tA;return n.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function ir(){return eu()}function iA(){return eu()}function eu(){return new dr((n=>n.toString()),((n,e)=>n.isEqual(e)))}const Yb=new ht(ve.comparator),$b=new Ot(ve.comparator);function Ge(...n){let e=$b;for(const t of n)e=e.add(t);return e}const Qb=new Ot(Fe);function Xb(){return Qb}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jm(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Nf(e)?"-0":e}}function oA(n){return{integerValue:""+n}}function Wb(n,e){return Eb(e)?oA(e):Jm(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sd{constructor(){this._=void 0}}function Zb(n,e,t){return n instanceof Pf?(function(r,a){const u={fields:{[qS]:{stringValue:GS},[HS]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return a&&Gm(a)&&(a=td(a)),a&&(u.fields[BS]=a),{mapValue:u}})(t,e):n instanceof uu?rA(n,e):n instanceof cu?aA(n,e):(function(r,a){const u=sA(r,a),d=VT(u)+VT(r.Ae);return em(u)&&em(r.Ae)?oA(d):Jm(r.serializer,d)})(n,e)}function jb(n,e,t){return n instanceof uu?rA(n,e):n instanceof cu?aA(n,e):t}function sA(n,e){return n instanceof Vf?(function(i){return em(i)||(function(a){return!!a&&"doubleValue"in a})(i)})(e)?e:{integerValue:0}:null}class Pf extends sd{}class uu extends sd{constructor(e){super(),this.elements=e}}function rA(n,e){const t=lA(e);for(const i of n.elements)t.some((r=>qi(r,i)))||t.push(i);return{arrayValue:{values:t}}}class cu extends sd{constructor(e){super(),this.elements=e}}function aA(n,e){let t=lA(e);for(const i of n.elements)t=t.filter((r=>!qi(r,i)));return{arrayValue:{values:t}}}class Vf extends sd{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function VT(n){return Tt(n.integerValue||n.doubleValue)}function lA(n){return qm(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function e1(n,e){return n.field.isEqual(e.field)&&(function(i,r){return i instanceof uu&&r instanceof uu||i instanceof cu&&r instanceof cu?Sa(i.elements,r.elements,qi):i instanceof Vf&&r instanceof Vf?qi(i.Ae,r.Ae):i instanceof Pf&&r instanceof Pf})(n.transform,e.transform)}class t1{constructor(e,t){this.version=e,this.transformResults=t}}class Li{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Li}static exists(e){return new Li(void 0,e)}static updateTime(e){return new Li(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function gf(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class rd{}function uA(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new fA(n.key,Li.none()):new _u(n.key,n.data,Li.none());{const t=n.data,i=Tn.empty();let r=new Ot(Wt.comparator);for(let a of e.fields)if(!r.has(a)){let u=t.field(a);u===null&&a.length>1&&(a=a.popLast(),u=t.field(a)),u===null?i.delete(a):i.set(a,u),r=r.add(a)}return new Ss(n.key,i,new Dn(r.toArray()),Li.none())}}function n1(n,e,t){n instanceof _u?(function(r,a,u){const d=r.value.clone(),g=LT(r.fieldTransforms,a,u.transformResults);d.setAll(g),a.convertToFoundDocument(u.version,d).setHasCommittedMutations()})(n,e,t):n instanceof Ss?(function(r,a,u){if(!gf(r.precondition,a))return void a.convertToUnknownDocument(u.version);const d=LT(r.fieldTransforms,a,u.transformResults),g=a.data;g.setAll(cA(r)),g.setAll(d),a.convertToFoundDocument(u.version,g).setHasCommittedMutations()})(n,e,t):(function(r,a,u){a.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,t)}function tu(n,e,t,i){return n instanceof _u?(function(a,u,d,g){if(!gf(a.precondition,u))return d;const p=a.value.clone(),v=kT(a.fieldTransforms,g,u);return p.setAll(v),u.convertToFoundDocument(u.version,p).setHasLocalMutations(),null})(n,e,t,i):n instanceof Ss?(function(a,u,d,g){if(!gf(a.precondition,u))return d;const p=kT(a.fieldTransforms,g,u),v=u.data;return v.setAll(cA(a)),v.setAll(p),u.convertToFoundDocument(u.version,v).setHasLocalMutations(),d===null?null:d.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((T=>T.field)))})(n,e,t,i):(function(a,u,d){return gf(a.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):d})(n,e,t)}function i1(n,e){let t=null;for(const i of n.fieldTransforms){const r=e.data.field(i.field),a=sA(i.transform,r||null);a!=null&&(t===null&&(t=Tn.empty()),t.set(i.field,a))}return t||null}function UT(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&Sa(i,r,((a,u)=>e1(a,u)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class _u extends rd{constructor(e,t,i,r=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Ss extends rd{constructor(e,t,i,r,a=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=r,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function cA(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}})),e}function LT(n,e,t){const i=new Map;Qe(n.length===t.length,32656,{Ve:t.length,de:n.length});for(let r=0;r<t.length;r++){const a=n[r],u=a.transform,d=e.data.field(a.field);i.set(a.field,jb(u,d,t[r]))}return i}function kT(n,e,t){const i=new Map;for(const r of n){const a=r.transform,u=t.data.field(r.field);i.set(r.field,Zb(a,u,e))}return i}class fA extends rd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class o1 extends rd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s1{constructor(e,t,i,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const a=this.mutations[r];a.key.isEqual(e.key)&&n1(a,e,i[r])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=tu(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=tu(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=iA();return this.mutations.forEach((r=>{const a=e.get(r.key),u=a.overlayedDocument;let d=this.applyToLocalView(u,a.mutatedFields);d=t.has(r.key)?null:d;const g=uA(u,d);g!==null&&i.set(r.key,g),u.isValidDocument()||u.convertToNoDocument(Ie.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ge())}isEqual(e){return this.batchId===e.batchId&&Sa(this.mutations,e.mutations,((t,i)=>UT(t,i)))&&Sa(this.baseMutations,e.baseMutations,((t,i)=>UT(t,i)))}}class Km{constructor(e,t,i,r){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=r}static from(e,t,i){Qe(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let r=(function(){return Yb})();const a=e.mutations;for(let u=0;u<a.length;u++)r=r.insert(a[u].key,i[u].version);return new Km(e,t,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r1{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a1{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Mt,He;function l1(n){switch(n){case re.OK:return Ee(64938);case re.CANCELLED:case re.UNKNOWN:case re.DEADLINE_EXCEEDED:case re.RESOURCE_EXHAUSTED:case re.INTERNAL:case re.UNAVAILABLE:case re.UNAUTHENTICATED:return!1;case re.INVALID_ARGUMENT:case re.NOT_FOUND:case re.ALREADY_EXISTS:case re.PERMISSION_DENIED:case re.FAILED_PRECONDITION:case re.ABORTED:case re.OUT_OF_RANGE:case re.UNIMPLEMENTED:case re.DATA_LOSS:return!0;default:return Ee(15467,{code:n})}}function dA(n){if(n===void 0)return fo("GRPC error has no .code"),re.UNKNOWN;switch(n){case Mt.OK:return re.OK;case Mt.CANCELLED:return re.CANCELLED;case Mt.UNKNOWN:return re.UNKNOWN;case Mt.DEADLINE_EXCEEDED:return re.DEADLINE_EXCEEDED;case Mt.RESOURCE_EXHAUSTED:return re.RESOURCE_EXHAUSTED;case Mt.INTERNAL:return re.INTERNAL;case Mt.UNAVAILABLE:return re.UNAVAILABLE;case Mt.UNAUTHENTICATED:return re.UNAUTHENTICATED;case Mt.INVALID_ARGUMENT:return re.INVALID_ARGUMENT;case Mt.NOT_FOUND:return re.NOT_FOUND;case Mt.ALREADY_EXISTS:return re.ALREADY_EXISTS;case Mt.PERMISSION_DENIED:return re.PERMISSION_DENIED;case Mt.FAILED_PRECONDITION:return re.FAILED_PRECONDITION;case Mt.ABORTED:return re.ABORTED;case Mt.OUT_OF_RANGE:return re.OUT_OF_RANGE;case Mt.UNIMPLEMENTED:return re.UNIMPLEMENTED;case Mt.DATA_LOSS:return re.DATA_LOSS;default:return Ee(39323,{code:n})}}(He=Mt||(Mt={}))[He.OK=0]="OK",He[He.CANCELLED=1]="CANCELLED",He[He.UNKNOWN=2]="UNKNOWN",He[He.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",He[He.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",He[He.NOT_FOUND=5]="NOT_FOUND",He[He.ALREADY_EXISTS=6]="ALREADY_EXISTS",He[He.PERMISSION_DENIED=7]="PERMISSION_DENIED",He[He.UNAUTHENTICATED=16]="UNAUTHENTICATED",He[He.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",He[He.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",He[He.ABORTED=10]="ABORTED",He[He.OUT_OF_RANGE=11]="OUT_OF_RANGE",He[He.UNIMPLEMENTED=12]="UNIMPLEMENTED",He[He.INTERNAL=13]="INTERNAL",He[He.UNAVAILABLE=14]="UNAVAILABLE",He[He.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u1(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c1=new cs([4294967295,4294967295],0);function OT(n){const e=u1().encode(n),t=new wS;return t.update(e),new Uint8Array(t.digest())}function FT(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new cs([t,i],0),new cs([r,a],0)]}class Ym{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new $l(`Invalid padding: ${t}`);if(i<0)throw new $l(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new $l(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new $l(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=cs.fromNumber(this.ge)}ye(e,t,i){let r=e.add(t.multiply(cs.fromNumber(i)));return r.compare(c1)===1&&(r=new cs([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=OT(e),[i,r]=FT(t);for(let a=0;a<this.hashCount;a++){const u=this.ye(i,r,a);if(!this.we(u))return!1}return!0}static create(e,t,i){const r=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),u=new Ym(a,r,t);return i.forEach((d=>u.insert(d))),u}insert(e){if(this.ge===0)return;const t=OT(e),[i,r]=FT(t);for(let a=0;a<this.hashCount;a++){const u=this.ye(i,r,a);this.be(u)}}be(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class $l extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ad{constructor(e,t,i,r,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const r=new Map;return r.set(e,vu.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new ad(Ie.min(),r,new ht(Fe),ho(),Ge())}}class vu{constructor(e,t,i,r,a){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new vu(i,t,Ge(),Ge(),Ge())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yf{constructor(e,t,i,r){this.Se=e,this.removedTargetIds=t,this.key=i,this.De=r}}class hA{constructor(e,t){this.targetId=e,this.Ce=t}}class pA{constructor(e,t,i=Zt.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=r}}class GT{constructor(){this.ve=0,this.Fe=qT(),this.Me=Zt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ge(),t=Ge(),i=Ge();return this.Fe.forEach(((r,a)=>{switch(a){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:i=i.add(r);break;default:Ee(38017,{changeType:a})}})),new vu(this.Me,this.xe,e,t,i)}Ke(){this.Oe=!1,this.Fe=qT()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,Qe(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class f1{constructor(e){this.Ge=e,this.ze=new Map,this.je=ho(),this.He=of(),this.Je=of(),this.Ze=new ht(Fe)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.We(),i.Ne||i.Ke(),i.Le(e.resumeToken);break;case 2:i.We(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.Qe(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:Ee(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,r)=>{this.rt(r)&&t(r)}))}st(e){const t=e.targetId,i=e.Ce.count,r=this.ot(t);if(r){const a=r.target;if(nm(a))if(i===0){const u=new ve(a.path);this.et(t,u,nn.newNoDocument(u,Ie.min()))}else Qe(i===1,20013,{expectedCount:i});else{const u=this._t(t);if(u!==i){const d=this.ut(e),g=d?this.ct(d,e,u):1;if(g!==0){this.it(t);const p=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,p)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:a=0}=t;let u,d;try{u=gs(i).toUint8Array()}catch(g){if(g instanceof FS)return ur("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{d=new Ym(u,r,a)}catch(g){return ur(g instanceof $l?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return d.ge===0?null:d}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let r=0;return i.forEach((a=>{const u=this.Ge.ht(),d=`projects/${u.projectId}/databases/${u.database}/documents/${a.path.canonicalString()}`;e.mightContain(d)||(this.et(t,a,null),r++)})),r}Tt(e){const t=new Map;this.ze.forEach(((a,u)=>{const d=this.ot(u);if(d){if(a.current&&nm(d.target)){const g=new ve(d.target.path);this.It(g).has(u)||this.Et(u,g)||this.et(u,g,nn.newNoDocument(g,e))}a.Be&&(t.set(u,a.ke()),a.Ke())}}));let i=Ge();this.Je.forEach(((a,u)=>{let d=!0;u.forEachWhile((g=>{const p=this.ot(g);return!p||p.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(i=i.add(a))})),this.je.forEach(((a,u)=>u.setReadTime(e)));const r=new ad(e,t,this.Ze,this.je,i);return this.je=ho(),this.He=of(),this.Je=of(),this.Ze=new ht(Fe),r}Ye(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,i),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,t)?r.qe(t,1):r.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new GT,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new Ot(Fe),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new Ot(Fe),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||de("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new GT),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function of(){return new ht(ve.comparator)}function qT(){return new ht(ve.comparator)}const d1={asc:"ASCENDING",desc:"DESCENDING"},h1={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},p1={and:"AND",or:"OR"};class m1{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function om(n,e){return n.useProto3Json||ed(e)?e:{value:e}}function Uf(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function mA(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function g1(n,e){return Uf(n,e.toTimestamp())}function ki(n){return Qe(!!n,49232),Ie.fromTimestamp((function(t){const i=ms(t);return new ut(i.seconds,i.nanos)})(n))}function $m(n,e){return sm(n,e).canonicalString()}function sm(n,e){const t=(function(r){return new lt(["projects",r.projectId,"databases",r.database])})(n).child("documents");return e===void 0?t:t.child(e)}function gA(n){const e=lt.fromString(n);return Qe(EA(e),10190,{key:e.toString()}),e}function rm(n,e){return $m(n.databaseId,e.path)}function Up(n,e){const t=gA(e);if(t.get(1)!==n.databaseId.projectId)throw new ye(re.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ye(re.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ve(_A(t))}function yA(n,e){return $m(n.databaseId,e)}function y1(n){const e=gA(n);return e.length===4?lt.emptyPath():_A(e)}function am(n){return new lt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function _A(n){return Qe(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function BT(n,e,t){return{name:rm(n,e),fields:t.value.mapValue.fields}}function _1(n,e){let t;if("targetChange"in e){e.targetChange;const i=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:Ee(39313,{state:p})})(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],a=(function(p,v){return p.useProto3Json?(Qe(v===void 0||typeof v=="string",58123),Zt.fromBase64String(v||"")):(Qe(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),Zt.fromUint8Array(v||new Uint8Array))})(n,e.targetChange.resumeToken),u=e.targetChange.cause,d=u&&(function(p){const v=p.code===void 0?re.UNKNOWN:dA(p.code);return new ye(v,p.message||"")})(u);t=new pA(i,r,a,d||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=Up(n,i.document.name),a=ki(i.document.updateTime),u=i.document.createTime?ki(i.document.createTime):Ie.min(),d=new Tn({mapValue:{fields:i.document.fields}}),g=nn.newFoundDocument(r,a,u,d),p=i.targetIds||[],v=i.removedTargetIds||[];t=new yf(p,v,g.key,g)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=Up(n,i.document),a=i.readTime?ki(i.readTime):Ie.min(),u=nn.newNoDocument(r,a),d=i.removedTargetIds||[];t=new yf([],d,u.key,u)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=Up(n,i.document),a=i.removedTargetIds||[];t=new yf([],a,r,null)}else{if(!("filter"in e))return Ee(11601,{Vt:e});{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:a}=i,u=new a1(r,a),d=i.targetId;t=new hA(d,u)}}return t}function v1(n,e){let t;if(e instanceof _u)t={update:BT(n,e.key,e.value)};else if(e instanceof fA)t={delete:rm(n,e.key)};else if(e instanceof Ss)t={update:BT(n,e.key,e.data),updateMask:N1(e.fieldMask)};else{if(!(e instanceof o1))return Ee(16599,{dt:e.type});t={verify:rm(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(a,u){const d=u.transform;if(d instanceof Pf)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof uu)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof cu)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Vf)return{fieldPath:u.field.canonicalString(),increment:d.Ae};throw Ee(20930,{transform:u.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(r,a){return a.updateTime!==void 0?{updateTime:g1(r,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Ee(27497)})(n,e.precondition)),t}function T1(n,e){return n&&n.length>0?(Qe(e!==void 0,14353),n.map((t=>(function(r,a){let u=r.updateTime?ki(r.updateTime):ki(a);return u.isEqual(Ie.min())&&(u=ki(a)),new t1(u,r.transformResults||[])})(t,e)))):[]}function E1(n,e){return{documents:[yA(n,e.path)]}}function S1(n,e){const t={structuredQuery:{}},i=e.path;let r;e.collectionGroup!==null?(r=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=yA(n,r);const a=(function(p){if(p.length!==0)return TA(Bi.create(p,"and"))})(e.filters);a&&(t.structuredQuery.where=a);const u=(function(p){if(p.length!==0)return p.map((v=>(function(S){return{field:aa(S.field),direction:I1(S.dir)}})(v)))})(e.orderBy);u&&(t.structuredQuery.orderBy=u);const d=om(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(e.endAt)),{ft:t,parent:r}}function A1(n){let e=y1(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let r=null;if(i>0){Qe(i===1,65062);const v=t.from[0];v.allDescendants?r=v.collectionId:e=e.child(v.collectionId)}let a=[];t.where&&(a=(function(T){const S=vA(T);return S instanceof Bi&&QS(S)?S.getFilters():[S]})(t.where));let u=[];t.orderBy&&(u=(function(T){return T.map((S=>(function(V){return new xf(la(V.field),(function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(V.direction))})(S)))})(t.orderBy));let d=null;t.limit&&(d=(function(T){let S;return S=typeof T=="object"?T.value:T,ed(S)?null:S})(t.limit));let g=null;t.startAt&&(g=(function(T){const S=!!T.before,R=T.values||[];return new Df(R,S)})(t.startAt));let p=null;return t.endAt&&(p=(function(T){const S=!T.before,R=T.values||[];return new Df(R,S)})(t.endAt)),Gb(e,r,u,a,d,"F",g,p)}function C1(n,e){const t=(function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ee(28987,{purpose:r})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function vA(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=la(t.unaryFilter.field);return kt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=la(t.unaryFilter.field);return kt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=la(t.unaryFilter.field);return kt.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=la(t.unaryFilter.field);return kt.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ee(61313);default:return Ee(60726)}})(n):n.fieldFilter!==void 0?(function(t){return kt.create(la(t.fieldFilter.field),(function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ee(58110);default:return Ee(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Bi.create(t.compositeFilter.filters.map((i=>vA(i))),(function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return Ee(1026)}})(t.compositeFilter.op))})(n):Ee(30097,{filter:n})}function I1(n){return d1[n]}function R1(n){return h1[n]}function w1(n){return p1[n]}function aa(n){return{fieldPath:n.canonicalString()}}function la(n){return Wt.fromServerFormat(n.fieldPath)}function TA(n){return n instanceof kt?(function(t){if(t.op==="=="){if(bT(t.value))return{unaryFilter:{field:aa(t.field),op:"IS_NAN"}};if(NT(t.value))return{unaryFilter:{field:aa(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(bT(t.value))return{unaryFilter:{field:aa(t.field),op:"IS_NOT_NAN"}};if(NT(t.value))return{unaryFilter:{field:aa(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:aa(t.field),op:R1(t.op),value:t.value}}})(n):n instanceof Bi?(function(t){const i=t.getFilters().map((r=>TA(r)));return i.length===1?i[0]:{compositeFilter:{op:w1(t.op),filters:i}}})(n):Ee(54877,{filter:n})}function N1(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function EA(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}function SA(n){return!!n&&typeof n._toProto=="function"&&n._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss{constructor(e,t,i,r,a=Ie.min(),u=Ie.min(),d=Zt.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=d,this.expectedCount=g}withSequenceNumber(e){return new ss(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ss(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ss(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ss(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b1{constructor(e){this.yt=e}}function M1(n){const e=A1({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?im(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D1{constructor(){this.Sn=new x1}addToCollectionParentIndex(e,t){return this.Sn.add(t),oe.resolve()}getCollectionParents(e,t){return oe.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return oe.resolve()}deleteFieldIndex(e,t){return oe.resolve()}deleteAllFieldIndexes(e){return oe.resolve()}createTargetIndexes(e,t){return oe.resolve()}getDocumentsMatchingTarget(e,t){return oe.resolve(null)}getIndexType(e,t){return oe.resolve(0)}getFieldIndexes(e,t){return oe.resolve([])}getNextCollectionGroupToUpdate(e){return oe.resolve(null)}getMinOffset(e,t){return oe.resolve(ps.min())}getMinOffsetFromCollectionGroup(e,t){return oe.resolve(ps.min())}updateCollectionGroup(e,t,i){return oe.resolve()}updateIndexEntries(e,t){return oe.resolve()}}class x1{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t]||new Ot(lt.comparator),a=!r.has(i);return this.index[t]=r.add(i),a}has(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t];return r&&r.has(i)}getEntries(e){return(this.index[e]||new Ot(lt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},AA=41943040;class vn{static withCacheSize(e){return new vn(e,vn.DEFAULT_COLLECTION_PERCENTILE,vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */vn.DEFAULT_COLLECTION_PERCENTILE=10,vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,vn.DEFAULT=new vn(AA,vn.DEFAULT_COLLECTION_PERCENTILE,vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),vn.DISABLED=new vn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ia{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Ia(0)}static ar(){return new Ia(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zT="LruGarbageCollector",P1=1048576;function JT([n,e],[t,i]){const r=Fe(n,t);return r===0?Fe(e,i):r}class V1{constructor(e){this.Pr=e,this.buffer=new Ot(JT),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();JT(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class U1{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){de(zT,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Da(t)?de(zT,"Ignoring IndexedDB error during garbage collection: ",t):await Ma(t)}await this.Ar(3e5)}))}}class L1{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return oe.resolve(jf.ce);const i=new V1(t);return this.Vr.forEachTarget(e,(r=>i.Er(r.sequenceNumber))).next((()=>this.Vr.mr(e,(r=>i.Er(r))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.Vr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(de("LruGarbageCollector","Garbage collection skipped; disabled"),oe.resolve(HT)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(de("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),HT):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let i,r,a,u,d,g,p;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((T=>(T>this.params.maximumSequenceNumbersToCollect?(de("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),r=this.params.maximumSequenceNumbersToCollect):r=T,u=Date.now(),this.nthSequenceNumber(e,r)))).next((T=>(i=T,d=Date.now(),this.removeTargets(e,i,t)))).next((T=>(a=T,g=Date.now(),this.removeOrphanedDocuments(e,i)))).next((T=>(p=Date.now(),sa()<=Oe.DEBUG&&de("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-v}ms
	Determined least recently used ${r} in `+(d-u)+`ms
	Removed ${a} targets in `+(g-d)+`ms
	Removed ${T} documents in `+(p-g)+`ms
Total Duration: ${p-v}ms`),oe.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:a,documentsRemoved:T}))))}}function k1(n,e){return new L1(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O1{constructor(){this.changes=new dr((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,nn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?oe.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F1{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G1{constructor(e,t,i,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(i=r,this.remoteDocumentCache.getEntry(e,t)))).next((r=>(i!==null&&tu(i.mutation,r,Dn.empty(),ut.now()),r)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,Ge()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=Ge()){const r=ir();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,i).next((a=>{let u=Yl();return a.forEach(((d,g)=>{u=u.insert(d,g.overlayedDocument)})),u}))))}getOverlayedDocuments(e,t){const i=ir();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,Ge())))}populateOverlays(e,t,i){const r=[];return i.forEach((a=>{t.has(a)||r.push(a)})),this.documentOverlayCache.getOverlays(e,r).next((a=>{a.forEach(((u,d)=>{t.set(u,d)}))}))}computeViews(e,t,i,r){let a=ho();const u=eu(),d=(function(){return eu()})();return t.forEach(((g,p)=>{const v=i.get(p.key);r.has(p.key)&&(v===void 0||v.mutation instanceof Ss)?a=a.insert(p.key,p):v!==void 0?(u.set(p.key,v.mutation.getFieldMask()),tu(v.mutation,p,v.mutation.getFieldMask(),ut.now())):u.set(p.key,Dn.empty())})),this.recalculateAndSaveOverlays(e,a).next((g=>(g.forEach(((p,v)=>u.set(p,v))),t.forEach(((p,v)=>d.set(p,new F1(v,u.get(p)??null)))),d)))}recalculateAndSaveOverlays(e,t){const i=eu();let r=new ht(((u,d)=>u-d)),a=Ge();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((u=>{for(const d of u)d.keys().forEach((g=>{const p=t.get(g);if(p===null)return;let v=i.get(g)||Dn.empty();v=d.applyToLocalView(p,v),i.set(g,v);const T=(r.get(d.batchId)||Ge()).add(g);r=r.insert(d.batchId,T)}))})).next((()=>{const u=[],d=r.getReverseIterator();for(;d.hasNext();){const g=d.getNext(),p=g.key,v=g.value,T=iA();v.forEach((S=>{if(!a.has(S)){const R=uA(t.get(S),i.get(S));R!==null&&T.set(S,R),a=a.add(S)}})),u.push(this.documentOverlayCache.saveOverlays(e,p,T))}return oe.waitFor(u)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,r){return qb(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Bb(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,r):this.getDocumentsMatchingCollectionQuery(e,t,i,r)}getNextDocuments(e,t,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,r).next((a=>{const u=r-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,r-a.size):oe.resolve(ir());let d=su,g=a;return u.next((p=>oe.forEach(p,((v,T)=>(d<T.largestBatchId&&(d=T.largestBatchId),a.get(v)?oe.resolve():this.remoteDocumentCache.getEntry(e,v).next((S=>{g=g.insert(v,S)}))))).next((()=>this.populateOverlays(e,p,a))).next((()=>this.computeViews(e,g,p,Ge()))).next((v=>({batchId:d,changes:nA(v)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ve(t)).next((i=>{let r=Yl();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,r){const a=t.collectionGroup;let u=Yl();return this.indexManager.getCollectionParents(e,a).next((d=>oe.forEach(d,(g=>{const p=(function(T,S){return new nd(S,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)})(t,g.child(a));return this.getDocumentsMatchingCollectionQuery(e,p,i,r).next((v=>{v.forEach(((T,S)=>{u=u.insert(T,S)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,t,i,r){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((u=>(a=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,a,r)))).next((u=>{a.forEach(((g,p)=>{const v=p.getKey();u.get(v)===null&&(u=u.insert(v,nn.newInvalidDocument(v)))}));let d=Yl();return u.forEach(((g,p)=>{const v=a.get(g);v!==void 0&&tu(v.mutation,p,Dn.empty(),ut.now()),od(t,p)&&(d=d.insert(g,p))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q1{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return oe.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(r){return{id:r.id,version:r.version,createTime:ki(r.createTime)}})(t)),oe.resolve()}getNamedQuery(e,t){return oe.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(r){return{name:r.name,query:M1(r.bundledQuery),readTime:ki(r.readTime)}})(t)),oe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B1{constructor(){this.overlays=new ht(ve.comparator),this.Lr=new Map}getOverlay(e,t){return oe.resolve(this.overlays.get(t))}getOverlays(e,t){const i=ir();return oe.forEach(t,(r=>this.getOverlay(e,r).next((a=>{a!==null&&i.set(r,a)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((r,a)=>{this.bt(e,t,a)})),oe.resolve()}removeOverlaysForBatchId(e,t,i){const r=this.Lr.get(i);return r!==void 0&&(r.forEach((a=>this.overlays=this.overlays.remove(a))),this.Lr.delete(i)),oe.resolve()}getOverlaysForCollection(e,t,i){const r=ir(),a=t.length+1,u=new ve(t.child("")),d=this.overlays.getIteratorFrom(u);for(;d.hasNext();){const g=d.getNext().value,p=g.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===a&&g.largestBatchId>i&&r.set(g.getKey(),g)}return oe.resolve(r)}getOverlaysForCollectionGroup(e,t,i,r){let a=new ht(((p,v)=>p-v));const u=this.overlays.getIterator();for(;u.hasNext();){const p=u.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>i){let v=a.get(p.largestBatchId);v===null&&(v=ir(),a=a.insert(p.largestBatchId,v)),v.set(p.getKey(),p)}}const d=ir(),g=a.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((p,v)=>d.set(p,v))),!(d.size()>=r)););return oe.resolve(d)}bt(e,t,i){const r=this.overlays.get(i.key);if(r!==null){const u=this.Lr.get(r.largestBatchId).delete(i.key);this.Lr.set(r.largestBatchId,u)}this.overlays=this.overlays.insert(i.key,new r1(t,i));let a=this.Lr.get(t);a===void 0&&(a=Ge(),this.Lr.set(t,a)),this.Lr.set(t,a.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H1{constructor(){this.sessionToken=Zt.EMPTY_BYTE_STRING}getSessionToken(e){return oe.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,oe.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qm{constructor(){this.kr=new Ot(Bt.Kr),this.qr=new Ot(Bt.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const i=new Bt(e,t);this.kr=this.kr.add(i),this.qr=this.qr.add(i)}$r(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Wr(new Bt(e,t))}Qr(e,t){e.forEach((i=>this.removeReference(i,t)))}Gr(e){const t=new ve(new lt([])),i=new Bt(t,e),r=new Bt(t,e+1),a=[];return this.qr.forEachInRange([i,r],(u=>{this.Wr(u),a.push(u.key)})),a}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new ve(new lt([])),i=new Bt(t,e),r=new Bt(t,e+1);let a=Ge();return this.qr.forEachInRange([i,r],(u=>{a=a.add(u.key)})),a}containsKey(e){const t=new Bt(e,0),i=this.kr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class Bt{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return ve.comparator(e.key,t.key)||Fe(e.Hr,t.Hr)}static Ur(e,t){return Fe(e.Hr,t.Hr)||ve.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z1{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new Ot(Bt.Kr)}checkEmpty(e){return oe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,r){const a=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new s1(a,t,i,r);this.mutationQueue.push(u);for(const d of r)this.Jr=this.Jr.add(new Bt(d.key,a)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return oe.resolve(u)}lookupMutationBatch(e,t){return oe.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,r=this.Xr(i),a=r<0?0:r;return oe.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return oe.resolve(this.mutationQueue.length===0?Fm:this.Yn-1)}getAllMutationBatches(e){return oe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Bt(t,0),r=new Bt(t,Number.POSITIVE_INFINITY),a=[];return this.Jr.forEachInRange([i,r],(u=>{const d=this.Zr(u.Hr);a.push(d)})),oe.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Ot(Fe);return t.forEach((r=>{const a=new Bt(r,0),u=new Bt(r,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([a,u],(d=>{i=i.add(d.Hr)}))})),oe.resolve(this.Yr(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,r=i.length+1;let a=i;ve.isDocumentKey(a)||(a=a.child(""));const u=new Bt(new ve(a),0);let d=new Ot(Fe);return this.Jr.forEachWhile((g=>{const p=g.key.path;return!!i.isPrefixOf(p)&&(p.length===r&&(d=d.add(g.Hr)),!0)}),u),oe.resolve(this.Yr(d))}Yr(e){const t=[];return e.forEach((i=>{const r=this.Zr(i);r!==null&&t.push(r)})),t}removeMutationBatch(e,t){Qe(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Jr;return oe.forEach(t.mutations,(r=>{const a=new Bt(r.key,t.batchId);return i=i.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Jr=i}))}nr(e){}containsKey(e,t){const i=new Bt(t,0),r=this.Jr.firstAfterOrEqual(i);return oe.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,oe.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J1{constructor(e){this.ti=e,this.docs=(function(){return new ht(ve.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,r=this.docs.get(i),a=r?r.size:0,u=this.ti(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:u}),this.size+=u-a,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return oe.resolve(i?i.document.mutableCopy():nn.newInvalidDocument(t))}getEntries(e,t){let i=ho();return t.forEach((r=>{const a=this.docs.get(r);i=i.insert(r,a?a.document.mutableCopy():nn.newInvalidDocument(r))})),oe.resolve(i)}getDocumentsMatchingQuery(e,t,i,r){let a=ho();const u=t.path,d=new ve(u.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(d);for(;g.hasNext();){const{key:p,value:{document:v}}=g.getNext();if(!u.isPrefixOf(p.path))break;p.path.length>u.length+1||yb(gb(v),i)<=0||(r.has(v.key)||od(t,v))&&(a=a.insert(v.key,v.mutableCopy()))}return oe.resolve(a)}getAllFromCollectionGroup(e,t,i,r){Ee(9500)}ni(e,t){return oe.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new K1(this)}getSize(e){return oe.resolve(this.size)}}class K1 extends O1{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,r)=>{r.isValidDocument()?t.push(this.Mr.addEntry(e,r)):this.Mr.removeEntry(i)})),oe.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y1{constructor(e){this.persistence=e,this.ri=new dr((t=>Bm(t)),Hm),this.lastRemoteSnapshotVersion=Ie.min(),this.highestTargetId=0,this.ii=0,this.si=new Qm,this.targetCount=0,this.oi=Ia._r()}forEachTarget(e,t){return this.ri.forEach(((i,r)=>t(r))),oe.resolve()}getLastRemoteSnapshotVersion(e){return oe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return oe.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),oe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.ii&&(this.ii=t),oe.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new Ia(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,oe.resolve()}updateTargetData(e,t){return this.lr(t),oe.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,oe.resolve()}removeTargets(e,t,i){let r=0;const a=[];return this.ri.forEach(((u,d)=>{d.sequenceNumber<=t&&i.get(d.targetId)===null&&(this.ri.delete(u),a.push(this.removeMatchingKeysForTargetId(e,d.targetId)),r++)})),oe.waitFor(a).next((()=>r))}getTargetCount(e){return oe.resolve(this.targetCount)}getTargetData(e,t){const i=this.ri.get(t)||null;return oe.resolve(i)}addMatchingKeys(e,t,i){return this.si.$r(t,i),oe.resolve()}removeMatchingKeys(e,t,i){this.si.Qr(t,i);const r=this.persistence.referenceDelegate,a=[];return r&&t.forEach((u=>{a.push(r.markPotentiallyOrphaned(e,u))})),oe.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),oe.resolve()}getMatchingKeysForTargetId(e,t){const i=this.si.jr(t);return oe.resolve(i)}containsKey(e,t){return oe.resolve(this.si.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CA{constructor(e,t){this._i={},this.overlays={},this.ai=new jf(0),this.ui=!1,this.ui=!0,this.ci=new H1,this.referenceDelegate=e(this),this.li=new Y1(this),this.indexManager=new D1,this.remoteDocumentCache=(function(r){return new J1(r)})((i=>this.referenceDelegate.hi(i))),this.serializer=new b1(t),this.Pi=new q1(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new B1,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this._i[e.toKey()];return i||(i=new z1(t,this.referenceDelegate),this._i[e.toKey()]=i),i}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,i){de("MemoryPersistence","Starting transaction:",e);const r=new $1(this.ai.next());return this.referenceDelegate.Ti(),i(r).next((a=>this.referenceDelegate.Ii(r).next((()=>a)))).toPromise().then((a=>(r.raiseOnCommittedEvent(),a)))}Ei(e,t){return oe.or(Object.values(this._i).map((i=>()=>i.containsKey(e,t))))}}class $1 extends vb{constructor(e){super(),this.currentSequenceNumber=e}}class Xm{constructor(e){this.persistence=e,this.Ri=new Qm,this.Ai=null}static Vi(e){return new Xm(e)}get di(){if(this.Ai)return this.Ai;throw Ee(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.di.delete(i.toString()),oe.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.di.add(i.toString()),oe.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),oe.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((r=>this.di.add(r.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((r=>{r.forEach((a=>this.di.add(a.toString())))})).next((()=>i.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return oe.forEach(this.di,(i=>{const r=ve.fromPath(i);return this.mi(e,r).next((a=>{a||t.removeEntry(r,Ie.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((i=>{i?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return oe.or([()=>oe.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Lf{constructor(e,t){this.persistence=e,this.fi=new dr((i=>Sb(i.path)),((i,r)=>i.isEqual(r))),this.garbageCollector=k1(this,t)}static Vi(e,t){return new Lf(e,t)}Ti(){}Ii(e){return oe.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((r=>i+r))))}pr(e){let t=0;return this.mr(e,(i=>{t++})).next((()=>t))}mr(e,t){return oe.forEach(this.fi,((i,r)=>this.wr(e,i,r).next((a=>a?oe.resolve():t(r)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const r=this.persistence.getRemoteDocumentCache(),a=r.newChangeBuffer();return r.ni(e,(u=>this.wr(e,u,t).next((d=>{d||(i++,a.removeEntry(u,Ie.min()))})))).next((()=>a.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),oe.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.fi.set(i,e.currentSequenceNumber),oe.resolve()}removeReference(e,t,i){return this.fi.set(i,e.currentSequenceNumber),oe.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),oe.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=pf(e.data.value)),t}wr(e,t,i){return oe.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const r=this.fi.get(t);return oe.resolve(r!==void 0&&r>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wm{constructor(e,t,i,r){this.targetId=e,this.fromCache=t,this.Ts=i,this.Is=r}static Es(e,t){let i=Ge(),r=Ge();for(const a of t.docChanges)switch(a.type){case 0:i=i.add(a.doc.key);break;case 1:r=r.add(a.doc.key)}return new Wm(e,t.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q1{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X1{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return Lw()?8:Tb(sn())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,r){const a={result:null};return this.gs(e,t).next((u=>{a.result=u})).next((()=>{if(!a.result)return this.ps(e,t,r,i).next((u=>{a.result=u}))})).next((()=>{if(a.result)return;const u=new Q1;return this.ys(e,t,u).next((d=>{if(a.result=d,this.As)return this.ws(e,t,u,d.size)}))})).next((()=>a.result))}ws(e,t,i,r){return i.documentReadCount<this.Vs?(sa()<=Oe.DEBUG&&de("QueryEngine","SDK will not create cache indexes for query:",ra(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),oe.resolve()):(sa()<=Oe.DEBUG&&de("QueryEngine","Query:",ra(t),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.ds*r?(sa()<=Oe.DEBUG&&de("QueryEngine","The SDK decides to create cache indexes for query:",ra(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ui(t))):oe.resolve())}gs(e,t){if(PT(t))return oe.resolve(null);let i=Ui(t);return this.indexManager.getIndexType(e,i).next((r=>r===0?null:(t.limit!==null&&r===1&&(t=im(t,null,"F"),i=Ui(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((a=>{const u=Ge(...a);return this.fs.getDocuments(e,u).next((d=>this.indexManager.getMinOffset(e,i).next((g=>{const p=this.bs(t,d);return this.Ss(t,p,u,g.readTime)?this.gs(e,im(t,null,"F")):this.Ds(e,p,t,g)}))))})))))}ps(e,t,i,r){return PT(t)||r.isEqual(Ie.min())?oe.resolve(null):this.fs.getDocuments(e,i).next((a=>{const u=this.bs(t,a);return this.Ss(t,u,i,r)?oe.resolve(null):(sa()<=Oe.DEBUG&&de("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),ra(t)),this.Ds(e,u,t,mb(r,su)).next((d=>d)))}))}bs(e,t){let i=new Ot(eA(e));return t.forEach(((r,a)=>{od(e,a)&&(i=i.add(a))})),i}Ss(e,t,i,r){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(r)>0)}ys(e,t,i){return sa()<=Oe.DEBUG&&de("QueryEngine","Using full collection scan to execute query:",ra(t)),this.fs.getDocumentsMatchingQuery(e,t,ps.min(),i)}Ds(e,t,i,r){return this.fs.getDocumentsMatchingQuery(e,i,r).next((a=>(t.forEach((u=>{a=a.insert(u.key,u)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zm="LocalStore",W1=3e8;class Z1{constructor(e,t,i,r){this.persistence=e,this.Cs=t,this.serializer=r,this.vs=new ht(Fe),this.Fs=new dr((a=>Bm(a)),Hm),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(i)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new G1(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function j1(n,e,t,i){return new Z1(n,e,t,i)}async function IA(n,e){const t=we(n);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let r;return t.mutationQueue.getAllMutationBatches(i).next((a=>(r=a,t.Os(e),t.mutationQueue.getAllMutationBatches(i)))).next((a=>{const u=[],d=[];let g=Ge();for(const p of r){u.push(p.batchId);for(const v of p.mutations)g=g.add(v.key)}for(const p of a){d.push(p.batchId);for(const v of p.mutations)g=g.add(v.key)}return t.localDocuments.getDocuments(i,g).next((p=>({Ns:p,removedBatchIds:u,addedBatchIds:d})))}))}))}function eM(n,e){const t=we(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const r=e.batch.keys(),a=t.xs.newChangeBuffer({trackRemovals:!0});return(function(d,g,p,v){const T=p.batch,S=T.keys();let R=oe.resolve();return S.forEach((V=>{R=R.next((()=>v.getEntry(g,V))).next((G=>{const L=p.docVersions.get(V);Qe(L!==null,48541),G.version.compareTo(L)<0&&(T.applyToRemoteDocument(G,p),G.isValidDocument()&&(G.setReadTime(p.commitVersion),v.addEntry(G)))}))})),R.next((()=>d.mutationQueue.removeMutationBatch(g,T)))})(t,i,e,a).next((()=>a.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(d){let g=Ge();for(let p=0;p<d.mutationResults.length;++p)d.mutationResults[p].transformResults.length>0&&(g=g.add(d.batch.mutations[p].key));return g})(e)))).next((()=>t.localDocuments.getDocuments(i,r)))}))}function RA(n){const e=we(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function tM(n,e){const t=we(n),i=e.snapshotVersion;let r=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const u=t.xs.newChangeBuffer({trackRemovals:!0});r=t.vs;const d=[];e.targetChanges.forEach(((v,T)=>{const S=r.get(T);if(!S)return;d.push(t.li.removeMatchingKeys(a,v.removedDocuments,T).next((()=>t.li.addMatchingKeys(a,v.addedDocuments,T))));let R=S.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(T)!==null?R=R.withResumeToken(Zt.EMPTY_BYTE_STRING,Ie.min()).withLastLimboFreeSnapshotVersion(Ie.min()):v.resumeToken.approximateByteSize()>0&&(R=R.withResumeToken(v.resumeToken,i)),r=r.insert(T,R),(function(G,L,Y){return G.resumeToken.approximateByteSize()===0||L.snapshotVersion.toMicroseconds()-G.snapshotVersion.toMicroseconds()>=W1?!0:Y.addedDocuments.size+Y.modifiedDocuments.size+Y.removedDocuments.size>0})(S,R,v)&&d.push(t.li.updateTargetData(a,R))}));let g=ho(),p=Ge();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(a,v))})),d.push(nM(a,u,e.documentUpdates).next((v=>{g=v.Bs,p=v.Ls}))),!i.isEqual(Ie.min())){const v=t.li.getLastRemoteSnapshotVersion(a).next((T=>t.li.setTargetsMetadata(a,a.currentSequenceNumber,i)));d.push(v)}return oe.waitFor(d).next((()=>u.apply(a))).next((()=>t.localDocuments.getLocalViewOfDocuments(a,g,p))).next((()=>g))})).then((a=>(t.vs=r,a)))}function nM(n,e,t){let i=Ge(),r=Ge();return t.forEach((a=>i=i.add(a))),e.getEntries(n,i).next((a=>{let u=ho();return t.forEach(((d,g)=>{const p=a.get(d);g.isFoundDocument()!==p.isFoundDocument()&&(r=r.add(d)),g.isNoDocument()&&g.version.isEqual(Ie.min())?(e.removeEntry(d,g.readTime),u=u.insert(d,g)):!p.isValidDocument()||g.version.compareTo(p.version)>0||g.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(g),u=u.insert(d,g)):de(Zm,"Ignoring outdated watch update for ",d,". Current version:",p.version," Watch version:",g.version)})),{Bs:u,Ls:r}}))}function iM(n,e){const t=we(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=Fm),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function oM(n,e){const t=we(n);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let r;return t.li.getTargetData(i,e).next((a=>a?(r=a,oe.resolve(r)):t.li.allocateTargetId(i).next((u=>(r=new ss(e,u,"TargetPurposeListen",i.currentSequenceNumber),t.li.addTargetData(i,r).next((()=>r)))))))})).then((i=>{const r=t.vs.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.vs=t.vs.insert(i.targetId,i),t.Fs.set(e,i.targetId)),i}))}async function lm(n,e,t){const i=we(n),r=i.vs.get(e),a=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",a,(u=>i.persistence.referenceDelegate.removeTarget(u,r)))}catch(u){if(!Da(u))throw u;de(Zm,`Failed to update sequence numbers for target ${e}: ${u}`)}i.vs=i.vs.remove(e),i.Fs.delete(r.target)}function KT(n,e,t){const i=we(n);let r=Ie.min(),a=Ge();return i.persistence.runTransaction("Execute query","readwrite",(u=>(function(g,p,v){const T=we(g),S=T.Fs.get(v);return S!==void 0?oe.resolve(T.vs.get(S)):T.li.getTargetData(p,v)})(i,u,Ui(e)).next((d=>{if(d)return r=d.lastLimboFreeSnapshotVersion,i.li.getMatchingKeysForTargetId(u,d.targetId).next((g=>{a=g}))})).next((()=>i.Cs.getDocumentsMatchingQuery(u,e,t?r:Ie.min(),t?a:Ge()))).next((d=>(sM(i,zb(e),d),{documents:d,ks:a})))))}function sM(n,e,t){let i=n.Ms.get(e)||Ie.min();t.forEach(((r,a)=>{a.readTime.compareTo(i)>0&&(i=a.readTime)})),n.Ms.set(e,i)}class YT{constructor(){this.activeTargetIds=Xb()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class rM{constructor(){this.vo=new YT,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,i){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new YT,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aM{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $T="ConnectivityMonitor";class QT{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){de($T,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){de($T,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sf=null;function um(){return sf===null?sf=(function(){return 268435456+Math.round(2147483648*Math.random())})():sf++,"0x"+sf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lp="RestConnection",lM={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class uM{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${i}/databases/${r}`,this.$o=this.databaseId.database===bf?`project_id=${i}`:`project_id=${i}&database_id=${r}`}Wo(e,t,i,r,a){const u=um(),d=this.Qo(e,t.toUriEncodedString());de(Lp,`Sending RPC '${e}' ${u}:`,d,i);const g={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(g,r,a);const{host:p}=new URL(d),v=wa(p);return this.zo(e,d,g,i,v).then((T=>(de(Lp,`Received RPC '${e}' ${u}: `,T),T)),(T=>{throw ur(Lp,`RPC '${e}' ${u} failed with error: `,T,"url: ",d,"request:",i),T}))}jo(e,t,i,r,a,u){return this.Wo(e,t,i,r,a)}Go(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ba})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((r,a)=>e[a]=r)),i&&i.headers.forEach(((r,a)=>e[a]=r))}Qo(e,t){const i=lM[e];let r=`${this.qo}/v1/${t}:${i}`;return this.databaseInfo.apiKey&&(r=`${r}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),r}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cM{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const en="WebChannelConnection",Hl=(n,e,t)=>{n.listen(e,(i=>{try{t(i)}catch(r){setTimeout((()=>{throw r}),0)}}))};class ha extends uM{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!ha.c_){const e=DS();Hl(e,MS.STAT_EVENT,(t=>{t.stat===Wp.PROXY?de(en,"STAT_EVENT: detected buffering proxy"):t.stat===Wp.NOPROXY&&de(en,"STAT_EVENT: detected no buffering proxy")})),ha.c_=!0}}zo(e,t,i,r,a){const u=um();return new Promise(((d,g)=>{const p=new NS;p.setWithCredentials(!0),p.listenOnce(bS.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case hf.NO_ERROR:const T=p.getResponseJson();de(en,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(T)),d(T);break;case hf.TIMEOUT:de(en,`RPC '${e}' ${u} timed out`),g(new ye(re.DEADLINE_EXCEEDED,"Request time out"));break;case hf.HTTP_ERROR:const S=p.getStatus();if(de(en,`RPC '${e}' ${u} failed with status:`,S,"response text:",p.getResponseText()),S>0){let R=p.getResponseJson();Array.isArray(R)&&(R=R[0]);const V=R==null?void 0:R.error;if(V&&V.status&&V.message){const G=(function(Y){const ne=Y.toLowerCase().replace(/_/g,"-");return Object.values(re).indexOf(ne)>=0?ne:re.UNKNOWN})(V.status);g(new ye(G,V.message))}else g(new ye(re.UNKNOWN,"Server responded with status "+p.getStatus()))}else g(new ye(re.UNAVAILABLE,"Connection failed."));break;default:Ee(9055,{l_:e,streamId:u,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{de(en,`RPC '${e}' ${u} completed.`)}}));const v=JSON.stringify(r);de(en,`RPC '${e}' ${u} sending request:`,r),p.send(t,"POST",v,i,15)}))}T_(e,t,i){const r=um(),a=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=this.createWebChannelTransport(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(d.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(d.useFetchStreams=!0),this.Go(d.initMessageHeaders,t,i),d.encodeInitMessageHeaders=!0;const p=a.join("");de(en,`Creating RPC '${e}' stream ${r}: ${p}`,d);const v=u.createWebChannel(p,d);this.I_(v);let T=!1,S=!1;const R=new cM({Ho:V=>{S?de(en,`Not sending because RPC '${e}' stream ${r} is closed:`,V):(T||(de(en,`Opening RPC '${e}' stream ${r} transport.`),v.open(),T=!0),de(en,`RPC '${e}' stream ${r} sending:`,V),v.send(V))},Jo:()=>v.close()});return Hl(v,Kl.EventType.OPEN,(()=>{S||(de(en,`RPC '${e}' stream ${r} transport opened.`),R.i_())})),Hl(v,Kl.EventType.CLOSE,(()=>{S||(S=!0,de(en,`RPC '${e}' stream ${r} transport closed`),R.o_(),this.E_(v))})),Hl(v,Kl.EventType.ERROR,(V=>{S||(S=!0,ur(en,`RPC '${e}' stream ${r} transport errored. Name:`,V.name,"Message:",V.message),R.o_(new ye(re.UNAVAILABLE,"The operation could not be completed")))})),Hl(v,Kl.EventType.MESSAGE,(V=>{var G;if(!S){const L=V.data[0];Qe(!!L,16349);const Y=L,ne=(Y==null?void 0:Y.error)||((G=Y[0])==null?void 0:G.error);if(ne){de(en,`RPC '${e}' stream ${r} received error:`,ne);const j=ne.status;let ae=(function(M){const N=Mt[M];if(N!==void 0)return dA(N)})(j),Q=ne.message;j==="NOT_FOUND"&&Q.includes("database")&&Q.includes("does not exist")&&Q.includes(this.databaseId.database)&&ur(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),ae===void 0&&(ae=re.INTERNAL,Q="Unknown error status: "+j+" with message "+ne.message),S=!0,R.o_(new ye(ae,Q)),v.close()}else de(en,`RPC '${e}' stream ${r} received:`,L),R.__(L)}})),ha.u_(),setTimeout((()=>{R.s_()}),0),R}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,i){super.Go(e,t,i),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return xS()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fM(n){return new ha(n)}function kp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ld(n){return new m1(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ha.c_=!1;class wA{constructor(e,t,i=1e3,r=1.5,a=6e4){this.Ci=e,this.timerId=t,this.R_=i,this.A_=r,this.V_=a,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),i=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-i);r>0&&de("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,r,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XT="PersistentStream";class NA{constructor(e,t,i,r,a,u,d,g){this.Ci=e,this.b_=i,this.S_=r,this.connection=a,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=d,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new wA(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===re.RESOURCE_EXHAUSTED?(fo(t.toString()),fo("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===re.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,r])=>{this.D_===t&&this.G_(i,r)}),(i=>{e((()=>{const r=new ye(re.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(r)}))}))}G_(e,t){const i=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{i((()=>this.listener.Zo()))})),this.stream.Yo((()=>{i((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((r=>{i((()=>this.z_(r)))})),this.stream.onMessage((r=>{i((()=>++this.F_==1?this.H_(r):this.onNext(r)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return de(XT,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(de(XT,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class dM extends NA{constructor(e,t,i,r,a,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,r,u),this.serializer=a}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=_1(this.serializer,e),i=(function(a){if(!("targetChange"in a))return Ie.min();const u=a.targetChange;return u.targetIds&&u.targetIds.length?Ie.min():u.readTime?ki(u.readTime):Ie.min()})(e);return this.listener.J_(t,i)}Z_(e){const t={};t.database=am(this.serializer),t.addTarget=(function(a,u){let d;const g=u.target;if(d=nm(g)?{documents:E1(a,g)}:{query:S1(a,g).ft},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){d.resumeToken=mA(a,u.resumeToken);const p=om(a,u.expectedCount);p!==null&&(d.expectedCount=p)}else if(u.snapshotVersion.compareTo(Ie.min())>0){d.readTime=Uf(a,u.snapshotVersion.toTimestamp());const p=om(a,u.expectedCount);p!==null&&(d.expectedCount=p)}return d})(this.serializer,e);const i=C1(this.serializer,e);i&&(t.labels=i),this.K_(t)}X_(e){const t={};t.database=am(this.serializer),t.removeTarget=e,this.K_(t)}}class hM extends NA{constructor(e,t,i,r,a,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,r,u),this.serializer=a}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return Qe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Qe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Qe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=T1(e.writeResults,e.commitTime),i=ki(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=am(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>v1(this.serializer,i)))};this.K_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pM{}class mM extends pM{constructor(e,t,i,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new ye(re.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,i,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,u])=>this.connection.Wo(e,sm(t,i),r,a,u))).catch((a=>{throw a.name==="FirebaseError"?(a.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ye(re.UNKNOWN,a.toString())}))}jo(e,t,i,r,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,d])=>this.connection.jo(e,sm(t,i),r,u,d,a))).catch((u=>{throw u.name==="FirebaseError"?(u.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new ye(re.UNKNOWN,u.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function gM(n,e,t,i){return new mM(n,e,t,i)}class yM{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(fo(t),this.aa=!1):de("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cr="RemoteStore";class _M{constructor(e,t,i,r,a){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=a,this.Aa.Mo((u=>{i.enqueueAndForget((async()=>{hr(this)&&(de(cr,"Restarting streams for network reachability change."),await(async function(g){const p=we(g);p.Ea.add(4),await Tu(p),p.Va.set("Unknown"),p.Ea.delete(4),await ud(p)})(this))}))})),this.Va=new yM(i,r)}}async function ud(n){if(hr(n))for(const e of n.Ra)await e(!0)}async function Tu(n){for(const e of n.Ra)await e(!1)}function bA(n,e){const t=we(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),ng(t)?tg(t):xa(t).O_()&&eg(t,e))}function jm(n,e){const t=we(n),i=xa(t);t.Ia.delete(e),i.O_()&&MA(t,e),t.Ia.size===0&&(i.O_()?i.L_():hr(t)&&t.Va.set("Unknown"))}function eg(n,e){if(n.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ie.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}xa(n).Z_(e)}function MA(n,e){n.da.$e(e),xa(n).X_(e)}function tg(n){n.da=new f1({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),xa(n).start(),n.Va.ua()}function ng(n){return hr(n)&&!xa(n).x_()&&n.Ia.size>0}function hr(n){return we(n).Ea.size===0}function DA(n){n.da=void 0}async function vM(n){n.Va.set("Online")}async function TM(n){n.Ia.forEach(((e,t)=>{eg(n,e)}))}async function EM(n,e){DA(n),ng(n)?(n.Va.ha(e),tg(n)):n.Va.set("Unknown")}async function SM(n,e,t){if(n.Va.set("Online"),e instanceof pA&&e.state===2&&e.cause)try{await(async function(r,a){const u=a.cause;for(const d of a.targetIds)r.Ia.has(d)&&(await r.remoteSyncer.rejectListen(d,u),r.Ia.delete(d),r.da.removeTarget(d))})(n,e)}catch(i){de(cr,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await kf(n,i)}else if(e instanceof yf?n.da.Xe(e):e instanceof hA?n.da.st(e):n.da.tt(e),!t.isEqual(Ie.min()))try{const i=await RA(n.localStore);t.compareTo(i)>=0&&await(function(a,u){const d=a.da.Tt(u);return d.targetChanges.forEach(((g,p)=>{if(g.resumeToken.approximateByteSize()>0){const v=a.Ia.get(p);v&&a.Ia.set(p,v.withResumeToken(g.resumeToken,u))}})),d.targetMismatches.forEach(((g,p)=>{const v=a.Ia.get(g);if(!v)return;a.Ia.set(g,v.withResumeToken(Zt.EMPTY_BYTE_STRING,v.snapshotVersion)),MA(a,g);const T=new ss(v.target,g,p,v.sequenceNumber);eg(a,T)})),a.remoteSyncer.applyRemoteEvent(d)})(n,t)}catch(i){de(cr,"Failed to raise snapshot:",i),await kf(n,i)}}async function kf(n,e,t){if(!Da(e))throw e;n.Ea.add(1),await Tu(n),n.Va.set("Offline"),t||(t=()=>RA(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{de(cr,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await ud(n)}))}function xA(n,e){return e().catch((t=>kf(n,t,e)))}async function cd(n){const e=we(n),t=_s(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Fm;for(;AM(e);)try{const r=await iM(e.localStore,i);if(r===null){e.Ta.length===0&&t.L_();break}i=r.batchId,CM(e,r)}catch(r){await kf(e,r)}PA(e)&&VA(e)}function AM(n){return hr(n)&&n.Ta.length<10}function CM(n,e){n.Ta.push(e);const t=_s(n);t.O_()&&t.Y_&&t.ea(e.mutations)}function PA(n){return hr(n)&&!_s(n).x_()&&n.Ta.length>0}function VA(n){_s(n).start()}async function IM(n){_s(n).ra()}async function RM(n){const e=_s(n);for(const t of n.Ta)e.ea(t.mutations)}async function wM(n,e,t){const i=n.Ta.shift(),r=Km.from(i,e,t);await xA(n,(()=>n.remoteSyncer.applySuccessfulWrite(r))),await cd(n)}async function NM(n,e){e&&_s(n).Y_&&await(async function(i,r){if((function(u){return l1(u)&&u!==re.ABORTED})(r.code)){const a=i.Ta.shift();_s(i).B_(),await xA(i,(()=>i.remoteSyncer.rejectFailedWrite(a.batchId,r))),await cd(i)}})(n,e),PA(n)&&VA(n)}async function WT(n,e){const t=we(n);t.asyncQueue.verifyOperationInProgress(),de(cr,"RemoteStore received new credentials");const i=hr(t);t.Ea.add(3),await Tu(t),i&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await ud(t)}async function bM(n,e){const t=we(n);e?(t.Ea.delete(2),await ud(t)):e||(t.Ea.add(2),await Tu(t),t.Va.set("Unknown"))}function xa(n){return n.ma||(n.ma=(function(t,i,r){const a=we(t);return a.sa(),new dM(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,r)})(n.datastore,n.asyncQueue,{Zo:vM.bind(null,n),Yo:TM.bind(null,n),t_:EM.bind(null,n),J_:SM.bind(null,n)}),n.Ra.push((async e=>{e?(n.ma.B_(),ng(n)?tg(n):n.Va.set("Unknown")):(await n.ma.stop(),DA(n))}))),n.ma}function _s(n){return n.fa||(n.fa=(function(t,i,r){const a=we(t);return a.sa(),new hM(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,r)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),Yo:IM.bind(null,n),t_:NM.bind(null,n),ta:RM.bind(null,n),na:wM.bind(null,n)}),n.Ra.push((async e=>{e?(n.fa.B_(),await cd(n)):(await n.fa.stop(),n.Ta.length>0&&(de(cr,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ig{constructor(e,t,i,r,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=r,this.removalCallback=a,this.deferred=new or,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,r,a){const u=Date.now()+i,d=new ig(e,t,u,r,a);return d.start(i),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ye(re.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function og(n,e){if(fo("AsyncQueue",`${e}: ${n}`),Da(n))return new ye(re.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pa{static emptySet(e){return new pa(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||ve.comparator(t.key,i.key):(t,i)=>ve.comparator(t.key,i.key),this.keyedMap=Yl(),this.sortedSet=new ht(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof pa)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const r=t.getNext().key,a=i.getNext().key;if(!r.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new pa;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZT{constructor(){this.ga=new ht(ve.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ee(63341,{Vt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class Ra{constructor(e,t,i,r,a,u,d,g,p){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=a,this.fromCache=u,this.syncStateChanged=d,this.excludesMetadataChanges=g,this.hasCachedResults=p}static fromInitialDocuments(e,t,i,r,a){const u=[];return t.forEach((d=>{u.push({type:0,doc:d})})),new Ra(e,t,pa.emptySet(t),u,i,r,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&id(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==i[r].type||!t[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MM{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class DM{constructor(){this.queries=jT(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const r=we(t),a=r.queries;r.queries=jT(),a.forEach(((u,d)=>{for(const g of d.ba)g.onError(i)}))})(this,new ye(re.ABORTED,"Firestore shutting down"))}}function jT(){return new dr((n=>jS(n)),id)}async function xM(n,e){const t=we(n);let i=3;const r=e.query;let a=t.queries.get(r);a?!a.Sa()&&e.Da()&&(i=2):(a=new MM,i=e.Da()?0:1);try{switch(i){case 0:a.wa=await t.onListen(r,!0);break;case 1:a.wa=await t.onListen(r,!1);break;case 2:await t.onFirstRemoteStoreListen(r)}}catch(u){const d=og(u,`Initialization of query '${ra(e.query)}' failed`);return void e.onError(d)}t.queries.set(r,a),a.ba.push(e),e.va(t.onlineState),a.wa&&e.Fa(a.wa)&&sg(t)}async function PM(n,e){const t=we(n),i=e.query;let r=3;const a=t.queries.get(i);if(a){const u=a.ba.indexOf(e);u>=0&&(a.ba.splice(u,1),a.ba.length===0?r=e.Da()?0:1:!a.Sa()&&e.Da()&&(r=2))}switch(r){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function VM(n,e){const t=we(n);let i=!1;for(const r of e){const a=r.query,u=t.queries.get(a);if(u){for(const d of u.ba)d.Fa(r)&&(i=!0);u.wa=r}}i&&sg(t)}function UM(n,e,t){const i=we(n),r=i.queries.get(e);if(r)for(const a of r.ba)a.onError(t);i.queries.delete(e)}function sg(n){n.Ca.forEach((e=>{e.next()}))}var cm,eE;(eE=cm||(cm={})).Ma="default",eE.Cache="cache";class LM{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new Ra(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.Ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Ra.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==cm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UA{constructor(e){this.key=e}}class LA{constructor(e){this.key=e}}class kM{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Ge(),this.mutatedKeys=Ge(),this.eu=eA(e),this.tu=new pa(this.eu)}get nu(){return this.Za}ru(e,t){const i=t?t.iu:new ZT,r=t?t.tu:this.tu;let a=t?t.mutatedKeys:this.mutatedKeys,u=r,d=!1;const g=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,p=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((v,T)=>{const S=r.get(v),R=od(this.query,T)?T:null,V=!!S&&this.mutatedKeys.has(S.key),G=!!R&&(R.hasLocalMutations||this.mutatedKeys.has(R.key)&&R.hasCommittedMutations);let L=!1;S&&R?S.data.isEqual(R.data)?V!==G&&(i.track({type:3,doc:R}),L=!0):this.su(S,R)||(i.track({type:2,doc:R}),L=!0,(g&&this.eu(R,g)>0||p&&this.eu(R,p)<0)&&(d=!0)):!S&&R?(i.track({type:0,doc:R}),L=!0):S&&!R&&(i.track({type:1,doc:S}),L=!0,(g||p)&&(d=!0)),L&&(R?(u=u.add(R),a=G?a.add(v):a.delete(v)):(u=u.delete(v),a=a.delete(v)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const v=this.query.limitType==="F"?u.last():u.first();u=u.delete(v.key),a=a.delete(v.key),i.track({type:1,doc:v})}return{tu:u,iu:i,Ss:d,mutatedKeys:a}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,r){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const u=e.iu.ya();u.sort(((v,T)=>(function(R,V){const G=L=>{switch(L){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ee(20277,{Vt:L})}};return G(R)-G(V)})(v.type,T.type)||this.eu(v.doc,T.doc))),this.ou(i),r=r??!1;const d=t&&!r?this._u():[],g=this.Ya.size===0&&this.current&&!r?1:0,p=g!==this.Xa;return this.Xa=g,u.length!==0||p?{snapshot:new Ra(this.query,e.tu,a,u,e.mutatedKeys,g===0,p,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:d}:{au:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new ZT,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=Ge(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Ya=this.Ya.add(i.key))}));const t=[];return e.forEach((i=>{this.Ya.has(i)||t.push(new LA(i))})),this.Ya.forEach((i=>{e.has(i)||t.push(new UA(i))})),t}cu(e){this.Za=e.ks,this.Ya=Ge();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Ra.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const rg="SyncEngine";class OM{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class FM{constructor(e){this.key=e,this.hu=!1}}class GM{constructor(e,t,i,r,a,u){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=r,this.currentUser=a,this.maxConcurrentLimboResolutions=u,this.Pu={},this.Tu=new dr((d=>jS(d)),id),this.Iu=new Map,this.Eu=new Set,this.Ru=new ht(ve.comparator),this.Au=new Map,this.Vu=new Qm,this.du={},this.mu=new Map,this.fu=Ia.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function qM(n,e,t=!0){const i=BA(n);let r;const a=i.Tu.get(e);return a?(i.sharedClientState.addLocalQueryTarget(a.targetId),r=a.view.lu()):r=await kA(i,e,t,!0),r}async function BM(n,e){const t=BA(n);await kA(t,e,!0,!1)}async function kA(n,e,t,i){const r=await oM(n.localStore,Ui(e)),a=r.targetId,u=n.sharedClientState.addLocalQueryTarget(a,t);let d;return i&&(d=await HM(n,e,a,u==="current",r.resumeToken)),n.isPrimaryClient&&t&&bA(n.remoteStore,r),d}async function HM(n,e,t,i,r){n.pu=(T,S,R)=>(async function(G,L,Y,ne){let j=L.view.ru(Y);j.Ss&&(j=await KT(G.localStore,L.query,!1).then((({documents:M})=>L.view.ru(M,j))));const ae=ne&&ne.targetChanges.get(L.targetId),Q=ne&&ne.targetMismatches.get(L.targetId)!=null,ee=L.view.applyChanges(j,G.isPrimaryClient,ae,Q);return nE(G,L.targetId,ee.au),ee.snapshot})(n,T,S,R);const a=await KT(n.localStore,e,!0),u=new kM(e,a.ks),d=u.ru(a.documents),g=vu.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",r),p=u.applyChanges(d,n.isPrimaryClient,g);nE(n,t,p.au);const v=new OM(e,t,u);return n.Tu.set(e,v),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),p.snapshot}async function zM(n,e,t){const i=we(n),r=i.Tu.get(e),a=i.Iu.get(r.targetId);if(a.length>1)return i.Iu.set(r.targetId,a.filter((u=>!id(u,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await lm(i.localStore,r.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(r.targetId),t&&jm(i.remoteStore,r.targetId),fm(i,r.targetId)})).catch(Ma)):(fm(i,r.targetId),await lm(i.localStore,r.targetId,!0))}async function JM(n,e){const t=we(n),i=t.Tu.get(e),r=t.Iu.get(i.targetId);t.isPrimaryClient&&r.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),jm(t.remoteStore,i.targetId))}async function KM(n,e,t){const i=jM(n);try{const r=await(function(u,d){const g=we(u),p=ut.now(),v=d.reduce(((R,V)=>R.add(V.key)),Ge());let T,S;return g.persistence.runTransaction("Locally write mutations","readwrite",(R=>{let V=ho(),G=Ge();return g.xs.getEntries(R,v).next((L=>{V=L,V.forEach(((Y,ne)=>{ne.isValidDocument()||(G=G.add(Y))}))})).next((()=>g.localDocuments.getOverlayedDocuments(R,V))).next((L=>{T=L;const Y=[];for(const ne of d){const j=i1(ne,T.get(ne.key).overlayedDocument);j!=null&&Y.push(new Ss(ne.key,j,KS(j.value.mapValue),Li.exists(!0)))}return g.mutationQueue.addMutationBatch(R,p,Y,d)})).next((L=>{S=L;const Y=L.applyToLocalDocumentSet(T,G);return g.documentOverlayCache.saveOverlays(R,L.batchId,Y)}))})).then((()=>({batchId:S.batchId,changes:nA(T)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),(function(u,d,g){let p=u.du[u.currentUser.toKey()];p||(p=new ht(Fe)),p=p.insert(d,g),u.du[u.currentUser.toKey()]=p})(i,r.batchId,t),await Eu(i,r.changes),await cd(i.remoteStore)}catch(r){const a=og(r,"Failed to persist write");t.reject(a)}}async function OA(n,e){const t=we(n);try{const i=await tM(t.localStore,e);e.targetChanges.forEach(((r,a)=>{const u=t.Au.get(a);u&&(Qe(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?u.hu=!0:r.modifiedDocuments.size>0?Qe(u.hu,14607):r.removedDocuments.size>0&&(Qe(u.hu,42227),u.hu=!1))})),await Eu(t,i,e)}catch(i){await Ma(i)}}function tE(n,e,t){const i=we(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const r=[];i.Tu.forEach(((a,u)=>{const d=u.view.va(e);d.snapshot&&r.push(d.snapshot)})),(function(u,d){const g=we(u);g.onlineState=d;let p=!1;g.queries.forEach(((v,T)=>{for(const S of T.ba)S.va(d)&&(p=!0)})),p&&sg(g)})(i.eventManager,e),r.length&&i.Pu.J_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function YM(n,e,t){const i=we(n);i.sharedClientState.updateQueryState(e,"rejected",t);const r=i.Au.get(e),a=r&&r.key;if(a){let u=new ht(ve.comparator);u=u.insert(a,nn.newNoDocument(a,Ie.min()));const d=Ge().add(a),g=new ad(Ie.min(),new Map,new ht(Fe),u,d);await OA(i,g),i.Ru=i.Ru.remove(a),i.Au.delete(e),ag(i)}else await lm(i.localStore,e,!1).then((()=>fm(i,e,t))).catch(Ma)}async function $M(n,e){const t=we(n),i=e.batch.batchId;try{const r=await eM(t.localStore,e);GA(t,i,null),FA(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Eu(t,r)}catch(r){await Ma(r)}}async function QM(n,e,t){const i=we(n);try{const r=await(function(u,d){const g=we(u);return g.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let v;return g.mutationQueue.lookupMutationBatch(p,d).next((T=>(Qe(T!==null,37113),v=T.keys(),g.mutationQueue.removeMutationBatch(p,T)))).next((()=>g.mutationQueue.performConsistencyCheck(p))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(p,v,d))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,v))).next((()=>g.localDocuments.getDocuments(p,v)))}))})(i.localStore,e);GA(i,e,t),FA(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Eu(i,r)}catch(r){await Ma(r)}}function FA(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function GA(n,e,t){const i=we(n);let r=i.du[i.currentUser.toKey()];if(r){const a=r.get(e);a&&(t?a.reject(t):a.resolve(),r=r.remove(e)),i.du[i.currentUser.toKey()]=r}}function fm(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Iu.get(e))n.Tu.delete(i),t&&n.Pu.yu(i,t);n.Iu.delete(e),n.isPrimaryClient&&n.Vu.Gr(e).forEach((i=>{n.Vu.containsKey(i)||qA(n,i)}))}function qA(n,e){n.Eu.delete(e.path.canonicalString());const t=n.Ru.get(e);t!==null&&(jm(n.remoteStore,t),n.Ru=n.Ru.remove(e),n.Au.delete(t),ag(n))}function nE(n,e,t){for(const i of t)i instanceof UA?(n.Vu.addReference(i.key,e),XM(n,i)):i instanceof LA?(de(rg,"Document no longer in limbo: "+i.key),n.Vu.removeReference(i.key,e),n.Vu.containsKey(i.key)||qA(n,i.key)):Ee(19791,{wu:i})}function XM(n,e){const t=e.key,i=t.path.canonicalString();n.Ru.get(t)||n.Eu.has(i)||(de(rg,"New document in limbo: "+t),n.Eu.add(i),ag(n))}function ag(n){for(;n.Eu.size>0&&n.Ru.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new ve(lt.fromString(e)),i=n.fu.next();n.Au.set(i,new FM(t)),n.Ru=n.Ru.insert(t,i),bA(n.remoteStore,new ss(Ui(zm(t.path)),i,"TargetPurposeLimboResolution",jf.ce))}}async function Eu(n,e,t){const i=we(n),r=[],a=[],u=[];i.Tu.isEmpty()||(i.Tu.forEach(((d,g)=>{u.push(i.pu(g,e,t).then((p=>{var v;if((p||t)&&i.isPrimaryClient){const T=p?!p.fromCache:(v=t==null?void 0:t.targetChanges.get(g.targetId))==null?void 0:v.current;i.sharedClientState.updateQueryState(g.targetId,T?"current":"not-current")}if(p){r.push(p);const T=Wm.Es(g.targetId,p);a.push(T)}})))})),await Promise.all(u),i.Pu.J_(r),await(async function(g,p){const v=we(g);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(T=>oe.forEach(p,(S=>oe.forEach(S.Ts,(R=>v.persistence.referenceDelegate.addReference(T,S.targetId,R))).next((()=>oe.forEach(S.Is,(R=>v.persistence.referenceDelegate.removeReference(T,S.targetId,R)))))))))}catch(T){if(!Da(T))throw T;de(Zm,"Failed to update sequence numbers: "+T)}for(const T of p){const S=T.targetId;if(!T.fromCache){const R=v.vs.get(S),V=R.snapshotVersion,G=R.withLastLimboFreeSnapshotVersion(V);v.vs=v.vs.insert(S,G)}}})(i.localStore,a))}async function WM(n,e){const t=we(n);if(!t.currentUser.isEqual(e)){de(rg,"User change. New user:",e.toKey());const i=await IA(t.localStore,e);t.currentUser=e,(function(a,u){a.mu.forEach((d=>{d.forEach((g=>{g.reject(new ye(re.CANCELLED,u))}))})),a.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Eu(t,i.Ns)}}function ZM(n,e){const t=we(n),i=t.Au.get(e);if(i&&i.hu)return Ge().add(i.key);{let r=Ge();const a=t.Iu.get(e);if(!a)return r;for(const u of a){const d=t.Tu.get(u);r=r.unionWith(d.view.nu)}return r}}function BA(n){const e=we(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=OA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=ZM.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=YM.bind(null,e),e.Pu.J_=VM.bind(null,e.eventManager),e.Pu.yu=UM.bind(null,e.eventManager),e}function jM(n){const e=we(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=$M.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=QM.bind(null,e),e}class Of{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ld(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return j1(this.persistence,new X1,e.initialUser,this.serializer)}Cu(e){return new CA(Xm.Vi,this.serializer)}Du(e){return new rM}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Of.provider={build:()=>new Of};class eD extends Of{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Qe(this.persistence.referenceDelegate instanceof Lf,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new U1(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?vn.withCacheSize(this.cacheSizeBytes):vn.DEFAULT;return new CA((i=>Lf.Vi(i,t)),this.serializer)}}class dm{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>tE(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=WM.bind(null,this.syncEngine),await bM(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new DM})()}createDatastore(e){const t=ld(e.databaseInfo.databaseId),i=fM(e.databaseInfo);return gM(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,r,a,u,d){return new _M(i,r,a,u,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>tE(this.syncEngine,t,0)),(function(){return QT.v()?new QT:new aM})())}createSyncEngine(e,t){return(function(r,a,u,d,g,p,v){const T=new GM(r,a,u,d,g,p);return v&&(T.gu=!0),T})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(r){const a=we(r);de(cr,"RemoteStore shutting down."),a.Ea.add(5),await Tu(a),a.Aa.shutdown(),a.Va.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}dm.provider={build:()=>new dm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tD{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):fo("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vs="FirestoreClient";class nD{constructor(e,t,i,r,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this._databaseInfo=r,this.user=tn.UNAUTHENTICATED,this.clientId=km.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(i,(async u=>{de(vs,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(i,(u=>(de(vs,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new or;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=og(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function Op(n,e){n.asyncQueue.verifyOperationInProgress(),de(vs,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener((async r=>{i.isEqual(r)||(await IA(e.localStore,r),i=r)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function iE(n,e){n.asyncQueue.verifyOperationInProgress();const t=await iD(n);de(vs,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((i=>WT(e.remoteStore,i))),n.setAppCheckTokenChangeListener(((i,r)=>WT(e.remoteStore,r))),n._onlineComponents=e}async function iD(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){de(vs,"Using user provided OfflineComponentProvider");try{await Op(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(r){return r.name==="FirebaseError"?r.code===re.FAILED_PRECONDITION||r.code===re.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11})(t))throw t;ur("Error using user provided cache. Falling back to memory cache: "+t),await Op(n,new Of)}}else de(vs,"Using default OfflineComponentProvider"),await Op(n,new eD(void 0));return n._offlineComponents}async function HA(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(de(vs,"Using user provided OnlineComponentProvider"),await iE(n,n._uninitializedComponentsProvider._online)):(de(vs,"Using default OnlineComponentProvider"),await iE(n,new dm))),n._onlineComponents}function oD(n){return HA(n).then((e=>e.syncEngine))}async function oE(n){const e=await HA(n),t=e.eventManager;return t.onListen=qM.bind(null,e.syncEngine),t.onUnlisten=zM.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=BM.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=JM.bind(null,e.syncEngine),t}function sD(n,e,t,i){const r=new tD(i),a=new LM(e,r,t);return n.asyncQueue.enqueueAndForget((async()=>xM(await oE(n),a))),()=>{r.Nu(),n.asyncQueue.enqueueAndForget((async()=>PM(await oE(n),a)))}}function rD(n,e){const t=new or;return n.asyncQueue.enqueueAndForget((async()=>KM(await oD(n),e,t))),t.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zA(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aD="ComponentProvider",sE=new Map;function lD(n,e,t,i,r){return new Ib(n,e,t,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,zA(r.experimentalLongPollingOptions),r.useFetchStreams,r.isUsingEmulator,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JA="firestore.googleapis.com",rE=!0;class aE{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ye(re.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=JA,this.ssl=rE}else this.host=e.host,this.ssl=e.ssl??rE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=AA;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<P1)throw new ye(re.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}pb("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=zA(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new ye(re.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new ye(re.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new ye(re.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,r){return i.timeoutSeconds===r.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class fd{constructor(e,t,i,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new aE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ye(re.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ye(re.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new aE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new ob;switch(i.type){case"firstParty":return new lb(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ye(re.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=sE.get(t);i&&(de(aD,"Removing Datastore"),sE.delete(t),i.terminate())})(this),Promise.resolve()}}function uD(n,e,t,i={}){var p;n=fs(n,fd);const r=wa(e),a=n._getSettings(),u={...a,emulatorOptions:n._getEmulatorOptions()},d=`${e}:${t}`;r&&(TS(`https://${d}`),ES("Firestore",!0)),a.host!==JA&&a.host!==d&&ur("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...a,host:d,ssl:r,emulatorOptions:i};if(!rr(g,u)&&(n._setSettings(g),i.mockUserToken)){let v,T;if(typeof i.mockUserToken=="string")v=i.mockUserToken,T=tn.MOCK_USER;else{v=ww(i.mockUserToken,(p=n._app)==null?void 0:p.options.projectId);const S=i.mockUserToken.sub||i.mockUserToken.user_id;if(!S)throw new ye(re.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");T=new tn(S)}n._authCredentials=new sb(new VS(v,T))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dd{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new dd(this.firestore,e,this._query)}}class xt{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ds(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new xt(this.firestore,e,this._key)}toJSON(){return{type:xt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(yu(t,xt._jsonSchema))return new xt(e,i||null,new ve(lt.fromString(t.referencePath)))}}xt._jsonSchemaVersion="firestore/documentReference/1.0",xt._jsonSchema={type:Dt("string",xt._jsonSchemaVersion),referencePath:Dt("string")};class ds extends dd{constructor(e,t,i){super(e,t,zm(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new xt(this.firestore,null,new ve(e))}withConverter(e){return new ds(this.firestore,e,this._path)}}function cD(n,e,...t){if(n=rn(n),US("collection","path",e),n instanceof fd){const i=lt.fromString(e,...t);return TT(i),new ds(n,null,i)}{if(!(n instanceof xt||n instanceof ds))throw new ye(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(lt.fromString(e,...t));return TT(i),new ds(n.firestore,null,i)}}function lE(n,e,...t){if(n=rn(n),arguments.length===1&&(e=km.newId()),US("doc","path",e),n instanceof fd){const i=lt.fromString(e,...t);return vT(i),new xt(n,null,new ve(i))}{if(!(n instanceof xt||n instanceof ds))throw new ye(re.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(lt.fromString(e,...t));return vT(i),new xt(n.firestore,n instanceof ds?n.converter:null,new ve(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uE="AsyncQueue";class cE{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new wA(this,"async_queue_retry"),this._c=()=>{const i=kp();i&&de(uE,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=kp();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=kp();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new or;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Da(e))throw e;de(uE,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,fo("INTERNAL UNHANDLED ERROR: ",fE(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const r=ig.createAndSchedule(this,e,t,i,(a=>this.hc(a)));return this.tc.push(r),r}uc(){this.nc&&Ee(47125,{Pc:fE(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function fE(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class fu extends fd{constructor(e,t,i,r){super(e,t,i,r),this.type="firestore",this._queue=new cE,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new cE(e),this._firestoreClient=void 0,await e}}}function fD(n,e){const t=typeof n=="object"?n:Um(),i=typeof n=="string"?n:bf,r=Vm(t,"firestore").getImmediate({identifier:i});if(!r._initialized){const a=Iw("firestore");a&&uD(r,...a)}return r}function KA(n){if(n._terminated)throw new ye(re.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||dD(n),n._firestoreClient}function dD(n){var i,r,a,u;const e=n._freezeSettings(),t=lD(n._databaseId,((i=n._app)==null?void 0:i.options.appId)||"",n._persistenceKey,(r=n._app)==null?void 0:r.options.apiKey,e);n._componentsProvider||(a=e.localCache)!=null&&a._offlineComponentProvider&&((u=e.localCache)!=null&&u._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new nD(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(g){const p=g==null?void 0:g._online.build();return{_offline:g==null?void 0:g._offline.build(p),_online:p}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Jn(Zt.fromBase64String(e))}catch(t){throw new ye(re.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Jn(Zt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Jn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(yu(e,Jn._jsonSchema))return Jn.fromBase64String(e.bytes)}}Jn._jsonSchemaVersion="firestore/bytes/1.0",Jn._jsonSchema={type:Dt("string",Jn._jsonSchemaVersion),bytes:Dt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lg{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ye(re.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Wt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ug{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ye(re.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ye(re.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Fe(this._lat,e._lat)||Fe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Oi._jsonSchemaVersion}}static fromJSON(e){if(yu(e,Oi._jsonSchema))return new Oi(e.latitude,e.longitude)}}Oi._jsonSchemaVersion="firestore/geoPoint/1.0",Oi._jsonSchema={type:Dt("string",Oi._jsonSchemaVersion),latitude:Dt("number"),longitude:Dt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class li{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,r){if(i.length!==r.length)return!1;for(let a=0;a<i.length;++a)if(i[a]!==r[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:li._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(yu(e,li._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new li(e.vectorValues);throw new ye(re.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}li._jsonSchemaVersion="firestore/vectorValue/1.0",li._jsonSchema={type:Dt("string",li._jsonSchemaVersion),vectorValues:Dt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hD=/^__.*__$/;class pD{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Ss(e,this.data,this.fieldMask,t,this.fieldTransforms):new _u(e,this.data,t,this.fieldTransforms)}}class YA{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Ss(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function $A(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ee(40011,{dataSource:n})}}class cg{constructor(e,t,i,r,a,u){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=r,a===void 0&&this.validatePath(),this.fieldTransforms=a||[],this.fieldMask=u||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new cg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var r;const t=(r=this.path)==null?void 0:r.child(e),i=this.contextWith({path:t,arrayElement:!1});return i.validatePathSegment(e),i}childContextForFieldPath(e){var r;const t=(r=this.path)==null?void 0:r.child(e),i=this.contextWith({path:t,arrayElement:!1});return i.validatePath(),i}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Ff(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if($A(this.dataSource)&&hD.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class mD{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||ld(e)}createContext(e,t,i,r=!1){return new cg({dataSource:e,methodName:t,targetDoc:i,path:Wt.emptyPath(),arrayElement:!1,hasConverter:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function QA(n){const e=n._freezeSettings(),t=ld(n._databaseId);return new mD(n._databaseId,!!e.ignoreUndefinedProperties,t)}function gD(n,e,t,i,r,a={}){const u=n.createContext(a.merge||a.mergeFields?2:0,e,t,r);fg("Data must be an object, but it was:",u,i);const d=XA(i,u);let g,p;if(a.merge)g=new Dn(u.fieldMask),p=u.fieldTransforms;else if(a.mergeFields){const v=[];for(const T of a.mergeFields){const S=du(e,T,t);if(!u.contains(S))throw new ye(re.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);jA(v,S)||v.push(S)}g=new Dn(v),p=u.fieldTransforms.filter((T=>g.covers(T.field)))}else g=null,p=u.fieldTransforms;return new pD(new Tn(d),g,p)}class hd extends ug{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof hd}}function yD(n,e,t,i){const r=n.createContext(1,e,t);fg("Data must be an object, but it was:",r,i);const a=[],u=Tn.empty();Es(i,((g,p)=>{const v=ZA(e,g,t);p=rn(p);const T=r.childContextForFieldPath(v);if(p instanceof hd)a.push(v);else{const S=pd(p,T);S!=null&&(a.push(v),u.set(v,S))}}));const d=new Dn(a);return new YA(u,d,r.fieldTransforms)}function _D(n,e,t,i,r,a){const u=n.createContext(1,e,t),d=[du(e,i,t)],g=[r];if(a.length%2!=0)throw new ye(re.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<a.length;S+=2)d.push(du(e,a[S])),g.push(a[S+1]);const p=[],v=Tn.empty();for(let S=d.length-1;S>=0;--S)if(!jA(p,d[S])){const R=d[S];let V=g[S];V=rn(V);const G=u.childContextForFieldPath(R);if(V instanceof hd)p.push(R);else{const L=pd(V,G);L!=null&&(p.push(R),v.set(R,L))}}const T=new Dn(p);return new YA(v,T,u.fieldTransforms)}function pd(n,e){if(WA(n=rn(n)))return fg("Unsupported field value:",e,n),XA(n,e);if(n instanceof ug)return(function(i,r){if(!$A(r.dataSource))throw r.createError(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.createError(`${i._methodName}() is not currently supported inside arrays`);const a=i._toFieldTransform(r);a&&r.fieldTransforms.push(a)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(i,r){const a=[];let u=0;for(const d of i){let g=pd(d,r.childContextForArray(u));g==null&&(g={nullValue:"NULL_VALUE"}),a.push(g),u++}return{arrayValue:{values:a}}})(n,e)}return(function(i,r){if((i=rn(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return Wb(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const a=ut.fromDate(i);return{timestampValue:Uf(r.serializer,a)}}if(i instanceof ut){const a=new ut(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Uf(r.serializer,a)}}if(i instanceof Oi)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Jn)return{bytesValue:mA(r.serializer,i._byteString)};if(i instanceof xt){const a=r.databaseId,u=i.firestore._databaseId;if(!u.isEqual(a))throw r.createError(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:$m(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof li)return(function(u,d){const g=u instanceof li?u.toArray():u;return{mapValue:{fields:{[zS]:{stringValue:JS},[Mf]:{arrayValue:{values:g.map((v=>{if(typeof v!="number")throw d.createError("VectorValues must only contain numeric values.");return Jm(d.serializer,v)}))}}}}}})(i,r);if(SA(i))return i._toProto(r.serializer);throw r.createError(`Unsupported field value: ${Om(i)}`)})(n,e)}function XA(n,e){const t={};return OS(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Es(n,((i,r)=>{const a=pd(r,e.childContextForField(i));a!=null&&(t[i]=a)})),{mapValue:{fields:t}}}function WA(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof ut||n instanceof Oi||n instanceof Jn||n instanceof xt||n instanceof ug||n instanceof li||SA(n))}function fg(n,e,t){if(!WA(t)||!LS(t)){const i=Om(t);throw i==="an object"?e.createError(n+" a custom object"):e.createError(n+" "+i)}}function du(n,e,t){if((e=rn(e))instanceof lg)return e._internalPath;if(typeof e=="string")return ZA(n,e);throw Ff("Field path arguments must be of type string or ",n,!1,void 0,t)}const vD=new RegExp("[~\\*/\\[\\]]");function ZA(n,e,t){if(e.search(vD)>=0)throw Ff(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new lg(...e.split("."))._internalPath}catch{throw Ff(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Ff(n,e,t,i,r){const a=i&&!i.isEmpty(),u=r!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let g="";return(a||u)&&(g+=" (found",a&&(g+=` in field ${i}`),u&&(g+=` in document ${r}`),g+=")"),new ye(re.INVALID_ARGUMENT,d+n+g)}function jA(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TD{convertValue(e,t="none"){switch(ys(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Tt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(gs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ee(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Es(e,((r,a)=>{i[r]=this.convertValue(a,t)})),i}convertVectorValue(e){var i,r,a;const t=(a=(r=(i=e.fields)==null?void 0:i[Mf].arrayValue)==null?void 0:r.values)==null?void 0:a.map((u=>Tt(u.doubleValue)));return new li(t)}convertGeoPoint(e){return new Oi(Tt(e.latitude),Tt(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=td(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(ru(e));default:return null}}convertTimestamp(e){const t=ms(e);return new ut(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=lt.fromString(e);Qe(EA(i),9688,{name:e});const r=new au(i.get(1),i.get(3)),a=new ve(i.popFirst(5));return r.isEqual(t)||fo(`Document ${a} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eC extends TD{constructor(e){super(),this.firestore=e}convertBytes(e){return new Jn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new xt(this.firestore,null,t)}}const dE="@firebase/firestore",hE="4.11.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pE(n){return(function(t,i){if(typeof t!="object"||t===null)return!1;const r=t;for(const a of i)if(a in r&&typeof r[a]=="function")return!0;return!1})(n,["next","error","complete"])}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tC{constructor(e,t,i,r,a){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=r,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new xt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new ED(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const t=this._document.data.field(du("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class ED extends tC{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SD(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ye(re.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}function AD(n,e,t){let i;return i=n?n.toFirestore(e):e,i}class Ql{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class sr extends tC{constructor(e,t,i,r,a,u){super(e,t,i,r,u),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new _f(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(du("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ye(re.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=sr._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}sr._jsonSchemaVersion="firestore/documentSnapshot/1.0",sr._jsonSchema={type:Dt("string",sr._jsonSchemaVersion),bundleSource:Dt("string","DocumentSnapshot"),bundleName:Dt("string"),bundle:Dt("string")};class _f extends sr{data(e={}){return super.data(e)}}class ma{constructor(e,t,i,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Ql(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new _f(this._firestore,this._userDataWriter,i.key,i,new Ql(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ye(re.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(r,a){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map((d=>{const g=new _f(r._firestore,r._userDataWriter,d.doc.key,d.doc,new Ql(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter);return d.doc,{type:"added",doc:g,oldIndex:-1,newIndex:u++}}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter((d=>a||d.type!==3)).map((d=>{const g=new _f(r._firestore,r._userDataWriter,d.doc.key,d.doc,new Ql(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter);let p=-1,v=-1;return d.type!==0&&(p=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),d.type!==1&&(u=u.add(d.doc),v=u.indexOf(d.doc.key)),{type:CD(d.type),doc:g,oldIndex:p,newIndex:v}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ye(re.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ma._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=km.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],r=[];return this.docs.forEach((a=>{a._document!==null&&(t.push(a._document),i.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),r.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function CD(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ee(61501,{type:n})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ma._jsonSchemaVersion="firestore/querySnapshot/1.0",ma._jsonSchema={type:Dt("string",ma._jsonSchemaVersion),bundleSource:Dt("string","QuerySnapshot"),bundleName:Dt("string"),bundle:Dt("string")};function ID(n,e,t){n=fs(n,xt);const i=fs(n.firestore,fu),r=AD(n.converter,e),a=QA(i);return nC(i,[gD(a,"setDoc",n._key,r,n.converter!==null,t).toMutation(n._key,Li.none())])}function RD(n,e,t,...i){n=fs(n,xt);const r=fs(n.firestore,fu),a=QA(r);let u;return u=typeof(e=rn(e))=="string"||e instanceof lg?_D(a,"updateDoc",n._key,e,t,i):yD(a,"updateDoc",n._key,e),nC(r,[u.toMutation(n._key,Li.exists(!0))])}function wD(n,...e){var p,v,T;n=rn(n);let t={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||pE(e[i])||(t=e[i++]);const r={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(pE(e[i])){const S=e[i];e[i]=(p=S.next)==null?void 0:p.bind(S),e[i+1]=(v=S.error)==null?void 0:v.bind(S),e[i+2]=(T=S.complete)==null?void 0:T.bind(S)}let a,u,d;if(n instanceof xt)u=fs(n.firestore,fu),d=zm(n._key.path),a={next:S=>{e[i]&&e[i](ND(u,n,S))},error:e[i+1],complete:e[i+2]};else{const S=fs(n,dd);u=fs(S.firestore,fu),d=S._query;const R=new eC(u);a={next:V=>{e[i]&&e[i](new ma(u,R,S,V))},error:e[i+1],complete:e[i+2]},SD(n._query)}const g=KA(u);return sD(g,d,r,a)}function nC(n,e){const t=KA(n);return rD(t,e)}function ND(n,e,t){const i=t.docs.get(e._key),r=new eC(n);return new sr(n,r,e._key,i,new Ql(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){ib(Na),Ea(new ar("firestore",((i,{instanceIdentifier:r,options:a})=>{const u=i.getProvider("app").getImmediate(),d=new fu(new rb(i.getProvider("auth-internal")),new ub(u,i.getProvider("app-check-internal")),Rb(u,r),u);return a={useFetchStreams:t,...a},d._setSettings(a),d}),"PUBLIC").setMultipleInstances(!0)),us(dE,hE,e),us(dE,hE,"esm2020")})();function iC(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const bD=iC,oC=new mu("auth","Firebase",iC());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gf=new xm("@firebase/auth");function MD(n,...e){Gf.logLevel<=Oe.WARN&&Gf.warn(`Auth (${Na}): ${n}`,...e)}function vf(n,...e){Gf.logLevel<=Oe.ERROR&&Gf.error(`Auth (${Na}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function po(n,...e){throw dg(n,...e)}function Fi(n,...e){return dg(n,...e)}function sC(n,e,t){const i={...bD(),[e]:t};return new mu("auth","Firebase",i).create(e,{appName:n.name})}function hs(n){return sC(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function dg(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return oC.create(n,...e)}function Se(n,e,...t){if(!n)throw dg(e,...t)}function lo(n){const e="INTERNAL ASSERTION FAILED: "+n;throw vf(e),new Error(e)}function mo(n,e){n||lo(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hm(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function DD(){return mE()==="http:"||mE()==="https:"}function mE(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xD(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(DD()||Pw()||"connection"in navigator)?navigator.onLine:!0}function PD(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Su{constructor(e,t){this.shortDelay=e,this.longDelay=t,mo(t>e,"Short delay should be less than long delay!"),this.isMobile=Mw()||Vw()}get(){return xD()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hg(n,e){mo(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rC{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;lo("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;lo("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;lo("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VD={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UD=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],LD=new Su(3e4,6e4);function md(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function Pa(n,e,t,i,r={}){return aC(n,r,async()=>{let a={},u={};i&&(e==="GET"?u=i:a={body:JSON.stringify(i)});const d=gu({key:n.config.apiKey,...u}).slice(1),g=await n._getAdditionalHeaders();g["Content-Type"]="application/json",n.languageCode&&(g["X-Firebase-Locale"]=n.languageCode);const p={method:e,headers:g,...a};return xw()||(p.referrerPolicy="no-referrer"),n.emulatorConfig&&wa(n.emulatorConfig.host)&&(p.credentials="include"),rC.fetch()(await uC(n,n.config.apiHost,t,d),p)})}async function aC(n,e,t){n._canInitEmulator=!1;const i={...VD,...e};try{const r=new kD(n),a=await Promise.race([t(),r.promise]);r.clearNetworkTimeout();const u=await a.json();if("needConfirmation"in u)throw rf(n,"account-exists-with-different-credential",u);if(a.ok&&!("errorMessage"in u))return u;{const d=a.ok?u.errorMessage:u.error.message,[g,p]=d.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw rf(n,"credential-already-in-use",u);if(g==="EMAIL_EXISTS")throw rf(n,"email-already-in-use",u);if(g==="USER_DISABLED")throw rf(n,"user-disabled",u);const v=i[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw sC(n,v,p);po(n,v)}}catch(r){if(r instanceof yo)throw r;po(n,"network-request-failed",{message:String(r)})}}async function lC(n,e,t,i,r={}){const a=await Pa(n,e,t,i,r);return"mfaPendingCredential"in a&&po(n,"multi-factor-auth-required",{_serverResponse:a}),a}async function uC(n,e,t,i){const r=`${e}${t}?${i}`,a=n,u=a.config.emulator?hg(n.config,r):`${n.config.apiScheme}://${r}`;return UD.includes(t)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(u).toString():u}class kD{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(Fi(this.auth,"network-request-failed")),LD.get())})}}function rf(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const r=Fi(n,e,i);return r.customData._tokenResponse=t,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OD(n,e){return Pa(n,"POST","/v1/accounts:delete",e)}async function qf(n,e){return Pa(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nu(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function FD(n,e=!1){const t=rn(n),i=await t.getIdToken(e),r=pg(i);Se(r&&r.exp&&r.auth_time&&r.iat,t.auth,"internal-error");const a=typeof r.firebase=="object"?r.firebase:void 0,u=a==null?void 0:a.sign_in_provider;return{claims:r,token:i,authTime:nu(Fp(r.auth_time)),issuedAtTime:nu(Fp(r.iat)),expirationTime:nu(Fp(r.exp)),signInProvider:u||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function Fp(n){return Number(n)*1e3}function pg(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return vf("JWT malformed, contained fewer than 3 sections"),null;try{const r=gS(t);return r?JSON.parse(r):(vf("Failed to decode base64 JWT payload"),null)}catch(r){return vf("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function gE(n){const e=pg(n);return Se(e,"internal-error"),Se(typeof e.exp<"u","internal-error"),Se(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hu(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof yo&&GD(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function GD({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qD{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pm{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=nu(this.lastLoginAt),this.creationTime=nu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bf(n){var T;const e=n.auth,t=await n.getIdToken(),i=await hu(n,qf(e,{idToken:t}));Se(i==null?void 0:i.users.length,e,"internal-error");const r=i.users[0];n._notifyReloadListener(r);const a=(T=r.providerUserInfo)!=null&&T.length?cC(r.providerUserInfo):[],u=HD(n.providerData,a),d=n.isAnonymous,g=!(n.email&&r.passwordHash)&&!(u!=null&&u.length),p=d?g:!1,v={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:u,metadata:new pm(r.createdAt,r.lastLoginAt),isAnonymous:p};Object.assign(n,v)}async function BD(n){const e=rn(n);await Bf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function HD(n,e){return[...n.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function cC(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zD(n,e){const t=await aC(n,{},async()=>{const i=gu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:a}=n.config,u=await uC(n,r,"/v1/token",`key=${a}`),d=await n._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:d,body:i};return n.emulatorConfig&&wa(n.emulatorConfig.host)&&(g.credentials="include"),rC.fetch()(u,g)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function JD(n,e){return Pa(n,"POST","/v2/accounts:revokeToken",md(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Se(e.idToken,"internal-error"),Se(typeof e.idToken<"u","internal-error"),Se(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):gE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Se(e.length!==0,"internal-error");const t=gE(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Se(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:r,expiresIn:a}=await zD(e,t);this.updateTokensAndExpiration(i,r,Number(a))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:r,expirationTime:a}=t,u=new ga;return i&&(Se(typeof i=="string","internal-error",{appName:e}),u.refreshToken=i),r&&(Se(typeof r=="string","internal-error",{appName:e}),u.accessToken=r),a&&(Se(typeof a=="number","internal-error",{appName:e}),u.expirationTime=a),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ga,this.toJSON())}_performRefresh(){return lo("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jo(n,e){Se(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class ai{constructor({uid:e,auth:t,stsTokenManager:i,...r}){this.providerId="firebase",this.proactiveRefresh=new qD(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new pm(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const t=await hu(this,this.stsTokenManager.getToken(this.auth,e));return Se(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return FD(this,e)}reload(){return BD(this)}_assign(e){this!==e&&(Se(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ai({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Se(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await Bf(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ri(this.auth.app))return Promise.reject(hs(this.auth));const e=await this.getIdToken();return await hu(this,OD(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,r=t.email??void 0,a=t.phoneNumber??void 0,u=t.photoURL??void 0,d=t.tenantId??void 0,g=t._redirectEventId??void 0,p=t.createdAt??void 0,v=t.lastLoginAt??void 0,{uid:T,emailVerified:S,isAnonymous:R,providerData:V,stsTokenManager:G}=t;Se(T&&G,e,"internal-error");const L=ga.fromJSON(this.name,G);Se(typeof T=="string",e,"internal-error"),jo(i,e.name),jo(r,e.name),Se(typeof S=="boolean",e,"internal-error"),Se(typeof R=="boolean",e,"internal-error"),jo(a,e.name),jo(u,e.name),jo(d,e.name),jo(g,e.name),jo(p,e.name),jo(v,e.name);const Y=new ai({uid:T,auth:e,email:r,emailVerified:S,displayName:i,isAnonymous:R,photoURL:u,phoneNumber:a,tenantId:d,stsTokenManager:L,createdAt:p,lastLoginAt:v});return V&&Array.isArray(V)&&(Y.providerData=V.map(ne=>({...ne}))),g&&(Y._redirectEventId=g),Y}static async _fromIdTokenResponse(e,t,i=!1){const r=new ga;r.updateFromServerResponse(t);const a=new ai({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await Bf(a),a}static async _fromGetAccountInfoResponse(e,t,i){const r=t.users[0];Se(r.localId!==void 0,"internal-error");const a=r.providerUserInfo!==void 0?cC(r.providerUserInfo):[],u=!(r.email&&r.passwordHash)&&!(a!=null&&a.length),d=new ga;d.updateFromIdToken(i);const g=new ai({uid:r.localId,auth:e,stsTokenManager:d,isAnonymous:u}),p={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new pm(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(a!=null&&a.length)};return Object.assign(g,p),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yE=new Map;function uo(n){mo(n instanceof Function,"Expected a class definition");let e=yE.get(n);return e?(mo(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,yE.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fC{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}fC.type="NONE";const _E=fC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tf(n,e,t){return`firebase:${n}:${e}:${t}`}class ya{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:r,name:a}=this.auth;this.fullUserKey=Tf(this.userKey,r.apiKey,a),this.fullPersistenceKey=Tf("persistence",r.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await qf(this.auth,{idToken:e}).catch(()=>{});return t?ai._fromGetAccountInfoResponse(this.auth,t,e):null}return ai._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new ya(uo(_E),e,i);const r=(await Promise.all(t.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let a=r[0]||uo(_E);const u=Tf(i,e.config.apiKey,e.name);let d=null;for(const p of t)try{const v=await p._get(u);if(v){let T;if(typeof v=="string"){const S=await qf(e,{idToken:v}).catch(()=>{});if(!S)break;T=await ai._fromGetAccountInfoResponse(e,S,v)}else T=ai._fromJSON(e,v);p!==a&&(d=T),a=p;break}}catch{}const g=r.filter(p=>p._shouldAllowMigration);return!a._shouldAllowMigration||!g.length?new ya(a,e,i):(a=g[0],d&&await a._set(u,d.toJSON()),await Promise.all(t.map(async p=>{if(p!==a)try{await p._remove(u)}catch{}})),new ya(a,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vE(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(mC(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(dC(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(yC(e))return"Blackberry";if(_C(e))return"Webos";if(hC(e))return"Safari";if((e.includes("chrome/")||pC(e))&&!e.includes("edge/"))return"Chrome";if(gC(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function dC(n=sn()){return/firefox\//i.test(n)}function hC(n=sn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function pC(n=sn()){return/crios\//i.test(n)}function mC(n=sn()){return/iemobile/i.test(n)}function gC(n=sn()){return/android/i.test(n)}function yC(n=sn()){return/blackberry/i.test(n)}function _C(n=sn()){return/webos/i.test(n)}function mg(n=sn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function KD(n=sn()){var e;return mg(n)&&!!((e=window.navigator)!=null&&e.standalone)}function YD(){return Uw()&&document.documentMode===10}function vC(n=sn()){return mg(n)||gC(n)||_C(n)||yC(n)||/windows phone/i.test(n)||mC(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TC(n,e=[]){let t;switch(n){case"Browser":t=vE(sn());break;case"Worker":t=`${vE(sn())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Na}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $D{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=a=>new Promise((u,d)=>{try{const g=e(a);u(g)}catch(g){d(g)}});i.onAbort=t,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const r of t)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QD(n,e={}){return Pa(n,"GET","/v2/passwordPolicy",md(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XD=6;class WD{constructor(e){var i;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??XD,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,r,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZD{constructor(e,t,i,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new TE(this),this.idTokenSubscription=new TE(this),this.beforeStateQueue=new $D(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=oC,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=uo(t)),this._initializationPromise=this.queue(async()=>{var i,r,a;if(!this._deleted&&(this.persistenceManager=await ya.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((r=this._popupRedirectResolver)!=null&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((a=this.currentUser)==null?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await qf(this,{idToken:e}),i=await ai._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var a;if(ri(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(d,d))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(a=this.redirectUser)==null?void 0:a._redirectEventId,d=i==null?void 0:i._redirectEventId,g=await this.tryRedirectSignIn(e);(!u||u===d)&&(g!=null&&g.user)&&(i=g.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(u){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Se(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Bf(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=PD()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ri(this.app))return Promise.reject(hs(this));const t=e?rn(e):null;return t&&Se(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Se(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ri(this.app)?Promise.reject(hs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ri(this.app)?Promise.reject(hs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(uo(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await QD(this),t=new WD(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new mu("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await JD(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&uo(e)||this._popupRedirectResolver;Se(t,this,"argument-error"),this.redirectPersistenceManager=await ya.create(this,[uo(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,r){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let u=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Se(d,this,"internal-error"),d.then(()=>{u||a(this.currentUser)}),typeof t=="function"){const g=e.addObserver(t,i,r);return()=>{u=!0,g()}}else{const g=e.addObserver(t);return()=>{u=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Se(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=TC(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var r;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((r=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var t;if(ri(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&MD(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function gd(n){return rn(n)}class TE{constructor(e){this.auth=e,this.observer=null,this.addObserver=Hw(t=>this.observer=t)}get next(){return Se(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gg={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function jD(n){gg=n}function ex(n){return gg.loadJS(n)}function tx(){return gg.gapiScript}function nx(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ix(n,e){const t=Vm(n,"auth");if(t.isInitialized()){const r=t.getImmediate(),a=t.getOptions();if(rr(a,e??{}))return r;po(r,"already-initialized")}return t.initialize({options:e})}function ox(n,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(uo);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function sx(n,e,t){const i=gd(n);Se(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!1,a=EC(e),{host:u,port:d}=rx(e),g=d===null?"":`:${d}`,p={url:`${a}//${u}${g}/`},v=Object.freeze({host:u,port:d,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!i._canInitEmulator){Se(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Se(rr(p,i.config.emulator)&&rr(v,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=p,i.emulatorConfig=v,i.settings.appVerificationDisabledForTesting=!0,wa(u)?(TS(`${a}//${u}${g}`),ES("Auth",!0)):ax()}function EC(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function rx(n){const e=EC(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const a=r[1];return{host:a,port:EE(i.substr(a.length+1))}}else{const[a,u]=i.split(":");return{host:a,port:EE(u)}}}function EE(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function ax(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SC{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return lo("not implemented")}_getIdTokenResponse(e){return lo("not implemented")}_linkToIdToken(e,t){return lo("not implemented")}_getReauthenticationResolver(e){return lo("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _a(n,e){return lC(n,"POST","/v1/accounts:signInWithIdp",md(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lx="http://localhost";class fr extends SC{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new fr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):po("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r,...a}=t;if(!i||!r)return null;const u=new fr(i,r);return u.idToken=a.idToken||void 0,u.accessToken=a.accessToken||void 0,u.secret=a.secret,u.nonce=a.nonce,u.pendingToken=a.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return _a(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,_a(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,_a(e,t)}buildRequest(){const e={requestUri:lx,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=gu(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AC{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Au extends AC{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts extends Au{constructor(){super("facebook.com")}static credential(e){return fr._fromParams({providerId:ts.PROVIDER_ID,signInMethod:ts.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ts.credentialFromTaggedObject(e)}static credentialFromError(e){return ts.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ts.credential(e.oauthAccessToken)}catch{return null}}}ts.FACEBOOK_SIGN_IN_METHOD="facebook.com";ts.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns extends Au{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return fr._fromParams({providerId:ns.PROVIDER_ID,signInMethod:ns.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ns.credentialFromTaggedObject(e)}static credentialFromError(e){return ns.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return ns.credential(t,i)}catch{return null}}}ns.GOOGLE_SIGN_IN_METHOD="google.com";ns.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is extends Au{constructor(){super("github.com")}static credential(e){return fr._fromParams({providerId:is.PROVIDER_ID,signInMethod:is.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return is.credentialFromTaggedObject(e)}static credentialFromError(e){return is.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return is.credential(e.oauthAccessToken)}catch{return null}}}is.GITHUB_SIGN_IN_METHOD="github.com";is.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os extends Au{constructor(){super("twitter.com")}static credential(e,t){return fr._fromParams({providerId:os.PROVIDER_ID,signInMethod:os.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return os.credentialFromTaggedObject(e)}static credentialFromError(e){return os.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return os.credential(t,i)}catch{return null}}}os.TWITTER_SIGN_IN_METHOD="twitter.com";os.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ux(n,e){return lC(n,"POST","/v1/accounts:signUp",md(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,r=!1){const a=await ai._fromIdTokenResponse(e,i,r),u=SE(i);return new Ts({user:a,providerId:u,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const r=SE(i);return new Ts({user:e,providerId:r,_tokenResponse:i,operationType:t})}}function SE(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cx(n){var r;if(ri(n.app))return Promise.reject(hs(n));const e=gd(n);if(await e._initializationPromise,(r=e.currentUser)!=null&&r.isAnonymous)return new Ts({user:e.currentUser,providerId:null,operationType:"signIn"});const t=await ux(e,{returnSecureToken:!0}),i=await Ts._fromIdTokenResponse(e,"signIn",t,!0);return await e._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hf extends yo{constructor(e,t,i,r){super(t.code,t.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,Hf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,r){return new Hf(e,t,i,r)}}function CC(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Hf._fromErrorAndOperation(n,a,e,i):a})}async function fx(n,e,t=!1){const i=await hu(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Ts._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dx(n,e,t=!1){const{auth:i}=n;if(ri(i.app))return Promise.reject(hs(i));const r="reauthenticate";try{const a=await hu(n,CC(i,r,e,n),t);Se(a.idToken,i,"internal-error");const u=pg(a.idToken);Se(u,i,"internal-error");const{sub:d}=u;return Se(n.uid===d,i,"user-mismatch"),Ts._forOperation(n,r,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&po(i,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hx(n,e,t=!1){if(ri(n.app))return Promise.reject(hs(n));const i="signIn",r=await CC(n,i,e),a=await Ts._fromIdTokenResponse(n,i,r);return t||await n._updateCurrentUser(a.user),a}function px(n,e,t,i){return rn(n).onIdTokenChanged(e,t,i)}function mx(n,e,t){return rn(n).beforeAuthStateChanged(e,t)}function gx(n,e,t,i){return rn(n).onAuthStateChanged(e,t,i)}const zf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IC{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(zf,"1"),this.storage.removeItem(zf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yx=1e3,_x=10;class RC extends IC{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=vC(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),r=this.localCache[t];i!==r&&e(t,r,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,d,g)=>{this.notifyListeners(u,g)});return}const i=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const u=this.storage.getItem(i);!t&&this.localCache[i]===u||this.notifyListeners(i,u)},a=this.storage.getItem(i);YD()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,_x):r()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},yx)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}RC.type="LOCAL";const vx=RC;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wC extends IC{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}wC.type="SESSION";const NC=wC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tx(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(r=>r.isListeningto(e));if(t)return t;const i=new yd(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:r,data:a}=t.data,u=this.handlersMap[r];if(!(u!=null&&u.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const d=Array.from(u).map(async p=>p(t.origin,a)),g=await Tx(d);t.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:g})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}yd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yg(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ex{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let a,u;return new Promise((d,g)=>{const p=yg("",20);r.port1.start();const v=setTimeout(()=>{g(new Error("unsupported_event"))},i);u={messageChannel:r,onMessage(T){const S=T;if(S.data.eventId===p)switch(S.data.status){case"ack":clearTimeout(v),a=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),d(S.data.response);break;default:clearTimeout(v),clearTimeout(a),g(new Error("invalid_response"));break}}},this.handlers.add(u),r.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:p,data:t},[r.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gi(){return window}function Sx(n){Gi().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bC(){return typeof Gi().WorkerGlobalScope<"u"&&typeof Gi().importScripts=="function"}async function Ax(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Cx(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function Ix(){return bC()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MC="firebaseLocalStorageDb",Rx=1,Jf="firebaseLocalStorage",DC="fbase_key";class Cu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function _d(n,e){return n.transaction([Jf],e?"readwrite":"readonly").objectStore(Jf)}function wx(){const n=indexedDB.deleteDatabase(MC);return new Cu(n).toPromise()}function mm(){const n=indexedDB.open(MC,Rx);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(Jf,{keyPath:DC})}catch(r){t(r)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(Jf)?e(i):(i.close(),await wx(),e(await mm()))})})}async function AE(n,e,t){const i=_d(n,!0).put({[DC]:e,value:t});return new Cu(i).toPromise()}async function Nx(n,e){const t=_d(n,!1).get(e),i=await new Cu(t).toPromise();return i===void 0?null:i.value}function CE(n,e){const t=_d(n,!0).delete(e);return new Cu(t).toPromise()}const bx=800,Mx=3;class xC{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await mm(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>Mx)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return bC()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=yd._getInstance(Ix()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,i;if(this.activeServiceWorker=await Ax(),!this.activeServiceWorker)return;this.sender=new Ex(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Cx()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await mm();return await AE(e,zf,"1"),await CE(e,zf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>AE(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>Nx(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>CE(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const a=_d(r,!1).getAll();return new Cu(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:r,value:a}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(a)&&(this.notifyListeners(r,a),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),bx)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}xC.type="LOCAL";const Dx=xC;new Su(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xx(n,e){return e?uo(e):(Se(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _g extends SC{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return _a(e,this._buildIdpRequest())}_linkToIdToken(e,t){return _a(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return _a(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Px(n){return hx(n.auth,new _g(n),n.bypassAuthState)}function Vx(n){const{auth:e,user:t}=n;return Se(t,e,"internal-error"),dx(t,new _g(n),n.bypassAuthState)}async function Ux(n){const{auth:e,user:t}=n;return Se(t,e,"internal-error"),fx(t,new _g(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PC{constructor(e,t,i,r,a=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:r,tenantId:a,error:u,type:d}=e;if(u){this.reject(u);return}const g={auth:this.auth,requestUri:t,sessionId:i,tenantId:a||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(g))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Px;case"linkViaPopup":case"linkViaRedirect":return Ux;case"reauthViaPopup":case"reauthViaRedirect":return Vx;default:po(this.auth,"internal-error")}}resolve(e){mo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){mo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lx=new Su(2e3,1e4);class ca extends PC{constructor(e,t,i,r,a){super(e,t,r,a),this.provider=i,this.authWindow=null,this.pollId=null,ca.currentPopupAction&&ca.currentPopupAction.cancel(),ca.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Se(e,this.auth,"internal-error"),e}async onExecution(){mo(this.filter.length===1,"Popup operations only handle one event");const e=yg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Fi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Fi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ca.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if((i=(t=this.authWindow)==null?void 0:t.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Fi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Lx.get())};e()}}ca.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kx="pendingRedirect",Ef=new Map;class Ox extends PC{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=Ef.get(this.auth._key());if(!e){try{const i=await Fx(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Ef.set(this.auth._key(),e)}return this.bypassAuthState||Ef.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Fx(n,e){const t=Bx(e),i=qx(n);if(!await i._isAvailable())return!1;const r=await i._get(t)==="true";return await i._remove(t),r}function Gx(n,e){Ef.set(n._key(),e)}function qx(n){return uo(n._redirectPersistence)}function Bx(n){return Tf(kx,n.config.apiKey,n.name)}async function Hx(n,e,t=!1){if(ri(n.app))return Promise.reject(hs(n));const i=gd(n),r=xx(i,e),u=await new Ox(i,r,t).execute();return u&&!t&&(delete u.user._redirectEventId,await i._persistUserIfCurrent(u.user),await i._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zx=600*1e3;class Jx{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Kx(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!VC(e)){const r=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";t.onError(Fi(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=zx&&this.cachedEventUids.clear(),this.cachedEventUids.has(IE(e))}saveEventToCache(e){this.cachedEventUids.add(IE(e)),this.lastProcessedEventTime=Date.now()}}function IE(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function VC({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Kx(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return VC(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yx(n,e={}){return Pa(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $x=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Qx=/^https?/;async function Xx(n){if(n.config.emulator)return;const{authorizedDomains:e}=await Yx(n);for(const t of e)try{if(Wx(t))return}catch{}po(n,"unauthorized-domain")}function Wx(n){const e=hm(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const u=new URL(n);return u.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===i}if(!Qx.test(t))return!1;if($x.test(n))return i===n;const r=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zx=new Su(3e4,6e4);function RE(){const n=Gi().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function jx(n){return new Promise((e,t)=>{var r,a,u;function i(){RE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{RE(),t(Fi(n,"network-request-failed"))},timeout:Zx.get()})}if((a=(r=Gi().gapi)==null?void 0:r.iframes)!=null&&a.Iframe)e(gapi.iframes.getContext());else if((u=Gi().gapi)!=null&&u.load)i();else{const d=nx("iframefcb");return Gi()[d]=()=>{gapi.load?i():t(Fi(n,"network-request-failed"))},ex(`${tx()}?onload=${d}`).catch(g=>t(g))}}).catch(e=>{throw Sf=null,e})}let Sf=null;function eP(n){return Sf=Sf||jx(n),Sf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tP=new Su(5e3,15e3),nP="__/auth/iframe",iP="emulator/auth/iframe",oP={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},sP=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function rP(n){const e=n.config;Se(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?hg(e,iP):`https://${n.config.authDomain}/${nP}`,i={apiKey:e.apiKey,appName:n.name,v:Na},r=sP.get(n.config.apiHost);r&&(i.eid=r);const a=n._getFrameworks();return a.length&&(i.fw=a.join(",")),`${t}?${gu(i).slice(1)}`}async function aP(n){const e=await eP(n),t=Gi().gapi;return Se(t,n,"internal-error"),e.open({where:document.body,url:rP(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:oP,dontclear:!0},i=>new Promise(async(r,a)=>{await i.restyle({setHideOnLeave:!1});const u=Fi(n,"network-request-failed"),d=Gi().setTimeout(()=>{a(u)},tP.get());function g(){Gi().clearTimeout(d),r(i)}i.ping(g).then(g,()=>{a(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lP={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},uP=500,cP=600,fP="_blank",dP="http://localhost";class wE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function hP(n,e,t,i=uP,r=cP){const a=Math.max((window.screen.availHeight-r)/2,0).toString(),u=Math.max((window.screen.availWidth-i)/2,0).toString();let d="";const g={...lP,width:i.toString(),height:r.toString(),top:a,left:u},p=sn().toLowerCase();t&&(d=pC(p)?fP:t),dC(p)&&(e=e||dP,g.scrollbars="yes");const v=Object.entries(g).reduce((S,[R,V])=>`${S}${R}=${V},`,"");if(KD(p)&&d!=="_self")return pP(e||"",d),new wE(null);const T=window.open(e||"",d,v);Se(T,n,"popup-blocked");try{T.focus()}catch{}return new wE(T)}function pP(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mP="__/auth/handler",gP="emulator/auth/handler",yP=encodeURIComponent("fac");async function NE(n,e,t,i,r,a){Se(n.config.authDomain,n,"auth-domain-config-required"),Se(n.config.apiKey,n,"invalid-api-key");const u={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:Na,eventId:r};if(e instanceof AC){e.setDefaultLanguage(n.languageCode),u.providerId=e.providerId||"",Bw(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,T]of Object.entries({}))u[v]=T}if(e instanceof Au){const v=e.getScopes().filter(T=>T!=="");v.length>0&&(u.scopes=v.join(","))}n.tenantId&&(u.tid=n.tenantId);const d=u;for(const v of Object.keys(d))d[v]===void 0&&delete d[v];const g=await n._getAppCheckToken(),p=g?`#${yP}=${encodeURIComponent(g)}`:"";return`${_P(n)}?${gu(d).slice(1)}${p}`}function _P({config:n}){return n.emulator?hg(n,gP):`https://${n.authDomain}/${mP}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gp="webStorageSupport";class vP{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=NC,this._completeRedirectFn=Hx,this._overrideRedirectResult=Gx}async _openPopup(e,t,i,r){var u;mo((u=this.eventManagers[e._key()])==null?void 0:u.manager,"_initialize() not called before _openPopup()");const a=await NE(e,t,i,hm(),r);return hP(e,a,yg())}async _openRedirect(e,t,i,r){await this._originValidation(e);const a=await NE(e,t,i,hm(),r);return Sx(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:r,promise:a}=this.eventManagers[t];return r?Promise.resolve(r):(mo(a,"If manager is not set, promise should be"),a)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await aP(e),i=new Jx(e);return t.register("authEvent",r=>(Se(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Gp,{type:Gp},r=>{var u;const a=(u=r==null?void 0:r[0])==null?void 0:u[Gp];a!==void 0&&t(!!a),po(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Xx(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return vC()||hC()||mg()}}const TP=vP;var bE="@firebase/auth",ME="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EP{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Se(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SP(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function AP(n){Ea(new ar("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:u,authDomain:d}=i.options;Se(u&&!u.includes(":"),"invalid-api-key",{appName:i.name});const g={apiKey:u,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:TC(n)},p=new ZD(i,r,a,g);return ox(p,t),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Ea(new ar("auth-internal",e=>{const t=gd(e.getProvider("auth").getImmediate());return(i=>new EP(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),us(bE,ME,SP(n)),us(bE,ME,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CP=300,IP=vS("authIdTokenMaxAge")||CP;let DE=null;const RP=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>IP)return;const r=t==null?void 0:t.token;DE!==r&&(DE=r,await fetch(n,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function wP(n=Um()){const e=Vm(n,"auth");if(e.isInitialized())return e.getImmediate();const t=ix(n,{popupRedirectResolver:TP,persistence:[Dx,vx,NC]}),i=vS("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(i,location.origin);if(location.origin===a.origin){const u=RP(a.toString());mx(t,u,()=>u(t.currentUser)),px(t,d=>u(d))}}const r=yS("auth");return r&&sx(t,`http://${r}`),t}function NP(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}jD({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=r=>{const a=Fi("internal-error");a.customData=r,t(a)},i.type="text/javascript",i.charset="UTF-8",NP().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});AP("Browser");/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UC=(...n)=>n.filter((e,t,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bP=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MP=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,i)=>i?i.toUpperCase():t.toLowerCase());/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xE=n=>{const e=MP(n);return e.charAt(0).toUpperCase()+e.slice(1)};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var DP={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xP=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0;return!1};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PP=Lt.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:i,className:r="",children:a,iconNode:u,...d},g)=>Lt.createElement("svg",{ref:g,...DP,width:e,height:e,stroke:n,strokeWidth:i?Number(t)*24/Number(e):t,className:UC("lucide",r),...!a&&!xP(d)&&{"aria-hidden":"true"},...d},[...u.map(([p,v])=>Lt.createElement(p,v)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const En=(n,e)=>{const t=Lt.forwardRef(({className:i,...r},a)=>Lt.createElement(PP,{ref:a,iconNode:e,className:UC(`lucide-${bP(xE(n))}`,`lucide-${n}`,i),...r}));return t.displayName=xE(n),t};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VP=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],UP=En("award",VP);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LP=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],kP=En("chevron-left",LP);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OP=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],FP=En("chevron-right",OP);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GP=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],qP=En("circle-alert",GP);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BP=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],HP=En("cloud",BP);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zP=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],JP=En("download",zP);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KP=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],YP=En("loader-circle",KP);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $P=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],QP=En("save",$P);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XP=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],WP=En("search",XP);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZP=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],jP=En("sparkles",ZP);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eV=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],tV=En("trending-up",eV);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nV=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],iV=En("trophy",nV);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oV=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],sV=En("user-plus",oV);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rV=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],aV=En("users",rV),af=[{id:"1",name:"Chloris Chan",manager:"Money Chin"},{id:"2",name:"Yumi So",manager:"Chloris Chan"},{id:"3",name:"Harry Mak",manager:"Money Chin"},{id:"4",name:"Harley Lui",manager:"Chloris Chan"},{id:"5",name:"Tony Ng",manager:"Andy Lee"},{id:"6",name:"Tiffany Leung",manager:"Carrie Ng"},{id:"7",name:"Wayne Leung",manager:"Carrie Ng"},{id:"8",name:"Lo Kwun Hin",manager:"Charlton Lam"},{id:"9",name:"Charlton Lam",manager:"Fasun"},{id:"10",name:"Stephen Fok",manager:"Sonic Chan"},{id:"11",name:"Tracy Ho",manager:"Sonic Chan"},{id:"12",name:"Matt Tsang",manager:"Sonic Chan"},{id:"13",name:"Mike Ngai",manager:"Money Chin"},{id:"14",name:"Chloe Lam",manager:"Wayne Leung"}],lV=88e3,qp=8,PE=20,uV=["11/2 - 17/2","18/2 - 24/2","25/2 - 3/3","4/3 - 10/3","11/3 - 17/3","18/3 - 24/3","25/3 - 31/3","1/4 - 7/4"];var cV={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let fV,dV;function hV(){return{geminiUrl:fV,vertexUrl:dV}}function pV(n,e,t,i){var r,a;if(!(n!=null&&n.baseUrl)){const u=hV();return e?(r=u.vertexUrl)!==null&&r!==void 0?r:t:(a=u.geminiUrl)!==null&&a!==void 0?a:i}return n.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class _o{}function fe(n,e){const t=/\{([^}]+)\}/g;return n.replace(t,(i,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){const a=e[r];return a!=null?String(a):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function h(n,e,t){for(let a=0;a<e.length-1;a++){const u=e[a];if(u.endsWith("[]")){const d=u.slice(0,-2);if(!(d in n))if(Array.isArray(t))n[d]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${u}`);if(Array.isArray(n[d])){const g=n[d];if(Array.isArray(t))for(let p=0;p<g.length;p++){const v=g[p];h(v,e.slice(a+1),t[p])}else for(const p of g)h(p,e.slice(a+1),t)}return}else if(u.endsWith("[0]")){const d=u.slice(0,-3);d in n||(n[d]=[{}]);const g=n[d];h(g[0],e.slice(a+1),t);return}(!n[u]||typeof n[u]!="object")&&(n[u]={}),n=n[u]}const i=e[e.length-1],r=n[i];if(r!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===r)return;if(typeof r=="object"&&typeof t=="object"&&r!==null&&t!==null)Object.assign(r,t);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof t=="object"&&t!==null&&!Array.isArray(t)?Object.assign(n,t):n[i]=t}function f(n,e,t=void 0){try{if(e.length===1&&e[0]==="_self")return n;for(let i=0;i<e.length;i++){if(typeof n!="object"||n===null)return t;const r=e[i];if(r.endsWith("[]")){const a=r.slice(0,-2);if(a in n){const u=n[a];return Array.isArray(u)?u.map(d=>f(d,e.slice(i+1),t)):t}else return t}else n=n[r]}return n}catch(i){if(i instanceof TypeError)return t;throw i}}function mV(n,e){for(const[t,i]of Object.entries(e)){const r=t.split("."),a=i.split("."),u=new Set;let d=-1;for(let g=0;g<r.length;g++)if(r[g]==="*"){d=g;break}if(d!==-1&&a.length>d)for(let g=d;g<a.length;g++){const p=a[g];p!=="*"&&!p.endsWith("[]")&&!p.endsWith("[0]")&&u.add(p)}gm(n,r,a,0,u)}}function gm(n,e,t,i,r){if(i>=e.length||typeof n!="object"||n===null)return;const a=e[i];if(a.endsWith("[]")){const u=a.slice(0,-2),d=n;if(u in d&&Array.isArray(d[u]))for(const g of d[u])gm(g,e,t,i+1,r)}else if(a==="*"){if(typeof n=="object"&&n!==null&&!Array.isArray(n)){const u=n,d=Object.keys(u).filter(p=>!p.startsWith("_")&&!r.has(p)),g={};for(const p of d)g[p]=u[p];for(const[p,v]of Object.entries(g)){const T=[];for(const S of t.slice(i))S==="*"?T.push(p):T.push(S);h(u,T,v)}for(const p of d)delete u[p]}}else{const u=n;a in u&&gm(u[a],e,t,i+1,r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function vg(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function gV(n){const e={},t=f(n,["operationName"]);t!=null&&h(e,["operationName"],t);const i=f(n,["resourceName"]);return i!=null&&h(e,["_url","resourceName"],i),e}function yV(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const i=f(n,["metadata"]);i!=null&&h(e,["metadata"],i);const r=f(n,["done"]);r!=null&&h(e,["done"],r);const a=f(n,["error"]);a!=null&&h(e,["error"],a);const u=f(n,["response","generateVideoResponse"]);return u!=null&&h(e,["response"],vV(u)),e}function _V(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const i=f(n,["metadata"]);i!=null&&h(e,["metadata"],i);const r=f(n,["done"]);r!=null&&h(e,["done"],r);const a=f(n,["error"]);a!=null&&h(e,["error"],a);const u=f(n,["response"]);return u!=null&&h(e,["response"],TV(u)),e}function vV(n){const e={},t=f(n,["generatedSamples"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(u=>EV(u))),h(e,["generatedVideos"],a)}const i=f(n,["raiMediaFilteredCount"]);i!=null&&h(e,["raiMediaFilteredCount"],i);const r=f(n,["raiMediaFilteredReasons"]);return r!=null&&h(e,["raiMediaFilteredReasons"],r),e}function TV(n){const e={},t=f(n,["videos"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(u=>SV(u))),h(e,["generatedVideos"],a)}const i=f(n,["raiMediaFilteredCount"]);i!=null&&h(e,["raiMediaFilteredCount"],i);const r=f(n,["raiMediaFilteredReasons"]);return r!=null&&h(e,["raiMediaFilteredReasons"],r),e}function EV(n){const e={},t=f(n,["video"]);return t!=null&&h(e,["video"],NV(t)),e}function SV(n){const e={},t=f(n,["_self"]);return t!=null&&h(e,["video"],bV(t)),e}function AV(n){const e={},t=f(n,["operationName"]);return t!=null&&h(e,["_url","operationName"],t),e}function CV(n){const e={},t=f(n,["operationName"]);return t!=null&&h(e,["_url","operationName"],t),e}function IV(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const i=f(n,["metadata"]);i!=null&&h(e,["metadata"],i);const r=f(n,["done"]);r!=null&&h(e,["done"],r);const a=f(n,["error"]);a!=null&&h(e,["error"],a);const u=f(n,["response"]);return u!=null&&h(e,["response"],RV(u)),e}function RV(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const i=f(n,["parent"]);i!=null&&h(e,["parent"],i);const r=f(n,["documentName"]);return r!=null&&h(e,["documentName"],r),e}function LC(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const i=f(n,["metadata"]);i!=null&&h(e,["metadata"],i);const r=f(n,["done"]);r!=null&&h(e,["done"],r);const a=f(n,["error"]);a!=null&&h(e,["error"],a);const u=f(n,["response"]);return u!=null&&h(e,["response"],wV(u)),e}function wV(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const i=f(n,["parent"]);i!=null&&h(e,["parent"],i);const r=f(n,["documentName"]);return r!=null&&h(e,["documentName"],r),e}function NV(n){const e={},t=f(n,["uri"]);t!=null&&h(e,["uri"],t);const i=f(n,["encodedVideo"]);i!=null&&h(e,["videoBytes"],vg(i));const r=f(n,["encoding"]);return r!=null&&h(e,["mimeType"],r),e}function bV(n){const e={},t=f(n,["gcsUri"]);t!=null&&h(e,["uri"],t);const i=f(n,["bytesBase64Encoded"]);i!=null&&h(e,["videoBytes"],vg(i));const r=f(n,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var VE;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(VE||(VE={}));var UE;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(UE||(UE={}));var LE;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(LE||(LE={}));var rs;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(rs||(rs={}));var kE;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(kE||(kE={}));var OE;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(OE||(OE={}));var FE;(function(n){n.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",n.HTTP_IN_QUERY="HTTP_IN_QUERY",n.HTTP_IN_HEADER="HTTP_IN_HEADER",n.HTTP_IN_PATH="HTTP_IN_PATH",n.HTTP_IN_BODY="HTTP_IN_BODY",n.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(FE||(FE={}));var GE;(function(n){n.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",n.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",n.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",n.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(GE||(GE={}));var qE;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(qE||(qE={}));var BE;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(BE||(BE={}));var HE;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(HE||(HE={}));var zE;(function(n){n.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH",n.MINIMAL="MINIMAL"})(zE||(zE={}));var JE;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(JE||(JE={}));var KE;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(KE||(KE={}));var YE;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(YE||(YE={}));var $E;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE",n.IMAGE_RECITATION="IMAGE_RECITATION",n.IMAGE_OTHER="IMAGE_OTHER"})($E||($E={}));var QE;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(QE||(QE={}));var XE;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(XE||(XE={}));var WE;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(WE||(WE={}));var ZE;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY",n.MODEL_ARMOR="MODEL_ARMOR",n.JAILBREAK="JAILBREAK"})(ZE||(ZE={}));var jE;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(jE||(jE={}));var Kf;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(Kf||(Kf={}));var e0;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(e0||(e0={}));var t0;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(t0||(t0={}));var n0;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(n0||(n0={}));var ym;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(ym||(ym={}));var i0;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V",n.TUNING_TASK_R2V="TUNING_TASK_R2V"})(i0||(i0={}));var o0;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",n.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(o0||(o0={}));var _m;(function(n){n.COLLECTION="COLLECTION"})(_m||(_m={}));var s0;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(s0||(s0={}));var r0;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(r0||(r0={}));var a0;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(a0||(a0={}));var l0;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(l0||(l0={}));var u0;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(u0||(u0={}));var c0;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(c0||(c0={}));var f0;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(f0||(f0={}));var d0;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(d0||(d0={}));var h0;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(h0||(h0={}));var p0;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(p0||(p0={}));var m0;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(m0||(m0={}));var g0;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(g0||(g0={}));var y0;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(y0||(y0={}));var _0;(function(n){n.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",n.PREFERENCE_TUNING="PREFERENCE_TUNING",n.DISTILLATION="DISTILLATION"})(_0||(_0={}));var v0;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.STATE_PENDING="STATE_PENDING",n.STATE_ACTIVE="STATE_ACTIVE",n.STATE_FAILED="STATE_FAILED"})(v0||(v0={}));var T0;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(T0||(T0={}));var E0;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED",n.REGISTERED="REGISTERED"})(E0||(E0={}));var S0;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(S0||(S0={}));var A0;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(A0||(A0={}));var C0;(function(n){n.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",n.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",n.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(C0||(C0={}));var I0;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.ACTIVITY_START="ACTIVITY_START",n.ACTIVITY_END="ACTIVITY_END"})(I0||(I0={}));var R0;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(R0||(R0={}));var w0;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(w0||(w0={}));var N0;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(N0||(N0={}));var b0;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(b0||(b0={}));var M0;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(M0||(M0={}));var D0;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(D0||(D0={}));var fa;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(fa||(fa={}));class vm{constructor(e){const t={};for(const i of e.headers.entries())t[i[0]]=i[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class zl{get text(){var e,t,i,r,a,u,d,g;if(((r=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let p="",v=!1;const T=[];for(const S of(g=(d=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)!==null&&g!==void 0?g:[]){for(const[R,V]of Object.entries(S))R!=="text"&&R!=="thought"&&R!=="thoughtSignature"&&(V!==null||V!==void 0)&&T.push(R);if(typeof S.text=="string"){if(typeof S.thought=="boolean"&&S.thought)continue;v=!0,p+=S.text}}return T.length>0&&console.warn(`there are non-text parts ${T} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),v?p:void 0}get data(){var e,t,i,r,a,u,d,g;if(((r=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let p="";const v=[];for(const T of(g=(d=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)!==null&&g!==void 0?g:[]){for(const[S,R]of Object.entries(T))S!=="inlineData"&&(R!==null||R!==void 0)&&v.push(S);T.inlineData&&typeof T.inlineData.data=="string"&&(p+=atob(T.inlineData.data))}return v.length>0&&console.warn(`there are non-data parts ${v} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),p.length>0?btoa(p):void 0}get functionCalls(){var e,t,i,r,a,u,d,g;if(((r=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const p=(g=(d=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||g===void 0?void 0:g.filter(v=>v.functionCall).map(v=>v.functionCall).filter(v=>v!==void 0);if((p==null?void 0:p.length)!==0)return p}get executableCode(){var e,t,i,r,a,u,d,g,p;if(((r=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const v=(g=(d=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||g===void 0?void 0:g.filter(T=>T.executableCode).map(T=>T.executableCode).filter(T=>T!==void 0);if((v==null?void 0:v.length)!==0)return(p=v==null?void 0:v[0])===null||p===void 0?void 0:p.code}get codeExecutionResult(){var e,t,i,r,a,u,d,g,p;if(((r=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const v=(g=(d=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||g===void 0?void 0:g.filter(T=>T.codeExecutionResult).map(T=>T.codeExecutionResult).filter(T=>T!==void 0);if((v==null?void 0:v.length)!==0)return(p=v==null?void 0:v[0])===null||p===void 0?void 0:p.output}}class x0{}class P0{}class MV{}class DV{}class xV{}class PV{}class V0{}class U0{}class L0{}class VV{}class Yf{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const i=new Yf;let r;const a=e;return t?r=_V(a):r=yV(a),Object.assign(i,r),i}}class k0{}class O0{}class F0{}class G0{}class UV{}class LV{}class kV{}class Tg{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const i=new Tg,a=IV(e);return Object.assign(i,a),i}}class OV{}class FV{}class GV{}class qV{}class q0{}class BV{get text(){var e,t,i;let r="",a=!1;const u=[];for(const d of(i=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&i!==void 0?i:[]){for(const[g,p]of Object.entries(d))g!=="text"&&g!=="thought"&&p!==null&&u.push(g);if(typeof d.text=="string"){if(typeof d.thought=="boolean"&&d.thought)continue;a=!0,r+=d.text}}return u.length>0&&console.warn(`there are non-text parts ${u} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),a?r:void 0}get data(){var e,t,i;let r="";const a=[];for(const u of(i=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&i!==void 0?i:[]){for(const[d,g]of Object.entries(u))d!=="inlineData"&&g!==null&&a.push(d);u.inlineData&&typeof u.inlineData.data=="string"&&(r+=atob(u.inlineData.data))}return a.length>0&&console.warn(`there are non-data parts ${a} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class HV{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Eg{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const i=new Eg,a=LC(e);return Object.assign(i,a),i}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ke(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function kC(n,e){const t=Ke(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function OC(n){return Array.isArray(n)?n.map(e=>$f(e)):[$f(n)]}function $f(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function FC(n){const e=$f(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function GC(n){const e=$f(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function B0(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function qC(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>B0(e)):[B0(n)]}function Tm(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function H0(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function z0(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function on(n){if(n==null)throw new Error("ContentUnion is required");return Tm(n)?n:{role:"user",parts:qC(n)}}function Sg(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const i=on(t);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(n.isVertexAI()){const t=on(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>on(t)):[on(e)]}function Kn(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(H0(n)||z0(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[on(n)]}const e=[],t=[],i=Tm(n[0]);for(const r of n){const a=Tm(r);if(a!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(a)e.push(r);else{if(H0(r)||z0(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(r)}}return i||e.push({role:"user",parts:qC(t)}),e}function zV(n,e){n.includes("null")&&(e.nullable=!0);const t=n.filter(i=>i!=="null");if(t.length===1)e.type=Object.values(rs).includes(t[0].toUpperCase())?t[0].toUpperCase():rs.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const i of t)e.anyOf.push({type:Object.values(rs).includes(i.toUpperCase())?i.toUpperCase():rs.TYPE_UNSPECIFIED})}}function va(n){const e={},t=["items"],i=["anyOf"],r=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const a=n.anyOf;a!=null&&a.length==2&&(a[0].type==="null"?(e.nullable=!0,n=a[1]):a[1].type==="null"&&(e.nullable=!0,n=a[0])),n.type instanceof Array&&zV(n.type,e);for(const[u,d]of Object.entries(n))if(d!=null)if(u=="type"){if(d==="null")throw new Error("type: null can not be the only possible type for the field.");if(d instanceof Array)continue;e.type=Object.values(rs).includes(d.toUpperCase())?d.toUpperCase():rs.TYPE_UNSPECIFIED}else if(t.includes(u))e[u]=va(d);else if(i.includes(u)){const g=[];for(const p of d){if(p.type=="null"){e.nullable=!0;continue}g.push(va(p))}e[u]=g}else if(r.includes(u)){const g={};for(const[p,v]of Object.entries(d))g[p]=va(v);e[u]=g}else{if(u==="additionalProperties")continue;e[u]=d}return e}function Ag(n){return va(n)}function Cg(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function Ig(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function Va(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=va(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=va(e.response));return n}function Ua(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const t of n)e.push(t);return e}function JV(n,e,t,i=1){const r=!e.startsWith(`${t}/`)&&e.split("/").length===i;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:r?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:r?`${t}/${e}`:e}function vo(n,e){if(typeof e!="string")throw new Error("name must be a string");return JV(n,e,"cachedContents")}function BC(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function As(n){return vg(n)}function KV(n){return n!=null&&typeof n=="object"&&"name"in n}function YV(n){return n!=null&&typeof n=="object"&&"video"in n}function $V(n){return n!=null&&typeof n=="object"&&"uri"in n}function HC(n){var e;let t;if(KV(n)&&(t=n.name),!($V(n)&&(t=n.uri,t===void 0))&&!(YV(n)&&(t=(e=n.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof n=="string"&&(t=n),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){const r=t.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${t}`);t=r[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function zC(n,e){let t;return n.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function JC(n){for(const e of["models","tunedModels","publisherModels"])if(QV(n,e))return n[e];return[]}function QV(n,e){return n!==null&&typeof n=="object"&&e in n}function XV(n,e={}){const t=n,i={name:t.name,description:t.description,parametersJsonSchema:t.inputSchema};return t.outputSchema&&(i.responseJsonSchema=t.outputSchema),e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function WV(n,e={}){const t=[],i=new Set;for(const r of n){const a=r.name;if(i.has(a))throw new Error(`Duplicate function name ${a} found in MCP tools. Please ensure function names are unique.`);i.add(a);const u=XV(r,e);u.functionDeclarations&&t.push(...u.functionDeclarations)}return{functionDeclarations:t}}function KC(n,e){let t;if(typeof e=="string")if(n.isVertexAI())if(e.startsWith("gs://"))t={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))t={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))t={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");t={inlinedRequests:e}}else t=e;const i=[t.gcsUri,t.bigqueryUri].filter(Boolean).length,r=[t.inlinedRequests,t.fileName].filter(Boolean).length;if(n.isVertexAI()){if(r>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||r!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return t}function ZV(n){if(typeof n!="string")return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function YC(n){if(typeof n!="object"||n===null)return{};const e=n,t=e.inlinedResponses;if(typeof t!="object"||t===null)return n;const r=t.inlinedResponses;if(!Array.isArray(r)||r.length===0)return n;let a=!1;for(const u of r){if(typeof u!="object"||u===null)continue;const g=u.response;if(typeof g!="object"||g===null)continue;if(g.embedding!==void 0){a=!0;break}}return a&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),n}function La(n,e){const t=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function $C(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function jV(n){const e={},t=f(n,["responsesFile"]);t!=null&&h(e,["fileName"],t);const i=f(n,["inlinedResponses","inlinedResponses"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>P2(u))),h(e,["inlinedResponses"],a)}const r=f(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>u)),h(e,["inlinedEmbedContentResponses"],a)}return e}function e2(n){const e={},t=f(n,["predictionsFormat"]);t!=null&&h(e,["format"],t);const i=f(n,["gcsDestination","outputUriPrefix"]);i!=null&&h(e,["gcsUri"],i);const r=f(n,["bigqueryDestination","outputUri"]);return r!=null&&h(e,["bigqueryUri"],r),e}function t2(n){const e={},t=f(n,["format"]);t!=null&&h(e,["predictionsFormat"],t);const i=f(n,["gcsUri"]);i!=null&&h(e,["gcsDestination","outputUriPrefix"],i);const r=f(n,["bigqueryUri"]);if(r!=null&&h(e,["bigqueryDestination","outputUri"],r),f(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(f(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Af(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const i=f(n,["metadata","displayName"]);i!=null&&h(e,["displayName"],i);const r=f(n,["metadata","state"]);r!=null&&h(e,["state"],$C(r));const a=f(n,["metadata","createTime"]);a!=null&&h(e,["createTime"],a);const u=f(n,["metadata","endTime"]);u!=null&&h(e,["endTime"],u);const d=f(n,["metadata","updateTime"]);d!=null&&h(e,["updateTime"],d);const g=f(n,["metadata","model"]);g!=null&&h(e,["model"],g);const p=f(n,["metadata","output"]);return p!=null&&h(e,["dest"],jV(YC(p))),e}function Em(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const i=f(n,["displayName"]);i!=null&&h(e,["displayName"],i);const r=f(n,["state"]);r!=null&&h(e,["state"],$C(r));const a=f(n,["error"]);a!=null&&h(e,["error"],a);const u=f(n,["createTime"]);u!=null&&h(e,["createTime"],u);const d=f(n,["startTime"]);d!=null&&h(e,["startTime"],d);const g=f(n,["endTime"]);g!=null&&h(e,["endTime"],g);const p=f(n,["updateTime"]);p!=null&&h(e,["updateTime"],p);const v=f(n,["model"]);v!=null&&h(e,["model"],v);const T=f(n,["inputConfig"]);T!=null&&h(e,["src"],n2(T));const S=f(n,["outputConfig"]);S!=null&&h(e,["dest"],e2(YC(S)));const R=f(n,["completionStats"]);return R!=null&&h(e,["completionStats"],R),e}function n2(n){const e={},t=f(n,["instancesFormat"]);t!=null&&h(e,["format"],t);const i=f(n,["gcsSource","uris"]);i!=null&&h(e,["gcsUri"],i);const r=f(n,["bigquerySource","inputUri"]);return r!=null&&h(e,["bigqueryUri"],r),e}function i2(n,e){const t={};if(f(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(f(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=f(e,["fileName"]);i!=null&&h(t,["fileName"],i);const r=f(e,["inlinedRequests"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>x2(n,u))),h(t,["requests","requests"],a)}return t}function o2(n){const e={},t=f(n,["format"]);t!=null&&h(e,["instancesFormat"],t);const i=f(n,["gcsUri"]);i!=null&&h(e,["gcsSource","uris"],i);const r=f(n,["bigqueryUri"]);if(r!=null&&h(e,["bigquerySource","inputUri"],r),f(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function s2(n){const e={},t=f(n,["data"]);if(t!=null&&h(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(n,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function r2(n,e){const t={},i=f(e,["name"]);return i!=null&&h(t,["_url","name"],La(n,i)),t}function a2(n,e){const t={},i=f(e,["name"]);return i!=null&&h(t,["_url","name"],La(n,i)),t}function l2(n){const e={},t=f(n,["content"]);t!=null&&h(e,["content"],t);const i=f(n,["citationMetadata"]);i!=null&&h(e,["citationMetadata"],u2(i));const r=f(n,["tokenCount"]);r!=null&&h(e,["tokenCount"],r);const a=f(n,["finishReason"]);a!=null&&h(e,["finishReason"],a);const u=f(n,["avgLogprobs"]);u!=null&&h(e,["avgLogprobs"],u);const d=f(n,["groundingMetadata"]);d!=null&&h(e,["groundingMetadata"],d);const g=f(n,["index"]);g!=null&&h(e,["index"],g);const p=f(n,["logprobsResult"]);p!=null&&h(e,["logprobsResult"],p);const v=f(n,["safetyRatings"]);if(v!=null){let S=v;Array.isArray(S)&&(S=S.map(R=>R)),h(e,["safetyRatings"],S)}const T=f(n,["urlContextMetadata"]);return T!=null&&h(e,["urlContextMetadata"],T),e}function u2(n){const e={},t=f(n,["citationSources"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>r)),h(e,["citations"],i)}return e}function QC(n){const e={},t=f(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(a=>G2(a))),h(e,["parts"],r)}const i=f(n,["role"]);return i!=null&&h(e,["role"],i),e}function c2(n,e){const t={},i=f(n,["displayName"]);if(e!==void 0&&i!=null&&h(e,["batch","displayName"],i),f(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function f2(n,e){const t={},i=f(n,["displayName"]);e!==void 0&&i!=null&&h(e,["displayName"],i);const r=f(n,["dest"]);return e!==void 0&&r!=null&&h(e,["outputConfig"],t2(ZV(r))),t}function J0(n,e){const t={},i=f(e,["model"]);i!=null&&h(t,["_url","model"],Ke(n,i));const r=f(e,["src"]);r!=null&&h(t,["batch","inputConfig"],i2(n,KC(n,r)));const a=f(e,["config"]);return a!=null&&c2(a,t),t}function d2(n,e){const t={},i=f(e,["model"]);i!=null&&h(t,["model"],Ke(n,i));const r=f(e,["src"]);r!=null&&h(t,["inputConfig"],o2(KC(n,r)));const a=f(e,["config"]);return a!=null&&f2(a,t),t}function h2(n,e){const t={},i=f(n,["displayName"]);return e!==void 0&&i!=null&&h(e,["batch","displayName"],i),t}function p2(n,e){const t={},i=f(e,["model"]);i!=null&&h(t,["_url","model"],Ke(n,i));const r=f(e,["src"]);r!=null&&h(t,["batch","inputConfig"],E2(n,r));const a=f(e,["config"]);return a!=null&&h2(a,t),t}function m2(n,e){const t={},i=f(e,["name"]);return i!=null&&h(t,["_url","name"],La(n,i)),t}function g2(n,e){const t={},i=f(e,["name"]);return i!=null&&h(t,["_url","name"],La(n,i)),t}function y2(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const i=f(n,["name"]);i!=null&&h(e,["name"],i);const r=f(n,["done"]);r!=null&&h(e,["done"],r);const a=f(n,["error"]);return a!=null&&h(e,["error"],a),e}function _2(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const i=f(n,["name"]);i!=null&&h(e,["name"],i);const r=f(n,["done"]);r!=null&&h(e,["done"],r);const a=f(n,["error"]);return a!=null&&h(e,["error"],a),e}function v2(n,e){const t={},i=f(e,["contents"]);if(i!=null){let a=Sg(n,i);Array.isArray(a)&&(a=a.map(u=>u)),h(t,["requests[]","request","content"],a)}const r=f(e,["config"]);return r!=null&&(h(t,["_self"],T2(r,t)),mV(t,{"requests[].*":"requests[].request.*"})),t}function T2(n,e){const t={},i=f(n,["taskType"]);e!==void 0&&i!=null&&h(e,["requests[]","taskType"],i);const r=f(n,["title"]);e!==void 0&&r!=null&&h(e,["requests[]","title"],r);const a=f(n,["outputDimensionality"]);if(e!==void 0&&a!=null&&h(e,["requests[]","outputDimensionality"],a),f(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function E2(n,e){const t={},i=f(e,["fileName"]);i!=null&&h(t,["file_name"],i);const r=f(e,["inlinedRequests"]);return r!=null&&h(t,["requests"],v2(n,r)),t}function S2(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&h(e,["fileUri"],t);const i=f(n,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function A2(n){const e={},t=f(n,["id"]);t!=null&&h(e,["id"],t);const i=f(n,["args"]);i!=null&&h(e,["args"],i);const r=f(n,["name"]);if(r!=null&&h(e,["name"],r),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function C2(n){const e={},t=f(n,["allowedFunctionNames"]);t!=null&&h(e,["allowedFunctionNames"],t);const i=f(n,["mode"]);if(i!=null&&h(e,["mode"],i),f(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function I2(n,e,t){const i={},r=f(e,["systemInstruction"]);t!==void 0&&r!=null&&h(t,["systemInstruction"],QC(on(r)));const a=f(e,["temperature"]);a!=null&&h(i,["temperature"],a);const u=f(e,["topP"]);u!=null&&h(i,["topP"],u);const d=f(e,["topK"]);d!=null&&h(i,["topK"],d);const g=f(e,["candidateCount"]);g!=null&&h(i,["candidateCount"],g);const p=f(e,["maxOutputTokens"]);p!=null&&h(i,["maxOutputTokens"],p);const v=f(e,["stopSequences"]);v!=null&&h(i,["stopSequences"],v);const T=f(e,["responseLogprobs"]);T!=null&&h(i,["responseLogprobs"],T);const S=f(e,["logprobs"]);S!=null&&h(i,["logprobs"],S);const R=f(e,["presencePenalty"]);R!=null&&h(i,["presencePenalty"],R);const V=f(e,["frequencyPenalty"]);V!=null&&h(i,["frequencyPenalty"],V);const G=f(e,["seed"]);G!=null&&h(i,["seed"],G);const L=f(e,["responseMimeType"]);L!=null&&h(i,["responseMimeType"],L);const Y=f(e,["responseSchema"]);Y!=null&&h(i,["responseSchema"],Ag(Y));const ne=f(e,["responseJsonSchema"]);if(ne!=null&&h(i,["responseJsonSchema"],ne),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const j=f(e,["safetySettings"]);if(t!==void 0&&j!=null){let D=j;Array.isArray(D)&&(D=D.map(Me=>q2(Me))),h(t,["safetySettings"],D)}const ae=f(e,["tools"]);if(t!==void 0&&ae!=null){let D=Ua(ae);Array.isArray(D)&&(D=D.map(Me=>H2(Va(Me)))),h(t,["tools"],D)}const Q=f(e,["toolConfig"]);if(t!==void 0&&Q!=null&&h(t,["toolConfig"],B2(Q)),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const ee=f(e,["cachedContent"]);t!==void 0&&ee!=null&&h(t,["cachedContent"],vo(n,ee));const M=f(e,["responseModalities"]);M!=null&&h(i,["responseModalities"],M);const N=f(e,["mediaResolution"]);N!=null&&h(i,["mediaResolution"],N);const b=f(e,["speechConfig"]);if(b!=null&&h(i,["speechConfig"],Cg(b)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const x=f(e,["thinkingConfig"]);x!=null&&h(i,["thinkingConfig"],x);const P=f(e,["imageConfig"]);P!=null&&h(i,["imageConfig"],D2(P));const O=f(e,["enableEnhancedCivicAnswers"]);if(O!=null&&h(i,["enableEnhancedCivicAnswers"],O),f(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return i}function R2(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const i=f(n,["candidates"]);if(i!=null){let g=i;Array.isArray(g)&&(g=g.map(p=>l2(p))),h(e,["candidates"],g)}const r=f(n,["modelVersion"]);r!=null&&h(e,["modelVersion"],r);const a=f(n,["promptFeedback"]);a!=null&&h(e,["promptFeedback"],a);const u=f(n,["responseId"]);u!=null&&h(e,["responseId"],u);const d=f(n,["usageMetadata"]);return d!=null&&h(e,["usageMetadata"],d),e}function w2(n,e){const t={},i=f(e,["name"]);return i!=null&&h(t,["_url","name"],La(n,i)),t}function N2(n,e){const t={},i=f(e,["name"]);return i!=null&&h(t,["_url","name"],La(n,i)),t}function b2(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&h(e,["enableWidget"],t),e}function M2(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&h(e,["timeRangeFilter"],t),e}function D2(n){const e={},t=f(n,["aspectRatio"]);t!=null&&h(e,["aspectRatio"],t);const i=f(n,["imageSize"]);if(i!=null&&h(e,["imageSize"],i),f(n,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(f(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(f(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function x2(n,e){const t={},i=f(e,["model"]);i!=null&&h(t,["request","model"],Ke(n,i));const r=f(e,["contents"]);if(r!=null){let d=Kn(r);Array.isArray(d)&&(d=d.map(g=>QC(g))),h(t,["request","contents"],d)}const a=f(e,["metadata"]);a!=null&&h(t,["metadata"],a);const u=f(e,["config"]);return u!=null&&h(t,["request","generationConfig"],I2(n,u,f(t,["request"],{}))),t}function P2(n){const e={},t=f(n,["response"]);t!=null&&h(e,["response"],R2(t));const i=f(n,["metadata"]);i!=null&&h(e,["metadata"],i);const r=f(n,["error"]);return r!=null&&h(e,["error"],r),e}function V2(n,e){const t={},i=f(n,["pageSize"]);e!==void 0&&i!=null&&h(e,["_query","pageSize"],i);const r=f(n,["pageToken"]);if(e!==void 0&&r!=null&&h(e,["_query","pageToken"],r),f(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function U2(n,e){const t={},i=f(n,["pageSize"]);e!==void 0&&i!=null&&h(e,["_query","pageSize"],i);const r=f(n,["pageToken"]);e!==void 0&&r!=null&&h(e,["_query","pageToken"],r);const a=f(n,["filter"]);return e!==void 0&&a!=null&&h(e,["_query","filter"],a),t}function L2(n){const e={},t=f(n,["config"]);return t!=null&&V2(t,e),e}function k2(n){const e={},t=f(n,["config"]);return t!=null&&U2(t,e),e}function O2(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&h(e,["nextPageToken"],i);const r=f(n,["operations"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>Af(u))),h(e,["batchJobs"],a)}return e}function F2(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&h(e,["nextPageToken"],i);const r=f(n,["batchPredictionJobs"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>Em(u))),h(e,["batchJobs"],a)}return e}function G2(n){const e={},t=f(n,["mediaResolution"]);t!=null&&h(e,["mediaResolution"],t);const i=f(n,["codeExecutionResult"]);i!=null&&h(e,["codeExecutionResult"],i);const r=f(n,["executableCode"]);r!=null&&h(e,["executableCode"],r);const a=f(n,["fileData"]);a!=null&&h(e,["fileData"],S2(a));const u=f(n,["functionCall"]);u!=null&&h(e,["functionCall"],A2(u));const d=f(n,["functionResponse"]);d!=null&&h(e,["functionResponse"],d);const g=f(n,["inlineData"]);g!=null&&h(e,["inlineData"],s2(g));const p=f(n,["text"]);p!=null&&h(e,["text"],p);const v=f(n,["thought"]);v!=null&&h(e,["thought"],v);const T=f(n,["thoughtSignature"]);T!=null&&h(e,["thoughtSignature"],T);const S=f(n,["videoMetadata"]);return S!=null&&h(e,["videoMetadata"],S),e}function q2(n){const e={},t=f(n,["category"]);if(t!=null&&h(e,["category"],t),f(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=f(n,["threshold"]);return i!=null&&h(e,["threshold"],i),e}function B2(n){const e={},t=f(n,["retrievalConfig"]);t!=null&&h(e,["retrievalConfig"],t);const i=f(n,["functionCallingConfig"]);return i!=null&&h(e,["functionCallingConfig"],C2(i)),e}function H2(n){const e={};if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=f(n,["computerUse"]);t!=null&&h(e,["computerUse"],t);const i=f(n,["fileSearch"]);i!=null&&h(e,["fileSearch"],i);const r=f(n,["codeExecution"]);if(r!=null&&h(e,["codeExecution"],r),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=f(n,["functionDeclarations"]);if(a!=null){let v=a;Array.isArray(v)&&(v=v.map(T=>T)),h(e,["functionDeclarations"],v)}const u=f(n,["googleMaps"]);u!=null&&h(e,["googleMaps"],b2(u));const d=f(n,["googleSearch"]);d!=null&&h(e,["googleSearch"],M2(d));const g=f(n,["googleSearchRetrieval"]);g!=null&&h(e,["googleSearchRetrieval"],g);const p=f(n,["urlContext"]);return p!=null&&h(e,["urlContext"],p),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var go;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents",n.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",n.PAGED_ITEM_DOCUMENTS="documents"})(go||(go={}));class pr{constructor(e,t,i,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,i,r)}init(e,t,i){var r,a;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=t==null?void 0:t.sdkHttpResponse,this.idxInternal=0;let u={config:{}};!i||Object.keys(i).length===0?u={config:{}}:typeof i=="object"?u=Object.assign({},i):u=i,u.config&&(u.config.pageToken=t.nextPageToken),this.paramsInternal=u,this.pageInternalSize=(a=(r=u.config)===null||r===void 0?void 0:r.pageSize)!==null&&a!==void 0?a:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class z2 extends _o{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new pr(go.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(t),t),this.create=async t=>(this.apiClient.isVertexAI()&&(t.config=this.formatDestination(t.src,t.config)),this.createInternal(t)),this.createEmbeddings=async t=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(t)}}createInlinedGenerateContentRequest(e){const t=J0(this.apiClient,e),i=t._url,r=fe("{model}:batchGenerateContent",i),d=t.batch.inputConfig.requests,g=d.requests,p=[];for(const v of g){const T=Object.assign({},v);if(T.systemInstruction){const S=T.systemInstruction;delete T.systemInstruction;const R=T.request;R.systemInstruction=S,T.request=R}p.push(T)}return d.requests=p,delete t.config,delete t._url,delete t._query,{path:r,body:t}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,t){const i=t?Object.assign({},t):{},r=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${r}`),i.dest===void 0){const a=this.getGcsUri(e),u=this.getBigqueryUri(e);if(a)a.endsWith(".jsonl")?i.dest=`${a.slice(0,-6)}/dest`:i.dest=`${a}_dest_${r}`;else if(u)i.dest=`${u}_dest_${r}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(e){var t,i,r,a;let u,d="",g={};if(this.apiClient.isVertexAI()){const p=d2(this.apiClient,e);return d=fe("batchPredictionJobs",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>Em(v))}else{const p=J0(this.apiClient,e);return d=fe("{model}:batchGenerateContent",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>Af(v))}}async createEmbeddingsInternal(e){var t,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=p2(this.apiClient,e);return a=fe("{model}:asyncBatchEmbedContent",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),r.then(g=>Af(g))}}async get(e){var t,i,r,a;let u,d="",g={};if(this.apiClient.isVertexAI()){const p=N2(this.apiClient,e);return d=fe("batchPredictionJobs/{name}",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>Em(v))}else{const p=w2(this.apiClient,e);return d=fe("batches/{name}",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>Af(v))}}async cancel(e){var t,i,r,a;let u="",d={};if(this.apiClient.isVertexAI()){const g=a2(this.apiClient,e);u=fe("batchPredictionJobs/{name}:cancel",g._url),d=g._query,delete g._url,delete g._query,await this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const g=r2(this.apiClient,e);u=fe("batches/{name}:cancel",g._url),d=g._query,delete g._url,delete g._query,await this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async listInternal(e){var t,i,r,a;let u,d="",g={};if(this.apiClient.isVertexAI()){const p=k2(e);return d=fe("batchPredictionJobs",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=F2(v),S=new q0;return Object.assign(S,T),S})}else{const p=L2(e);return d=fe("batches",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=O2(v),S=new q0;return Object.assign(S,T),S})}}async delete(e){var t,i,r,a;let u,d="",g={};if(this.apiClient.isVertexAI()){const p=g2(this.apiClient,e);return d=fe("batchPredictionJobs/{name}",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>_2(v))}else{const p=m2(this.apiClient,e);return d=fe("batches/{name}",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>y2(v))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function J2(n){const e={},t=f(n,["data"]);if(t!=null&&h(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(n,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function K0(n){const e={},t=f(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(a=>pU(a))),h(e,["parts"],r)}const i=f(n,["role"]);return i!=null&&h(e,["role"],i),e}function K2(n,e){const t={},i=f(n,["ttl"]);e!==void 0&&i!=null&&h(e,["ttl"],i);const r=f(n,["expireTime"]);e!==void 0&&r!=null&&h(e,["expireTime"],r);const a=f(n,["displayName"]);e!==void 0&&a!=null&&h(e,["displayName"],a);const u=f(n,["contents"]);if(e!==void 0&&u!=null){let v=Kn(u);Array.isArray(v)&&(v=v.map(T=>K0(T))),h(e,["contents"],v)}const d=f(n,["systemInstruction"]);e!==void 0&&d!=null&&h(e,["systemInstruction"],K0(on(d)));const g=f(n,["tools"]);if(e!==void 0&&g!=null){let v=g;Array.isArray(v)&&(v=v.map(T=>gU(T))),h(e,["tools"],v)}const p=f(n,["toolConfig"]);if(e!==void 0&&p!=null&&h(e,["toolConfig"],mU(p)),f(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function Y2(n,e){const t={},i=f(n,["ttl"]);e!==void 0&&i!=null&&h(e,["ttl"],i);const r=f(n,["expireTime"]);e!==void 0&&r!=null&&h(e,["expireTime"],r);const a=f(n,["displayName"]);e!==void 0&&a!=null&&h(e,["displayName"],a);const u=f(n,["contents"]);if(e!==void 0&&u!=null){let T=Kn(u);Array.isArray(T)&&(T=T.map(S=>S)),h(e,["contents"],T)}const d=f(n,["systemInstruction"]);e!==void 0&&d!=null&&h(e,["systemInstruction"],on(d));const g=f(n,["tools"]);if(e!==void 0&&g!=null){let T=g;Array.isArray(T)&&(T=T.map(S=>yU(S))),h(e,["tools"],T)}const p=f(n,["toolConfig"]);e!==void 0&&p!=null&&h(e,["toolConfig"],p);const v=f(n,["kmsKeyName"]);return e!==void 0&&v!=null&&h(e,["encryption_spec","kmsKeyName"],v),t}function $2(n,e){const t={},i=f(e,["model"]);i!=null&&h(t,["model"],kC(n,i));const r=f(e,["config"]);return r!=null&&K2(r,t),t}function Q2(n,e){const t={},i=f(e,["model"]);i!=null&&h(t,["model"],kC(n,i));const r=f(e,["config"]);return r!=null&&Y2(r,t),t}function X2(n,e){const t={},i=f(e,["name"]);return i!=null&&h(t,["_url","name"],vo(n,i)),t}function W2(n,e){const t={},i=f(e,["name"]);return i!=null&&h(t,["_url","name"],vo(n,i)),t}function Z2(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}function j2(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}function eU(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&h(e,["fileUri"],t);const i=f(n,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function tU(n){const e={},t=f(n,["id"]);t!=null&&h(e,["id"],t);const i=f(n,["args"]);i!=null&&h(e,["args"],i);const r=f(n,["name"]);if(r!=null&&h(e,["name"],r),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function nU(n){const e={},t=f(n,["allowedFunctionNames"]);t!=null&&h(e,["allowedFunctionNames"],t);const i=f(n,["mode"]);if(i!=null&&h(e,["mode"],i),f(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function iU(n){const e={},t=f(n,["description"]);t!=null&&h(e,["description"],t);const i=f(n,["name"]);i!=null&&h(e,["name"],i);const r=f(n,["parameters"]);r!=null&&h(e,["parameters"],r);const a=f(n,["parametersJsonSchema"]);a!=null&&h(e,["parametersJsonSchema"],a);const u=f(n,["response"]);u!=null&&h(e,["response"],u);const d=f(n,["responseJsonSchema"]);if(d!=null&&h(e,["responseJsonSchema"],d),f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function oU(n,e){const t={},i=f(e,["name"]);return i!=null&&h(t,["_url","name"],vo(n,i)),t}function sU(n,e){const t={},i=f(e,["name"]);return i!=null&&h(t,["_url","name"],vo(n,i)),t}function rU(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&h(e,["enableWidget"],t),e}function aU(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&h(e,["timeRangeFilter"],t),e}function lU(n,e){const t={},i=f(n,["pageSize"]);e!==void 0&&i!=null&&h(e,["_query","pageSize"],i);const r=f(n,["pageToken"]);return e!==void 0&&r!=null&&h(e,["_query","pageToken"],r),t}function uU(n,e){const t={},i=f(n,["pageSize"]);e!==void 0&&i!=null&&h(e,["_query","pageSize"],i);const r=f(n,["pageToken"]);return e!==void 0&&r!=null&&h(e,["_query","pageToken"],r),t}function cU(n){const e={},t=f(n,["config"]);return t!=null&&lU(t,e),e}function fU(n){const e={},t=f(n,["config"]);return t!=null&&uU(t,e),e}function dU(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&h(e,["nextPageToken"],i);const r=f(n,["cachedContents"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>u)),h(e,["cachedContents"],a)}return e}function hU(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&h(e,["nextPageToken"],i);const r=f(n,["cachedContents"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>u)),h(e,["cachedContents"],a)}return e}function pU(n){const e={},t=f(n,["mediaResolution"]);t!=null&&h(e,["mediaResolution"],t);const i=f(n,["codeExecutionResult"]);i!=null&&h(e,["codeExecutionResult"],i);const r=f(n,["executableCode"]);r!=null&&h(e,["executableCode"],r);const a=f(n,["fileData"]);a!=null&&h(e,["fileData"],eU(a));const u=f(n,["functionCall"]);u!=null&&h(e,["functionCall"],tU(u));const d=f(n,["functionResponse"]);d!=null&&h(e,["functionResponse"],d);const g=f(n,["inlineData"]);g!=null&&h(e,["inlineData"],J2(g));const p=f(n,["text"]);p!=null&&h(e,["text"],p);const v=f(n,["thought"]);v!=null&&h(e,["thought"],v);const T=f(n,["thoughtSignature"]);T!=null&&h(e,["thoughtSignature"],T);const S=f(n,["videoMetadata"]);return S!=null&&h(e,["videoMetadata"],S),e}function mU(n){const e={},t=f(n,["retrievalConfig"]);t!=null&&h(e,["retrievalConfig"],t);const i=f(n,["functionCallingConfig"]);return i!=null&&h(e,["functionCallingConfig"],nU(i)),e}function gU(n){const e={};if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=f(n,["computerUse"]);t!=null&&h(e,["computerUse"],t);const i=f(n,["fileSearch"]);i!=null&&h(e,["fileSearch"],i);const r=f(n,["codeExecution"]);if(r!=null&&h(e,["codeExecution"],r),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=f(n,["functionDeclarations"]);if(a!=null){let v=a;Array.isArray(v)&&(v=v.map(T=>T)),h(e,["functionDeclarations"],v)}const u=f(n,["googleMaps"]);u!=null&&h(e,["googleMaps"],rU(u));const d=f(n,["googleSearch"]);d!=null&&h(e,["googleSearch"],aU(d));const g=f(n,["googleSearchRetrieval"]);g!=null&&h(e,["googleSearchRetrieval"],g);const p=f(n,["urlContext"]);return p!=null&&h(e,["urlContext"],p),e}function yU(n){const e={},t=f(n,["retrieval"]);t!=null&&h(e,["retrieval"],t);const i=f(n,["computerUse"]);if(i!=null&&h(e,["computerUse"],i),f(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=f(n,["codeExecution"]);r!=null&&h(e,["codeExecution"],r);const a=f(n,["enterpriseWebSearch"]);a!=null&&h(e,["enterpriseWebSearch"],a);const u=f(n,["functionDeclarations"]);if(u!=null){let T=u;Array.isArray(T)&&(T=T.map(S=>iU(S))),h(e,["functionDeclarations"],T)}const d=f(n,["googleMaps"]);d!=null&&h(e,["googleMaps"],d);const g=f(n,["googleSearch"]);g!=null&&h(e,["googleSearch"],g);const p=f(n,["googleSearchRetrieval"]);p!=null&&h(e,["googleSearchRetrieval"],p);const v=f(n,["urlContext"]);return v!=null&&h(e,["urlContext"],v),e}function _U(n,e){const t={},i=f(n,["ttl"]);e!==void 0&&i!=null&&h(e,["ttl"],i);const r=f(n,["expireTime"]);return e!==void 0&&r!=null&&h(e,["expireTime"],r),t}function vU(n,e){const t={},i=f(n,["ttl"]);e!==void 0&&i!=null&&h(e,["ttl"],i);const r=f(n,["expireTime"]);return e!==void 0&&r!=null&&h(e,["expireTime"],r),t}function TU(n,e){const t={},i=f(e,["name"]);i!=null&&h(t,["_url","name"],vo(n,i));const r=f(e,["config"]);return r!=null&&_U(r,t),t}function EU(n,e){const t={},i=f(e,["name"]);i!=null&&h(t,["_url","name"],vo(n,i));const r=f(e,["config"]);return r!=null&&vU(r,t),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class SU extends _o{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new pr(go.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(t),t)}async create(e){var t,i,r,a;let u,d="",g={};if(this.apiClient.isVertexAI()){const p=Q2(this.apiClient,e);return d=fe("cachedContents",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>v)}else{const p=$2(this.apiClient,e);return d=fe("cachedContents",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>v)}}async get(e){var t,i,r,a;let u,d="",g={};if(this.apiClient.isVertexAI()){const p=sU(this.apiClient,e);return d=fe("{name}",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>v)}else{const p=oU(this.apiClient,e);return d=fe("{name}",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>v)}}async delete(e){var t,i,r,a;let u,d="",g={};if(this.apiClient.isVertexAI()){const p=W2(this.apiClient,e);return d=fe("{name}",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=j2(v),S=new F0;return Object.assign(S,T),S})}else{const p=X2(this.apiClient,e);return d=fe("{name}",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=Z2(v),S=new F0;return Object.assign(S,T),S})}}async update(e){var t,i,r,a;let u,d="",g={};if(this.apiClient.isVertexAI()){const p=EU(this.apiClient,e);return d=fe("{name}",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>v)}else{const p=TU(this.apiClient,e);return d=fe("{name}",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>v)}}async listInternal(e){var t,i,r,a;let u,d="",g={};if(this.apiClient.isVertexAI()){const p=fU(e);return d=fe("cachedContents",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=hU(v),S=new G0;return Object.assign(S,T),S})}else{const p=cU(e);return d=fe("cachedContents",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=dU(v),S=new G0;return Object.assign(S,T),S})}}}function Qf(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t}function Y0(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ce(n){return this instanceof Ce?(this.v=n,this):new Ce(n)}function ui(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(n,e||[]),r,a=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),d("next"),d("throw"),d("return",u),r[Symbol.asyncIterator]=function(){return this},r;function u(R){return function(V){return Promise.resolve(V).then(R,T)}}function d(R,V){i[R]&&(r[R]=function(G){return new Promise(function(L,Y){a.push([R,G,L,Y])>1||g(R,G)})},V&&(r[R]=V(r[R])))}function g(R,V){try{p(i[R](V))}catch(G){S(a[0][3],G)}}function p(R){R.value instanceof Ce?Promise.resolve(R.value.v).then(v,T):S(a[0][2],R)}function v(R){g("next",R)}function T(R){g("throw",R)}function S(R,V){R(V),a.shift(),a.length&&g(a[0][0],a[0][1])}}function ci(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof Y0=="function"?Y0(n):n[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(a){t[a]=n[a]&&function(u){return new Promise(function(d,g){u=n[a](u),r(d,g,u.done,u.value)})}}function r(a,u,d,g){Promise.resolve(g).then(function(p){a({value:p,done:d})},u)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function AU(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:XC(t)}function XC(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function CU(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function $0(n){if(n===void 0||n.length===0)return[];const e=[],t=n.length;let i=0;for(;i<t;)if(n[i].role==="user")e.push(n[i]),i++;else{const r=[];let a=!0;for(;i<t&&n[i].role==="model";)r.push(n[i]),a&&!XC(n[i])&&(a=!1),i++;a?e.push(...r):e.pop()}return e}class IU{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new RU(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class RU{constructor(e,t,i,r={},a=[]){this.apiClient=e,this.modelsModule=t,this.model=i,this.config=r,this.history=a,this.sendPromise=Promise.resolve(),CU(a)}async sendMessage(e){var t;await this.sendPromise;const i=on(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var a,u,d;const g=await r,p=(u=(a=g.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content,v=g.automaticFunctionCallingHistory,T=this.getHistory(!0).length;let S=[];v!=null&&(S=(d=v.slice(T))!==null&&d!==void 0?d:[]);const R=p?[p]:[];this.recordHistory(i,R,S)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var t;await this.sendPromise;const i=on(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const a=await r;return this.processStreamResponse(a,i)}getHistory(e=!1){const t=e?$0(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){return ui(this,arguments,function*(){var r,a,u,d,g,p;const v=[];try{for(var T=!0,S=ci(e),R;R=yield Ce(S.next()),r=R.done,!r;T=!0){d=R.value,T=!1;const V=d;if(AU(V)){const G=(p=(g=V.candidates)===null||g===void 0?void 0:g[0])===null||p===void 0?void 0:p.content;G!==void 0&&v.push(G)}yield yield Ce(V)}}catch(V){a={error:V}}finally{try{!T&&!r&&(u=S.return)&&(yield Ce(u.call(S)))}finally{if(a)throw a.error}}this.recordHistory(t,v)})}recordHistory(e,t,i){let r=[];t.length>0&&t.every(a=>a.role!==void 0)?r=t:r.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...$0(i)):this.history.push(e),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class pu extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,pu.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function wU(n){const e={},t=f(n,["file"]);return t!=null&&h(e,["file"],t),e}function NU(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}function bU(n){const e={},t=f(n,["name"]);return t!=null&&h(e,["_url","file"],HC(t)),e}function MU(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}function DU(n){const e={},t=f(n,["name"]);return t!=null&&h(e,["_url","file"],HC(t)),e}function xU(n){const e={},t=f(n,["uris"]);return t!=null&&h(e,["uris"],t),e}function PU(n,e){const t={},i=f(n,["pageSize"]);e!==void 0&&i!=null&&h(e,["_query","pageSize"],i);const r=f(n,["pageToken"]);return e!==void 0&&r!=null&&h(e,["_query","pageToken"],r),t}function VU(n){const e={},t=f(n,["config"]);return t!=null&&PU(t,e),e}function UU(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&h(e,["nextPageToken"],i);const r=f(n,["files"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>u)),h(e,["files"],a)}return e}function LU(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const i=f(n,["files"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>a)),h(e,["files"],r)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class kU extends _o{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new pr(go.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>t)}async download(e){await this.apiClient.downloadFile(e)}async registerFiles(e){throw new Error("registerFiles is only supported in Node.js environments.")}async _registerFiles(e){return this.registerFilesInternal(e)}async listInternal(e){var t,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=VU(e);return a=fe("files",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:g.headers},v})),r.then(g=>{const p=UU(g),v=new OV;return Object.assign(v,p),v})}}async createInternal(e){var t,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=wU(e);return a=fe("upload/v1beta/files",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),r.then(g=>{const p=NU(g),v=new FV;return Object.assign(v,p),v})}}async get(e){var t,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=DU(e);return a=fe("files/{file}",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),r.then(g=>g)}}async delete(e){var t,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=bU(e);return a=fe("files/{file}",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:g.headers},v})),r.then(g=>{const p=MU(g),v=new GV;return Object.assign(v,p),v})}}async registerFilesInternal(e){var t,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=xU(e);return a=fe("files:register",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),r.then(g=>{const p=LU(g),v=new qV;return Object.assign(v,p),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Cf(n){const e={},t=f(n,["data"]);if(t!=null&&h(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(n,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function OU(n){const e={},t=f(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(a=>eL(a))),h(e,["parts"],r)}const i=f(n,["role"]);return i!=null&&h(e,["role"],i),e}function FU(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&h(e,["fileUri"],t);const i=f(n,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function GU(n){const e={},t=f(n,["id"]);t!=null&&h(e,["id"],t);const i=f(n,["args"]);i!=null&&h(e,["args"],i);const r=f(n,["name"]);if(r!=null&&h(e,["name"],r),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function qU(n){const e={},t=f(n,["description"]);t!=null&&h(e,["description"],t);const i=f(n,["name"]);i!=null&&h(e,["name"],i);const r=f(n,["parameters"]);r!=null&&h(e,["parameters"],r);const a=f(n,["parametersJsonSchema"]);a!=null&&h(e,["parametersJsonSchema"],a);const u=f(n,["response"]);u!=null&&h(e,["response"],u);const d=f(n,["responseJsonSchema"]);if(d!=null&&h(e,["responseJsonSchema"],d),f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function BU(n){const e={},t=f(n,["modelSelectionConfig"]);t!=null&&h(e,["modelConfig"],t);const i=f(n,["responseJsonSchema"]);i!=null&&h(e,["responseJsonSchema"],i);const r=f(n,["audioTimestamp"]);r!=null&&h(e,["audioTimestamp"],r);const a=f(n,["candidateCount"]);a!=null&&h(e,["candidateCount"],a);const u=f(n,["enableAffectiveDialog"]);u!=null&&h(e,["enableAffectiveDialog"],u);const d=f(n,["frequencyPenalty"]);d!=null&&h(e,["frequencyPenalty"],d);const g=f(n,["logprobs"]);g!=null&&h(e,["logprobs"],g);const p=f(n,["maxOutputTokens"]);p!=null&&h(e,["maxOutputTokens"],p);const v=f(n,["mediaResolution"]);v!=null&&h(e,["mediaResolution"],v);const T=f(n,["presencePenalty"]);T!=null&&h(e,["presencePenalty"],T);const S=f(n,["responseLogprobs"]);S!=null&&h(e,["responseLogprobs"],S);const R=f(n,["responseMimeType"]);R!=null&&h(e,["responseMimeType"],R);const V=f(n,["responseModalities"]);V!=null&&h(e,["responseModalities"],V);const G=f(n,["responseSchema"]);G!=null&&h(e,["responseSchema"],G);const L=f(n,["routingConfig"]);L!=null&&h(e,["routingConfig"],L);const Y=f(n,["seed"]);Y!=null&&h(e,["seed"],Y);const ne=f(n,["speechConfig"]);ne!=null&&h(e,["speechConfig"],ne);const j=f(n,["stopSequences"]);j!=null&&h(e,["stopSequences"],j);const ae=f(n,["temperature"]);ae!=null&&h(e,["temperature"],ae);const Q=f(n,["thinkingConfig"]);Q!=null&&h(e,["thinkingConfig"],Q);const ee=f(n,["topK"]);ee!=null&&h(e,["topK"],ee);const M=f(n,["topP"]);if(M!=null&&h(e,["topP"],M),f(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function HU(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&h(e,["enableWidget"],t),e}function zU(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&h(e,["timeRangeFilter"],t),e}function JU(n,e){const t={},i=f(n,["generationConfig"]);e!==void 0&&i!=null&&h(e,["setup","generationConfig"],i);const r=f(n,["responseModalities"]);e!==void 0&&r!=null&&h(e,["setup","generationConfig","responseModalities"],r);const a=f(n,["temperature"]);e!==void 0&&a!=null&&h(e,["setup","generationConfig","temperature"],a);const u=f(n,["topP"]);e!==void 0&&u!=null&&h(e,["setup","generationConfig","topP"],u);const d=f(n,["topK"]);e!==void 0&&d!=null&&h(e,["setup","generationConfig","topK"],d);const g=f(n,["maxOutputTokens"]);e!==void 0&&g!=null&&h(e,["setup","generationConfig","maxOutputTokens"],g);const p=f(n,["mediaResolution"]);e!==void 0&&p!=null&&h(e,["setup","generationConfig","mediaResolution"],p);const v=f(n,["seed"]);e!==void 0&&v!=null&&h(e,["setup","generationConfig","seed"],v);const T=f(n,["speechConfig"]);e!==void 0&&T!=null&&h(e,["setup","generationConfig","speechConfig"],Ig(T));const S=f(n,["thinkingConfig"]);e!==void 0&&S!=null&&h(e,["setup","generationConfig","thinkingConfig"],S);const R=f(n,["enableAffectiveDialog"]);e!==void 0&&R!=null&&h(e,["setup","generationConfig","enableAffectiveDialog"],R);const V=f(n,["systemInstruction"]);e!==void 0&&V!=null&&h(e,["setup","systemInstruction"],OU(on(V)));const G=f(n,["tools"]);if(e!==void 0&&G!=null){let ee=Ua(G);Array.isArray(ee)&&(ee=ee.map(M=>nL(Va(M)))),h(e,["setup","tools"],ee)}const L=f(n,["sessionResumption"]);e!==void 0&&L!=null&&h(e,["setup","sessionResumption"],tL(L));const Y=f(n,["inputAudioTranscription"]);e!==void 0&&Y!=null&&h(e,["setup","inputAudioTranscription"],Y);const ne=f(n,["outputAudioTranscription"]);e!==void 0&&ne!=null&&h(e,["setup","outputAudioTranscription"],ne);const j=f(n,["realtimeInputConfig"]);e!==void 0&&j!=null&&h(e,["setup","realtimeInputConfig"],j);const ae=f(n,["contextWindowCompression"]);e!==void 0&&ae!=null&&h(e,["setup","contextWindowCompression"],ae);const Q=f(n,["proactivity"]);if(e!==void 0&&Q!=null&&h(e,["setup","proactivity"],Q),f(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return t}function KU(n,e){const t={},i=f(n,["generationConfig"]);e!==void 0&&i!=null&&h(e,["setup","generationConfig"],BU(i));const r=f(n,["responseModalities"]);e!==void 0&&r!=null&&h(e,["setup","generationConfig","responseModalities"],r);const a=f(n,["temperature"]);e!==void 0&&a!=null&&h(e,["setup","generationConfig","temperature"],a);const u=f(n,["topP"]);e!==void 0&&u!=null&&h(e,["setup","generationConfig","topP"],u);const d=f(n,["topK"]);e!==void 0&&d!=null&&h(e,["setup","generationConfig","topK"],d);const g=f(n,["maxOutputTokens"]);e!==void 0&&g!=null&&h(e,["setup","generationConfig","maxOutputTokens"],g);const p=f(n,["mediaResolution"]);e!==void 0&&p!=null&&h(e,["setup","generationConfig","mediaResolution"],p);const v=f(n,["seed"]);e!==void 0&&v!=null&&h(e,["setup","generationConfig","seed"],v);const T=f(n,["speechConfig"]);e!==void 0&&T!=null&&h(e,["setup","generationConfig","speechConfig"],Ig(T));const S=f(n,["thinkingConfig"]);e!==void 0&&S!=null&&h(e,["setup","generationConfig","thinkingConfig"],S);const R=f(n,["enableAffectiveDialog"]);e!==void 0&&R!=null&&h(e,["setup","generationConfig","enableAffectiveDialog"],R);const V=f(n,["systemInstruction"]);e!==void 0&&V!=null&&h(e,["setup","systemInstruction"],on(V));const G=f(n,["tools"]);if(e!==void 0&&G!=null){let M=Ua(G);Array.isArray(M)&&(M=M.map(N=>iL(Va(N)))),h(e,["setup","tools"],M)}const L=f(n,["sessionResumption"]);e!==void 0&&L!=null&&h(e,["setup","sessionResumption"],L);const Y=f(n,["inputAudioTranscription"]);e!==void 0&&Y!=null&&h(e,["setup","inputAudioTranscription"],Y);const ne=f(n,["outputAudioTranscription"]);e!==void 0&&ne!=null&&h(e,["setup","outputAudioTranscription"],ne);const j=f(n,["realtimeInputConfig"]);e!==void 0&&j!=null&&h(e,["setup","realtimeInputConfig"],j);const ae=f(n,["contextWindowCompression"]);e!==void 0&&ae!=null&&h(e,["setup","contextWindowCompression"],ae);const Q=f(n,["proactivity"]);e!==void 0&&Q!=null&&h(e,["setup","proactivity"],Q);const ee=f(n,["explicitVadSignal"]);return e!==void 0&&ee!=null&&h(e,["setup","explicitVadSignal"],ee),t}function YU(n,e){const t={},i=f(e,["model"]);i!=null&&h(t,["setup","model"],Ke(n,i));const r=f(e,["config"]);return r!=null&&h(t,["config"],JU(r,t)),t}function $U(n,e){const t={},i=f(e,["model"]);i!=null&&h(t,["setup","model"],Ke(n,i));const r=f(e,["config"]);return r!=null&&h(t,["config"],KU(r,t)),t}function QU(n){const e={},t=f(n,["musicGenerationConfig"]);return t!=null&&h(e,["musicGenerationConfig"],t),e}function XU(n){const e={},t=f(n,["weightedPrompts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>r)),h(e,["weightedPrompts"],i)}return e}function WU(n){const e={},t=f(n,["media"]);if(t!=null){let p=OC(t);Array.isArray(p)&&(p=p.map(v=>Cf(v))),h(e,["mediaChunks"],p)}const i=f(n,["audio"]);i!=null&&h(e,["audio"],Cf(GC(i)));const r=f(n,["audioStreamEnd"]);r!=null&&h(e,["audioStreamEnd"],r);const a=f(n,["video"]);a!=null&&h(e,["video"],Cf(FC(a)));const u=f(n,["text"]);u!=null&&h(e,["text"],u);const d=f(n,["activityStart"]);d!=null&&h(e,["activityStart"],d);const g=f(n,["activityEnd"]);return g!=null&&h(e,["activityEnd"],g),e}function ZU(n){const e={},t=f(n,["media"]);if(t!=null){let p=OC(t);Array.isArray(p)&&(p=p.map(v=>v)),h(e,["mediaChunks"],p)}const i=f(n,["audio"]);i!=null&&h(e,["audio"],GC(i));const r=f(n,["audioStreamEnd"]);r!=null&&h(e,["audioStreamEnd"],r);const a=f(n,["video"]);a!=null&&h(e,["video"],FC(a));const u=f(n,["text"]);u!=null&&h(e,["text"],u);const d=f(n,["activityStart"]);d!=null&&h(e,["activityStart"],d);const g=f(n,["activityEnd"]);return g!=null&&h(e,["activityEnd"],g),e}function jU(n){const e={},t=f(n,["setupComplete"]);t!=null&&h(e,["setupComplete"],t);const i=f(n,["serverContent"]);i!=null&&h(e,["serverContent"],i);const r=f(n,["toolCall"]);r!=null&&h(e,["toolCall"],r);const a=f(n,["toolCallCancellation"]);a!=null&&h(e,["toolCallCancellation"],a);const u=f(n,["usageMetadata"]);u!=null&&h(e,["usageMetadata"],oL(u));const d=f(n,["goAway"]);d!=null&&h(e,["goAway"],d);const g=f(n,["sessionResumptionUpdate"]);g!=null&&h(e,["sessionResumptionUpdate"],g);const p=f(n,["voiceActivityDetectionSignal"]);p!=null&&h(e,["voiceActivityDetectionSignal"],p);const v=f(n,["voiceActivity"]);return v!=null&&h(e,["voiceActivity"],sL(v)),e}function eL(n){const e={},t=f(n,["mediaResolution"]);t!=null&&h(e,["mediaResolution"],t);const i=f(n,["codeExecutionResult"]);i!=null&&h(e,["codeExecutionResult"],i);const r=f(n,["executableCode"]);r!=null&&h(e,["executableCode"],r);const a=f(n,["fileData"]);a!=null&&h(e,["fileData"],FU(a));const u=f(n,["functionCall"]);u!=null&&h(e,["functionCall"],GU(u));const d=f(n,["functionResponse"]);d!=null&&h(e,["functionResponse"],d);const g=f(n,["inlineData"]);g!=null&&h(e,["inlineData"],Cf(g));const p=f(n,["text"]);p!=null&&h(e,["text"],p);const v=f(n,["thought"]);v!=null&&h(e,["thought"],v);const T=f(n,["thoughtSignature"]);T!=null&&h(e,["thoughtSignature"],T);const S=f(n,["videoMetadata"]);return S!=null&&h(e,["videoMetadata"],S),e}function tL(n){const e={},t=f(n,["handle"]);if(t!=null&&h(e,["handle"],t),f(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function nL(n){const e={};if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=f(n,["computerUse"]);t!=null&&h(e,["computerUse"],t);const i=f(n,["fileSearch"]);i!=null&&h(e,["fileSearch"],i);const r=f(n,["codeExecution"]);if(r!=null&&h(e,["codeExecution"],r),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=f(n,["functionDeclarations"]);if(a!=null){let v=a;Array.isArray(v)&&(v=v.map(T=>T)),h(e,["functionDeclarations"],v)}const u=f(n,["googleMaps"]);u!=null&&h(e,["googleMaps"],HU(u));const d=f(n,["googleSearch"]);d!=null&&h(e,["googleSearch"],zU(d));const g=f(n,["googleSearchRetrieval"]);g!=null&&h(e,["googleSearchRetrieval"],g);const p=f(n,["urlContext"]);return p!=null&&h(e,["urlContext"],p),e}function iL(n){const e={},t=f(n,["retrieval"]);t!=null&&h(e,["retrieval"],t);const i=f(n,["computerUse"]);if(i!=null&&h(e,["computerUse"],i),f(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=f(n,["codeExecution"]);r!=null&&h(e,["codeExecution"],r);const a=f(n,["enterpriseWebSearch"]);a!=null&&h(e,["enterpriseWebSearch"],a);const u=f(n,["functionDeclarations"]);if(u!=null){let T=u;Array.isArray(T)&&(T=T.map(S=>qU(S))),h(e,["functionDeclarations"],T)}const d=f(n,["googleMaps"]);d!=null&&h(e,["googleMaps"],d);const g=f(n,["googleSearch"]);g!=null&&h(e,["googleSearch"],g);const p=f(n,["googleSearchRetrieval"]);p!=null&&h(e,["googleSearchRetrieval"],p);const v=f(n,["urlContext"]);return v!=null&&h(e,["urlContext"],v),e}function oL(n){const e={},t=f(n,["promptTokenCount"]);t!=null&&h(e,["promptTokenCount"],t);const i=f(n,["cachedContentTokenCount"]);i!=null&&h(e,["cachedContentTokenCount"],i);const r=f(n,["candidatesTokenCount"]);r!=null&&h(e,["responseTokenCount"],r);const a=f(n,["toolUsePromptTokenCount"]);a!=null&&h(e,["toolUsePromptTokenCount"],a);const u=f(n,["thoughtsTokenCount"]);u!=null&&h(e,["thoughtsTokenCount"],u);const d=f(n,["totalTokenCount"]);d!=null&&h(e,["totalTokenCount"],d);const g=f(n,["promptTokensDetails"]);if(g!=null){let R=g;Array.isArray(R)&&(R=R.map(V=>V)),h(e,["promptTokensDetails"],R)}const p=f(n,["cacheTokensDetails"]);if(p!=null){let R=p;Array.isArray(R)&&(R=R.map(V=>V)),h(e,["cacheTokensDetails"],R)}const v=f(n,["candidatesTokensDetails"]);if(v!=null){let R=v;Array.isArray(R)&&(R=R.map(V=>V)),h(e,["responseTokensDetails"],R)}const T=f(n,["toolUsePromptTokensDetails"]);if(T!=null){let R=T;Array.isArray(R)&&(R=R.map(V=>V)),h(e,["toolUsePromptTokensDetails"],R)}const S=f(n,["trafficType"]);return S!=null&&h(e,["trafficType"],S),e}function sL(n){const e={},t=f(n,["type"]);return t!=null&&h(e,["voiceActivityType"],t),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function rL(n,e){const t={},i=f(n,["data"]);if(i!=null&&h(t,["data"],i),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=f(n,["mimeType"]);return r!=null&&h(t,["mimeType"],r),t}function aL(n,e){const t={},i=f(n,["content"]);i!=null&&h(t,["content"],i);const r=f(n,["citationMetadata"]);r!=null&&h(t,["citationMetadata"],lL(r));const a=f(n,["tokenCount"]);a!=null&&h(t,["tokenCount"],a);const u=f(n,["finishReason"]);u!=null&&h(t,["finishReason"],u);const d=f(n,["avgLogprobs"]);d!=null&&h(t,["avgLogprobs"],d);const g=f(n,["groundingMetadata"]);g!=null&&h(t,["groundingMetadata"],g);const p=f(n,["index"]);p!=null&&h(t,["index"],p);const v=f(n,["logprobsResult"]);v!=null&&h(t,["logprobsResult"],v);const T=f(n,["safetyRatings"]);if(T!=null){let R=T;Array.isArray(R)&&(R=R.map(V=>V)),h(t,["safetyRatings"],R)}const S=f(n,["urlContextMetadata"]);return S!=null&&h(t,["urlContextMetadata"],S),t}function lL(n,e){const t={},i=f(n,["citationSources"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>a)),h(t,["citations"],r)}return t}function uL(n,e,t){const i={},r=f(e,["model"]);r!=null&&h(i,["_url","model"],Ke(n,r));const a=f(e,["contents"]);if(a!=null){let u=Kn(a);Array.isArray(u)&&(u=u.map(d=>d)),h(i,["contents"],u)}return i}function cL(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&h(t,["sdkHttpResponse"],i);const r=f(n,["tokensInfo"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>u)),h(t,["tokensInfo"],a)}return t}function fL(n,e){const t={},i=f(n,["values"]);i!=null&&h(t,["values"],i);const r=f(n,["statistics"]);return r!=null&&h(t,["statistics"],dL(r)),t}function dL(n,e){const t={},i=f(n,["truncated"]);i!=null&&h(t,["truncated"],i);const r=f(n,["token_count"]);return r!=null&&h(t,["tokenCount"],r),t}function vd(n,e){const t={},i=f(n,["parts"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>Ek(u))),h(t,["parts"],a)}const r=f(n,["role"]);return r!=null&&h(t,["role"],r),t}function hL(n,e){const t={},i=f(n,["controlType"]);i!=null&&h(t,["controlType"],i);const r=f(n,["enableControlImageComputation"]);return r!=null&&h(t,["computeControl"],r),t}function pL(n,e){const t={};if(f(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(f(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(f(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return t}function mL(n,e,t){const i={},r=f(n,["systemInstruction"]);e!==void 0&&r!=null&&h(e,["systemInstruction"],on(r));const a=f(n,["tools"]);if(e!==void 0&&a!=null){let d=a;Array.isArray(d)&&(d=d.map(g=>eI(g))),h(e,["tools"],d)}const u=f(n,["generationConfig"]);return e!==void 0&&u!=null&&h(e,["generationConfig"],rk(u)),i}function gL(n,e,t){const i={},r=f(e,["model"]);r!=null&&h(i,["_url","model"],Ke(n,r));const a=f(e,["contents"]);if(a!=null){let d=Kn(a);Array.isArray(d)&&(d=d.map(g=>vd(g))),h(i,["contents"],d)}const u=f(e,["config"]);return u!=null&&pL(u),i}function yL(n,e,t){const i={},r=f(e,["model"]);r!=null&&h(i,["_url","model"],Ke(n,r));const a=f(e,["contents"]);if(a!=null){let d=Kn(a);Array.isArray(d)&&(d=d.map(g=>g)),h(i,["contents"],d)}const u=f(e,["config"]);return u!=null&&mL(u,i),i}function _L(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&h(t,["sdkHttpResponse"],i);const r=f(n,["totalTokens"]);r!=null&&h(t,["totalTokens"],r);const a=f(n,["cachedContentTokenCount"]);return a!=null&&h(t,["cachedContentTokenCount"],a),t}function vL(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&h(t,["sdkHttpResponse"],i);const r=f(n,["totalTokens"]);return r!=null&&h(t,["totalTokens"],r),t}function TL(n,e,t){const i={},r=f(e,["model"]);return r!=null&&h(i,["_url","name"],Ke(n,r)),i}function EL(n,e,t){const i={},r=f(e,["model"]);return r!=null&&h(i,["_url","name"],Ke(n,r)),i}function SL(n,e){const t={},i=f(n,["sdkHttpResponse"]);return i!=null&&h(t,["sdkHttpResponse"],i),t}function AL(n,e){const t={},i=f(n,["sdkHttpResponse"]);return i!=null&&h(t,["sdkHttpResponse"],i),t}function CL(n,e,t){const i={},r=f(n,["outputGcsUri"]);e!==void 0&&r!=null&&h(e,["parameters","storageUri"],r);const a=f(n,["negativePrompt"]);e!==void 0&&a!=null&&h(e,["parameters","negativePrompt"],a);const u=f(n,["numberOfImages"]);e!==void 0&&u!=null&&h(e,["parameters","sampleCount"],u);const d=f(n,["aspectRatio"]);e!==void 0&&d!=null&&h(e,["parameters","aspectRatio"],d);const g=f(n,["guidanceScale"]);e!==void 0&&g!=null&&h(e,["parameters","guidanceScale"],g);const p=f(n,["seed"]);e!==void 0&&p!=null&&h(e,["parameters","seed"],p);const v=f(n,["safetyFilterLevel"]);e!==void 0&&v!=null&&h(e,["parameters","safetySetting"],v);const T=f(n,["personGeneration"]);e!==void 0&&T!=null&&h(e,["parameters","personGeneration"],T);const S=f(n,["includeSafetyAttributes"]);e!==void 0&&S!=null&&h(e,["parameters","includeSafetyAttributes"],S);const R=f(n,["includeRaiReason"]);e!==void 0&&R!=null&&h(e,["parameters","includeRaiReason"],R);const V=f(n,["language"]);e!==void 0&&V!=null&&h(e,["parameters","language"],V);const G=f(n,["outputMimeType"]);e!==void 0&&G!=null&&h(e,["parameters","outputOptions","mimeType"],G);const L=f(n,["outputCompressionQuality"]);e!==void 0&&L!=null&&h(e,["parameters","outputOptions","compressionQuality"],L);const Y=f(n,["addWatermark"]);e!==void 0&&Y!=null&&h(e,["parameters","addWatermark"],Y);const ne=f(n,["labels"]);e!==void 0&&ne!=null&&h(e,["labels"],ne);const j=f(n,["editMode"]);e!==void 0&&j!=null&&h(e,["parameters","editMode"],j);const ae=f(n,["baseSteps"]);return e!==void 0&&ae!=null&&h(e,["parameters","editConfig","baseSteps"],ae),i}function IL(n,e,t){const i={},r=f(e,["model"]);r!=null&&h(i,["_url","model"],Ke(n,r));const a=f(e,["prompt"]);a!=null&&h(i,["instances[0]","prompt"],a);const u=f(e,["referenceImages"]);if(u!=null){let g=u;Array.isArray(g)&&(g=g.map(p=>wk(p))),h(i,["instances[0]","referenceImages"],g)}const d=f(e,["config"]);return d!=null&&CL(d,i),i}function RL(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&h(t,["sdkHttpResponse"],i);const r=f(n,["predictions"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>Td(u))),h(t,["generatedImages"],a)}return t}function wL(n,e,t){const i={},r=f(n,["taskType"]);e!==void 0&&r!=null&&h(e,["requests[]","taskType"],r);const a=f(n,["title"]);e!==void 0&&a!=null&&h(e,["requests[]","title"],a);const u=f(n,["outputDimensionality"]);if(e!==void 0&&u!=null&&h(e,["requests[]","outputDimensionality"],u),f(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return i}function NL(n,e,t){const i={},r=f(n,["taskType"]);e!==void 0&&r!=null&&h(e,["instances[]","task_type"],r);const a=f(n,["title"]);e!==void 0&&a!=null&&h(e,["instances[]","title"],a);const u=f(n,["outputDimensionality"]);e!==void 0&&u!=null&&h(e,["parameters","outputDimensionality"],u);const d=f(n,["mimeType"]);e!==void 0&&d!=null&&h(e,["instances[]","mimeType"],d);const g=f(n,["autoTruncate"]);return e!==void 0&&g!=null&&h(e,["parameters","autoTruncate"],g),i}function bL(n,e,t){const i={},r=f(e,["model"]);r!=null&&h(i,["_url","model"],Ke(n,r));const a=f(e,["contents"]);if(a!=null){let g=Sg(n,a);Array.isArray(g)&&(g=g.map(p=>p)),h(i,["requests[]","content"],g)}const u=f(e,["config"]);u!=null&&wL(u,i);const d=f(e,["model"]);return d!==void 0&&h(i,["requests[]","model"],Ke(n,d)),i}function ML(n,e,t){const i={},r=f(e,["model"]);r!=null&&h(i,["_url","model"],Ke(n,r));const a=f(e,["contents"]);if(a!=null){let d=Sg(n,a);Array.isArray(d)&&(d=d.map(g=>g)),h(i,["instances[]","content"],d)}const u=f(e,["config"]);return u!=null&&NL(u,i),i}function DL(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&h(t,["sdkHttpResponse"],i);const r=f(n,["embeddings"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(d=>d)),h(t,["embeddings"],u)}const a=f(n,["metadata"]);return a!=null&&h(t,["metadata"],a),t}function xL(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&h(t,["sdkHttpResponse"],i);const r=f(n,["predictions[]","embeddings"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(d=>fL(d))),h(t,["embeddings"],u)}const a=f(n,["metadata"]);return a!=null&&h(t,["metadata"],a),t}function PL(n,e){const t={},i=f(n,["endpoint"]);i!=null&&h(t,["name"],i);const r=f(n,["deployedModelId"]);return r!=null&&h(t,["deployedModelId"],r),t}function VL(n,e){const t={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(n,["fileUri"]);i!=null&&h(t,["fileUri"],i);const r=f(n,["mimeType"]);return r!=null&&h(t,["mimeType"],r),t}function UL(n,e){const t={},i=f(n,["id"]);i!=null&&h(t,["id"],i);const r=f(n,["args"]);r!=null&&h(t,["args"],r);const a=f(n,["name"]);if(a!=null&&h(t,["name"],a),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function LL(n,e){const t={},i=f(n,["allowedFunctionNames"]);i!=null&&h(t,["allowedFunctionNames"],i);const r=f(n,["mode"]);if(r!=null&&h(t,["mode"],r),f(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function kL(n,e){const t={},i=f(n,["description"]);i!=null&&h(t,["description"],i);const r=f(n,["name"]);r!=null&&h(t,["name"],r);const a=f(n,["parameters"]);a!=null&&h(t,["parameters"],a);const u=f(n,["parametersJsonSchema"]);u!=null&&h(t,["parametersJsonSchema"],u);const d=f(n,["response"]);d!=null&&h(t,["response"],d);const g=f(n,["responseJsonSchema"]);if(g!=null&&h(t,["responseJsonSchema"],g),f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return t}function OL(n,e,t,i){const r={},a=f(e,["systemInstruction"]);t!==void 0&&a!=null&&h(t,["systemInstruction"],vd(on(a)));const u=f(e,["temperature"]);u!=null&&h(r,["temperature"],u);const d=f(e,["topP"]);d!=null&&h(r,["topP"],d);const g=f(e,["topK"]);g!=null&&h(r,["topK"],g);const p=f(e,["candidateCount"]);p!=null&&h(r,["candidateCount"],p);const v=f(e,["maxOutputTokens"]);v!=null&&h(r,["maxOutputTokens"],v);const T=f(e,["stopSequences"]);T!=null&&h(r,["stopSequences"],T);const S=f(e,["responseLogprobs"]);S!=null&&h(r,["responseLogprobs"],S);const R=f(e,["logprobs"]);R!=null&&h(r,["logprobs"],R);const V=f(e,["presencePenalty"]);V!=null&&h(r,["presencePenalty"],V);const G=f(e,["frequencyPenalty"]);G!=null&&h(r,["frequencyPenalty"],G);const L=f(e,["seed"]);L!=null&&h(r,["seed"],L);const Y=f(e,["responseMimeType"]);Y!=null&&h(r,["responseMimeType"],Y);const ne=f(e,["responseSchema"]);ne!=null&&h(r,["responseSchema"],Ag(ne));const j=f(e,["responseJsonSchema"]);if(j!=null&&h(r,["responseJsonSchema"],j),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const ae=f(e,["safetySettings"]);if(t!==void 0&&ae!=null){let Me=ae;Array.isArray(Me)&&(Me=Me.map(st=>Nk(st))),h(t,["safetySettings"],Me)}const Q=f(e,["tools"]);if(t!==void 0&&Q!=null){let Me=Ua(Q);Array.isArray(Me)&&(Me=Me.map(st=>Uk(Va(st)))),h(t,["tools"],Me)}const ee=f(e,["toolConfig"]);if(t!==void 0&&ee!=null&&h(t,["toolConfig"],Vk(ee)),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const M=f(e,["cachedContent"]);t!==void 0&&M!=null&&h(t,["cachedContent"],vo(n,M));const N=f(e,["responseModalities"]);N!=null&&h(r,["responseModalities"],N);const b=f(e,["mediaResolution"]);b!=null&&h(r,["mediaResolution"],b);const x=f(e,["speechConfig"]);if(x!=null&&h(r,["speechConfig"],Cg(x)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const P=f(e,["thinkingConfig"]);P!=null&&h(r,["thinkingConfig"],P);const O=f(e,["imageConfig"]);O!=null&&h(r,["imageConfig"],fk(O));const D=f(e,["enableEnhancedCivicAnswers"]);if(D!=null&&h(r,["enableEnhancedCivicAnswers"],D),f(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return r}function FL(n,e,t,i){const r={},a=f(e,["systemInstruction"]);t!==void 0&&a!=null&&h(t,["systemInstruction"],on(a));const u=f(e,["temperature"]);u!=null&&h(r,["temperature"],u);const d=f(e,["topP"]);d!=null&&h(r,["topP"],d);const g=f(e,["topK"]);g!=null&&h(r,["topK"],g);const p=f(e,["candidateCount"]);p!=null&&h(r,["candidateCount"],p);const v=f(e,["maxOutputTokens"]);v!=null&&h(r,["maxOutputTokens"],v);const T=f(e,["stopSequences"]);T!=null&&h(r,["stopSequences"],T);const S=f(e,["responseLogprobs"]);S!=null&&h(r,["responseLogprobs"],S);const R=f(e,["logprobs"]);R!=null&&h(r,["logprobs"],R);const V=f(e,["presencePenalty"]);V!=null&&h(r,["presencePenalty"],V);const G=f(e,["frequencyPenalty"]);G!=null&&h(r,["frequencyPenalty"],G);const L=f(e,["seed"]);L!=null&&h(r,["seed"],L);const Y=f(e,["responseMimeType"]);Y!=null&&h(r,["responseMimeType"],Y);const ne=f(e,["responseSchema"]);ne!=null&&h(r,["responseSchema"],Ag(ne));const j=f(e,["responseJsonSchema"]);j!=null&&h(r,["responseJsonSchema"],j);const ae=f(e,["routingConfig"]);ae!=null&&h(r,["routingConfig"],ae);const Q=f(e,["modelSelectionConfig"]);Q!=null&&h(r,["modelConfig"],Q);const ee=f(e,["safetySettings"]);if(t!==void 0&&ee!=null){let me=ee;Array.isArray(me)&&(me=me.map(Pe=>Pe)),h(t,["safetySettings"],me)}const M=f(e,["tools"]);if(t!==void 0&&M!=null){let me=Ua(M);Array.isArray(me)&&(me=me.map(Pe=>eI(Va(Pe)))),h(t,["tools"],me)}const N=f(e,["toolConfig"]);t!==void 0&&N!=null&&h(t,["toolConfig"],N);const b=f(e,["labels"]);t!==void 0&&b!=null&&h(t,["labels"],b);const x=f(e,["cachedContent"]);t!==void 0&&x!=null&&h(t,["cachedContent"],vo(n,x));const P=f(e,["responseModalities"]);P!=null&&h(r,["responseModalities"],P);const O=f(e,["mediaResolution"]);O!=null&&h(r,["mediaResolution"],O);const D=f(e,["speechConfig"]);D!=null&&h(r,["speechConfig"],Cg(D));const Me=f(e,["audioTimestamp"]);Me!=null&&h(r,["audioTimestamp"],Me);const st=f(e,["thinkingConfig"]);st!=null&&h(r,["thinkingConfig"],st);const X=f(e,["imageConfig"]);if(X!=null&&h(r,["imageConfig"],dk(X)),f(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");const ue=f(e,["modelArmorConfig"]);return t!==void 0&&ue!=null&&h(t,["modelArmorConfig"],ue),r}function Q0(n,e,t){const i={},r=f(e,["model"]);r!=null&&h(i,["_url","model"],Ke(n,r));const a=f(e,["contents"]);if(a!=null){let d=Kn(a);Array.isArray(d)&&(d=d.map(g=>vd(g))),h(i,["contents"],d)}const u=f(e,["config"]);return u!=null&&h(i,["generationConfig"],OL(n,u,i)),i}function X0(n,e,t){const i={},r=f(e,["model"]);r!=null&&h(i,["_url","model"],Ke(n,r));const a=f(e,["contents"]);if(a!=null){let d=Kn(a);Array.isArray(d)&&(d=d.map(g=>g)),h(i,["contents"],d)}const u=f(e,["config"]);return u!=null&&h(i,["generationConfig"],FL(n,u,i)),i}function W0(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&h(t,["sdkHttpResponse"],i);const r=f(n,["candidates"]);if(r!=null){let p=r;Array.isArray(p)&&(p=p.map(v=>aL(v))),h(t,["candidates"],p)}const a=f(n,["modelVersion"]);a!=null&&h(t,["modelVersion"],a);const u=f(n,["promptFeedback"]);u!=null&&h(t,["promptFeedback"],u);const d=f(n,["responseId"]);d!=null&&h(t,["responseId"],d);const g=f(n,["usageMetadata"]);return g!=null&&h(t,["usageMetadata"],g),t}function Z0(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&h(t,["sdkHttpResponse"],i);const r=f(n,["candidates"]);if(r!=null){let v=r;Array.isArray(v)&&(v=v.map(T=>T)),h(t,["candidates"],v)}const a=f(n,["createTime"]);a!=null&&h(t,["createTime"],a);const u=f(n,["modelVersion"]);u!=null&&h(t,["modelVersion"],u);const d=f(n,["promptFeedback"]);d!=null&&h(t,["promptFeedback"],d);const g=f(n,["responseId"]);g!=null&&h(t,["responseId"],g);const p=f(n,["usageMetadata"]);return p!=null&&h(t,["usageMetadata"],p),t}function GL(n,e,t){const i={};if(f(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=f(n,["numberOfImages"]);e!==void 0&&r!=null&&h(e,["parameters","sampleCount"],r);const a=f(n,["aspectRatio"]);e!==void 0&&a!=null&&h(e,["parameters","aspectRatio"],a);const u=f(n,["guidanceScale"]);if(e!==void 0&&u!=null&&h(e,["parameters","guidanceScale"],u),f(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const d=f(n,["safetyFilterLevel"]);e!==void 0&&d!=null&&h(e,["parameters","safetySetting"],d);const g=f(n,["personGeneration"]);e!==void 0&&g!=null&&h(e,["parameters","personGeneration"],g);const p=f(n,["includeSafetyAttributes"]);e!==void 0&&p!=null&&h(e,["parameters","includeSafetyAttributes"],p);const v=f(n,["includeRaiReason"]);e!==void 0&&v!=null&&h(e,["parameters","includeRaiReason"],v);const T=f(n,["language"]);e!==void 0&&T!=null&&h(e,["parameters","language"],T);const S=f(n,["outputMimeType"]);e!==void 0&&S!=null&&h(e,["parameters","outputOptions","mimeType"],S);const R=f(n,["outputCompressionQuality"]);if(e!==void 0&&R!=null&&h(e,["parameters","outputOptions","compressionQuality"],R),f(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(f(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const V=f(n,["imageSize"]);if(e!==void 0&&V!=null&&h(e,["parameters","sampleImageSize"],V),f(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return i}function qL(n,e,t){const i={},r=f(n,["outputGcsUri"]);e!==void 0&&r!=null&&h(e,["parameters","storageUri"],r);const a=f(n,["negativePrompt"]);e!==void 0&&a!=null&&h(e,["parameters","negativePrompt"],a);const u=f(n,["numberOfImages"]);e!==void 0&&u!=null&&h(e,["parameters","sampleCount"],u);const d=f(n,["aspectRatio"]);e!==void 0&&d!=null&&h(e,["parameters","aspectRatio"],d);const g=f(n,["guidanceScale"]);e!==void 0&&g!=null&&h(e,["parameters","guidanceScale"],g);const p=f(n,["seed"]);e!==void 0&&p!=null&&h(e,["parameters","seed"],p);const v=f(n,["safetyFilterLevel"]);e!==void 0&&v!=null&&h(e,["parameters","safetySetting"],v);const T=f(n,["personGeneration"]);e!==void 0&&T!=null&&h(e,["parameters","personGeneration"],T);const S=f(n,["includeSafetyAttributes"]);e!==void 0&&S!=null&&h(e,["parameters","includeSafetyAttributes"],S);const R=f(n,["includeRaiReason"]);e!==void 0&&R!=null&&h(e,["parameters","includeRaiReason"],R);const V=f(n,["language"]);e!==void 0&&V!=null&&h(e,["parameters","language"],V);const G=f(n,["outputMimeType"]);e!==void 0&&G!=null&&h(e,["parameters","outputOptions","mimeType"],G);const L=f(n,["outputCompressionQuality"]);e!==void 0&&L!=null&&h(e,["parameters","outputOptions","compressionQuality"],L);const Y=f(n,["addWatermark"]);e!==void 0&&Y!=null&&h(e,["parameters","addWatermark"],Y);const ne=f(n,["labels"]);e!==void 0&&ne!=null&&h(e,["labels"],ne);const j=f(n,["imageSize"]);e!==void 0&&j!=null&&h(e,["parameters","sampleImageSize"],j);const ae=f(n,["enhancePrompt"]);return e!==void 0&&ae!=null&&h(e,["parameters","enhancePrompt"],ae),i}function BL(n,e,t){const i={},r=f(e,["model"]);r!=null&&h(i,["_url","model"],Ke(n,r));const a=f(e,["prompt"]);a!=null&&h(i,["instances[0]","prompt"],a);const u=f(e,["config"]);return u!=null&&GL(u,i),i}function HL(n,e,t){const i={},r=f(e,["model"]);r!=null&&h(i,["_url","model"],Ke(n,r));const a=f(e,["prompt"]);a!=null&&h(i,["instances[0]","prompt"],a);const u=f(e,["config"]);return u!=null&&qL(u,i),i}function zL(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&h(t,["sdkHttpResponse"],i);const r=f(n,["predictions"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(d=>nk(d))),h(t,["generatedImages"],u)}const a=f(n,["positivePromptSafetyAttributes"]);return a!=null&&h(t,["positivePromptSafetyAttributes"],ZC(a)),t}function JL(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&h(t,["sdkHttpResponse"],i);const r=f(n,["predictions"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(d=>Td(d))),h(t,["generatedImages"],u)}const a=f(n,["positivePromptSafetyAttributes"]);return a!=null&&h(t,["positivePromptSafetyAttributes"],jC(a)),t}function KL(n,e,t){const i={},r=f(n,["numberOfVideos"]);if(e!==void 0&&r!=null&&h(e,["parameters","sampleCount"],r),f(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const a=f(n,["durationSeconds"]);if(e!==void 0&&a!=null&&h(e,["parameters","durationSeconds"],a),f(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const u=f(n,["aspectRatio"]);e!==void 0&&u!=null&&h(e,["parameters","aspectRatio"],u);const d=f(n,["resolution"]);e!==void 0&&d!=null&&h(e,["parameters","resolution"],d);const g=f(n,["personGeneration"]);if(e!==void 0&&g!=null&&h(e,["parameters","personGeneration"],g),f(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const p=f(n,["negativePrompt"]);e!==void 0&&p!=null&&h(e,["parameters","negativePrompt"],p);const v=f(n,["enhancePrompt"]);if(e!==void 0&&v!=null&&h(e,["parameters","enhancePrompt"],v),f(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const T=f(n,["lastFrame"]);e!==void 0&&T!=null&&h(e,["instances[0]","lastFrame"],Ed(T));const S=f(n,["referenceImages"]);if(e!==void 0&&S!=null){let R=S;Array.isArray(R)&&(R=R.map(V=>$k(V))),h(e,["instances[0]","referenceImages"],R)}if(f(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(f(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return i}function YL(n,e,t){const i={},r=f(n,["numberOfVideos"]);e!==void 0&&r!=null&&h(e,["parameters","sampleCount"],r);const a=f(n,["outputGcsUri"]);e!==void 0&&a!=null&&h(e,["parameters","storageUri"],a);const u=f(n,["fps"]);e!==void 0&&u!=null&&h(e,["parameters","fps"],u);const d=f(n,["durationSeconds"]);e!==void 0&&d!=null&&h(e,["parameters","durationSeconds"],d);const g=f(n,["seed"]);e!==void 0&&g!=null&&h(e,["parameters","seed"],g);const p=f(n,["aspectRatio"]);e!==void 0&&p!=null&&h(e,["parameters","aspectRatio"],p);const v=f(n,["resolution"]);e!==void 0&&v!=null&&h(e,["parameters","resolution"],v);const T=f(n,["personGeneration"]);e!==void 0&&T!=null&&h(e,["parameters","personGeneration"],T);const S=f(n,["pubsubTopic"]);e!==void 0&&S!=null&&h(e,["parameters","pubsubTopic"],S);const R=f(n,["negativePrompt"]);e!==void 0&&R!=null&&h(e,["parameters","negativePrompt"],R);const V=f(n,["enhancePrompt"]);e!==void 0&&V!=null&&h(e,["parameters","enhancePrompt"],V);const G=f(n,["generateAudio"]);e!==void 0&&G!=null&&h(e,["parameters","generateAudio"],G);const L=f(n,["lastFrame"]);e!==void 0&&L!=null&&h(e,["instances[0]","lastFrame"],fi(L));const Y=f(n,["referenceImages"]);if(e!==void 0&&Y!=null){let ae=Y;Array.isArray(ae)&&(ae=ae.map(Q=>Qk(Q))),h(e,["instances[0]","referenceImages"],ae)}const ne=f(n,["mask"]);e!==void 0&&ne!=null&&h(e,["instances[0]","mask"],Yk(ne));const j=f(n,["compressionQuality"]);return e!==void 0&&j!=null&&h(e,["parameters","compressionQuality"],j),i}function $L(n,e){const t={},i=f(n,["name"]);i!=null&&h(t,["name"],i);const r=f(n,["metadata"]);r!=null&&h(t,["metadata"],r);const a=f(n,["done"]);a!=null&&h(t,["done"],a);const u=f(n,["error"]);u!=null&&h(t,["error"],u);const d=f(n,["response","generateVideoResponse"]);return d!=null&&h(t,["response"],ZL(d)),t}function QL(n,e){const t={},i=f(n,["name"]);i!=null&&h(t,["name"],i);const r=f(n,["metadata"]);r!=null&&h(t,["metadata"],r);const a=f(n,["done"]);a!=null&&h(t,["done"],a);const u=f(n,["error"]);u!=null&&h(t,["error"],u);const d=f(n,["response"]);return d!=null&&h(t,["response"],jL(d)),t}function XL(n,e,t){const i={},r=f(e,["model"]);r!=null&&h(i,["_url","model"],Ke(n,r));const a=f(e,["prompt"]);a!=null&&h(i,["instances[0]","prompt"],a);const u=f(e,["image"]);u!=null&&h(i,["instances[0]","image"],Ed(u));const d=f(e,["video"]);d!=null&&h(i,["instances[0]","video"],tI(d));const g=f(e,["source"]);g!=null&&ek(g,i);const p=f(e,["config"]);return p!=null&&KL(p,i),i}function WL(n,e,t){const i={},r=f(e,["model"]);r!=null&&h(i,["_url","model"],Ke(n,r));const a=f(e,["prompt"]);a!=null&&h(i,["instances[0]","prompt"],a);const u=f(e,["image"]);u!=null&&h(i,["instances[0]","image"],fi(u));const d=f(e,["video"]);d!=null&&h(i,["instances[0]","video"],nI(d));const g=f(e,["source"]);g!=null&&tk(g,i);const p=f(e,["config"]);return p!=null&&YL(p,i),i}function ZL(n,e){const t={},i=f(n,["generatedSamples"]);if(i!=null){let u=i;Array.isArray(u)&&(u=u.map(d=>ok(d))),h(t,["generatedVideos"],u)}const r=f(n,["raiMediaFilteredCount"]);r!=null&&h(t,["raiMediaFilteredCount"],r);const a=f(n,["raiMediaFilteredReasons"]);return a!=null&&h(t,["raiMediaFilteredReasons"],a),t}function jL(n,e){const t={},i=f(n,["videos"]);if(i!=null){let u=i;Array.isArray(u)&&(u=u.map(d=>sk(d))),h(t,["generatedVideos"],u)}const r=f(n,["raiMediaFilteredCount"]);r!=null&&h(t,["raiMediaFilteredCount"],r);const a=f(n,["raiMediaFilteredReasons"]);return a!=null&&h(t,["raiMediaFilteredReasons"],a),t}function ek(n,e,t){const i={},r=f(n,["prompt"]);e!==void 0&&r!=null&&h(e,["instances[0]","prompt"],r);const a=f(n,["image"]);e!==void 0&&a!=null&&h(e,["instances[0]","image"],Ed(a));const u=f(n,["video"]);return e!==void 0&&u!=null&&h(e,["instances[0]","video"],tI(u)),i}function tk(n,e,t){const i={},r=f(n,["prompt"]);e!==void 0&&r!=null&&h(e,["instances[0]","prompt"],r);const a=f(n,["image"]);e!==void 0&&a!=null&&h(e,["instances[0]","image"],fi(a));const u=f(n,["video"]);return e!==void 0&&u!=null&&h(e,["instances[0]","video"],nI(u)),i}function nk(n,e){const t={},i=f(n,["_self"]);i!=null&&h(t,["image"],hk(i));const r=f(n,["raiFilteredReason"]);r!=null&&h(t,["raiFilteredReason"],r);const a=f(n,["_self"]);return a!=null&&h(t,["safetyAttributes"],ZC(a)),t}function Td(n,e){const t={},i=f(n,["_self"]);i!=null&&h(t,["image"],WC(i));const r=f(n,["raiFilteredReason"]);r!=null&&h(t,["raiFilteredReason"],r);const a=f(n,["_self"]);a!=null&&h(t,["safetyAttributes"],jC(a));const u=f(n,["prompt"]);return u!=null&&h(t,["enhancedPrompt"],u),t}function ik(n,e){const t={},i=f(n,["_self"]);i!=null&&h(t,["mask"],WC(i));const r=f(n,["labels"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>u)),h(t,["labels"],a)}return t}function ok(n,e){const t={},i=f(n,["video"]);return i!=null&&h(t,["video"],Jk(i)),t}function sk(n,e){const t={},i=f(n,["_self"]);return i!=null&&h(t,["video"],Kk(i)),t}function rk(n,e){const t={},i=f(n,["modelSelectionConfig"]);i!=null&&h(t,["modelConfig"],i);const r=f(n,["responseJsonSchema"]);r!=null&&h(t,["responseJsonSchema"],r);const a=f(n,["audioTimestamp"]);a!=null&&h(t,["audioTimestamp"],a);const u=f(n,["candidateCount"]);u!=null&&h(t,["candidateCount"],u);const d=f(n,["enableAffectiveDialog"]);d!=null&&h(t,["enableAffectiveDialog"],d);const g=f(n,["frequencyPenalty"]);g!=null&&h(t,["frequencyPenalty"],g);const p=f(n,["logprobs"]);p!=null&&h(t,["logprobs"],p);const v=f(n,["maxOutputTokens"]);v!=null&&h(t,["maxOutputTokens"],v);const T=f(n,["mediaResolution"]);T!=null&&h(t,["mediaResolution"],T);const S=f(n,["presencePenalty"]);S!=null&&h(t,["presencePenalty"],S);const R=f(n,["responseLogprobs"]);R!=null&&h(t,["responseLogprobs"],R);const V=f(n,["responseMimeType"]);V!=null&&h(t,["responseMimeType"],V);const G=f(n,["responseModalities"]);G!=null&&h(t,["responseModalities"],G);const L=f(n,["responseSchema"]);L!=null&&h(t,["responseSchema"],L);const Y=f(n,["routingConfig"]);Y!=null&&h(t,["routingConfig"],Y);const ne=f(n,["seed"]);ne!=null&&h(t,["seed"],ne);const j=f(n,["speechConfig"]);j!=null&&h(t,["speechConfig"],j);const ae=f(n,["stopSequences"]);ae!=null&&h(t,["stopSequences"],ae);const Q=f(n,["temperature"]);Q!=null&&h(t,["temperature"],Q);const ee=f(n,["thinkingConfig"]);ee!=null&&h(t,["thinkingConfig"],ee);const M=f(n,["topK"]);M!=null&&h(t,["topK"],M);const N=f(n,["topP"]);if(N!=null&&h(t,["topP"],N),f(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}function ak(n,e,t){const i={},r=f(e,["model"]);return r!=null&&h(i,["_url","name"],Ke(n,r)),i}function lk(n,e,t){const i={},r=f(e,["model"]);return r!=null&&h(i,["_url","name"],Ke(n,r)),i}function uk(n,e){const t={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=f(n,["enableWidget"]);return i!=null&&h(t,["enableWidget"],i),t}function ck(n,e){const t={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=f(n,["timeRangeFilter"]);return i!=null&&h(t,["timeRangeFilter"],i),t}function fk(n,e){const t={},i=f(n,["aspectRatio"]);i!=null&&h(t,["aspectRatio"],i);const r=f(n,["imageSize"]);if(r!=null&&h(t,["imageSize"],r),f(n,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(f(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(f(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return t}function dk(n,e){const t={},i=f(n,["aspectRatio"]);i!=null&&h(t,["aspectRatio"],i);const r=f(n,["imageSize"]);r!=null&&h(t,["imageSize"],r);const a=f(n,["personGeneration"]);a!=null&&h(t,["personGeneration"],a);const u=f(n,["outputMimeType"]);u!=null&&h(t,["imageOutputOptions","mimeType"],u);const d=f(n,["outputCompressionQuality"]);return d!=null&&h(t,["imageOutputOptions","compressionQuality"],d),t}function hk(n,e){const t={},i=f(n,["bytesBase64Encoded"]);i!=null&&h(t,["imageBytes"],As(i));const r=f(n,["mimeType"]);return r!=null&&h(t,["mimeType"],r),t}function WC(n,e){const t={},i=f(n,["gcsUri"]);i!=null&&h(t,["gcsUri"],i);const r=f(n,["bytesBase64Encoded"]);r!=null&&h(t,["imageBytes"],As(r));const a=f(n,["mimeType"]);return a!=null&&h(t,["mimeType"],a),t}function Ed(n,e){const t={};if(f(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const i=f(n,["imageBytes"]);i!=null&&h(t,["bytesBase64Encoded"],As(i));const r=f(n,["mimeType"]);return r!=null&&h(t,["mimeType"],r),t}function fi(n,e){const t={},i=f(n,["gcsUri"]);i!=null&&h(t,["gcsUri"],i);const r=f(n,["imageBytes"]);r!=null&&h(t,["bytesBase64Encoded"],As(r));const a=f(n,["mimeType"]);return a!=null&&h(t,["mimeType"],a),t}function pk(n,e,t,i){const r={},a=f(e,["pageSize"]);t!==void 0&&a!=null&&h(t,["_query","pageSize"],a);const u=f(e,["pageToken"]);t!==void 0&&u!=null&&h(t,["_query","pageToken"],u);const d=f(e,["filter"]);t!==void 0&&d!=null&&h(t,["_query","filter"],d);const g=f(e,["queryBase"]);return t!==void 0&&g!=null&&h(t,["_url","models_url"],zC(n,g)),r}function mk(n,e,t,i){const r={},a=f(e,["pageSize"]);t!==void 0&&a!=null&&h(t,["_query","pageSize"],a);const u=f(e,["pageToken"]);t!==void 0&&u!=null&&h(t,["_query","pageToken"],u);const d=f(e,["filter"]);t!==void 0&&d!=null&&h(t,["_query","filter"],d);const g=f(e,["queryBase"]);return t!==void 0&&g!=null&&h(t,["_url","models_url"],zC(n,g)),r}function gk(n,e,t){const i={},r=f(e,["config"]);return r!=null&&pk(n,r,i),i}function yk(n,e,t){const i={},r=f(e,["config"]);return r!=null&&mk(n,r,i),i}function _k(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&h(t,["sdkHttpResponse"],i);const r=f(n,["nextPageToken"]);r!=null&&h(t,["nextPageToken"],r);const a=f(n,["_self"]);if(a!=null){let u=JC(a);Array.isArray(u)&&(u=u.map(d=>Sm(d))),h(t,["models"],u)}return t}function vk(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&h(t,["sdkHttpResponse"],i);const r=f(n,["nextPageToken"]);r!=null&&h(t,["nextPageToken"],r);const a=f(n,["_self"]);if(a!=null){let u=JC(a);Array.isArray(u)&&(u=u.map(d=>Am(d))),h(t,["models"],u)}return t}function Tk(n,e){const t={},i=f(n,["maskMode"]);i!=null&&h(t,["maskMode"],i);const r=f(n,["segmentationClasses"]);r!=null&&h(t,["maskClasses"],r);const a=f(n,["maskDilation"]);return a!=null&&h(t,["dilation"],a),t}function Sm(n,e){const t={},i=f(n,["name"]);i!=null&&h(t,["name"],i);const r=f(n,["displayName"]);r!=null&&h(t,["displayName"],r);const a=f(n,["description"]);a!=null&&h(t,["description"],a);const u=f(n,["version"]);u!=null&&h(t,["version"],u);const d=f(n,["_self"]);d!=null&&h(t,["tunedModelInfo"],Lk(d));const g=f(n,["inputTokenLimit"]);g!=null&&h(t,["inputTokenLimit"],g);const p=f(n,["outputTokenLimit"]);p!=null&&h(t,["outputTokenLimit"],p);const v=f(n,["supportedGenerationMethods"]);v!=null&&h(t,["supportedActions"],v);const T=f(n,["temperature"]);T!=null&&h(t,["temperature"],T);const S=f(n,["maxTemperature"]);S!=null&&h(t,["maxTemperature"],S);const R=f(n,["topP"]);R!=null&&h(t,["topP"],R);const V=f(n,["topK"]);V!=null&&h(t,["topK"],V);const G=f(n,["thinking"]);return G!=null&&h(t,["thinking"],G),t}function Am(n,e){const t={},i=f(n,["name"]);i!=null&&h(t,["name"],i);const r=f(n,["displayName"]);r!=null&&h(t,["displayName"],r);const a=f(n,["description"]);a!=null&&h(t,["description"],a);const u=f(n,["versionId"]);u!=null&&h(t,["version"],u);const d=f(n,["deployedModels"]);if(d!=null){let S=d;Array.isArray(S)&&(S=S.map(R=>PL(R))),h(t,["endpoints"],S)}const g=f(n,["labels"]);g!=null&&h(t,["labels"],g);const p=f(n,["_self"]);p!=null&&h(t,["tunedModelInfo"],kk(p));const v=f(n,["defaultCheckpointId"]);v!=null&&h(t,["defaultCheckpointId"],v);const T=f(n,["checkpoints"]);if(T!=null){let S=T;Array.isArray(S)&&(S=S.map(R=>R)),h(t,["checkpoints"],S)}return t}function Ek(n,e){const t={},i=f(n,["mediaResolution"]);i!=null&&h(t,["mediaResolution"],i);const r=f(n,["codeExecutionResult"]);r!=null&&h(t,["codeExecutionResult"],r);const a=f(n,["executableCode"]);a!=null&&h(t,["executableCode"],a);const u=f(n,["fileData"]);u!=null&&h(t,["fileData"],VL(u));const d=f(n,["functionCall"]);d!=null&&h(t,["functionCall"],UL(d));const g=f(n,["functionResponse"]);g!=null&&h(t,["functionResponse"],g);const p=f(n,["inlineData"]);p!=null&&h(t,["inlineData"],rL(p));const v=f(n,["text"]);v!=null&&h(t,["text"],v);const T=f(n,["thought"]);T!=null&&h(t,["thought"],T);const S=f(n,["thoughtSignature"]);S!=null&&h(t,["thoughtSignature"],S);const R=f(n,["videoMetadata"]);return R!=null&&h(t,["videoMetadata"],R),t}function Sk(n,e){const t={},i=f(n,["productImage"]);return i!=null&&h(t,["image"],fi(i)),t}function Ak(n,e,t){const i={},r=f(n,["numberOfImages"]);e!==void 0&&r!=null&&h(e,["parameters","sampleCount"],r);const a=f(n,["baseSteps"]);e!==void 0&&a!=null&&h(e,["parameters","baseSteps"],a);const u=f(n,["outputGcsUri"]);e!==void 0&&u!=null&&h(e,["parameters","storageUri"],u);const d=f(n,["seed"]);e!==void 0&&d!=null&&h(e,["parameters","seed"],d);const g=f(n,["safetyFilterLevel"]);e!==void 0&&g!=null&&h(e,["parameters","safetySetting"],g);const p=f(n,["personGeneration"]);e!==void 0&&p!=null&&h(e,["parameters","personGeneration"],p);const v=f(n,["addWatermark"]);e!==void 0&&v!=null&&h(e,["parameters","addWatermark"],v);const T=f(n,["outputMimeType"]);e!==void 0&&T!=null&&h(e,["parameters","outputOptions","mimeType"],T);const S=f(n,["outputCompressionQuality"]);e!==void 0&&S!=null&&h(e,["parameters","outputOptions","compressionQuality"],S);const R=f(n,["enhancePrompt"]);e!==void 0&&R!=null&&h(e,["parameters","enhancePrompt"],R);const V=f(n,["labels"]);return e!==void 0&&V!=null&&h(e,["labels"],V),i}function Ck(n,e,t){const i={},r=f(e,["model"]);r!=null&&h(i,["_url","model"],Ke(n,r));const a=f(e,["source"]);a!=null&&Rk(a,i);const u=f(e,["config"]);return u!=null&&Ak(u,i),i}function Ik(n,e){const t={},i=f(n,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>Td(a))),h(t,["generatedImages"],r)}return t}function Rk(n,e,t){const i={},r=f(n,["prompt"]);e!==void 0&&r!=null&&h(e,["instances[0]","prompt"],r);const a=f(n,["personImage"]);e!==void 0&&a!=null&&h(e,["instances[0]","personImage","image"],fi(a));const u=f(n,["productImages"]);if(e!==void 0&&u!=null){let d=u;Array.isArray(d)&&(d=d.map(g=>Sk(g))),h(e,["instances[0]","productImages"],d)}return i}function wk(n,e){const t={},i=f(n,["referenceImage"]);i!=null&&h(t,["referenceImage"],fi(i));const r=f(n,["referenceId"]);r!=null&&h(t,["referenceId"],r);const a=f(n,["referenceType"]);a!=null&&h(t,["referenceType"],a);const u=f(n,["maskImageConfig"]);u!=null&&h(t,["maskImageConfig"],Tk(u));const d=f(n,["controlImageConfig"]);d!=null&&h(t,["controlImageConfig"],hL(d));const g=f(n,["styleImageConfig"]);g!=null&&h(t,["styleImageConfig"],g);const p=f(n,["subjectImageConfig"]);return p!=null&&h(t,["subjectImageConfig"],p),t}function ZC(n,e){const t={},i=f(n,["safetyAttributes","categories"]);i!=null&&h(t,["categories"],i);const r=f(n,["safetyAttributes","scores"]);r!=null&&h(t,["scores"],r);const a=f(n,["contentType"]);return a!=null&&h(t,["contentType"],a),t}function jC(n,e){const t={},i=f(n,["safetyAttributes","categories"]);i!=null&&h(t,["categories"],i);const r=f(n,["safetyAttributes","scores"]);r!=null&&h(t,["scores"],r);const a=f(n,["contentType"]);return a!=null&&h(t,["contentType"],a),t}function Nk(n,e){const t={},i=f(n,["category"]);if(i!=null&&h(t,["category"],i),f(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=f(n,["threshold"]);return r!=null&&h(t,["threshold"],r),t}function bk(n,e){const t={},i=f(n,["image"]);return i!=null&&h(t,["image"],fi(i)),t}function Mk(n,e,t){const i={},r=f(n,["mode"]);e!==void 0&&r!=null&&h(e,["parameters","mode"],r);const a=f(n,["maxPredictions"]);e!==void 0&&a!=null&&h(e,["parameters","maxPredictions"],a);const u=f(n,["confidenceThreshold"]);e!==void 0&&u!=null&&h(e,["parameters","confidenceThreshold"],u);const d=f(n,["maskDilation"]);e!==void 0&&d!=null&&h(e,["parameters","maskDilation"],d);const g=f(n,["binaryColorThreshold"]);e!==void 0&&g!=null&&h(e,["parameters","binaryColorThreshold"],g);const p=f(n,["labels"]);return e!==void 0&&p!=null&&h(e,["labels"],p),i}function Dk(n,e,t){const i={},r=f(e,["model"]);r!=null&&h(i,["_url","model"],Ke(n,r));const a=f(e,["source"]);a!=null&&Pk(a,i);const u=f(e,["config"]);return u!=null&&Mk(u,i),i}function xk(n,e){const t={},i=f(n,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>ik(a))),h(t,["generatedMasks"],r)}return t}function Pk(n,e,t){const i={},r=f(n,["prompt"]);e!==void 0&&r!=null&&h(e,["instances[0]","prompt"],r);const a=f(n,["image"]);e!==void 0&&a!=null&&h(e,["instances[0]","image"],fi(a));const u=f(n,["scribbleImage"]);return e!==void 0&&u!=null&&h(e,["instances[0]","scribble"],bk(u)),i}function Vk(n,e){const t={},i=f(n,["retrievalConfig"]);i!=null&&h(t,["retrievalConfig"],i);const r=f(n,["functionCallingConfig"]);return r!=null&&h(t,["functionCallingConfig"],LL(r)),t}function Uk(n,e){const t={};if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=f(n,["computerUse"]);i!=null&&h(t,["computerUse"],i);const r=f(n,["fileSearch"]);r!=null&&h(t,["fileSearch"],r);const a=f(n,["codeExecution"]);if(a!=null&&h(t,["codeExecution"],a),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=f(n,["functionDeclarations"]);if(u!=null){let T=u;Array.isArray(T)&&(T=T.map(S=>S)),h(t,["functionDeclarations"],T)}const d=f(n,["googleMaps"]);d!=null&&h(t,["googleMaps"],uk(d));const g=f(n,["googleSearch"]);g!=null&&h(t,["googleSearch"],ck(g));const p=f(n,["googleSearchRetrieval"]);p!=null&&h(t,["googleSearchRetrieval"],p);const v=f(n,["urlContext"]);return v!=null&&h(t,["urlContext"],v),t}function eI(n,e){const t={},i=f(n,["retrieval"]);i!=null&&h(t,["retrieval"],i);const r=f(n,["computerUse"]);if(r!=null&&h(t,["computerUse"],r),f(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const a=f(n,["codeExecution"]);a!=null&&h(t,["codeExecution"],a);const u=f(n,["enterpriseWebSearch"]);u!=null&&h(t,["enterpriseWebSearch"],u);const d=f(n,["functionDeclarations"]);if(d!=null){let S=d;Array.isArray(S)&&(S=S.map(R=>kL(R))),h(t,["functionDeclarations"],S)}const g=f(n,["googleMaps"]);g!=null&&h(t,["googleMaps"],g);const p=f(n,["googleSearch"]);p!=null&&h(t,["googleSearch"],p);const v=f(n,["googleSearchRetrieval"]);v!=null&&h(t,["googleSearchRetrieval"],v);const T=f(n,["urlContext"]);return T!=null&&h(t,["urlContext"],T),t}function Lk(n,e){const t={},i=f(n,["baseModel"]);i!=null&&h(t,["baseModel"],i);const r=f(n,["createTime"]);r!=null&&h(t,["createTime"],r);const a=f(n,["updateTime"]);return a!=null&&h(t,["updateTime"],a),t}function kk(n,e){const t={},i=f(n,["labels","google-vertex-llm-tuning-base-model-id"]);i!=null&&h(t,["baseModel"],i);const r=f(n,["createTime"]);r!=null&&h(t,["createTime"],r);const a=f(n,["updateTime"]);return a!=null&&h(t,["updateTime"],a),t}function Ok(n,e,t){const i={},r=f(n,["displayName"]);e!==void 0&&r!=null&&h(e,["displayName"],r);const a=f(n,["description"]);e!==void 0&&a!=null&&h(e,["description"],a);const u=f(n,["defaultCheckpointId"]);return e!==void 0&&u!=null&&h(e,["defaultCheckpointId"],u),i}function Fk(n,e,t){const i={},r=f(n,["displayName"]);e!==void 0&&r!=null&&h(e,["displayName"],r);const a=f(n,["description"]);e!==void 0&&a!=null&&h(e,["description"],a);const u=f(n,["defaultCheckpointId"]);return e!==void 0&&u!=null&&h(e,["defaultCheckpointId"],u),i}function Gk(n,e,t){const i={},r=f(e,["model"]);r!=null&&h(i,["_url","name"],Ke(n,r));const a=f(e,["config"]);return a!=null&&Ok(a,i),i}function qk(n,e,t){const i={},r=f(e,["model"]);r!=null&&h(i,["_url","model"],Ke(n,r));const a=f(e,["config"]);return a!=null&&Fk(a,i),i}function Bk(n,e,t){const i={},r=f(n,["outputGcsUri"]);e!==void 0&&r!=null&&h(e,["parameters","storageUri"],r);const a=f(n,["safetyFilterLevel"]);e!==void 0&&a!=null&&h(e,["parameters","safetySetting"],a);const u=f(n,["personGeneration"]);e!==void 0&&u!=null&&h(e,["parameters","personGeneration"],u);const d=f(n,["includeRaiReason"]);e!==void 0&&d!=null&&h(e,["parameters","includeRaiReason"],d);const g=f(n,["outputMimeType"]);e!==void 0&&g!=null&&h(e,["parameters","outputOptions","mimeType"],g);const p=f(n,["outputCompressionQuality"]);e!==void 0&&p!=null&&h(e,["parameters","outputOptions","compressionQuality"],p);const v=f(n,["enhanceInputImage"]);e!==void 0&&v!=null&&h(e,["parameters","upscaleConfig","enhanceInputImage"],v);const T=f(n,["imagePreservationFactor"]);e!==void 0&&T!=null&&h(e,["parameters","upscaleConfig","imagePreservationFactor"],T);const S=f(n,["labels"]);e!==void 0&&S!=null&&h(e,["labels"],S);const R=f(n,["numberOfImages"]);e!==void 0&&R!=null&&h(e,["parameters","sampleCount"],R);const V=f(n,["mode"]);return e!==void 0&&V!=null&&h(e,["parameters","mode"],V),i}function Hk(n,e,t){const i={},r=f(e,["model"]);r!=null&&h(i,["_url","model"],Ke(n,r));const a=f(e,["image"]);a!=null&&h(i,["instances[0]","image"],fi(a));const u=f(e,["upscaleFactor"]);u!=null&&h(i,["parameters","upscaleConfig","upscaleFactor"],u);const d=f(e,["config"]);return d!=null&&Bk(d,i),i}function zk(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&h(t,["sdkHttpResponse"],i);const r=f(n,["predictions"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>Td(u))),h(t,["generatedImages"],a)}return t}function Jk(n,e){const t={},i=f(n,["uri"]);i!=null&&h(t,["uri"],i);const r=f(n,["encodedVideo"]);r!=null&&h(t,["videoBytes"],As(r));const a=f(n,["encoding"]);return a!=null&&h(t,["mimeType"],a),t}function Kk(n,e){const t={},i=f(n,["gcsUri"]);i!=null&&h(t,["uri"],i);const r=f(n,["bytesBase64Encoded"]);r!=null&&h(t,["videoBytes"],As(r));const a=f(n,["mimeType"]);return a!=null&&h(t,["mimeType"],a),t}function Yk(n,e){const t={},i=f(n,["image"]);i!=null&&h(t,["_self"],fi(i));const r=f(n,["maskMode"]);return r!=null&&h(t,["maskMode"],r),t}function $k(n,e){const t={},i=f(n,["image"]);i!=null&&h(t,["image"],Ed(i));const r=f(n,["referenceType"]);return r!=null&&h(t,["referenceType"],r),t}function Qk(n,e){const t={},i=f(n,["image"]);i!=null&&h(t,["image"],fi(i));const r=f(n,["referenceType"]);return r!=null&&h(t,["referenceType"],r),t}function tI(n,e){const t={},i=f(n,["uri"]);i!=null&&h(t,["uri"],i);const r=f(n,["videoBytes"]);r!=null&&h(t,["encodedVideo"],As(r));const a=f(n,["mimeType"]);return a!=null&&h(t,["encoding"],a),t}function nI(n,e){const t={},i=f(n,["uri"]);i!=null&&h(t,["gcsUri"],i);const r=f(n,["videoBytes"]);r!=null&&h(t,["bytesBase64Encoded"],As(r));const a=f(n,["mimeType"]);return a!=null&&h(t,["mimeType"],a),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Xk(n,e){const t={},i=f(n,["displayName"]);return e!==void 0&&i!=null&&h(e,["displayName"],i),t}function Wk(n){const e={},t=f(n,["config"]);return t!=null&&Xk(t,e),e}function Zk(n,e){const t={},i=f(n,["force"]);return e!==void 0&&i!=null&&h(e,["_query","force"],i),t}function jk(n){const e={},t=f(n,["name"]);t!=null&&h(e,["_url","name"],t);const i=f(n,["config"]);return i!=null&&Zk(i,e),e}function eO(n){const e={},t=f(n,["name"]);return t!=null&&h(e,["_url","name"],t),e}function tO(n,e){const t={},i=f(n,["customMetadata"]);if(e!==void 0&&i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>u)),h(e,["customMetadata"],a)}const r=f(n,["chunkingConfig"]);return e!==void 0&&r!=null&&h(e,["chunkingConfig"],r),t}function nO(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const i=f(n,["metadata"]);i!=null&&h(e,["metadata"],i);const r=f(n,["done"]);r!=null&&h(e,["done"],r);const a=f(n,["error"]);a!=null&&h(e,["error"],a);const u=f(n,["response"]);return u!=null&&h(e,["response"],oO(u)),e}function iO(n){const e={},t=f(n,["fileSearchStoreName"]);t!=null&&h(e,["_url","file_search_store_name"],t);const i=f(n,["fileName"]);i!=null&&h(e,["fileName"],i);const r=f(n,["config"]);return r!=null&&tO(r,e),e}function oO(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const i=f(n,["parent"]);i!=null&&h(e,["parent"],i);const r=f(n,["documentName"]);return r!=null&&h(e,["documentName"],r),e}function sO(n,e){const t={},i=f(n,["pageSize"]);e!==void 0&&i!=null&&h(e,["_query","pageSize"],i);const r=f(n,["pageToken"]);return e!==void 0&&r!=null&&h(e,["_query","pageToken"],r),t}function rO(n){const e={},t=f(n,["config"]);return t!=null&&sO(t,e),e}function aO(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&h(e,["nextPageToken"],i);const r=f(n,["fileSearchStores"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>u)),h(e,["fileSearchStores"],a)}return e}function iI(n,e){const t={},i=f(n,["mimeType"]);e!==void 0&&i!=null&&h(e,["mimeType"],i);const r=f(n,["displayName"]);e!==void 0&&r!=null&&h(e,["displayName"],r);const a=f(n,["customMetadata"]);if(e!==void 0&&a!=null){let d=a;Array.isArray(d)&&(d=d.map(g=>g)),h(e,["customMetadata"],d)}const u=f(n,["chunkingConfig"]);return e!==void 0&&u!=null&&h(e,["chunkingConfig"],u),t}function lO(n){const e={},t=f(n,["fileSearchStoreName"]);t!=null&&h(e,["_url","file_search_store_name"],t);const i=f(n,["config"]);return i!=null&&iI(i,e),e}function uO(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const cO="Content-Type",fO="X-Server-Timeout",dO="User-Agent",Cm="x-goog-api-client",hO="1.40.0",pO=`google-genai-sdk/${hO}`,mO="v1beta1",gO="v1beta";class yO{constructor(e){var t,i,r;this.clientOptions=Object.assign({},e),this.customBaseUrl=(t=e.httpOptions)===null||t===void 0?void 0:t.baseUrl,this.clientOptions.vertexai&&(this.clientOptions.project&&this.clientOptions.location?this.clientOptions.apiKey=void 0:this.clientOptions.apiKey&&(this.clientOptions.project=void 0,this.clientOptions.location=void 0));const a={};if(this.clientOptions.vertexai){if(!this.clientOptions.location&&!this.clientOptions.apiKey&&!this.customBaseUrl&&(this.clientOptions.location="global"),!(this.clientOptions.project&&this.clientOptions.location||this.clientOptions.apiKey)&&!this.customBaseUrl)throw new Error("Authentication is not set up. Please provide either a project and location, or an API key, or a custom base URL.");const d=e.project&&e.location||!!e.apiKey;this.customBaseUrl&&!d?(a.baseUrl=this.customBaseUrl,this.clientOptions.project=void 0,this.clientOptions.location=void 0):this.clientOptions.apiKey||this.clientOptions.location==="global"?a.baseUrl="https://aiplatform.googleapis.com/":this.clientOptions.project&&this.clientOptions.location&&(a.baseUrl=`https://${this.clientOptions.location}-aiplatform.googleapis.com/`),a.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:mO}else{if(!this.clientOptions.apiKey)throw new pu({message:"API key must be set when using the Gemini API.",status:403});a.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:gO,a.baseUrl="https://generativelanguage.googleapis.com/"}a.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=a,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(a,e.httpOptions))}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getCustomBaseUrl(){return this.customBaseUrl}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,i){const r=[this.getRequestUrlInternal(t)];return i&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e,t){return!(t.baseUrl&&t.baseUrlResourceScope===_m.COLLECTION||this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e,t),r=this.constructUrl(e.path,t,i);if(e.queryParams)for(const[u,d]of Object.entries(e.queryParams))r.searchParams.append(u,String(d));let a={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else a.body=e.body;return a=await this.includeExtraHttpOptionsToRequestInit(a,t,r.toString(),e.abortSignal),this.unaryApiCall(r,a,e.httpMethod)}patchHttpOptions(e,t){const i=JSON.parse(JSON.stringify(e));for(const[r,a]of Object.entries(t))typeof a=="object"?i[r]=Object.assign(Object.assign({},i[r]),a):a!==void 0&&(i[r]=a);return i}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e,t),r=this.constructUrl(e.path,t,i);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let a={};return a.body=e.body,a=await this.includeExtraHttpOptionsToRequestInit(a,t,r.toString(),e.abortSignal),this.streamApiCall(r,a,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,i,r){if(t&&t.timeout||r){const a=new AbortController,u=a.signal;if(t.timeout&&(t==null?void 0:t.timeout)>0){const d=setTimeout(()=>a.abort(),t.timeout);d&&typeof d.unref=="function"&&d.unref()}r&&r.addEventListener("abort",()=>{a.abort()}),e.signal=u}return t&&t.extraBody!==null&&_O(e,t.extraBody),e.headers=await this.getHeadersInternal(t,i),e}async unaryApiCall(e,t,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:i})).then(async r=>(await j0(r),new vm(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(e,t,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:i})).then(async r=>(await j0(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(e){return ui(this,arguments,function*(){var i;const r=(i=e==null?void 0:e.body)===null||i===void 0?void 0:i.getReader(),a=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let u="";const d="data:",g=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:p,value:v}=yield Ce(r.read());if(p){if(u.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const T=a.decode(v,{stream:!0});try{const V=JSON.parse(T);if("error"in V){const G=JSON.parse(JSON.stringify(V.error)),L=G.status,Y=G.code,ne=`got status: ${L}. ${JSON.stringify(V)}`;if(Y>=400&&Y<600)throw new pu({message:ne,status:Y})}}catch(V){if(V.name==="ApiError")throw V}u+=T;let S=-1,R=0;for(;;){S=-1,R=0;for(const L of g){const Y=u.indexOf(L);Y!==-1&&(S===-1||Y<S)&&(S=Y,R=L.length)}if(S===-1)break;const V=u.substring(0,S);u=u.substring(S+R);const G=V.trim();if(G.startsWith(d)){const L=G.substring(d.length).trim();try{const Y=new Response(L,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Ce(new vm(Y))}catch(Y){throw new Error(`exception parsing stream chunk ${L}. ${Y}`)}}}}}finally{r.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const e={},t=pO+" "+this.clientOptions.userAgentExtra;return e[dO]=t,e[Cm]=t,e[cO]="application/json",e}async getHeadersInternal(e,t){const i=new Headers;if(e&&e.headers){for(const[r,a]of Object.entries(e.headers))i.append(r,a);e.timeout&&e.timeout>0&&i.append(fO,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(i,t),i}getFileName(e){var t;let i="";return typeof e=="string"&&(i=e.replace(/[/\\]+$/,""),i=(t=i.split(/[/\\]/).pop())!==null&&t!==void 0?t:""),i}async uploadFile(e,t){var i;const r={};t!=null&&(r.mimeType=t.mimeType,r.name=t.name,r.displayName=t.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const a=this.clientOptions.uploader,u=await a.stat(e);r.sizeBytes=String(u.size);const d=(i=t==null?void 0:t.mimeType)!==null&&i!==void 0?i:u.type;if(d===void 0||d==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=d;const g={file:r},p=this.getFileName(e),v=fe("upload/v1beta/files",g._url),T=await this.fetchUploadUrl(v,r.sizeBytes,r.mimeType,p,g,t==null?void 0:t.httpOptions);return a.upload(e,T,this)}async uploadFileToFileSearchStore(e,t,i){var r;const a=this.clientOptions.uploader,u=await a.stat(t),d=String(u.size),g=(r=i==null?void 0:i.mimeType)!==null&&r!==void 0?r:u.type;if(g===void 0||g==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const p=`upload/v1beta/${e}:uploadToFileSearchStore`,v=this.getFileName(t),T={};i!=null&&iI(i,T);const S=await this.fetchUploadUrl(p,d,g,v,T,i==null?void 0:i.httpOptions);return a.uploadToFileSearchStore(t,S,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t,i,r,a,u){var d;let g={};u?g=u:g={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${t}`,"X-Goog-Upload-Header-Content-Type":`${i}`},r?{"X-Goog-Upload-File-Name":r}:{})};const p=await this.request({path:e,body:JSON.stringify(a),httpMethod:"POST",httpOptions:g});if(!p||!(p!=null&&p.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const v=(d=p==null?void 0:p.headers)===null||d===void 0?void 0:d["x-goog-upload-url"];if(v===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return v}}async function j0(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const t=n.status;let i;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await n.json():i={error:{message:await n.text(),code:n.status,status:n.statusText}};const r=JSON.stringify(i);throw t>=400&&t<600?new pu({message:r,status:t}):new Error(r)}}function _O(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof n.body=="string"&&n.body.length>0)try{const a=JSON.parse(n.body);if(typeof a=="object"&&a!==null&&!Array.isArray(a))t=a;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(a,u){const d=Object.assign({},a);for(const g in u)if(Object.prototype.hasOwnProperty.call(u,g)){const p=u[g],v=d[g];p&&typeof p=="object"&&!Array.isArray(p)&&v&&typeof v=="object"&&!Array.isArray(v)?d[g]=i(v,p):(v&&p&&typeof v!=typeof p&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${g}". Original type: ${typeof v}, New type: ${typeof p}. Overwriting.`),d[g]=p)}return d}const r=i(t,e);n.body=JSON.stringify(r)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const vO="mcp_used/unknown";let TO=!1;function oI(n){for(const e of n)if(EO(e)||typeof e=="object"&&"inputSchema"in e)return!0;return TO}function sI(n){var e;const t=(e=n[Cm])!==null&&e!==void 0?e:"";n[Cm]=(t+` ${vO}`).trimStart()}function EO(n){return n!==null&&typeof n=="object"&&n instanceof Rg}function SO(n){return ui(this,arguments,function*(t,i=100){let r,a=0;for(;a<i;){const u=yield Ce(t.listTools({cursor:r}));for(const d of u.tools)yield yield Ce(d),a++;if(!u.nextCursor)break;r=u.nextCursor}})}class Rg{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new Rg(e,t)}async initialize(){var e,t,i,r;if(this.mcpTools.length>0)return;const a={},u=[];for(const v of this.mcpClients)try{for(var d=!0,g=(t=void 0,ci(SO(v))),p;p=await g.next(),e=p.done,!e;d=!0){r=p.value,d=!1;const T=r;u.push(T);const S=T.name;if(a[S])throw new Error(`Duplicate function name ${S} found in MCP tools. Please ensure function names are unique.`);a[S]=v}}catch(T){t={error:T}}finally{try{!d&&!e&&(i=g.return)&&await i.call(g)}finally{if(t)throw t.error}}this.mcpTools=u,this.functionNameToMcpClient=a}async tool(){return await this.initialize(),WV(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const i of e)if(i.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[i.name];let a;this.config.timeout&&(a={timeout:this.config.timeout});const u=await r.callTool({name:i.name,arguments:i.args},void 0,a);t.push({functionResponse:{name:i.name,response:u.isError?{error:u}:u}})}return t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function AO(n,e,t){const i=new HV;let r;t.data instanceof Blob?r=JSON.parse(await t.data.text()):r=JSON.parse(t.data),Object.assign(i,r),e(i)}class CO{constructor(e,t,i){this.apiClient=e,this.auth=t,this.webSocketFactory=i}async connect(e){var t,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),a=this.apiClient.getApiVersion(),u=wO(this.apiClient.getDefaultHeaders()),d=this.apiClient.getApiKey(),g=`${r}/ws/google.ai.generativelanguage.${a}.GenerativeService.BidiGenerateMusic?key=${d}`;let p=()=>{};const v=new Promise(j=>{p=j}),T=e.callbacks,S=function(){p({})},R=this.apiClient,V={onopen:S,onmessage:j=>{AO(R,T.onmessage,j)},onerror:(t=T==null?void 0:T.onerror)!==null&&t!==void 0?t:function(j){},onclose:(i=T==null?void 0:T.onclose)!==null&&i!==void 0?i:function(j){}},G=this.webSocketFactory.create(g,RO(u),V);G.connect(),await v;const ne={setup:{model:Ke(this.apiClient,e.model)}};return G.send(JSON.stringify(ne)),new IO(G,this.apiClient)}}class IO{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=XU(e);this.conn.send(JSON.stringify({clientContent:t}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=QU(e);this.conn.send(JSON.stringify(t))}sendPlaybackControl(e){const t={playbackControl:e};this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(fa.PLAY)}pause(){this.sendPlaybackControl(fa.PAUSE)}stop(){this.sendPlaybackControl(fa.STOP)}resetContext(){this.sendPlaybackControl(fa.RESET_CONTEXT)}close(){this.conn.close()}}function RO(n){const e={};return n.forEach((t,i)=>{e[i]=t}),e}function wO(n){const e=new Headers;for(const[t,i]of Object.entries(n))e.append(t,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const NO="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function bO(n,e,t){const i=new BV;let r;t.data instanceof Blob?r=await t.data.text():t.data instanceof ArrayBuffer?r=new TextDecoder().decode(t.data):r=t.data;const a=JSON.parse(r);if(n.isVertexAI()){const u=jU(a);Object.assign(i,u)}else Object.assign(i,a);e(i)}class MO{constructor(e,t,i){this.apiClient=e,this.auth=t,this.webSocketFactory=i,this.music=new CO(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,i,r,a,u,d;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const g=this.apiClient.getWebsocketBaseUrl(),p=this.apiClient.getApiVersion();let v;const T=this.apiClient.getHeaders();e.config&&e.config.tools&&oI(e.config.tools)&&sI(T);const S=VO(T);if(this.apiClient.isVertexAI()){const b=this.apiClient.getProject(),x=this.apiClient.getLocation(),P=this.apiClient.getApiKey(),O=!!b&&!!x||!!P;this.apiClient.getCustomBaseUrl()&&!O?v=g:(v=`${g}/ws/google.cloud.aiplatform.${p}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(S,v))}else{const b=this.apiClient.getApiKey();let x="BidiGenerateContent",P="key";b!=null&&b.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),p!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),x="BidiGenerateContentConstrained",P="access_token"),v=`${g}/ws/google.ai.generativelanguage.${p}.GenerativeService.${x}?${P}=${b}`}let R=()=>{};const V=new Promise(b=>{R=b}),G=e.callbacks,L=function(){var b;(b=G==null?void 0:G.onopen)===null||b===void 0||b.call(G),R({})},Y=this.apiClient,ne={onopen:L,onmessage:b=>{bO(Y,G.onmessage,b)},onerror:(t=G==null?void 0:G.onerror)!==null&&t!==void 0?t:function(b){},onclose:(i=G==null?void 0:G.onclose)!==null&&i!==void 0?i:function(b){}},j=this.webSocketFactory.create(v,PO(S),ne);j.connect(),await V;let ae=Ke(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&ae.startsWith("publishers/")){const b=this.apiClient.getProject(),x=this.apiClient.getLocation();b&&x&&(ae=`projects/${b}/locations/${x}/`+ae)}let Q={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Kf.AUDIO]}:e.config.responseModalities=[Kf.AUDIO]),!((a=e.config)===null||a===void 0)&&a.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const ee=(d=(u=e.config)===null||u===void 0?void 0:u.tools)!==null&&d!==void 0?d:[],M=[];for(const b of ee)if(this.isCallableTool(b)){const x=b;M.push(await x.tool())}else M.push(b);M.length>0&&(e.config.tools=M);const N={model:ae,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?Q=$U(this.apiClient,N):Q=YU(this.apiClient,N),delete Q.config,j.send(JSON.stringify(Q)),new xO(j,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const DO={turnComplete:!0};class xO{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let i=[];try{i=Kn(t.turns),e.isVertexAI()||(i=i.map(r=>vd(r)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:i,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let i=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?i=t.functionResponses:i=[t.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const a of i){if(typeof a!="object"||a===null||!("name"in a)||!("response"in a))throw new Error(`Could not parse function response, type '${typeof a}'.`);if(!e.isVertexAI()&&!("id"in a))throw new Error(NO)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},DO),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:ZU(e)}:t={realtimeInput:WU(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function PO(n){const e={};return n.forEach((t,i)=>{e[i]=t}),e}function VO(n){const e=new Headers;for(const[t,i]of Object.entries(n))e.append(t,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const eS=10;function tS(n){var e,t,i;if(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let r=!1;for(const u of(t=n==null?void 0:n.tools)!==null&&t!==void 0?t:[])if(Ta(u)){r=!0;break}if(!r)return!0;const a=(i=n==null?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return a&&(a<0||!Number.isInteger(a))||a==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",a),!0):!1}function Ta(n){return"callTool"in n&&typeof n.callTool=="function"}function UO(n){var e,t,i;return(i=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(r=>Ta(r)))!==null&&i!==void 0?i:!1}function nS(n){var e;const t=[];return!((e=n==null?void 0:n.config)===null||e===void 0)&&e.tools&&n.config.tools.forEach((i,r)=>{if(Ta(i))return;const a=i;a.functionDeclarations&&a.functionDeclarations.length>0&&t.push(r)}),t}function iS(n){var e;return!(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class LO extends _o{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var i,r,a,u,d;const g=await this.processParamsMaybeAddMcpUsage(t);if(this.maybeMoveToResponseJsonSchem(t),!UO(t)||tS(t.config))return await this.generateContentInternal(g);const p=nS(t);if(p.length>0){const G=p.map(L=>`tools[${L}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${G}.`)}let v,T;const S=Kn(g.contents),R=(a=(r=(i=g.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&a!==void 0?a:eS;let V=0;for(;V<R&&(v=await this.generateContentInternal(g),!(!v.functionCalls||v.functionCalls.length===0));){const G=v.candidates[0].content,L=[];for(const Y of(d=(u=t.config)===null||u===void 0?void 0:u.tools)!==null&&d!==void 0?d:[])if(Ta(Y)){const j=await Y.callTool(v.functionCalls);L.push(...j)}V++,T={role:"user",parts:L},g.contents=Kn(g.contents),g.contents.push(G),g.contents.push(T),iS(g.config)&&(S.push(G),S.push(T))}return iS(g.config)&&(v.automaticFunctionCallingHistory=S),v},this.generateContentStream=async t=>{var i,r,a,u,d;if(this.maybeMoveToResponseJsonSchem(t),tS(t.config)){const T=await this.processParamsMaybeAddMcpUsage(t);return await this.generateContentStreamInternal(T)}const g=nS(t);if(g.length>0){const T=g.map(S=>`tools[${S}]`).join(", ");throw new Error(`Incompatible tools found at ${T}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const p=(a=(r=(i=t==null?void 0:t.config)===null||i===void 0?void 0:i.toolConfig)===null||r===void 0?void 0:r.functionCallingConfig)===null||a===void 0?void 0:a.streamFunctionCallArguments,v=(d=(u=t==null?void 0:t.config)===null||u===void 0?void 0:u.automaticFunctionCalling)===null||d===void 0?void 0:d.disable;if(p&&!v)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(i=>{var r;let a;const u=[];if(i!=null&&i.generatedImages)for(const g of i.generatedImages)g&&(g!=null&&g.safetyAttributes)&&((r=g==null?void 0:g.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?a=g==null?void 0:g.safetyAttributes:u.push(g);let d;return a?d={generatedImages:u,positivePromptSafetyAttributes:a,sdkHttpResponse:i.sdkHttpResponse}:d={generatedImages:u,sdkHttpResponse:i.sdkHttpResponse},d}),this.list=async t=>{var i;const u={config:Object.assign(Object.assign({},{queryBase:!0}),t==null?void 0:t.config)};if(this.apiClient.isVertexAI()&&!u.config.queryBase){if(!((i=u.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");u.config.filter="labels.tune-type:*"}return new pr(go.PAGED_ITEM_MODELS,d=>this.listInternal(d),await this.listInternal(u),u)},this.editImage=async t=>{const i={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(i.referenceImages=t.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async t=>{let i={numberOfImages:1,mode:"upscale"};t.config&&(i=Object.assign(Object.assign({},i),t.config));const r={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:i};return await this.upscaleImageInternal(r)},this.generateVideos=async t=>{var i,r,a,u,d,g;if((t.prompt||t.image||t.video)&&t.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((i=t.video)===null||i===void 0)&&i.uri&&(!((r=t.video)===null||r===void 0)&&r.videoBytes)?t.video={uri:t.video.uri,mimeType:t.video.mimeType}:!((u=(a=t.source)===null||a===void 0?void 0:a.video)===null||u===void 0)&&u.uri&&(!((g=(d=t.source)===null||d===void 0?void 0:d.video)===null||g===void 0)&&g.videoBytes)&&(t.source.video={uri:t.source.video.uri,mimeType:t.source.video.mimeType})),await this.generateVideosInternal(t)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,i,r;const a=(t=e.config)===null||t===void 0?void 0:t.tools;if(!a)return e;const u=await Promise.all(a.map(async g=>Ta(g)?await g.tool():g)),d={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:u})};if(d.config.tools=u,e.config&&e.config.tools&&oI(e.config.tools)){const g=(r=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&r!==void 0?r:{};let p=Object.assign({},g);Object.keys(p).length===0&&(p=this.apiClient.getDefaultHeaders()),sI(p),d.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:p})}return d}async initAfcToolsMap(e){var t,i,r;const a=new Map;for(const u of(i=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&i!==void 0?i:[])if(Ta(u)){const d=u,g=await d.tool();for(const p of(r=g.functionDeclarations)!==null&&r!==void 0?r:[]){if(!p.name)throw new Error("Function declaration name is required.");if(a.has(p.name))throw new Error(`Duplicate tool declaration name: ${p.name}`);a.set(p.name,d)}}return a}async processAfcStream(e){var t,i,r;const a=(r=(i=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&r!==void 0?r:eS;let u=!1,d=0;const g=await this.initAfcToolsMap(e);return(function(p,v,T){return ui(this,arguments,function*(){for(var S,R,V,G,L,Y;d<a;){u&&(d++,u=!1);const Q=yield Ce(p.processParamsMaybeAddMcpUsage(T)),ee=yield Ce(p.generateContentStreamInternal(Q)),M=[],N=[];try{for(var ne=!0,j=(R=void 0,ci(ee)),ae;ae=yield Ce(j.next()),S=ae.done,!S;ne=!0){G=ae.value,ne=!1;const b=G;if(yield yield Ce(b),b.candidates&&(!((L=b.candidates[0])===null||L===void 0)&&L.content)){N.push(b.candidates[0].content);for(const x of(Y=b.candidates[0].content.parts)!==null&&Y!==void 0?Y:[])if(d<a&&x.functionCall){if(!x.functionCall.name)throw new Error("Function call name was not returned by the model.");if(v.has(x.functionCall.name)){const P=yield Ce(v.get(x.functionCall.name).callTool([x.functionCall]));M.push(...P)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${v.keys()}, mising tool: ${x.functionCall.name}`)}}}}catch(b){R={error:b}}finally{try{!ne&&!S&&(V=j.return)&&(yield Ce(V.call(j)))}finally{if(R)throw R.error}}if(M.length>0){u=!0;const b=new zl;b.candidates=[{content:{role:"user",parts:M}}],yield yield Ce(b);const x=[];x.push(...N),x.push({role:"user",parts:M});const P=Kn(T.contents).concat(x);T.contents=P}else break}})})(this,g,e)}async generateContentInternal(e){var t,i,r,a;let u,d="",g={};if(this.apiClient.isVertexAI()){const p=X0(this.apiClient,e);return d=fe("{model}:generateContent",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=Z0(v),S=new zl;return Object.assign(S,T),S})}else{const p=Q0(this.apiClient,e);return d=fe("{model}:generateContent",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=W0(v),S=new zl;return Object.assign(S,T),S})}}async generateContentStreamInternal(e){var t,i,r,a;let u,d="",g={};if(this.apiClient.isVertexAI()){const p=X0(this.apiClient,e);return d=fe("{model}:streamGenerateContent?alt=sse",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.requestStream({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),u.then(function(T){return ui(this,arguments,function*(){var S,R,V,G;try{for(var L=!0,Y=ci(T),ne;ne=yield Ce(Y.next()),S=ne.done,!S;L=!0){G=ne.value,L=!1;const j=G,ae=Z0(yield Ce(j.json()),e);ae.sdkHttpResponse={headers:j.headers};const Q=new zl;Object.assign(Q,ae),yield yield Ce(Q)}}catch(j){R={error:j}}finally{try{!L&&!S&&(V=Y.return)&&(yield Ce(V.call(Y)))}finally{if(R)throw R.error}}})})}else{const p=Q0(this.apiClient,e);return d=fe("{model}:streamGenerateContent?alt=sse",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.requestStream({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}),u.then(function(T){return ui(this,arguments,function*(){var S,R,V,G;try{for(var L=!0,Y=ci(T),ne;ne=yield Ce(Y.next()),S=ne.done,!S;L=!0){G=ne.value,L=!1;const j=G,ae=W0(yield Ce(j.json()),e);ae.sdkHttpResponse={headers:j.headers};const Q=new zl;Object.assign(Q,ae),yield yield Ce(Q)}}catch(j){R={error:j}}finally{try{!L&&!S&&(V=Y.return)&&(yield Ce(V.call(Y)))}finally{if(R)throw R.error}}})})}}async embedContent(e){var t,i,r,a;let u,d="",g={};if(this.apiClient.isVertexAI()){const p=ML(this.apiClient,e);return d=fe("{model}:predict",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=xL(v),S=new x0;return Object.assign(S,T),S})}else{const p=bL(this.apiClient,e);return d=fe("{model}:batchEmbedContents",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=DL(v),S=new x0;return Object.assign(S,T),S})}}async generateImagesInternal(e){var t,i,r,a;let u,d="",g={};if(this.apiClient.isVertexAI()){const p=HL(this.apiClient,e);return d=fe("{model}:predict",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=JL(v),S=new P0;return Object.assign(S,T),S})}else{const p=BL(this.apiClient,e);return d=fe("{model}:predict",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=zL(v),S=new P0;return Object.assign(S,T),S})}}async editImageInternal(e){var t,i;let r,a="",u={};if(this.apiClient.isVertexAI()){const d=IL(this.apiClient,e);return a=fe("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:g.headers},v})),r.then(g=>{const p=RL(g),v=new MV;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,i;let r,a="",u={};if(this.apiClient.isVertexAI()){const d=Hk(this.apiClient,e);return a=fe("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:g.headers},v})),r.then(g=>{const p=zk(g),v=new DV;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,i;let r,a="",u={};if(this.apiClient.isVertexAI()){const d=Ck(this.apiClient,e);return a=fe("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),r.then(g=>{const p=Ik(g),v=new xV;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,i;let r,a="",u={};if(this.apiClient.isVertexAI()){const d=Dk(this.apiClient,e);return a=fe("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),r.then(g=>{const p=xk(g),v=new PV;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,i,r,a;let u,d="",g={};if(this.apiClient.isVertexAI()){const p=lk(this.apiClient,e);return d=fe("{name}",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>Am(v))}else{const p=ak(this.apiClient,e);return d=fe("{name}",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>Sm(v))}}async listInternal(e){var t,i,r,a;let u,d="",g={};if(this.apiClient.isVertexAI()){const p=yk(this.apiClient,e);return d=fe("{models_url}",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=vk(v),S=new V0;return Object.assign(S,T),S})}else{const p=gk(this.apiClient,e);return d=fe("{models_url}",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=_k(v),S=new V0;return Object.assign(S,T),S})}}async update(e){var t,i,r,a;let u,d="",g={};if(this.apiClient.isVertexAI()){const p=qk(this.apiClient,e);return d=fe("{model}",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>Am(v))}else{const p=Gk(this.apiClient,e);return d=fe("{name}",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>Sm(v))}}async delete(e){var t,i,r,a;let u,d="",g={};if(this.apiClient.isVertexAI()){const p=EL(this.apiClient,e);return d=fe("{name}",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=AL(v),S=new U0;return Object.assign(S,T),S})}else{const p=TL(this.apiClient,e);return d=fe("{name}",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=SL(v),S=new U0;return Object.assign(S,T),S})}}async countTokens(e){var t,i,r,a;let u,d="",g={};if(this.apiClient.isVertexAI()){const p=yL(this.apiClient,e);return d=fe("{model}:countTokens",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=vL(v),S=new L0;return Object.assign(S,T),S})}else{const p=gL(this.apiClient,e);return d=fe("{model}:countTokens",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=_L(v),S=new L0;return Object.assign(S,T),S})}}async computeTokens(e){var t,i;let r,a="",u={};if(this.apiClient.isVertexAI()){const d=uL(this.apiClient,e);return a=fe("{model}:computeTokens",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:g.headers},v})),r.then(g=>{const p=cL(g),v=new VV;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,i,r,a;let u,d="",g={};if(this.apiClient.isVertexAI()){const p=WL(this.apiClient,e);return d=fe("{model}:predictLongRunning",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>{const T=QL(v),S=new Yf;return Object.assign(S,T),S})}else{const p=XL(this.apiClient,e);return d=fe("{model}:predictLongRunning",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>{const T=$L(v),S=new Yf;return Object.assign(S,T),S})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class kO extends _o{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,i=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=t.name.split("/operations/")[0];let a;i&&"httpOptions"in i&&(a=i.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:r,config:{httpOptions:a}});return t._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:t.name,config:i});return t._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async get(e){const t=e.operation,i=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=t.name.split("/operations/")[0];let a;i&&"httpOptions"in i&&(a=i.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:r,config:{httpOptions:a}});return t._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:t.name,config:i});return t._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async getVideosOperationInternal(e){var t,i,r,a;let u,d="",g={};if(this.apiClient.isVertexAI()){const p=CV(e);return d=fe("{operationName}",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u}else{const p=AV(e);return d=fe("{operationName}",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u}}async fetchPredictVideosOperationInternal(e){var t,i;let r,a="",u={};if(this.apiClient.isVertexAI()){const d=gV(e);return a=fe("{resourceName}:fetchPredictOperation",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function OO(n){const e={},t=f(n,["data"]);if(t!=null&&h(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(n,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function FO(n){const e={},t=f(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(a=>$O(a))),h(e,["parts"],r)}const i=f(n,["role"]);return i!=null&&h(e,["role"],i),e}function GO(n,e,t){const i={},r=f(e,["expireTime"]);t!==void 0&&r!=null&&h(t,["expireTime"],r);const a=f(e,["newSessionExpireTime"]);t!==void 0&&a!=null&&h(t,["newSessionExpireTime"],a);const u=f(e,["uses"]);t!==void 0&&u!=null&&h(t,["uses"],u);const d=f(e,["liveConnectConstraints"]);t!==void 0&&d!=null&&h(t,["bidiGenerateContentSetup"],YO(n,d));const g=f(e,["lockAdditionalFields"]);return t!==void 0&&g!=null&&h(t,["fieldMask"],g),i}function qO(n,e){const t={},i=f(e,["config"]);return i!=null&&h(t,["config"],GO(n,i,t)),t}function BO(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&h(e,["fileUri"],t);const i=f(n,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function HO(n){const e={},t=f(n,["id"]);t!=null&&h(e,["id"],t);const i=f(n,["args"]);i!=null&&h(e,["args"],i);const r=f(n,["name"]);if(r!=null&&h(e,["name"],r),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function zO(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&h(e,["enableWidget"],t),e}function JO(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&h(e,["timeRangeFilter"],t),e}function KO(n,e){const t={},i=f(n,["generationConfig"]);e!==void 0&&i!=null&&h(e,["setup","generationConfig"],i);const r=f(n,["responseModalities"]);e!==void 0&&r!=null&&h(e,["setup","generationConfig","responseModalities"],r);const a=f(n,["temperature"]);e!==void 0&&a!=null&&h(e,["setup","generationConfig","temperature"],a);const u=f(n,["topP"]);e!==void 0&&u!=null&&h(e,["setup","generationConfig","topP"],u);const d=f(n,["topK"]);e!==void 0&&d!=null&&h(e,["setup","generationConfig","topK"],d);const g=f(n,["maxOutputTokens"]);e!==void 0&&g!=null&&h(e,["setup","generationConfig","maxOutputTokens"],g);const p=f(n,["mediaResolution"]);e!==void 0&&p!=null&&h(e,["setup","generationConfig","mediaResolution"],p);const v=f(n,["seed"]);e!==void 0&&v!=null&&h(e,["setup","generationConfig","seed"],v);const T=f(n,["speechConfig"]);e!==void 0&&T!=null&&h(e,["setup","generationConfig","speechConfig"],Ig(T));const S=f(n,["thinkingConfig"]);e!==void 0&&S!=null&&h(e,["setup","generationConfig","thinkingConfig"],S);const R=f(n,["enableAffectiveDialog"]);e!==void 0&&R!=null&&h(e,["setup","generationConfig","enableAffectiveDialog"],R);const V=f(n,["systemInstruction"]);e!==void 0&&V!=null&&h(e,["setup","systemInstruction"],FO(on(V)));const G=f(n,["tools"]);if(e!==void 0&&G!=null){let ee=Ua(G);Array.isArray(ee)&&(ee=ee.map(M=>XO(Va(M)))),h(e,["setup","tools"],ee)}const L=f(n,["sessionResumption"]);e!==void 0&&L!=null&&h(e,["setup","sessionResumption"],QO(L));const Y=f(n,["inputAudioTranscription"]);e!==void 0&&Y!=null&&h(e,["setup","inputAudioTranscription"],Y);const ne=f(n,["outputAudioTranscription"]);e!==void 0&&ne!=null&&h(e,["setup","outputAudioTranscription"],ne);const j=f(n,["realtimeInputConfig"]);e!==void 0&&j!=null&&h(e,["setup","realtimeInputConfig"],j);const ae=f(n,["contextWindowCompression"]);e!==void 0&&ae!=null&&h(e,["setup","contextWindowCompression"],ae);const Q=f(n,["proactivity"]);if(e!==void 0&&Q!=null&&h(e,["setup","proactivity"],Q),f(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return t}function YO(n,e){const t={},i=f(e,["model"]);i!=null&&h(t,["setup","model"],Ke(n,i));const r=f(e,["config"]);return r!=null&&h(t,["config"],KO(r,t)),t}function $O(n){const e={},t=f(n,["mediaResolution"]);t!=null&&h(e,["mediaResolution"],t);const i=f(n,["codeExecutionResult"]);i!=null&&h(e,["codeExecutionResult"],i);const r=f(n,["executableCode"]);r!=null&&h(e,["executableCode"],r);const a=f(n,["fileData"]);a!=null&&h(e,["fileData"],BO(a));const u=f(n,["functionCall"]);u!=null&&h(e,["functionCall"],HO(u));const d=f(n,["functionResponse"]);d!=null&&h(e,["functionResponse"],d);const g=f(n,["inlineData"]);g!=null&&h(e,["inlineData"],OO(g));const p=f(n,["text"]);p!=null&&h(e,["text"],p);const v=f(n,["thought"]);v!=null&&h(e,["thought"],v);const T=f(n,["thoughtSignature"]);T!=null&&h(e,["thoughtSignature"],T);const S=f(n,["videoMetadata"]);return S!=null&&h(e,["videoMetadata"],S),e}function QO(n){const e={},t=f(n,["handle"]);if(t!=null&&h(e,["handle"],t),f(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function XO(n){const e={};if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=f(n,["computerUse"]);t!=null&&h(e,["computerUse"],t);const i=f(n,["fileSearch"]);i!=null&&h(e,["fileSearch"],i);const r=f(n,["codeExecution"]);if(r!=null&&h(e,["codeExecution"],r),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=f(n,["functionDeclarations"]);if(a!=null){let v=a;Array.isArray(v)&&(v=v.map(T=>T)),h(e,["functionDeclarations"],v)}const u=f(n,["googleMaps"]);u!=null&&h(e,["googleMaps"],zO(u));const d=f(n,["googleSearch"]);d!=null&&h(e,["googleSearch"],JO(d));const g=f(n,["googleSearchRetrieval"]);g!=null&&h(e,["googleSearchRetrieval"],g);const p=f(n,["urlContext"]);return p!=null&&h(e,["urlContext"],p),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function WO(n){const e=[];for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const i=n[t];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const r=Object.keys(i).map(a=>`${t}.${a}`);e.push(...r)}else e.push(t)}return e.join(",")}function ZO(n,e){let t=null;const i=n.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const a=i.setup;typeof a=="object"&&a!==null?(n.bidiGenerateContentSetup=a,t=a):delete n.bidiGenerateContentSetup}else i!==void 0&&delete n.bidiGenerateContentSetup;const r=n.fieldMask;if(t){const a=WO(t);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)a?n.fieldMask=a:delete n.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const u=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let d=[];r.length>0&&(d=r.map(p=>u.includes(p)?`generationConfig.${p}`:p));const g=[];a&&g.push(a),d.length>0&&g.push(...d),g.length>0?n.fieldMask=g.join(","):delete n.fieldMask}else delete n.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?n.fieldMask=r.join(","):delete n.fieldMask;return n}class jO extends _o{constructor(e){super(),this.apiClient=e}async create(e){var t,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const d=qO(this.apiClient,e);a=fe("auth_tokens",d._url),u=d._query,delete d.config,delete d._url,delete d._query;const g=ZO(d,e.config);return r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),r.then(p=>p)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function e4(n,e){const t={},i=f(n,["force"]);return e!==void 0&&i!=null&&h(e,["_query","force"],i),t}function t4(n){const e={},t=f(n,["name"]);t!=null&&h(e,["_url","name"],t);const i=f(n,["config"]);return i!=null&&e4(i,e),e}function n4(n){const e={},t=f(n,["name"]);return t!=null&&h(e,["_url","name"],t),e}function i4(n,e){const t={},i=f(n,["pageSize"]);e!==void 0&&i!=null&&h(e,["_query","pageSize"],i);const r=f(n,["pageToken"]);return e!==void 0&&r!=null&&h(e,["_query","pageToken"],r),t}function o4(n){const e={},t=f(n,["parent"]);t!=null&&h(e,["_url","parent"],t);const i=f(n,["config"]);return i!=null&&i4(i,e),e}function s4(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&h(e,["nextPageToken"],i);const r=f(n,["documents"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>u)),h(e,["documents"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class r4 extends _o{constructor(e){super(),this.apiClient=e,this.list=async t=>new pr(go.PAGED_ITEM_DOCUMENTS,i=>this.listInternal({parent:t.parent,config:i.config}),await this.listInternal(t),t)}async get(e){var t,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=n4(e);return a=fe("{name}",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),r.then(g=>g)}}async delete(e){var t,i;let r="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=t4(e);r=fe("{name}",u._url),a=u._query,delete u._url,delete u._query,await this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var t,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=o4(e);return a=fe("{parent}/documents",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),r.then(g=>{const p=s4(g),v=new UV;return Object.assign(v,p),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class a4 extends _o{constructor(e,t=new r4(e)){super(),this.apiClient=e,this.documents=t,this.list=async(i={})=>new pr(go.PAGED_ITEM_FILE_SEARCH_STORES,r=>this.listInternal(r),await this.listInternal(i),i)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var t,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=Wk(e);return a=fe("fileSearchStores",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),r.then(g=>g)}}async get(e){var t,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=eO(e);return a=fe("{name}",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),r.then(g=>g)}}async delete(e){var t,i;let r="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=jk(e);r=fe("{name}",u._url),a=u._query,delete u._url,delete u._query,await this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var t,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=rO(e);return a=fe("fileSearchStores",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),r.then(g=>{const p=aO(g),v=new LV;return Object.assign(v,p),v})}}async uploadToFileSearchStoreInternal(e){var t,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=lO(e);return a=fe("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),r.then(g=>{const p=uO(g),v=new kV;return Object.assign(v,p),v})}}async importFile(e){var t,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=iO(e);return a=fe("{file_search_store_name}:importFile",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),r.then(g=>{const p=nO(g),v=new Tg;return Object.assign(v,p),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let rI=function(){const{crypto:n}=globalThis;if(n!=null&&n.randomUUID)return rI=n.randomUUID.bind(n),n.randomUUID();const e=new Uint8Array(1),t=n?()=>n.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,i=>(+i^t()&15>>+i/4).toString(16))};const l4=()=>rI();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Im(n){return typeof n=="object"&&n!==null&&("name"in n&&n.name==="AbortError"||"message"in n&&String(n.message).includes("FetchRequestCanceledException"))}const Rm=n=>{if(n instanceof Error)return n;if(typeof n=="object"&&n!==null){try{if(Object.prototype.toString.call(n)==="[object Error]"){const e=new Error(n.message,n.cause?{cause:n.cause}:{});return n.stack&&(e.stack=n.stack),n.cause&&!e.cause&&(e.cause=n.cause),n.name&&(e.name=n.name),e}}catch{}try{return new Error(JSON.stringify(n))}catch{}}return new Error(n)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Yn extends Error{}class fn extends Yn{constructor(e,t,i,r){super(`${fn.makeMessage(e,t,i)}`),this.status=e,this.headers=r,this.error=t}static makeMessage(e,t,i){const r=t!=null&&t.message?typeof t.message=="string"?t.message:JSON.stringify(t.message):t?JSON.stringify(t):i;return e&&r?`${e} ${r}`:e?`${e} status code (no body)`:r||"(no status code or body)"}static generate(e,t,i,r){if(!e||!r)return new Sd({message:i,cause:Rm(t)});const a=t;return e===400?new lI(e,a,i,r):e===401?new uI(e,a,i,r):e===403?new cI(e,a,i,r):e===404?new fI(e,a,i,r):e===409?new dI(e,a,i,r):e===422?new hI(e,a,i,r):e===429?new pI(e,a,i,r):e>=500?new mI(e,a,i,r):new fn(e,a,i,r)}}class wm extends fn{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class Sd extends fn{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),t&&(this.cause=t)}}class aI extends Sd{constructor({message:e}={}){super({message:e??"Request timed out."})}}class lI extends fn{}class uI extends fn{}class cI extends fn{}class fI extends fn{}class dI extends fn{}class hI extends fn{}class pI extends fn{}class mI extends fn{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const u4=/^[a-z][a-z0-9+.-]*:/i,c4=n=>u4.test(n);let Nm=n=>(Nm=Array.isArray,Nm(n));const f4=Nm;let d4=f4;const oS=d4;function h4(n){if(!n)return!0;for(const e in n)return!1;return!0}function p4(n,e){return Object.prototype.hasOwnProperty.call(n,e)}const m4=(n,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Yn(`${n} must be an integer`);if(e<0)throw new Yn(`${n} must be a positive integer`);return e},g4=n=>{try{return JSON.parse(n)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const y4=n=>new Promise(e=>setTimeout(e,n));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ua="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function _4(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const v4=()=>{var n,e,t,i,r;const a=_4();if(a==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ua,"X-Stainless-OS":rS(Deno.build.os),"X-Stainless-Arch":sS(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(n=Deno.version)===null||n===void 0?void 0:n.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ua,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(a==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ua,"X-Stainless-OS":rS((t=globalThis.process.platform)!==null&&t!==void 0?t:"unknown"),"X-Stainless-Arch":sS((i=globalThis.process.arch)!==null&&i!==void 0?i:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(r=globalThis.process.version)!==null&&r!==void 0?r:"unknown"};const u=T4();return u?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ua,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${u.browser}`,"X-Stainless-Runtime-Version":u.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ua,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function T4(){if(typeof navigator>"u"||!navigator)return null;const n=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:t}of n){const i=t.exec(navigator.userAgent);if(i){const r=i[1]||0,a=i[2]||0,u=i[3]||0;return{browser:e,version:`${r}.${a}.${u}`}}}return null}const sS=n=>n==="x32"?"x32":n==="x86_64"||n==="x64"?"x64":n==="arm"?"arm":n==="aarch64"||n==="arm64"?"arm64":n?`other:${n}`:"unknown",rS=n=>(n=n.toLowerCase(),n.includes("ios")?"iOS":n==="android"?"Android":n==="darwin"?"MacOS":n==="win32"?"Windows":n==="freebsd"?"FreeBSD":n==="openbsd"?"OpenBSD":n==="linux"?"Linux":n?`Other:${n}`:"Unknown");let lf;const E4=()=>lf??(lf=v4());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function S4(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function gI(...n){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...n)}function A4(n){let e=Symbol.asyncIterator in n?n[Symbol.asyncIterator]():n[Symbol.iterator]();return gI({start(){},async pull(t){const{done:i,value:r}=await e.next();i?t.close():t.enqueue(r)},async cancel(){var t;await((t=e.return)===null||t===void 0?void 0:t.call(e))}})}function yI(n){if(n[Symbol.asyncIterator])return n;const e=n.getReader();return{async next(){try{const t=await e.read();return t!=null&&t.done&&e.releaseLock(),t}catch(t){throw e.releaseLock(),t}},async return(){const t=e.cancel();return e.releaseLock(),await t,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function C4(n){var e,t;if(n===null||typeof n!="object")return;if(n[Symbol.asyncIterator]){await((t=(e=n[Symbol.asyncIterator]()).return)===null||t===void 0?void 0:t.call(e));return}const i=n.getReader(),r=i.cancel();i.releaseLock(),await r}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const I4=({headers:n,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const _I=()=>{var n;if(typeof File>"u"){const{process:e}=globalThis,t=typeof((n=e==null?void 0:e.versions)===null||n===void 0?void 0:n.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(t?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Bp(n,e,t){return _I(),new File(n,e??"unknown_file",t)}function R4(n){return(typeof n=="object"&&n!==null&&("name"in n&&n.name&&String(n.name)||"url"in n&&n.url&&String(n.url)||"filename"in n&&n.filename&&String(n.filename)||"path"in n&&n.path&&String(n.path))||"").split(/[\\/]/).pop()||void 0}const w4=n=>n!=null&&typeof n=="object"&&typeof n[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const vI=n=>n!=null&&typeof n=="object"&&typeof n.size=="number"&&typeof n.type=="string"&&typeof n.text=="function"&&typeof n.slice=="function"&&typeof n.arrayBuffer=="function",N4=n=>n!=null&&typeof n=="object"&&typeof n.name=="string"&&typeof n.lastModified=="number"&&vI(n),b4=n=>n!=null&&typeof n=="object"&&typeof n.url=="string"&&typeof n.blob=="function";async function M4(n,e,t){if(_I(),n=await n,N4(n))return n instanceof File?n:Bp([await n.arrayBuffer()],n.name);if(b4(n)){const r=await n.blob();return e||(e=new URL(n.url).pathname.split(/[\\/]/).pop()),Bp(await bm(r),e,t)}const i=await bm(n);if(e||(e=R4(n)),!(t!=null&&t.type)){const r=i.find(a=>typeof a=="object"&&"type"in a&&a.type);typeof r=="string"&&(t=Object.assign(Object.assign({},t),{type:r}))}return Bp(i,e,t)}async function bm(n){var e,t,i,r,a;let u=[];if(typeof n=="string"||ArrayBuffer.isView(n)||n instanceof ArrayBuffer)u.push(n);else if(vI(n))u.push(n instanceof Blob?n:await n.arrayBuffer());else if(w4(n))try{for(var d=!0,g=ci(n),p;p=await g.next(),e=p.done,!e;d=!0){r=p.value,d=!1;const v=r;u.push(...await bm(v))}}catch(v){t={error:v}}finally{try{!d&&!e&&(i=g.return)&&await i.call(g)}finally{if(t)throw t.error}}else{const v=(a=n==null?void 0:n.constructor)===null||a===void 0?void 0:a.name;throw new Error(`Unexpected data type: ${typeof n}${v?`; constructor: ${v}`:""}${D4(n)}`)}return u}function D4(n){return typeof n!="object"||n===null?"":`; props: [${Object.getOwnPropertyNames(n).map(t=>`"${t}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class TI{constructor(e){this._client=e}}TI._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function EI(n){return n.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const aS=Object.freeze(Object.create(null)),x4=(n=EI)=>(function(t,...i){if(t.length===1)return t[0];let r=!1;const a=[],u=t.reduce((v,T,S)=>{var R,V,G;/[?#]/.test(T)&&(r=!0);const L=i[S];let Y=(r?encodeURIComponent:n)(""+L);return S!==i.length&&(L==null||typeof L=="object"&&L.toString===((G=Object.getPrototypeOf((V=Object.getPrototypeOf((R=L.hasOwnProperty)!==null&&R!==void 0?R:aS))!==null&&V!==void 0?V:aS))===null||G===void 0?void 0:G.toString))&&(Y=L+"",a.push({start:v.length+T.length,length:Y.length,error:`Value of type ${Object.prototype.toString.call(L).slice(8,-1)} is not a valid path parameter`})),v+T+(S===i.length?"":Y)},""),d=u.split(/[?#]/,1)[0],g=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let p;for(;(p=g.exec(d))!==null;)a.push({start:p.index,length:p[0].length,error:`Value "${p[0]}" can't be safely passed as a path parameter`});if(a.sort((v,T)=>v.start-T.start),a.length>0){let v=0;const T=a.reduce((S,R)=>{const V=" ".repeat(R.start-v),G="^".repeat(R.length);return v=R.start+R.length,S+V+G},"");throw new Yn(`Path parameters result in path with invalid segments:
${a.map(S=>S.error).join(`
`)}
${u}
${T}`)}return u}),uf=x4(EI);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class SI extends TI{create(e,t){var i;const{api_version:r=this._client.apiVersion}=e,a=Qf(e,["api_version"]);if("model"in a&&"agent_config"in a)throw new Yn("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in a&&"generation_config"in a)throw new Yn("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(uf`/${r}/interactions`,Object.assign(Object.assign({body:a},t),{stream:(i=e.stream)!==null&&i!==void 0?i:!1}))}delete(e,t={},i){const{api_version:r=this._client.apiVersion}=t??{};return this._client.delete(uf`/${r}/interactions/${e}`,i)}cancel(e,t={},i){const{api_version:r=this._client.apiVersion}=t??{};return this._client.post(uf`/${r}/interactions/${e}/cancel`,i)}get(e,t={},i){var r;const a=t??{},{api_version:u=this._client.apiVersion}=a,d=Qf(a,["api_version"]);return this._client.get(uf`/${u}/interactions/${e}`,Object.assign(Object.assign({query:d},i),{stream:(r=t==null?void 0:t.stream)!==null&&r!==void 0?r:!1}))}}SI._key=Object.freeze(["interactions"]);class AI extends SI{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function P4(n){let e=0;for(const r of n)e+=r.length;const t=new Uint8Array(e);let i=0;for(const r of n)t.set(r,i),i+=r.length;return t}let cf;function wg(n){let e;return(cf??(e=new globalThis.TextEncoder,cf=e.encode.bind(e)))(n)}let ff;function lS(n){let e;return(ff??(e=new globalThis.TextDecoder,ff=e.decode.bind(e)))(n)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ad{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const t=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?wg(e):e;this.buffer=P4([this.buffer,t]);const i=[];let r;for(;(r=V4(this.buffer,this.carriageReturnIndex))!=null;){if(r.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=r.index;continue}if(this.carriageReturnIndex!=null&&(r.index!==this.carriageReturnIndex+1||r.carriage)){i.push(lS(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const a=this.carriageReturnIndex!==null?r.preceding-1:r.preceding,u=lS(this.buffer.subarray(0,a));i.push(u),this.buffer=this.buffer.subarray(r.index),this.carriageReturnIndex=null}return i}flush(){return this.buffer.length?this.decode(`
`):[]}}Ad.NEWLINE_CHARS=new Set([`
`,"\r"]);Ad.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function V4(n,e){for(let r=e??0;r<n.length;r++){if(n[r]===10)return{preceding:r,index:r+1,carriage:!1};if(n[r]===13)return{preceding:r,index:r+1,carriage:!0}}return null}function U4(n){for(let i=0;i<n.length-1;i++){if(n[i]===10&&n[i+1]===10||n[i]===13&&n[i+1]===13)return i+2;if(n[i]===13&&n[i+1]===10&&i+3<n.length&&n[i+2]===13&&n[i+3]===10)return i+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Xf={off:0,error:200,warn:300,info:400,debug:500},uS=(n,e,t)=>{if(n){if(p4(Xf,n))return n;cn(t).warn(`${e} was set to ${JSON.stringify(n)}, expected one of ${JSON.stringify(Object.keys(Xf))}`)}};function Xl(){}function df(n,e,t){return!e||Xf[n]>Xf[t]?Xl:e[n].bind(e)}const L4={error:Xl,warn:Xl,info:Xl,debug:Xl};let cS=new WeakMap;function cn(n){var e;const t=n.logger,i=(e=n.logLevel)!==null&&e!==void 0?e:"off";if(!t)return L4;const r=cS.get(t);if(r&&r[0]===i)return r[1];const a={error:df("error",t,i),warn:df("warn",t,i),info:df("info",t,i),debug:df("debug",t,i)};return cS.set(t,[i,a]),a}const nr=n=>(n.options&&(n.options=Object.assign({},n.options),delete n.options.headers),n.headers&&(n.headers=Object.fromEntries((n.headers instanceof Headers?[...n.headers]:Object.entries(n.headers)).map(([e,t])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":t]))),"retryOfRequestLogID"in n&&(n.retryOfRequestLogID&&(n.retryOf=n.retryOfRequestLogID),delete n.retryOfRequestLogID),n);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class da{constructor(e,t,i){this.iterator=e,this.controller=t,this.client=i}static fromSSEResponse(e,t,i){let r=!1;const a=i?cn(i):console;function u(){return ui(this,arguments,function*(){var g,p,v,T;if(r)throw new Yn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let S=!1;try{try{for(var R=!0,V=ci(k4(e,t)),G;G=yield Ce(V.next()),g=G.done,!g;R=!0){T=G.value,R=!1;const L=T;if(!S)if(L.data.startsWith("[DONE]")){S=!0;continue}else try{yield yield Ce(JSON.parse(L.data))}catch(Y){throw a.error("Could not parse message into JSON:",L.data),a.error("From chunk:",L.raw),Y}}}catch(L){p={error:L}}finally{try{!R&&!g&&(v=V.return)&&(yield Ce(v.call(V)))}finally{if(p)throw p.error}}S=!0}catch(L){if(Im(L))return yield Ce(void 0);throw L}finally{S||t.abort()}})}return new da(u,t,i)}static fromReadableStream(e,t,i){let r=!1;function a(){return ui(this,arguments,function*(){var g,p,v,T;const S=new Ad,R=yI(e);try{for(var V=!0,G=ci(R),L;L=yield Ce(G.next()),g=L.done,!g;V=!0){T=L.value,V=!1;const Y=T;for(const ne of S.decode(Y))yield yield Ce(ne)}}catch(Y){p={error:Y}}finally{try{!V&&!g&&(v=G.return)&&(yield Ce(v.call(G)))}finally{if(p)throw p.error}}for(const Y of S.flush())yield yield Ce(Y)})}function u(){return ui(this,arguments,function*(){var g,p,v,T;if(r)throw new Yn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let S=!1;try{try{for(var R=!0,V=ci(a()),G;G=yield Ce(V.next()),g=G.done,!g;R=!0){T=G.value,R=!1;const L=T;S||L&&(yield yield Ce(JSON.parse(L)))}}catch(L){p={error:L}}finally{try{!R&&!g&&(v=V.return)&&(yield Ce(v.call(V)))}finally{if(p)throw p.error}}S=!0}catch(L){if(Im(L))return yield Ce(void 0);throw L}finally{S||t.abort()}})}return new da(u,t,i)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],t=[],i=this.iterator(),r=a=>({next:()=>{if(a.length===0){const u=i.next();e.push(u),t.push(u)}return a.shift()}});return[new da(()=>r(e),this.controller,this.client),new da(()=>r(t),this.controller,this.client)]}toReadableStream(){const e=this;let t;return gI({async start(){t=e[Symbol.asyncIterator]()},async pull(i){try{const{value:r,done:a}=await t.next();if(a)return i.close();const u=wg(JSON.stringify(r)+`
`);i.enqueue(u)}catch(r){i.error(r)}},async cancel(){var i;await((i=t.return)===null||i===void 0?void 0:i.call(t))}})}}function k4(n,e){return ui(this,arguments,function*(){var i,r,a,u;if(!n.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Yn("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Yn("Attempted to iterate over a response with no body");const d=new F4,g=new Ad,p=yI(n.body);try{for(var v=!0,T=ci(O4(p)),S;S=yield Ce(T.next()),i=S.done,!i;v=!0){u=S.value,v=!1;const R=u;for(const V of g.decode(R)){const G=d.decode(V);G&&(yield yield Ce(G))}}}catch(R){r={error:R}}finally{try{!v&&!i&&(a=T.return)&&(yield Ce(a.call(T)))}finally{if(r)throw r.error}}for(const R of g.flush()){const V=d.decode(R);V&&(yield yield Ce(V))}})}function O4(n){return ui(this,arguments,function*(){var t,i,r,a;let u=new Uint8Array;try{for(var d=!0,g=ci(n),p;p=yield Ce(g.next()),t=p.done,!t;d=!0){a=p.value,d=!1;const v=a;if(v==null)continue;const T=v instanceof ArrayBuffer?new Uint8Array(v):typeof v=="string"?wg(v):v;let S=new Uint8Array(u.length+T.length);S.set(u),S.set(T,u.length),u=S;let R;for(;(R=U4(u))!==-1;)yield yield Ce(u.slice(0,R)),u=u.slice(R)}}catch(v){i={error:v}}finally{try{!d&&!t&&(r=g.return)&&(yield Ce(r.call(g)))}finally{if(i)throw i.error}}u.length>0&&(yield yield Ce(u))})}class F4{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const a={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],a}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,i,r]=G4(e,":");return r.startsWith(" ")&&(r=r.substring(1)),t==="event"?this.event=r:t==="data"&&this.data.push(r),null}}function G4(n,e){const t=n.indexOf(e);return t!==-1?[n.substring(0,t),e,n.substring(t+e.length)]:[n,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function q4(n,e){const{response:t,requestLogID:i,retryOfRequestLogID:r,startTime:a}=e,u=await(async()=>{var d;if(e.options.stream)return cn(n).debug("response",t.status,t.url,t.headers,t.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(t,e.controller,n):da.fromSSEResponse(t,e.controller,n);if(t.status===204)return null;if(e.options.__binaryResponse)return t;const g=t.headers.get("content-type"),p=(d=g==null?void 0:g.split(";")[0])===null||d===void 0?void 0:d.trim();return(p==null?void 0:p.includes("application/json"))||(p==null?void 0:p.endsWith("+json"))?t.headers.get("content-length")==="0"?void 0:await t.json():await t.text()})();return cn(n).debug(`[${i}] response parsed`,nr({retryOfRequestLogID:r,url:t.url,status:t.status,body:u,durationMs:Date.now()-a})),u}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ng extends Promise{constructor(e,t,i=q4){super(r=>{r(null)}),this.responsePromise=t,this.parseResponse=i,this.client=e}_thenUnwrap(e){return new Ng(this.client,this.responsePromise,async(t,i)=>e(await this.parseResponse(t,i),i))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const CI=Symbol("brand.privateNullableHeaders");function*B4(n){if(!n)return;if(CI in n){const{values:i,nulls:r}=n;yield*i.entries();for(const a of r)yield[a,null];return}let e=!1,t;n instanceof Headers?t=n.entries():oS(n)?t=n:(e=!0,t=Object.entries(n??{}));for(let i of t){const r=i[0];if(typeof r!="string")throw new TypeError("expected header name to be a string");const a=oS(i[1])?i[1]:[i[1]];let u=!1;for(const d of a)d!==void 0&&(e&&!u&&(u=!0,yield[r,null]),yield[r,d])}}const Jl=n=>{const e=new Headers,t=new Set;for(const i of n){const r=new Set;for(const[a,u]of B4(i)){const d=a.toLowerCase();r.has(d)||(e.delete(a),r.add(d)),u===null?(e.delete(a),t.add(d)):(e.append(a,u),t.delete(d))}}return{[CI]:!0,values:e,nulls:t}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Hp=n=>{var e,t,i,r,a,u;if(typeof globalThis.process<"u")return(i=(t=(e=cV)===null||e===void 0?void 0:e[n])===null||t===void 0?void 0:t.trim())!==null&&i!==void 0?i:void 0;if(typeof globalThis.Deno<"u")return(u=(a=(r=globalThis.Deno.env)===null||r===void 0?void 0:r.get)===null||a===void 0?void 0:a.call(r,n))===null||u===void 0?void 0:u.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var II;class Cd{constructor(e){var t,i,r,a,u,d,g,{baseURL:p=Hp("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:v=(t=Hp("GEMINI_API_KEY"))!==null&&t!==void 0?t:null,apiVersion:T="v1beta"}=e,S=Qf(e,["baseURL","apiKey","apiVersion"]);const R=Object.assign(Object.assign({apiKey:v,apiVersion:T},S),{baseURL:p||"https://generativelanguage.googleapis.com"});this.baseURL=R.baseURL,this.timeout=(i=R.timeout)!==null&&i!==void 0?i:Cd.DEFAULT_TIMEOUT,this.logger=(r=R.logger)!==null&&r!==void 0?r:console;const V="warn";this.logLevel=V,this.logLevel=(u=(a=uS(R.logLevel,"ClientOptions.logLevel",this))!==null&&a!==void 0?a:uS(Hp("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&u!==void 0?u:V,this.fetchOptions=R.fetchOptions,this.maxRetries=(d=R.maxRetries)!==null&&d!==void 0?d:2,this.fetch=(g=R.fetch)!==null&&g!==void 0?g:S4(),this.encoder=I4,this._options=R,this.apiKey=v,this.apiVersion=T,this.clientAdapter=R.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:t}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!t.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const t=Jl([e.headers]);if(!(t.values.has("authorization")||t.values.has("x-goog-api-key"))){if(this.apiKey)return Jl([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return Jl([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([t,i])=>typeof i<"u").map(([t,i])=>{if(typeof i=="string"||typeof i=="number"||typeof i=="boolean")return`${encodeURIComponent(t)}=${encodeURIComponent(i)}`;if(i===null)return`${encodeURIComponent(t)}=`;throw new Yn(`Cannot stringify type ${typeof i}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${ua}`}defaultIdempotencyKey(){return`stainless-node-retry-${l4()}`}makeStatusError(e,t,i,r){return fn.generate(e,t,i,r)}buildURL(e,t,i){const r=!this.baseURLOverridden()&&i||this.baseURL,a=c4(e)?new URL(e):new URL(r+(r.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),u=this.defaultQuery();return h4(u)||(t=Object.assign(Object.assign({},u),t)),typeof t=="object"&&t&&!Array.isArray(t)&&(a.search=this.stringifyQuery(t)),a.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const t=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${t}`}}async prepareRequest(e,{url:t,options:i}){}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,i){return this.request(Promise.resolve(i).then(r=>Object.assign({method:e,path:t},r)))}request(e,t=null){return new Ng(this,this.makeRequest(e,t,void 0))}async makeRequest(e,t,i){var r,a,u;const d=await e,g=(r=d.maxRetries)!==null&&r!==void 0?r:this.maxRetries;t==null&&(t=g),await this.prepareOptions(d);const{req:p,url:v,timeout:T}=await this.buildRequest(d,{retryCount:g-t});await this.prepareRequest(p,{url:v,options:d});const S="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),R=i===void 0?"":`, retryOf: ${i}`,V=Date.now();if(cn(this).debug(`[${S}] sending request`,nr({retryOfRequestLogID:i,method:d.method,url:v,options:d,headers:p.headers})),!((a=d.signal)===null||a===void 0)&&a.aborted)throw new wm;const G=new AbortController,L=await this.fetchWithTimeout(v,p,T,G).catch(Rm),Y=Date.now();if(L instanceof globalThis.Error){const j=`retrying, ${t} attempts remaining`;if(!((u=d.signal)===null||u===void 0)&&u.aborted)throw new wm;const ae=Im(L)||/timed? ?out/i.test(String(L)+("cause"in L?String(L.cause):""));if(t)return cn(this).info(`[${S}] connection ${ae?"timed out":"failed"} - ${j}`),cn(this).debug(`[${S}] connection ${ae?"timed out":"failed"} (${j})`,nr({retryOfRequestLogID:i,url:v,durationMs:Y-V,message:L.message})),this.retryRequest(d,t,i??S);throw cn(this).info(`[${S}] connection ${ae?"timed out":"failed"} - error; no more retries left`),cn(this).debug(`[${S}] connection ${ae?"timed out":"failed"} (error; no more retries left)`,nr({retryOfRequestLogID:i,url:v,durationMs:Y-V,message:L.message})),ae?new aI:new Sd({cause:L})}const ne=`[${S}${R}] ${p.method} ${v} ${L.ok?"succeeded":"failed"} with status ${L.status} in ${Y-V}ms`;if(!L.ok){const j=await this.shouldRetry(L);if(t&&j){const b=`retrying, ${t} attempts remaining`;return await C4(L.body),cn(this).info(`${ne} - ${b}`),cn(this).debug(`[${S}] response error (${b})`,nr({retryOfRequestLogID:i,url:L.url,status:L.status,headers:L.headers,durationMs:Y-V})),this.retryRequest(d,t,i??S,L.headers)}const ae=j?"error; no more retries left":"error; not retryable";cn(this).info(`${ne} - ${ae}`);const Q=await L.text().catch(b=>Rm(b).message),ee=g4(Q),M=ee?void 0:Q;throw cn(this).debug(`[${S}] response error (${ae})`,nr({retryOfRequestLogID:i,url:L.url,status:L.status,headers:L.headers,message:M,durationMs:Date.now()-V})),this.makeStatusError(L.status,ee,M,L.headers)}return cn(this).info(ne),cn(this).debug(`[${S}] response start`,nr({retryOfRequestLogID:i,url:L.url,status:L.status,headers:L.headers,durationMs:Y-V})),{response:L,options:d,controller:G,requestLogID:S,retryOfRequestLogID:i,startTime:V}}async fetchWithTimeout(e,t,i,r){const a=t||{},{signal:u,method:d}=a,g=Qf(a,["signal","method"]),p=r.abort.bind(r);u&&u.addEventListener("abort",p,{once:!0});const v=setTimeout(p,i),T=globalThis.ReadableStream&&g.body instanceof globalThis.ReadableStream||typeof g.body=="object"&&g.body!==null&&Symbol.asyncIterator in g.body,S=Object.assign(Object.assign(Object.assign({signal:r.signal},T?{duplex:"half"}:{}),{method:"GET"}),g);d&&(S.method=d.toUpperCase());try{return await this.fetch.call(void 0,e,S)}finally{clearTimeout(v)}}async shouldRetry(e){const t=e.headers.get("x-should-retry");return t==="true"?!0:t==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,t,i,r){var a;let u;const d=r==null?void 0:r.get("retry-after-ms");if(d){const p=parseFloat(d);Number.isNaN(p)||(u=p)}const g=r==null?void 0:r.get("retry-after");if(g&&!u){const p=parseFloat(g);Number.isNaN(p)?u=Date.parse(g)-Date.now():u=p*1e3}if(!(u&&0<=u&&u<60*1e3)){const p=(a=e.maxRetries)!==null&&a!==void 0?a:this.maxRetries;u=this.calculateDefaultRetryTimeoutMillis(t,p)}return await y4(u),this.makeRequest(e,t-1,i)}calculateDefaultRetryTimeoutMillis(e,t){const a=t-e,u=Math.min(.5*Math.pow(2,a),8),d=1-Math.random()*.25;return u*d*1e3}async buildRequest(e,{retryCount:t=0}={}){var i,r,a;const u=Object.assign({},e),{method:d,path:g,query:p,defaultBaseURL:v}=u,T=this.buildURL(g,p,v);"timeout"in u&&m4("timeout",u.timeout),u.timeout=(i=u.timeout)!==null&&i!==void 0?i:this.timeout;const{bodyHeaders:S,body:R}=this.buildBody({options:u}),V=await this.buildHeaders({options:e,method:d,bodyHeaders:S,retryCount:t});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:d,headers:V},u.signal&&{signal:u.signal}),globalThis.ReadableStream&&R instanceof globalThis.ReadableStream&&{duplex:"half"}),R&&{body:R}),(r=this.fetchOptions)!==null&&r!==void 0?r:{}),(a=u.fetchOptions)!==null&&a!==void 0?a:{}),url:T,timeout:u.timeout}}async buildHeaders({options:e,method:t,bodyHeaders:i,retryCount:r}){let a={};this.idempotencyHeader&&t!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),a[this.idempotencyHeader]=e.idempotencyKey);const u=await this.authHeaders(e);let d=Jl([a,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(r)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),E4()),this._options.defaultHeaders,i,e.headers,u]);return this.validateHeaders(d),d.values}buildBody({options:{body:e,headers:t}}){if(!e)return{bodyHeaders:void 0,body:void 0};const i=Jl([t]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&i.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:A4(e)}:this.encoder({body:e,headers:i})}}Cd.DEFAULT_TIMEOUT=6e4;class Ht extends Cd{constructor(){super(...arguments),this.interactions=new AI(this)}}II=Ht;Ht.GeminiNextGenAPIClient=II;Ht.GeminiNextGenAPIClientError=Yn;Ht.APIError=fn;Ht.APIConnectionError=Sd;Ht.APIConnectionTimeoutError=aI;Ht.APIUserAbortError=wm;Ht.NotFoundError=fI;Ht.ConflictError=dI;Ht.RateLimitError=pI;Ht.BadRequestError=lI;Ht.AuthenticationError=uI;Ht.InternalServerError=mI;Ht.PermissionDeniedError=cI;Ht.UnprocessableEntityError=hI;Ht.toFile=M4;Ht.Interactions=AI;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function H4(n,e){const t={},i=f(n,["name"]);return i!=null&&h(t,["_url","name"],i),t}function z4(n,e){const t={},i=f(n,["name"]);return i!=null&&h(t,["_url","name"],i),t}function J4(n,e){const t={},i=f(n,["sdkHttpResponse"]);return i!=null&&h(t,["sdkHttpResponse"],i),t}function K4(n,e){const t={},i=f(n,["sdkHttpResponse"]);return i!=null&&h(t,["sdkHttpResponse"],i),t}function Y4(n,e,t){const i={};if(f(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=f(n,["tunedModelDisplayName"]);if(e!==void 0&&r!=null&&h(e,["displayName"],r),f(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const a=f(n,["epochCount"]);e!==void 0&&a!=null&&h(e,["tuningTask","hyperparameters","epochCount"],a);const u=f(n,["learningRateMultiplier"]);if(u!=null&&h(i,["tuningTask","hyperparameters","learningRateMultiplier"],u),f(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(f(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(f(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");if(f(n,["tuningMode"])!==void 0)throw new Error("tuningMode parameter is not supported in Gemini API.");if(f(n,["customBaseModel"])!==void 0)throw new Error("customBaseModel parameter is not supported in Gemini API.");const d=f(n,["batchSize"]);e!==void 0&&d!=null&&h(e,["tuningTask","hyperparameters","batchSize"],d);const g=f(n,["learningRate"]);if(e!==void 0&&g!=null&&h(e,["tuningTask","hyperparameters","learningRate"],g),f(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(f(n,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");if(f(n,["baseTeacherModel"])!==void 0)throw new Error("baseTeacherModel parameter is not supported in Gemini API.");if(f(n,["tunedTeacherModelSource"])!==void 0)throw new Error("tunedTeacherModelSource parameter is not supported in Gemini API.");if(f(n,["sftLossWeightMultiplier"])!==void 0)throw new Error("sftLossWeightMultiplier parameter is not supported in Gemini API.");if(f(n,["outputUri"])!==void 0)throw new Error("outputUri parameter is not supported in Gemini API.");return i}function $4(n,e,t){const i={};let r=f(t,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const Q=f(n,["validationDataset"]);e!==void 0&&Q!=null&&h(e,["supervisedTuningSpec"],zp(Q))}else if(r==="PREFERENCE_TUNING"){const Q=f(n,["validationDataset"]);e!==void 0&&Q!=null&&h(e,["preferenceOptimizationSpec"],zp(Q))}else if(r==="DISTILLATION"){const Q=f(n,["validationDataset"]);e!==void 0&&Q!=null&&h(e,["distillationSpec"],zp(Q))}const a=f(n,["tunedModelDisplayName"]);e!==void 0&&a!=null&&h(e,["tunedModelDisplayName"],a);const u=f(n,["description"]);e!==void 0&&u!=null&&h(e,["description"],u);let d=f(t,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const Q=f(n,["epochCount"]);e!==void 0&&Q!=null&&h(e,["supervisedTuningSpec","hyperParameters","epochCount"],Q)}else if(d==="PREFERENCE_TUNING"){const Q=f(n,["epochCount"]);e!==void 0&&Q!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],Q)}else if(d==="DISTILLATION"){const Q=f(n,["epochCount"]);e!==void 0&&Q!=null&&h(e,["distillationSpec","hyperParameters","epochCount"],Q)}let g=f(t,["config","method"]);if(g===void 0&&(g="SUPERVISED_FINE_TUNING"),g==="SUPERVISED_FINE_TUNING"){const Q=f(n,["learningRateMultiplier"]);e!==void 0&&Q!=null&&h(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],Q)}else if(g==="PREFERENCE_TUNING"){const Q=f(n,["learningRateMultiplier"]);e!==void 0&&Q!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],Q)}else if(g==="DISTILLATION"){const Q=f(n,["learningRateMultiplier"]);e!==void 0&&Q!=null&&h(e,["distillationSpec","hyperParameters","learningRateMultiplier"],Q)}let p=f(t,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const Q=f(n,["exportLastCheckpointOnly"]);e!==void 0&&Q!=null&&h(e,["supervisedTuningSpec","exportLastCheckpointOnly"],Q)}else if(p==="PREFERENCE_TUNING"){const Q=f(n,["exportLastCheckpointOnly"]);e!==void 0&&Q!=null&&h(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],Q)}else if(p==="DISTILLATION"){const Q=f(n,["exportLastCheckpointOnly"]);e!==void 0&&Q!=null&&h(e,["distillationSpec","exportLastCheckpointOnly"],Q)}let v=f(t,["config","method"]);if(v===void 0&&(v="SUPERVISED_FINE_TUNING"),v==="SUPERVISED_FINE_TUNING"){const Q=f(n,["adapterSize"]);e!==void 0&&Q!=null&&h(e,["supervisedTuningSpec","hyperParameters","adapterSize"],Q)}else if(v==="PREFERENCE_TUNING"){const Q=f(n,["adapterSize"]);e!==void 0&&Q!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],Q)}else if(v==="DISTILLATION"){const Q=f(n,["adapterSize"]);e!==void 0&&Q!=null&&h(e,["distillationSpec","hyperParameters","adapterSize"],Q)}let T=f(t,["config","method"]);if(T===void 0&&(T="SUPERVISED_FINE_TUNING"),T==="SUPERVISED_FINE_TUNING"){const Q=f(n,["tuningMode"]);e!==void 0&&Q!=null&&h(e,["supervisedTuningSpec","tuningMode"],Q)}const S=f(n,["customBaseModel"]);e!==void 0&&S!=null&&h(e,["customBaseModel"],S);let R=f(t,["config","method"]);if(R===void 0&&(R="SUPERVISED_FINE_TUNING"),R==="SUPERVISED_FINE_TUNING"){const Q=f(n,["batchSize"]);e!==void 0&&Q!=null&&h(e,["supervisedTuningSpec","hyperParameters","batchSize"],Q)}let V=f(t,["config","method"]);if(V===void 0&&(V="SUPERVISED_FINE_TUNING"),V==="SUPERVISED_FINE_TUNING"){const Q=f(n,["learningRate"]);e!==void 0&&Q!=null&&h(e,["supervisedTuningSpec","hyperParameters","learningRate"],Q)}const G=f(n,["labels"]);e!==void 0&&G!=null&&h(e,["labels"],G);const L=f(n,["beta"]);e!==void 0&&L!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","beta"],L);const Y=f(n,["baseTeacherModel"]);e!==void 0&&Y!=null&&h(e,["distillationSpec","baseTeacherModel"],Y);const ne=f(n,["tunedTeacherModelSource"]);e!==void 0&&ne!=null&&h(e,["distillationSpec","tunedTeacherModelSource"],ne);const j=f(n,["sftLossWeightMultiplier"]);e!==void 0&&j!=null&&h(e,["distillationSpec","hyperParameters","sftLossWeightMultiplier"],j);const ae=f(n,["outputUri"]);return e!==void 0&&ae!=null&&h(e,["outputUri"],ae),i}function Q4(n,e){const t={},i=f(n,["baseModel"]);i!=null&&h(t,["baseModel"],i);const r=f(n,["preTunedModel"]);r!=null&&h(t,["preTunedModel"],r);const a=f(n,["trainingDataset"]);a!=null&&r6(a);const u=f(n,["config"]);return u!=null&&Y4(u,t),t}function X4(n,e){const t={},i=f(n,["baseModel"]);i!=null&&h(t,["baseModel"],i);const r=f(n,["preTunedModel"]);r!=null&&h(t,["preTunedModel"],r);const a=f(n,["trainingDataset"]);a!=null&&a6(a,t,e);const u=f(n,["config"]);return u!=null&&$4(u,t,e),t}function W4(n,e){const t={},i=f(n,["name"]);return i!=null&&h(t,["_url","name"],i),t}function Z4(n,e){const t={},i=f(n,["name"]);return i!=null&&h(t,["_url","name"],i),t}function j4(n,e,t){const i={},r=f(n,["pageSize"]);e!==void 0&&r!=null&&h(e,["_query","pageSize"],r);const a=f(n,["pageToken"]);e!==void 0&&a!=null&&h(e,["_query","pageToken"],a);const u=f(n,["filter"]);return e!==void 0&&u!=null&&h(e,["_query","filter"],u),i}function e6(n,e,t){const i={},r=f(n,["pageSize"]);e!==void 0&&r!=null&&h(e,["_query","pageSize"],r);const a=f(n,["pageToken"]);e!==void 0&&a!=null&&h(e,["_query","pageToken"],a);const u=f(n,["filter"]);return e!==void 0&&u!=null&&h(e,["_query","filter"],u),i}function t6(n,e){const t={},i=f(n,["config"]);return i!=null&&j4(i,t),t}function n6(n,e){const t={},i=f(n,["config"]);return i!=null&&e6(i,t),t}function i6(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&h(t,["sdkHttpResponse"],i);const r=f(n,["nextPageToken"]);r!=null&&h(t,["nextPageToken"],r);const a=f(n,["tunedModels"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(d=>RI(d))),h(t,["tuningJobs"],u)}return t}function o6(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&h(t,["sdkHttpResponse"],i);const r=f(n,["nextPageToken"]);r!=null&&h(t,["nextPageToken"],r);const a=f(n,["tuningJobs"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(d=>Mm(d))),h(t,["tuningJobs"],u)}return t}function s6(n,e){const t={},i=f(n,["name"]);i!=null&&h(t,["model"],i);const r=f(n,["name"]);return r!=null&&h(t,["endpoint"],r),t}function r6(n,e){const t={};if(f(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const i=f(n,["examples"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>a)),h(t,["examples","examples"],r)}return t}function a6(n,e,t){const i={};let r=f(t,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const u=f(n,["gcsUri"]);e!==void 0&&u!=null&&h(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(r==="PREFERENCE_TUNING"){const u=f(n,["gcsUri"]);e!==void 0&&u!=null&&h(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}else if(r==="DISTILLATION"){const u=f(n,["gcsUri"]);e!==void 0&&u!=null&&h(e,["distillationSpec","promptDatasetUri"],u)}let a=f(t,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const u=f(n,["vertexDatasetResource"]);e!==void 0&&u!=null&&h(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(a==="PREFERENCE_TUNING"){const u=f(n,["vertexDatasetResource"]);e!==void 0&&u!=null&&h(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}else if(a==="DISTILLATION"){const u=f(n,["vertexDatasetResource"]);e!==void 0&&u!=null&&h(e,["distillationSpec","promptDatasetUri"],u)}if(f(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function RI(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&h(t,["sdkHttpResponse"],i);const r=f(n,["name"]);r!=null&&h(t,["name"],r);const a=f(n,["state"]);a!=null&&h(t,["state"],BC(a));const u=f(n,["createTime"]);u!=null&&h(t,["createTime"],u);const d=f(n,["tuningTask","startTime"]);d!=null&&h(t,["startTime"],d);const g=f(n,["tuningTask","completeTime"]);g!=null&&h(t,["endTime"],g);const p=f(n,["updateTime"]);p!=null&&h(t,["updateTime"],p);const v=f(n,["description"]);v!=null&&h(t,["description"],v);const T=f(n,["baseModel"]);T!=null&&h(t,["baseModel"],T);const S=f(n,["_self"]);return S!=null&&h(t,["tunedModel"],s6(S)),t}function Mm(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&h(t,["sdkHttpResponse"],i);const r=f(n,["name"]);r!=null&&h(t,["name"],r);const a=f(n,["state"]);a!=null&&h(t,["state"],BC(a));const u=f(n,["createTime"]);u!=null&&h(t,["createTime"],u);const d=f(n,["startTime"]);d!=null&&h(t,["startTime"],d);const g=f(n,["endTime"]);g!=null&&h(t,["endTime"],g);const p=f(n,["updateTime"]);p!=null&&h(t,["updateTime"],p);const v=f(n,["error"]);v!=null&&h(t,["error"],v);const T=f(n,["description"]);T!=null&&h(t,["description"],T);const S=f(n,["baseModel"]);S!=null&&h(t,["baseModel"],S);const R=f(n,["tunedModel"]);R!=null&&h(t,["tunedModel"],R);const V=f(n,["preTunedModel"]);V!=null&&h(t,["preTunedModel"],V);const G=f(n,["supervisedTuningSpec"]);G!=null&&h(t,["supervisedTuningSpec"],G);const L=f(n,["preferenceOptimizationSpec"]);L!=null&&h(t,["preferenceOptimizationSpec"],L);const Y=f(n,["distillationSpec"]);Y!=null&&h(t,["distillationSpec"],Y);const ne=f(n,["tuningDataStats"]);ne!=null&&h(t,["tuningDataStats"],ne);const j=f(n,["encryptionSpec"]);j!=null&&h(t,["encryptionSpec"],j);const ae=f(n,["partnerModelTuningSpec"]);ae!=null&&h(t,["partnerModelTuningSpec"],ae);const Q=f(n,["customBaseModel"]);Q!=null&&h(t,["customBaseModel"],Q);const ee=f(n,["experiment"]);ee!=null&&h(t,["experiment"],ee);const M=f(n,["labels"]);M!=null&&h(t,["labels"],M);const N=f(n,["outputUri"]);N!=null&&h(t,["outputUri"],N);const b=f(n,["pipelineJob"]);b!=null&&h(t,["pipelineJob"],b);const x=f(n,["serviceAccount"]);x!=null&&h(t,["serviceAccount"],x);const P=f(n,["tunedModelDisplayName"]);P!=null&&h(t,["tunedModelDisplayName"],P);const O=f(n,["veoTuningSpec"]);return O!=null&&h(t,["veoTuningSpec"],O),t}function l6(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&h(t,["sdkHttpResponse"],i);const r=f(n,["name"]);r!=null&&h(t,["name"],r);const a=f(n,["metadata"]);a!=null&&h(t,["metadata"],a);const u=f(n,["done"]);u!=null&&h(t,["done"],u);const d=f(n,["error"]);return d!=null&&h(t,["error"],d),t}function zp(n,e){const t={},i=f(n,["gcsUri"]);i!=null&&h(t,["validationDatasetUri"],i);const r=f(n,["vertexDatasetResource"]);return r!=null&&h(t,["validationDatasetUri"],r),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class u6 extends _o{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new pr(go.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(t),t),this.get=async t=>await this.getInternal(t),this.tune=async t=>{var i;if(this.apiClient.isVertexAI())if(t.baseModel.startsWith("projects/")){const r={tunedModelName:t.baseModel};!((i=t.config)===null||i===void 0)&&i.preTunedModelCheckpointId&&(r.checkpointId=t.config.preTunedModelCheckpointId);const a=Object.assign(Object.assign({},t),{preTunedModel:r});return a.baseModel=void 0,await this.tuneInternal(a)}else{const r=Object.assign({},t);return await this.tuneInternal(r)}else{const r=Object.assign({},t),a=await this.tuneMldevInternal(r);let u="";return a.metadata!==void 0&&a.metadata.tunedModel!==void 0?u=a.metadata.tunedModel:a.name!==void 0&&a.name.includes("/operations/")&&(u=a.name.split("/operations/")[0]),{name:u,state:ym.JOB_STATE_QUEUED}}}}async getInternal(e){var t,i,r,a;let u,d="",g={};if(this.apiClient.isVertexAI()){const p=Z4(e);return d=fe("{name}",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>Mm(v))}else{const p=W4(e);return d=fe("{name}",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>RI(v))}}async listInternal(e){var t,i,r,a;let u,d="",g={};if(this.apiClient.isVertexAI()){const p=n6(e);return d=fe("tuningJobs",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=o6(v),S=new k0;return Object.assign(S,T),S})}else{const p=t6(e);return d=fe("tunedModels",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=i6(v),S=new k0;return Object.assign(S,T),S})}}async cancel(e){var t,i,r,a;let u,d="",g={};if(this.apiClient.isVertexAI()){const p=z4(e);return d=fe("{name}:cancel",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=K4(v),S=new O0;return Object.assign(S,T),S})}else{const p=H4(e);return d=fe("{name}:cancel",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=J4(v),S=new O0;return Object.assign(S,T),S})}}async tuneInternal(e){var t,i;let r,a="",u={};if(this.apiClient.isVertexAI()){const d=X4(e,e);return a=fe("tuningJobs",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:g.headers},v})),r.then(g=>Mm(g))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=Q4(e);return a=fe("tunedModels",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:g.headers},v})),r.then(g=>l6(g))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class c6{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const f6=1024*1024*8,d6=3,h6=1e3,p6=2,Wf="x-goog-upload-status";async function m6(n,e,t){var i;const r=await wI(n,e,t),a=await(r==null?void 0:r.json());if(((i=r==null?void 0:r.headers)===null||i===void 0?void 0:i[Wf])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return a.file}async function g6(n,e,t){var i;const r=await wI(n,e,t),a=await(r==null?void 0:r.json());if(((i=r==null?void 0:r.headers)===null||i===void 0?void 0:i[Wf])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const u=LC(a),d=new Eg;return Object.assign(d,u),d}async function wI(n,e,t){var i,r;let a=0,u=0,d=new vm(new Response),g="upload";for(a=n.size;u<a;){const p=Math.min(f6,a-u),v=n.slice(u,u+p);u+p>=a&&(g+=", finalize");let T=0,S=h6;for(;T<d6&&(d=await t.request({path:"",body:v,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":g,"X-Goog-Upload-Offset":String(u),"Content-Length":String(p)}}}),!(!((i=d==null?void 0:d.headers)===null||i===void 0)&&i[Wf]));)T++,await _6(S),S=S*p6;if(u+=p,((r=d==null?void 0:d.headers)===null||r===void 0?void 0:r[Wf])!=="active")break;if(a<=u)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return d}async function y6(n){return{size:n.size,type:n.type}}function _6(n){return new Promise(e=>setTimeout(e,n))}class v6{async upload(e,t,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await m6(e,t,i)}async uploadToFileSearchStore(e,t,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await g6(e,t,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await y6(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class T6{create(e,t,i){return new E6(e,t,i)}}class E6{constructor(e,t,i){this.url=e,this.headers=t,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const fS="x-goog-api-key";class S6{constructor(e){this.apiKey=e}async addAuthHeaders(e,t){if(e.get(fS)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(fS,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const A6="gl-node/";class C6{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const t=new Ht({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=t.interactions,this._interactions}constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const i=pV(e.httpOptions,e.vertexai,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const r=new S6(this.apiKey);this.apiClient=new yO({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:A6+"web",uploader:new v6,downloader:new c6}),this.models=new LO(this.apiClient),this.live=new MO(this.apiClient,r,new T6),this.batches=new z2(this.apiClient),this.chats=new IU(this.models,this.apiClient),this.caches=new SU(this.apiClient),this.files=new kU(this.apiClient),this.operations=new kO(this.apiClient),this.authTokens=new jO(this.apiClient),this.tunings=new u6(this.apiClient),this.fileSearchStores=new a4(this.apiClient)}}const I6=async(n,e)=>{const t=new C6({apiKey:"PLACEHOLDER_API_KEY"}),i=n.map(a=>({name:a.name,sc:a.totalSC,meetings:a.cumulativeEffective,targetReached:a.isAchiever})),r=`
    Based on the following performance data for the "Q1 8.8k Sprint Training Plan" (Week ${e} of 8), 
    provide a brief (2-3 sentences), professional, and encouraging analysis in Traditional Chinese.
    Target SC: 88,000 per person. Total Meeting Goal: 20 per person.
    
    Data Summary:
    ${JSON.stringify(i)}
    
    Highlight top performers and give a brief motivational tip for the team.
  `;try{return(await t.models.generateContent({model:"gemini-3-flash-preview",contents:r})).text}catch(a){return console.error("AI Insights Error:",a)," AI  8.8 "}},R6=()=>{const n=window.__firebase_config?JSON.parse(window.__firebase_config):null;return n&&n.apiKey&&n.apiKey!=="DEMO_KEY"?n:null},dS=R6();let es=null,If=null;if(dS)try{const n=zN().length?Um():CS(dS);es=fD(n),If=wP(n)}catch(n){console.error("Firebase Init Error:",n)}const Rf=window.__app_id||"q1-sprint-v1",Jp=`q1_sprint_data_${Rf}`,w6=()=>{const[n,e]=Lt.useState(null),[t,i]=Lt.useState(1),[r,a]=Lt.useState(""),[u,d]=Lt.useState([]),[g,p]=Lt.useState(!0),[v,T]=Lt.useState(!!es),[S,R]=Lt.useState(""),[V,G]=Lt.useState(!1);Lt.useEffect(()=>{if(!If)return;cx(If).catch(console.error);const ee=gx(If,M=>{e(M)});return()=>ee()},[]),Lt.useEffect(()=>{if(es){const ee=cD(es,"artifacts",Rf,"public","data","stats"),M=wD(ee,N=>{const b=N.docs.map(x=>({id:x.id,...x.data()}));if(b.length===0)af.forEach(async x=>{es&&await ID(lE(es,"artifacts",Rf,"public","data","stats",x.id),{name:x.name,manager:x.manager,totalSC:0,weeklyData:Array.from({length:qp},()=>({meetings:0,effectiveMeetings:0,hasNewClient:!1}))})});else{const x=af.map(P=>b.find(D=>D.id===P.id)||{...P,totalSC:0,weeklyData:[]});d(x)}p(!1),T(!0)},N=>{console.warn("Firestore access restricted, switching to Local Mode:",N),T(!1),L()});return()=>M()}else L()},[n]);const L=()=>{const ee=localStorage.getItem(Jp);if(ee)d(JSON.parse(ee));else{const M=af.map(N=>({...N,totalSC:0,weeklyData:Array.from({length:qp},()=>({meetings:0,effectiveMeetings:0,hasNewClient:!1}))}));d(M),localStorage.setItem(Jp,JSON.stringify(M))}p(!1),T(!1)},Y=Lt.useCallback(async(ee,M,N)=>{const b=u.map(x=>{if(x.id!==ee)return x;const P={...x};if(M==="totalSC")P.totalSC=Math.max(0,Number(N))||0;else{const O=[...P.weeklyData||[]],D={...O[t-1]};M==="hasNewClient"?D.hasNewClient=N:D[M]=Math.max(0,Number(N))||0,O[t-1]=D,P.weeklyData=O}return P});if(d(b),v&&es)try{const x=lE(es,"artifacts",Rf,"public","data","stats",ee),P=b.find(O=>O.id===ee);P&&await RD(x,{totalSC:P.totalSC,weeklyData:P.weeklyData})}catch(x){console.error("Cloud update failed, syncing to local:",x)}localStorage.setItem(Jp,JSON.stringify(b))},[u,t,v]),ne=Lt.useMemo(()=>u.map(ee=>{var N;const M=((N=ee.weeklyData)==null?void 0:N.reduce((b,x)=>b+(Number(x.effectiveMeetings)||0),0))||0;return{...ee,cumulativeEffective:M,isAchiever:(ee.totalSC||0)>=lV}}),[u]),j=Lt.useMemo(()=>ne.filter(ee=>{var M,N;return((M=ee.name)==null?void 0:M.toLowerCase().includes(r.toLowerCase()))||((N=ee.manager)==null?void 0:N.toLowerCase().includes(r.toLowerCase()))}),[ne,r]),ae=async()=>{G(!0);const ee=await I6(ne,t);R(ee||""),G(!1)},Q=()=>{const ee=["Name","Manager","Total SC","Effective Meetings","Goal Met"],M=ne.map(O=>[O.name,O.manager,O.totalSC,O.cumulativeEffective,O.isAchiever?"YES":"NO"]),N=[ee,...M].map(O=>O.join(",")).join(`
`),b=new Blob([N],{type:"text/csv;charset=utf-8;"}),x=URL.createObjectURL(b),P=document.createElement("a");P.setAttribute("href",x),P.setAttribute("download",`Q1_Sprint_Report_Week_${t}.csv`),document.body.appendChild(P),P.click(),document.body.removeChild(P)};return g?se.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-50",children:se.jsxs("div",{className:"flex flex-col items-center gap-4",children:[se.jsx(YP,{className:"animate-spin text-blue-600",size:48}),se.jsx("p",{className:"text-slate-600 font-semibold animate-pulse",children:"..."})]})}):se.jsxs("div",{className:"min-h-screen bg-slate-50 p-4 md:p-8 text-slate-900",children:[se.jsx("header",{className:"max-w-7xl mx-auto mb-8",children:se.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-6",children:[se.jsxs("div",{className:"space-y-1",children:[se.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[se.jsx("h1",{className:"text-3xl font-black text-slate-800 tracking-tight",children:"Q1 8.8 "}),v?se.jsxs("div",{className:"flex items-center gap-1.5 bg-emerald-50 text-emerald-700 text-[10px] font-bold px-2.5 py-1 rounded-full border border-emerald-100 uppercase tracking-wider",children:[se.jsx(HP,{size:12})," Live Sync"]}):se.jsxs("div",{className:"flex items-center gap-1.5 bg-blue-50 text-blue-700 text-[10px] font-bold px-2.5 py-1 rounded-full border border-blue-100 uppercase tracking-wider",children:[se.jsx(QP,{size:12})," Local Save"]})]}),se.jsx("p",{className:"text-slate-500 text-sm font-medium",children:"820  |  SC: $88,000"})]}),se.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-4",children:[se.jsxs("button",{onClick:Q,className:"flex items-center gap-2 px-4 py-2 bg-white border border-slate-200 rounded-xl text-slate-600 hover:bg-slate-50 hover:text-blue-600 transition-all font-bold shadow-sm text-xs",children:[se.jsx(JP,{size:16})," "]}),se.jsxs("div",{className:"flex items-center gap-1 bg-white p-1 rounded-2xl shadow-sm border border-slate-200",children:[se.jsx("button",{onClick:()=>i(Math.max(1,t-1)),className:"p-2 hover:bg-slate-50 rounded-xl transition-all text-slate-400 hover:text-blue-600",children:se.jsx(kP,{size:20})}),se.jsxs("div",{className:"px-4 text-center min-w-[140px]",children:[se.jsxs("span",{className:"block text-[10px] text-slate-400 font-black uppercase tracking-widest",children:["WEEK ",t]}),se.jsx("span",{className:"text-sm font-bold text-blue-600 block leading-tight",children:uV[t-1]})]}),se.jsx("button",{onClick:()=>i(Math.min(qp,t+1)),className:"p-2 hover:bg-slate-50 rounded-xl transition-all text-slate-400 hover:text-blue-600",children:se.jsx(FP,{size:20})})]})]})]})}),se.jsxs("div",{className:"max-w-7xl mx-auto grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[se.jsx("div",{className:"bg-white p-5 rounded-3xl border border-slate-200 shadow-sm hover:shadow-md transition-all",children:se.jsxs("div",{className:"flex items-center gap-4",children:[se.jsx("div",{className:"bg-blue-50 p-3 rounded-2xl text-blue-600",children:se.jsx(aV,{size:24})}),se.jsxs("div",{children:[se.jsx("p",{className:"text-[10px] text-slate-400 font-black uppercase tracking-widest",children:""}),se.jsx("p",{className:"text-2xl font-black text-slate-800",children:af.length})]})]})}),se.jsx("div",{className:"bg-white p-5 rounded-3xl border border-slate-200 shadow-sm hover:shadow-md transition-all",children:se.jsxs("div",{className:"flex items-center gap-4",children:[se.jsx("div",{className:"bg-amber-50 p-3 rounded-2xl text-amber-600",children:se.jsx(iV,{size:24})}),se.jsxs("div",{children:[se.jsx("p",{className:"text-[10px] text-slate-400 font-black uppercase tracking-widest",children:"SC "}),se.jsx("p",{className:"text-2xl font-black text-amber-600",children:ne.filter(ee=>ee.isAchiever).length})]})]})}),se.jsx("div",{className:"bg-white p-5 rounded-3xl border border-slate-200 shadow-sm hover:shadow-md transition-all",children:se.jsxs("div",{className:"flex items-center gap-4",children:[se.jsx("div",{className:"bg-emerald-50 p-3 rounded-2xl text-emerald-600",children:se.jsx(tV,{size:24})}),se.jsxs("div",{children:[se.jsx("p",{className:"text-[10px] text-slate-400 font-black uppercase tracking-widest",children:" SC"}),se.jsxs("p",{className:"text-2xl font-black text-emerald-600",children:["$",ne.reduce((ee,M)=>ee+(M.totalSC||0),0).toLocaleString()]})]})]})}),se.jsxs("div",{className:"bg-white p-5 rounded-3xl border border-slate-200 shadow-sm relative overflow-hidden group",children:[se.jsxs("div",{className:"flex items-center gap-4",children:[se.jsx("div",{className:"bg-violet-50 p-3 rounded-2xl text-violet-600",children:se.jsx(jP,{size:24})}),se.jsxs("div",{children:[se.jsx("p",{className:"text-[10px] text-slate-400 font-black uppercase tracking-widest",children:"AI "}),se.jsx("button",{onClick:ae,disabled:V,className:"text-xs font-bold text-violet-600 hover:underline disabled:opacity-50",children:V?"...":""})]})]}),S&&se.jsx("div",{className:"absolute inset-0 bg-violet-600 p-4 flex items-center justify-center translate-y-full group-hover:translate-y-0 transition-transform cursor-pointer overflow-y-auto",children:se.jsx("p",{className:"text-[10px] text-white font-medium leading-relaxed",children:S})})]})]}),se.jsx("main",{className:"max-w-7xl mx-auto",children:se.jsxs("div",{className:"bg-white rounded-[2rem] shadow-sm border border-slate-200 overflow-hidden",children:[se.jsxs("div",{className:"p-5 border-b border-slate-100 bg-slate-50/30 flex flex-col md:flex-row justify-between items-center gap-4",children:[se.jsxs("div",{className:"relative w-full md:w-80 group",children:[se.jsx(WP,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400 group-focus-within:text-blue-500 transition-colors",size:16}),se.jsx("input",{type:"text",placeholder:"...",className:"w-full pl-10 pr-4 py-2.5 bg-white border border-slate-200 rounded-2xl focus:outline-none focus:ring-4 focus:ring-blue-500/5 focus:border-blue-400 text-xs font-bold transition-all",value:r,onChange:ee=>a(ee.target.value)})]}),se.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-slate-500 font-black bg-white px-3 py-1.5 rounded-xl border border-slate-100",children:[se.jsx(qP,{size:14,className:"text-blue-500"}),se.jsx("span",{className:"uppercase tracking-widest",children:""})]})]}),se.jsx("div",{className:"overflow-x-auto",children:se.jsxs("table",{className:"w-full text-left",children:[se.jsx("thead",{children:se.jsxs("tr",{className:"text-slate-400 text-[10px] font-black uppercase tracking-widest border-b border-slate-100 bg-slate-50/30",children:[se.jsx("th",{className:"px-6 py-4",children:" / Manager"}),se.jsx("th",{className:"px-6 py-4",children:" SC ($)"}),se.jsx("th",{className:"px-6 py-4",children:" (/)"}),se.jsx("th",{className:"px-6 py-4 text-center",children:""}),se.jsx("th",{className:"px-6 py-4",children:" (20)"})]})}),se.jsx("tbody",{className:"divide-y divide-slate-100",children:j.map(ee=>{var b;const M=((b=ee.weeklyData)==null?void 0:b[t-1])||{meetings:0,effectiveMeetings:0,hasNewClient:!1},N=Math.min(ee.cumulativeEffective/PE*100,100);return se.jsxs("tr",{className:`group hover:bg-slate-50/50 transition-all ${ee.isAchiever?"bg-amber-50/5":""}`,children:[se.jsx("td",{className:"px-6 py-4",children:se.jsxs("div",{className:"flex items-center gap-3",children:[se.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center font-black text-white shadow-sm transition-all group-hover:scale-105 ${ee.isAchiever?"bg-gradient-to-br from-amber-400 to-orange-500":"bg-slate-300"}`,children:ee.isAchiever?se.jsx(UP,{size:18}):ee.name.charAt(0)}),se.jsxs("div",{children:[se.jsx("p",{className:`font-black text-sm ${ee.isAchiever?"text-amber-800":"text-slate-800"}`,children:ee.name}),se.jsx("p",{className:"text-[10px] text-slate-400 font-bold",children:ee.manager})]})]})}),se.jsx("td",{className:"px-6 py-4",children:se.jsxs("div",{className:"relative max-w-[120px]",children:[se.jsx("span",{className:"absolute left-2.5 top-1/2 -translate-y-1/2 text-slate-400 text-xs font-bold",children:"$"}),se.jsx("input",{type:"number",className:`w-full pl-6 pr-2 py-2 border-2 rounded-xl text-sm font-black focus:outline-none transition-all ${ee.isAchiever?"bg-amber-50 border-amber-200 text-amber-700":"bg-white border-slate-100 text-slate-700 focus:border-blue-400"}`,value:ee.totalSC||"",onChange:x=>Y(ee.id,"totalSC",x.target.value)})]})}),se.jsx("td",{className:"px-6 py-4",children:se.jsxs("div",{className:"flex gap-2",children:[se.jsx("input",{type:"number",className:"w-12 px-1 py-2 bg-white border-2 border-slate-100 rounded-xl text-xs font-bold text-center focus:border-blue-400 outline-none",value:M.meetings||"",onChange:x=>Y(ee.id,"meetings",x.target.value),placeholder:"0"}),se.jsx("input",{type:"number",className:"w-12 px-1 py-2 bg-blue-50 border-2 border-blue-50 rounded-xl text-xs text-center text-blue-700 font-black focus:border-blue-400 outline-none",value:M.effectiveMeetings||"",onChange:x=>Y(ee.id,"effectiveMeetings",x.target.value),placeholder:"0"})]})}),se.jsx("td",{className:"px-6 py-4 text-center",children:se.jsx("button",{onClick:()=>Y(ee.id,"hasNewClient",!M.hasNewClient),className:`p-2 rounded-xl transition-all border-2 ${M.hasNewClient?"bg-emerald-500 border-emerald-500 text-white shadow-md":"bg-white border-slate-50 text-slate-200 hover:text-slate-400"}`,children:se.jsx(sV,{size:16})})}),se.jsx("td",{className:"px-6 py-4 min-w-[160px]",children:se.jsxs("div",{className:"flex flex-col gap-1.5",children:[se.jsxs("div",{className:"flex justify-between items-end text-[10px] font-black",children:[se.jsxs("span",{className:"text-slate-700",children:[ee.cumulativeEffective," / ",PE]}),se.jsxs("span",{className:N>=100?"text-emerald-500":"text-slate-400",children:[Math.round(N),"%"]})]}),se.jsx("div",{className:"w-full h-2 bg-slate-100 rounded-full overflow-hidden p-0.5",children:se.jsx("div",{className:`h-full transition-all duration-700 rounded-full ${N>=100?"bg-emerald-400":"bg-blue-400"}`,style:{width:`${N}%`}})})]})})]},ee.id)})})]})})]})}),se.jsxs("footer",{className:"max-w-7xl mx-auto mt-8 mb-4 flex flex-col md:flex-row justify-between items-center gap-4 text-[10px] font-black text-slate-400 uppercase tracking-widest",children:[se.jsxs("div",{className:"flex items-center gap-2",children:[se.jsx("div",{className:`w-2 h-2 rounded-full ${v?"bg-emerald-500 animate-pulse":"bg-blue-500"}`}),se.jsxs("span",{children:["Mode: ",v?"Real-time Cloud Sync":"Offline Local Storage"]})]}),se.jsx("div",{children:"Region 54 - Q1 Sprint  2026"})]})]})},NI=document.getElementById("root");if(!NI)throw new Error("Could not find root element to mount to");const N6=gw.createRoot(NI);N6.render(se.jsx(lw.StrictMode,{children:se.jsx(w6,{})}));
